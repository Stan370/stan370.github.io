<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>StanBlog</title>
  
  
  <link href="https://stan370.github.io/atom.xml" rel="self"/>
  
  <link href="https://stan370.github.io/"/>
  <updated>2025-09-05T14:28:25.329Z</updated>
  <id>https://stan370.github.io/</id>
  
  <author>
    <name>Stan ke</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Vibe codingçš„æ˜¯è½¯ä»¶å¼€å‘çš„æœªæ¥å—ï¼Ÿ</title>
    <link href="https://stan370.github.io/2025/09/05/vibe/"/>
    <id>https://stan370.github.io/2025/09/05/vibe/</id>
    <published>2025-09-05T14:05:43.000Z</published>
    <updated>2025-09-05T14:28:25.329Z</updated>
    
    <content type="html"><![CDATA[<p>Vibe codingæ˜¯äººå·¥æ™ºèƒ½ç ”ç©¶å‘˜ Andrej Karpathy äº 2025 å¹´æ¨å¹¿çš„ä¸€ç§è½¯ä»¶å¼€å‘æ–¹æ³•å¼€å‘äººå‘˜ä½¿ç”¨è‡ªç„¶è¯­è¨€æŒ‡å¯¼å¤§å‹è¯­è¨€æ¨¡å‹ (LLM) ç”Ÿæˆã€ä¼˜åŒ–å’Œè°ƒè¯•ä»£ç ï¼Œå°†é‡ç‚¹ä»æ‰‹åŠ¨ç¼–ç è½¬ç§»åˆ°æ›´å…·å¯¹è¯æ€§ã€æ›´é«˜çº§çš„é—®é¢˜è§£å†³å’Œåº”ç”¨ç¨‹åºå¼€å‘æ–¹æ³•ã€‚<br><strong>æŠŠâ€œåŠŸèƒ½äº¤ä»˜é€Ÿåº¦â€å½“æˆäº§å“å¼€å‘çš„æœ€å¤§ç“¶é¢ˆï¼Œæ˜¯ä¸€ç§è¯¯è§£ã€‚</strong></p><p>Vibe è¿™ç±»ç¼–ç å·¥å…·çš„çœŸæ­£ä¼˜åŠ¿åœ¨äºï¼šä¸éœ€è¦å·¥ç¨‹å›¢é˜Ÿå°±èƒ½å¿«é€Ÿæ­å»ºå‡ºä¸œè¥¿ã€‚å¾ˆå¤šå®£ä¼ ä¹Ÿæ˜¯è¿™æ ·è¯´çš„ï¼š</p><p>â€œæœ‰äººåœ¨æ²¡æœ‰é›‡ä»»ä½•è½¯ä»¶å·¥ç¨‹å¸ˆçš„æƒ…å†µä¸‹ï¼Œä»…é  AI æ‰“é€ å‡ºæœ‰æ•ˆçš„ç§‘æŠ€ä¸šåŠ¡ï¼Œå¹¶åšåˆ°ç™¾ä¸‡ç¾å…ƒè§„æ¨¡ã€‚â€</p><p>å¬ä¸Šå»å¾ˆè¯±äººã€‚ä½†æˆ‘ä»¬éœ€è¦æŠŠé—®é¢˜æ‹†å¼€æ¥çœ‹ã€‚</p><hr><h2 id="åŸå‹è®¾è®¡-vs-äº§å“">åŸå‹è®¾è®¡ vs. äº§å“</h2><p>åœ¨åŸå‹é˜¶æ®µï¼ŒVibe ç¡®å®å¾ˆæœ‰ç”¨ã€‚å®ƒèƒ½è®©æƒ³æ³•å¿«é€Ÿè½åœ°ï¼Œåˆ¤æ–­æ˜¯å¦å€¼å¾—ç»§ç»­ã€‚ä½†åŸå‹çš„æœ¬è´¨æ˜¯ä¸€æ¬¡æ€§çš„ã€‚<br>å³ä¾¿æ–¹å‘æ­£ç¡®ï¼ŒåŸå‹ä¹Ÿä¸èƒ½ç›´æ¥è½¬åŒ–ä¸ºäº§å“ã€‚å› ä¸ºåŸå‹çš„ç›®æ ‡æ˜¯â€œä¾¿å®œã€å¿«â€ï¼Œè€Œä¸æ˜¯â€œç¨³å®šã€æŒä¹…â€ã€‚å®ƒå¯èƒ½å¾ˆä¸‘ï¼Œæœ‰ bugï¼Œç”šè‡³ä¼šå´©æºƒï¼Œä½†è¿™éƒ½æ²¡å…³ç³»â€”â€”å®ƒåªæ˜¯ç”¨æ¥ä¼ è¾¾æƒ³æ³•ã€‚</p><p>äº§å“åˆ™å®Œå…¨ä¸åŒã€‚<br>å®ƒå¿…é¡»<strong>æŒç»­äº¤ä»˜ä»·å€¼</strong>ã€‚</p><ul><li>ä½“éªŒå·®ï¼Œç”¨æˆ·ä¼šè½¬èº«å»æ‰¾æ›¿ä»£å“ã€‚</li><li>bug å¤ªå¤šï¼Œç”¨æˆ·ä¼šæ”¾å¼ƒã€‚</li><li>ä¸€æ—¦å½»åº•å´©æºƒï¼Œæ›´æ²¡äººä¼šä¸ºå®ƒä»˜è´¹ã€‚</li></ul><p>æœ€ç»ˆï¼Œè´¨é‡æ˜¯ä¸å¯å¦¥åçš„ã€‚å®¢æˆ·ç•™å­˜æ‰æ˜¯äº§å“çš„ç”Ÿæ­»çº¿ã€‚</p><hr><h2 id="æˆåŠŸäº§å“çš„è·¯å¾„">æˆåŠŸäº§å“çš„è·¯å¾„</h2><p>å¾ˆå¤šæˆåŠŸçš„æ•°å­—äº§å“å¹¶ä¸æ˜¯çº¿æ€§æ¼”è¿›å‡ºæ¥çš„ï¼Œè€Œæ˜¯æ— æ•°å®éªŒåçš„ç»“æœã€‚<br>æ‹¿äºšé©¬é€Šæ¥è¯´ï¼šä»å–ä¹¦å¼€å§‹ï¼Œåæ¥è¿›å…¥éŸ³ä¹ã€è§†é¢‘ã€ç¡¬ä»¶ã€äº‘ï¼Œä¼¼ä¹æ˜¯ä¸€æ¡â€œå¿…ç„¶çš„â€è·¯å¾„ã€‚ä½†å¦‚æœä½ çœ‹ä»–ä»¬çš„æ–‡åŒ–ï¼Œä¼šå‘ç°èƒŒåæ˜¯æˆåƒä¸Šä¸‡çš„è¯•éªŒå’Œè¿­ä»£ã€‚</p><p>å…³é”®ç‚¹ï¼š<strong>æ²¡äººèƒ½é¢„å…ˆçŸ¥é“å“ªä¸ªåŠŸèƒ½æˆ–æ–¹å‘ä¼šæˆåŠŸã€‚</strong><br>æˆ‘ä»¬åªèƒ½ä¸æ–­å°è¯•ï¼ŒæŠŠæœ‰æ•ˆçš„ä¿ç•™ï¼ŒæŠŠæ— æ•ˆçš„ç æ‰ã€‚</p><hr><h2 id="Gmail-çš„æ•…äº‹">Gmail çš„æ•…äº‹</h2><p>Paul Buchheit å› åœ¨çŸ­çŸ­å‡ ä¸ªå°æ—¶å†…æ„å»ºäº†ç¬¬ä¸€ä¸ª GMail åŸå‹è€Œé—»åã€‚ä¹‹åï¼Œä»–åˆåœ¨ AdSense ä¸Šé‡å¤äº†è¿™ä¸€æŠ€å·§ã€‚æ‰€æœ‰è¿™äº›ä»£ç éƒ½å¿…é¡»æ‰‹åŠ¨ç¼–å†™ï¼Œå°±åƒä½ æ‡‚çš„ï¼Œç”¨æ‰‹å†™ä¸€æ ·ã€‚ æ˜¯çš„ï¼Œæˆ‘ä»¬æ­£åœ¨è°ˆè®ºè°·æ­Œçš„ä¸¤æ¬¾æƒŠè‰³äº§å“ã€‚ç„¶è€Œï¼Œå¦‚æœä½ ä»”ç»†é˜…è¯»è¿™ä¸ªæ•…äº‹ï¼Œå°±ä¼šå‘ç°è¿™ç»ä¸æ˜¯ä¸€ä¸ªç²¾å¿ƒç­–åˆ’çš„è®¡åˆ’çš„æ‰§è¡Œã€‚ â€œåœ¨Gmail å‘å¸ƒå‰çš„ä¸¤å¹´åŠå¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åšé”™äº†å¾ˆå¤šäº‹æƒ…ã€‚â€ â€œåˆ°å‘å¸ƒæ—¶ï¼Œæˆ‘ä»¬é‡å†™äº†å‰ç«¯å¤§çº¦å…­æ¬¡ï¼Œåç«¯é‡å†™äº†ä¸‰æ¬¡ã€‚â€ â€œæˆ‘åªæ˜¯ç¼–å†™ä»£ç ï¼Œå‘å¸ƒåŠŸèƒ½ï¼Œç„¶åè§‚å¯Ÿåå“ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ¯ä¸ªäººï¼ˆåŒ…æ‹¬æˆ‘ï¼‰æœ€ç»ˆéƒ½ä¼šè®¨åŒå®ƒï¼ˆå°¤å…¶æ˜¯æˆ‘çš„æƒ³æ³•ï¼‰ï¼Œä½†æˆ‘ä»¬æ€»èƒ½ä»ç»éªŒä¸­å¸å–æ•™è®­ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¿…é€Ÿè½¬å‘å…¶ä»–æƒ³æ³•ã€‚â€ ä¿ç½—Â·å¸ƒèµ«æµ·ç‰¹.<br>æ¢å¥è¯è¯´ï¼Œä»–ä»¬æ¢ç´¢è¿‡æ— æ•°ä¸ªæ­»èƒ¡åŒï¼Œæ¨ç¿»äº†æ— æ•°ä¸ªï¼Œæœ€ç»ˆè¿˜æ˜¯èµ°äº†å‡ºæ¥ã€‚äº‹å…ˆä»€ä¹ˆéƒ½ä¸çŸ¥é“ã€‚ å®ƒé€‚ç”¨äºäº§å“åŠŸèƒ½ï¼Œä¹Ÿé€‚ç”¨äºæ•´ä¸ªäº§å“ åŒæ ·çš„æ¨¡å¼ä¹Ÿé€‚ç”¨äºäº§å“ï¼Œè€Œä¸ä»…ä»…æ˜¯äº§å“åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ä½¿ç”¨è°·æ­Œã€‚å®ƒä»¥ä¸€ç³»åˆ—ç¬¦åˆå…¶æ•´åˆå…¨çƒä¿¡æ¯çš„ä½¿å‘½çš„äº§å“è€Œé—»åã€‚æœç´¢ã€Gmailã€Google Workspace ç­‰ç­‰ã€‚ ç„¶è€Œï¼Œé™¤äº†æœç´¢ä¹‹å¤–ï¼Œè®¸å¤šæ­¤ç±»äº§å“æœ€åˆéƒ½åªæ˜¯å®éªŒæ€§è´¨çš„ã€‚ä¸Šæ–‡æåˆ°çš„ Gmail å’Œ AdSense å°±æ˜¯ä¸¤ä¸ªå€¼å¾—æ³¨æ„çš„ä¾‹å­ã€‚</p><hr><p>è¿™ç§é€»è¾‘ä¸ä»…é€‚ç”¨äºæŸä¸ªåŠŸèƒ½ï¼Œä¹Ÿé€‚ç”¨äºæ•´ä¸ªäº§å“çº¿ã€‚<br>Google é™¤äº†æœç´¢ä»¥å¤–ï¼Œå¤§é‡äº§å“æœ€åˆéƒ½æ˜¯å®éªŒï¼šGmailã€AdSenseã€ç”šè‡³ Workspaceã€‚<br>æˆåŠŸçš„èƒŒåæœ‰åå‡ ä¸ªå¤±è´¥çš„ï¼Œå¤±è´¥çš„èƒŒåè¿˜æœ‰æˆç™¾ä¸Šåƒä¸ªä»æœªå…¬å¼€çš„å°è¯•ã€‚</p><p>Google Readerã€Microsoft Math Solverâ€¦â€”ä½†å®ƒä»¬éƒ½å·²ç»æ¶ˆå¤±äº†ã€‚Tech companiesä¾æ—§ä¸æ–­è¯•é”™ï¼Œå› ä¸ºé‚£æ˜¯æ‰¾åˆ°çœŸæ­£â€œé•¿é’äº§å“â€çš„å”¯ä¸€æ–¹å¼ã€‚</p><p>ä½ è¿™æ®µè¡¥å……æ­£å¥½æŠŠå‰æ–‡çš„é€»è¾‘é—­ç¯è¡¥ä¸Šäº†ï¼Œæˆ‘å¸®ä½ å‹ç¼©å’Œæ‰“ç£¨ä¸€ä¸‹ï¼Œè®©ç»“å°¾æ›´é”‹åˆ©ï¼Œæ›´èƒ½æ‰“å‡ºä¸»é¢˜ï¼š</p><hr><h2 id="éªŒè¯ä¸æ²Ÿé€š">éªŒè¯ä¸æ²Ÿé€š</h2><p>äº§å“å¼€å‘çš„æœ¬è´¨å°±æ˜¯æŒç»­æ¢ç´¢ï¼šå…ˆéªŒè¯æƒ³æ³•ï¼Œå†éªŒè¯æ”¹åŠ¨æ˜¯å¦å¸¦æ¥å¢é•¿ã€æ”¶å…¥æˆ–ç•™å­˜ã€‚<br>é—®é¢˜åœ¨äºâ€”â€”éªŒè¯éœ€è¦æ—¶é—´ã€‚</p><p>Leah Tharin åˆ†äº«è¿‡å¥¹åœ¨æ•°åƒä¸‡ç”¨æˆ·äº§å“ä¸­çš„ç»éªŒï¼š<br>å³ä¾¿æµé‡å·¨å¤§ï¼Œå›¢é˜Ÿçš„ç“¶é¢ˆä¹Ÿåœ¨ç­‰å¾…å®éªŒè¾¾åˆ°ç»Ÿè®¡æ˜¾è‘—æ€§ã€‚ä¿®æ”¹é¦–é¡µæ–‡æ¡ˆï¼Œå‡ ä¸ªå°æ—¶å°±èƒ½çœ‹å‡ºç»“æœï¼›ä½†è°ƒæ•´æ¼æ–—æ·±å¤„çš„å¤æ‚åŠŸèƒ½ï¼Œå¾€å¾€éœ€è¦æ•°å‘¨ï¼Œç”šè‡³æ•°æœˆã€‚</p><p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœå¼€å‘é€Ÿåº¦ç¼©çŸ­åå€ï¼Œå¢é•¿ä¼šæ›´å¿«å—ï¼Ÿé™¤äº†è½åœ°é¡µè¿™ç§æœ€ç®€å•çš„æµ‹è¯•ï¼Œå¤§éƒ¨åˆ†å®éªŒä¾æ—§éœ€è¦ç­‰å¾…æ•°æ®æ²‰æ·€ã€‚ä½ ä¹Ÿä¸èƒ½æ— é™å¢åŠ å®éªŒæ•°é‡ï¼Œå¦åˆ™åªä¼šè®©æŒ‡æ ‡å™ªéŸ³æ›´å¤§ã€éš¾ä»¥è§£é‡Šã€‚</p><p>çœŸæ­£çš„ç“¶é¢ˆåœ¨äºï¼šæˆ‘ä»¬ä¸çŸ¥é“è¯¥åšä»€ä¹ˆã€‚æ²¡æœ‰å“ªä¸ªå›¢é˜Ÿèƒ½ä¸€å¼€å§‹å°±é”å®šæœ‰æ•ˆè·¯å¾„ã€‚</p><p>é‚£å¦‚æœæ–¹å‘æ˜ç¡®å‘¢ï¼Ÿç†è®ºä¸Šï¼Œç¡®å®šèŒƒå›´ã€ç­¾åˆåŒã€å¼€å§‹å¼€å‘ï¼Œä¸€åˆ‡é¡ºç†æˆç« ã€‚<br>å¯å®é™…æƒ…å†µæ˜¯ï¼š</p><ul><li>æˆ‘ä»¬å¸¸å¸¸åœ¨å…¨é€Ÿæ„å»ºé”™è¯¯çš„ä¸œè¥¿ã€‚</li><li>æˆ–è€…å› ä¸ºæ²Ÿé€šä¸æ¸…ï¼Œè¿”å·¥æˆæœ¬ç¿»å€ã€‚</li><li>å¼€å‘äº†å¤§é‡ä¸å¿…è¦çš„åŠŸèƒ½ï¼Œäº‹åæ‰å‘ç°ä»·å€¼æä½ã€‚</li></ul><p>éš¾é“æˆ‘ä»¬å°±ä¸èƒ½ç”¨æˆ‘ä»¬ç»å¸¸å¹å˜˜çš„20å¹´ç»éªŒï¼Œç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€å‘Šè¯‰å¤§å®¶æˆæœ¬æ˜¯å¤šå°‘å—ï¼Ÿä¸è¡Œã€‚æˆ‘ä»¬è¿˜ä¸çŸ¥é“åˆä½œä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Œè€Œå•æ˜¯è¿™ä¸€ç‚¹ï¼Œå°±è¶³ä»¥æ¯”ä»»ä½•ä¸èŒƒå›´ç›´æ¥ç›¸å…³çš„å› ç´ ï¼Œå¯¹å®é™…æˆæœ¬äº§ç”Ÿæ›´å¤§çš„å½±å“ã€‚ æ²Ÿé€šä¸ç•…ä¼šå¯¼è‡´è¿”å·¥ã€‚æ²Ÿé€šè´¨é‡å·®ï¼Œæˆ–è€…æ›´ç¡®åˆ‡åœ°è¯´ï¼Œç¼ºä¹æ²Ÿé€šï¼Œå¾€å¾€ä¼šä½¿å·¥ä½œé‡å¢åŠ 100%ï¼Œè¿™ç§æƒ…å†µå¹¶ä¸ç½•è§ã€‚ å†åŠ ä¸Šæ‰€æœ‰ä¸å¿…è¦çš„åŠŸèƒ½çš„å¼€å‘ï¼Œæƒ…å†µå°±æ›´åŠ ç³Ÿç³•äº†ã€‚äº‹åæƒ³æƒ³ï¼Œè¿™äº›å¢å€¼å·¥ä½œå¯èƒ½åªå æ€»æŠ•å…¥çš„å‡ ä¸ªç™¾åˆ†ç‚¹ã€‚ åŠ å¿«å¼€å‘é€Ÿåº¦åªä¼šåŠ å‰§é—®é¢˜ã€‚è¿”å·¥æˆæœ¬å¹¶éçº¿æ€§å¢é•¿ã€‚ä¸€æ—¦ä½ é‡æ–°å¼€å§‹è¿”å·¥ï¼Œå®ƒå°±åƒä¸€ä¸ªå¤åˆ©ï¼Œåªä¸è¿‡æ˜¯åå‘çš„ã€‚æƒ³æƒ³å®ƒå¯¹æˆæœ¬çš„å½±å“å§ã€‚</p><p>for exampleï¼šåˆå§‹å·¥ä½œé‡ 100 å°æ—¶ï¼Œæ¯æ¬¡è¿”å·¥å¢åŠ  30%ï¼Œå››è½®ä¸‹æ¥å°±æ˜¯ 285 å°æ—¶ã€‚åŠ å¿«æœ€å¼€å§‹é‚£ 100 å°æ—¶çš„å¼€å‘é€Ÿåº¦ï¼Œå¯¹æ•´ä½“å½±å“å‡ ä¹å¯ä»¥å¿½ç•¥ã€‚AI çš„é‡å†™åªèƒ½æ¨è¿Ÿé—®é¢˜ï¼Œç³Ÿç³•çš„æŠ½è±¡ã€ç›‘æ§ç¼ºå¤±ã€é›†æˆè„†å¼±â€”â€”è¿Ÿæ—©ä¼šçˆ†ç‚¸ã€‚</p><hr><h2 id="ç¼–ç é€Ÿåº¦ä»æ¥ä¸æ˜¯ç“¶é¢ˆ">ç¼–ç é€Ÿåº¦ä»æ¥ä¸æ˜¯ç“¶é¢ˆ</h2><p>Vibe coding æ‰¿è¯ºä¸¤ä»¶äº‹ï¼š</p><ol><li><p>æˆ‘ä»¬èƒ½æ›´å¿«æ‹¿åˆ°ä»£ç </p></li><li><p>æˆ‘ä»¬ä¸éœ€è¦é›‡æ˜‚è´µçš„å·¥ç¨‹å¸ˆ<br>å¦‚æœç›®æ ‡åªæ˜¯â€œæŠŠç•Œé¢å †å‡ºæ¥â€ï¼Œå½“ç„¶ vibe coding æ˜¯æ·å¾„ã€‚<br>ä½†äº§å“å¼€å‘ä»æ¥ä¸æ˜¯â€œå†™å®Œä»£ç å°±å®Œäº‹â€ï¼Œè€Œæ˜¯ èƒ½å¦æŒç»­ã€å¯é ã€è§„æ¨¡åŒ–åœ°è§£å†³ç”¨æˆ·é—®é¢˜ã€‚è¿™ä¾èµ–éªŒè¯å®éªŒã€é•¿æœŸå¯ç»´æŠ¤çš„ç³»ç»Ÿã€åˆç†çš„æ¿€åŠ±ç»“æ„ï¼Œä»¥åŠå¯¹å¢é•¿ã€æ”¶å…¥ã€ç•™å­˜ç­‰æŒ‡æ ‡çš„æ¸…æ™°æŠŠæ¡ã€‚å†™ä»£ç å¿«ï¼Œæœ¬æ¥å°±ä¸æ˜¯ç“¶é¢ˆã€‚<br>å¬èµ·æ¥å¾ˆè¯±äººï¼Œä½†å®ƒä»¬åªæ˜¯åœ¨å›ç­”ä¸€ä¸ªå®¹æ˜“çš„é—®é¢˜ï¼Œè€Œé¿å¼€äº†çœŸæ­£çš„éš¾é¢˜ï¼šæˆ‘ä»¬åˆ°åº•è¦è§£å†³çš„æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p></li></ol><p>æ‰€ä»¥ï¼Œé—®é¢˜ä»æ¥ä¸åœ¨â€œå†™ä»£ç å¤ªæ…¢â€ï¼Œè€Œåœ¨äºï¼šå¼€å‘é€Ÿåº¦ä»æ¥ä¸æ˜¯å†³å®šæ€§çš„çŸ­æ¿</p><ul><li>æˆ‘ä»¬ä¸çŸ¥é“å“ªäº›æ–¹å‘å€¼å¾—å°è¯•ï¼ˆéªŒè¯çš„ç“¶é¢ˆï¼‰ã€‚</li><li>æˆ‘ä»¬æ²¡èƒ½æ¸…æ¥šå¯¹é½ï¼ˆæ²Ÿé€šçš„ç“¶é¢ˆï¼‰ã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Vibe codingæ˜¯äººå·¥æ™ºèƒ½ç ”ç©¶å‘˜ Andrej Karpathy äº 2025 å¹´æ¨å¹¿çš„ä¸€ç§è½¯ä»¶å¼€å‘æ–¹æ³•å¼€å‘äººå‘˜ä½¿ç”¨è‡ªç„¶è¯­è¨€æŒ‡å¯¼å¤§å‹è¯­è¨€æ¨¡å‹ (LLM) ç”Ÿæˆã€ä¼˜åŒ–å’Œè°ƒè¯•ä»£ç ï¼Œå°†é‡ç‚¹ä»æ‰‹åŠ¨ç¼–ç è½¬ç§»åˆ°æ›´å…·å¯¹è¯æ€§ã€æ›´é«˜çº§çš„é—®é¢˜è§£å†³å’Œåº”ç”¨ç¨‹åºå¼€å‘æ–¹æ³•ã€‚&lt;br&gt;
&lt;stron</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Not Enough RAM! Gemma3n vs Qwen3 on 16Gb device Test, Building My Private AI Assistant</title>
    <link href="https://stan370.github.io/2025/08/02/LLM-Finetune/"/>
    <id>https://stan370.github.io/2025/08/02/LLM-Finetune/</id>
    <published>2025-08-01T16:45:54.000Z</published>
    <updated>2025-08-05T14:42:48.868Z</updated>
    
    <content type="html"><![CDATA[<p>Running large language models like Gemma 3 on a Mac mini M4 with only 16GB of RAM quickly forced me to confront the hard limits of local inference. Initially, I tried running the 12B quantized GGUF models via Ollama, but kept hitting 500 errorsâ€”turns out, even Q4_0 quantization wasnâ€™t enough to fit the model into available memory. Digging deeper, I realized that most of the 16GB RAM was already claimed by macOS and background services, leaving barely 6â€“7GB free for inference.</p><p>Instead of forcing it, I shifted strategy: I profiled my system memory using vm_stat, trimmed background processes, and tested multiple quantization levels (Q4, Q5, even Q8) across models. Still, running 12B remained unstable. The breakthrough came when I discovered the MLX communityâ€™s Apple-optimized versions of Gemma.<br>These use Metal-backed GPU acceleration and memory-efficient formats like int4, making it possible to run 7B and even 12B models smoothly on the same hardware. By choosing the right quantization and inference backend (MLX over GGUF), I found a setup that balances speed, memory, and model capability, all locally on Apple Silicon.</p><p>So this week, I went full mad-scientist mode trying to pick the <strong>best model to finetune</strong> for a secure, local, codable chatbot experience. The contenders? <strong>Gemma 3B/7B</strong> and <strong>Qwen3-7B/8B</strong>. My goals were clear:</p><ul><li>Must run on my Mac mini (M4, 16GB RAM)</li><li>Must respond like a helpful dev agent â€” not lobotomized</li><li>Must be <strong>finetunable</strong> (via LoRA or QLoRA, ideally)</li><li>Must support <strong>private data integration</strong> (RAG or post-training)</li><li>Must be able to <strong>code</strong>, explain, and assist</li></ul><p>This document details my exploration of large language models, including my experiments with quantization and fine-tuning.</p><p><strong>Phase 0: Qwen3 vs. Gemma3 â€“ Which to Choose?</strong></p><p>Simply put, Qwen3 (especially Qwen3-8B) performs better with instruction tuning â€“ it has a more flexible language style and answers feel more â€œhuman.â€ Gemma3 is more akin to a Google-led team,<br>with a cleaner architecture and a stronger focus on research, making it ideal for DIY projects. However, the default base version doesnâ€™t chat at all; you need to train it yourself or select a<br>version with an â€œitâ€ suffix.</p><p><strong>The key takeaway here is: a bad model isnâ€™t necessarily a bad model â€“ itâ€™s often just under-trained.</strong></p><p><strong>Phase 1: What is DeepSeek Abliteration and Why Does it Work?</strong></p><p>Recently, DeepSeek pulled off a clever move: they used the chain-of-thought output from their large model, DeepSeek-R1-0528, to distill Qwen3-8B. This resulted in a new model:</p><p>DeepSeek-R1-0528-Qwen3-8B-GGUF</p><p>Technically, itâ€™s a fine-tuned branch of Qwen3, optimized through DeepSeekâ€™s R1 method.</p><p>Models like:</p><ul><li>LLaMA3-Instruct</li><li>MythoMax / Hermes2</li><li>OpenChat 3.5</li></ul><p>fall into the same category â€“ they use custom SFT (Supervised Fine-Tuning) data and RLHF (Reinforcement Learning from Human Feedback) / Preference Tuning to train base models into specific<br>behaviors.</p><p><strong>Example:</strong></p><p>Prompt: â€œPlease write a Python function to determine if a string is a palindrome.â€</p><ul><li>Qwen3-8B-Base: Outputs a lot of explanations, but no code.</li><li>DeepSeek Abliterated Qwen3-8B: Directly provides the function body, test cases, and an explanation of why.</li></ul><p><strong>This demonstrates the power of abliteration â€“ it re-teaches a previously cautious model to think and output complete code logic.</strong></p><p><strong>Phase 2: Technical Deep Dive into Model Quantization (Especially for Local Deployment)</strong></p><p>If youâ€™re using a Mac mini or a laptop with 32GB of memory or less, quantization is a topic you canâ€™t ignore.</p><p><strong>What is Base Model Quantization?</strong></p><p>Base models are the original, un-instruction-tuned large models, having undergone massive self-supervised training. Quantization is the process of compressing the float16/32 weights into int4,<br>int8, etc. formats.</p><table><thead><tr><th>Model Size</th><th>Precision</th><th>Memory Usage</th><th>Inference Speed</th></tr></thead><tbody><tr><td>FP16</td><td>High</td><td>High</td><td>Slow</td></tr><tr><td>Q4_0</td><td>Medium-Low</td><td>Very Low</td><td>Fast</td></tr><tr><td>Q4_K_M</td><td>Medium-High</td><td>Low</td><td>Fast</td></tr><tr><td>Q8_0</td><td>High</td><td>Medium-High</td><td>Slightly Slow</td></tr></tbody></table><h2 id="Compare">Compare</h2><table><thead><tr><th>æ¨¡å‹</th><th>å¤§å°</th><th>RAM éœ€æ±‚</th><th>TPS</th><th>ä¸­æ–‡èƒ½åŠ›</th><th>é€‚åˆ</th></tr></thead><tbody><tr><td>Gemma-3n E4B Q4_K_M</td><td>~4B</td><td>&lt;6GB</td><td>âœ… å¿«</td><td>ä¸€èˆ¬</td><td>æœ¬åœ°æ—¥å¸¸ä½¿ç”¨ã€agent</td></tr><tr><td>Qwen3-14B Q4_K_M</td><td>~14B</td><td>13â€“16GB+</td><td>âŒ æ…¢</td><td>å¾ˆå¼º</td><td>ç¦»çº¿é«˜è´¨é‡æ¨ç†ï¼Œæ…¢ä¹Ÿèƒ½å¿</td></tr><tr><td>Qwen1.5-7B Q4_K_M</td><td>~7B</td><td>7â€“9GB</td><td>âš  ä¸­</td><td>å¼º</td><td>æŠ˜ä¸­é€‰æ‹©</td></tr></tbody></table><h2 id="GGUF-memory-calc">GGUF memory calc</h2><p><strong>Total memory â‰ˆ weight memory + KV cache memory + other buffers<br>Weight memory â‰ˆ GGUF file size Ã— decompression factor (approximately 1.5 for Q2_K)<br>KV cache â‰ˆ number of layers Ã— context_length Ã— embedding_length Ã— bytes_per_value<br>Other buffers â‰ˆ hundreds of MB<br>Therefore, when deploying on Ollama, llama.cpp, or mlc-llm, choose the appropriate GGUF version â€“ Q4_K_M and Q8_0 offer a good balance.</strong></p><p>First, the model weights themselves. After quantization, the GGUF file stores compressed integer weights, but llama.cpp decodes them into compact tensors when loading. For 2-bit Ã— group quantization (Q2_K), the measured memory usage is approximately 1.5 times the file sizeâ€”for example, a 9.3 GB Q2_K file will occupy approximately 14 GB after loading. This is consistent with the common saying in the community that â€œloading a quantized model requires âˆ¼(file size) Ã— (bits/8) Ã— decompression factorâ€, and also confirms the experience that â€œmemory requirements are about 2-4 times the disk sizeâ€ (WizardLM-7B 14GB file loading requires âˆ¼30GB of memory) ([Artificial Intelligence Stack Exchange][1]).</p><p>Secondly, the KV cache. The longer the statement context, the more key/value pairs need to be stored. Each Transformer layer generates a KV tensor for context_length (e.g. 4096), with a shape of (context_length, head_count_kv, head_size), and numbers are generally stored in FP16. Taking Qwen3-Coder-30B as an example: 48 layers, head_count_kv=4, head_size=128, but embedding_length=2048, this is actuallyâ€¦</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">layers Ã— context Ã— embedding_length Ã— 2 bytes</span><br><span class="line">â‰ˆ 48 Ã— 4096 Ã— 2048 Ã— 2 bytes</span><br><span class="line">â‰ˆ 800â€‰MiB</span><br></pre></td></tr></table></figure><p>If you enable a longer context (like 16KB), the KV cache will linearly double.</p><p><strong>Phase 3: Understanding the Model Repository Structure (Using Qwen as an Example)</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Qwen/Qwen3-8B-Base</span><br><span class="line">â”œâ”€â”€ Adapters (8)</span><br><span class="line">â”œâ”€â”€ Finetunes (80)</span><br><span class="line">â”œâ”€â”€ Merges (3)</span><br><span class="line">â””â”€â”€ Quantizations (30)</span><br></pre></td></tr></table></figure><p><strong>Interpretation:</strong></p><ul><li><strong>Base:</strong> The original model.</li><li><strong>Adapters:</strong> LoRA (Low-Rank Adaptation) fine-tuning modules.</li><li><strong>Finetunes:</strong> Full or mixed fine-tuning versions.</li><li><strong>Merges:</strong> Weight combinations from multiple finetunes.</li><li><strong>Quantizations:</strong> Quantized format versions (like GGUF).</li></ul><hr><h2 id="Benchmarks-Tradeoffs-â€”-Qwen3-vs-Gemma3">Benchmarks &amp; Tradeoffs â€” Qwen3 vs Gemma3</h2><p>Letâ€™s cut to it: <strong>Qwen3</strong> models are generally more <em>chatty</em>, multilingual, with better instruction tuning (especially for their Chat versions). But <strong>Gemma3</strong> has some architectural advantages, like being more <strong>open</strong>, more compact, and <strong>Google Research-backed</strong>.</p><p>But hereâ€™s where it gets spicy â€” <strong>Gemma3 Base</strong> is not finetuned for chat out-of-the-box. Same with Qwen3 Base. So if youâ€™re not careful, youâ€™ll think they â€œsuckâ€ when in reality, theyâ€™re just <em>raw</em>. The value is in finetuning them <em>your way</em>.</p><p>I tried running:</p><ul><li><code>gemma-3b-it-Q4_K_M</code> (int4 quant via GGUF)</li><li><code>qwen3-8b-base-Q4_K_M</code></li><li><code>deepseek-moe-16x1.3b</code> just for fun</li></ul><p>Load times were fine. But when asked to â€œwrite a function to parse JSON,â€ only Qwen3 understood my vague prompt. Gemma3 gave up like it was trained on StackOverflow flags.</p><hr><p>I stumbled on a distilled model called:</p><blockquote><p><code>DeepSeek-R1-0528-Qwen3-8B-GGUF</code></p></blockquote><p>This is <strong>Qwen3-8B Base</strong>, post-trained using chain-of-thought data from DeepSeekâ€™s raw model. Itâ€™s sharper, more logical, and yes, slightly deranged in a good way. I ran some evals:</p><p><strong>Prompt</strong>: â€œImplement a WebSocket server in Goâ€<br><strong>Vanilla Qwen3-8B-Base</strong>: Half answer, talks about goroutines, no code.<br><strong>Abliterated DeepSeek-Qwen3-8B</strong>: Full server, with error handling, log statements, and config options.</p><p>Conclusion? Abliteration works â€” if your model is overaligned, abliterate it with purpose.</p><hr><h2 id="Can-It-Run-Locally-and-Privately">Can It Run Locally and Privately?</h2><p>Yes. With <strong>llama.cpp</strong>, <strong>ggml/gguf</strong> formats, and <strong>OpenWebUI</strong>, you can run a fully uncensored assistant on macOS. For better UX and parameter tweaking (temperature, top_p, stop words), I used OpenWebUI and KoboldCpp.</p><p>Settings that worked for me:</p><ul><li>Temperature: <code>0.7</code></li><li>Top_p: <code>0.95</code></li><li>Context length: <code>4096</code> (up to 8192 if you dare)</li></ul><p>This way, the model never calls OpenAI. Everything is <strong>local</strong>, encrypted, and yours. You can even hook it into a vector DB (like Chroma or Milvus) for <strong>RAG-style knowledge injection</strong>.</p><ol><li>First, select the appropriate GGUF (recommend Q4_K_M or Q8_0).</li><li>Then, consider whether you want a specific finetune type (e.g., chat, coder, instruction).</li></ol><p>If the model is base + adapter, ensure your framework supports adapters (e.g., llama.cpp &gt; v0.2).</p><hr><p>Hereâ€™s what I ended up running:</p><ul><li><strong>Base</strong>: <code>DeepSeek-R1-0528-Qwen3-8B-Q4_K_M</code></li><li><strong>Frontend</strong>: OpenWebUI or custom Vite/React wrapper</li><li><strong>Backend</strong>: llama.cpp compiled for Metal (M4 optimized)</li><li><strong>Memory Budget</strong>: ~12GB RAM peak for Qwen3-8B</li><li><strong>Custom Finetune</strong>: Alpaca-style SFT on coding prompts (still trainingâ€¦)</li></ul><hr><h2 id="Tips-for-Future-Hackers">Tips for Future Hackers</h2><ol><li><p>If it says â€œchatâ€ and acts dumb, itâ€™s probably <strong>over-aligned</strong>. Post-train it.</p></li><li><p>Look into <strong>abliteration techniques</strong> â€” distilled thought traces are more valuable than safety data.</p></li><li><p>Donâ€™t waste time with RLHF-ed-only models if youâ€™re building a <strong>coder</strong> assistant.</p></li><li><p>Use <code>gguf</code> formats for performance, especially on Apple Silicon. Compile with Metal backend.</p></li><li><p>Learn to <em>smell</em> lobotomized models. They always avoid certain topics, answer vaguely, and fail to write full functions.</p></li><li><p>Local deployment isnâ€™t complicated; quantization and Ollama can handle it.</p></li><li><p>Donâ€™t let excessive alignment limit your modelâ€™s capabilities.</p></li><li><p>If youâ€™re looking for privacy, security, and customization, local LLM is the only solution.</p></li></ol><h2 id="Coming-Next-Local-LoRA-fine-tune-and-Gemma3n-image-and-audio-test">Coming Next: Local LoRA fine tune and Gemma3n image and audio test</h2><p>I want to see how small I can go and still retain quality coding assistance. Spoiler: Gemma3-2B already shows promise with some light training, but hallucination risk is high.</p><p>â€”</p><p>Thatâ€™s it. From confusion to abliteration to building my private dev assistant, this journey taught me one thing: <strong>you donâ€™t need OpenAI</strong> to build a good coder chatbot. You just need good data, good models, and the will to destroy and rebuild.</p><p>If youâ€™re curious or want to try abliteration yourself, ping me. Iâ€™ll share my LoRA configs, ggml hacks, and more.</p><h1><strong>Running Large GGUF Models on Apple Silicon: A Real-World Guide for M4 Mac (16GB) Users</strong></h1><p>Youâ€™ve downloaded a massive 30-billion-parameter AI model â€” maybe <code>Qwen3-Coder-30B-A3B-Instruct-UD-Q2_K_XL.gguf</code> â€” excited to run it locally on your sleek M4 Mac with 16GB of unified memory.</p><p>You fire up <code>llama-server</code>, set <code>--n-gpu-layers 999</code>, and wait.</p><p>Thenâ€¦ crash.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ggml_metal_graph_compute: command buffer 1 failed with status 5</span><br><span class="line">error: Insufficient Memory (kIOGPUCommandBufferCallbackErrorOutOfMemory)</span><br></pre></td></tr></table></figure><p>Or worse: silent hangs, <code>SIGSTOP</code>, LLDB showing <code>0xffffffffffffffff</code>, and no way to kill the process.</p><p>This is <strong>not a failure of will</strong> â€” itâ€™s a collision between <strong>ambition and reality</strong>.</p><p>In this article, weâ€™ll walk through:</p><ul><li>Why large GGUF models fail on 16GB Macs</li><li>The truth about quantization (spoiler: Q2_K â‰  small memory)</li><li>How to actually run models <em>without</em> crashing</li><li>And how to fix the infamous <code>pos_min == -1</code> bug in <code>llama.cpp</code></li></ul><p>Letâ€™s get real about <strong>local LLMs on Apple Silicon</strong>.</p><hr><h2 id="ğŸ”-Part-1-The-Myth-of-â€œSmallâ€-Quantized-Models">ğŸ” Part 1: The Myth of â€œSmallâ€ Quantized Models</h2><p>You see a file:<br><code>Qwen3-Coder-30B-A3B-Instruct-UD-Q2_K_XL.gguf</code> â€” <strong>10.97 GiB</strong></p><p>â€œPerfect!â€ you think. â€œItâ€™s under 16GB. It should fit.â€</p><p>But reality hits hard.</p><h3 id="ğŸ“Š-Why-11-GB-â‰ -11-GB">ğŸ“Š Why 11 GB â‰  11 GB</h3><table><thead><tr><th>Component</th><th>Memory Use</th></tr></thead><tbody><tr><td>Model weights (Q2_K hybrid)</td><td>~11 GB</td></tr><tr><td>KV Cache (for context)</td><td>~1â€“2 GB</td></tr><tr><td>Metal GPU working buffers</td><td>~2â€“4 GB</td></tr><tr><td>Intermediate activations</td><td>~1â€“2 GB</td></tr><tr><td>macOS &amp; other apps</td><td>~1â€“2 GB</td></tr><tr><td><strong>Total Peak Usage</strong></td><td><strong>~16â€“20 GB</strong></td></tr></tbody></table><p>ğŸ‘‰ Even with <strong>Unsloth UD v2.0</strong> or <strong>Q2_K_XL</strong>, the runtime memory exceeds your <strong>16GB unified RAM</strong>.</p><p>The M4 GPU doesnâ€™t have â€œVRAMâ€ â€” it shares memory with the CPU.<br>So when Metal runs out of space, <strong>everything stops</strong>.</p><hr><h2 id="ğŸ’¥-Part-2-The-GPU-Memory-Crash">ğŸ’¥ Part 2: The GPU Memory Crash</h2><p>You see:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ggml_metal_graph_compute: command buffer 1 failed with status 5</span><br><span class="line">error: Insufficient Memory (00000008:kIOGPUCommandBufferCallbackErrorOutOfMemory)</span><br></pre></td></tr></table></figure><p>This isnâ€™t a software bug â€” itâ€™s <strong>physics</strong>.</p><p>The GPU tried to allocate buffers for computation and failed.</p><p>Even with <code>--mmap</code> (memory mapping), the active layers must be loaded into memory.</p><h3 id="âœ…-Workaround-Reduce-GPU-Offloading">âœ… Workaround: Reduce GPU Offloading</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--n-gpu-layers 0    <span class="comment"># CPU-only (slow but stable)</span></span><br><span class="line">--n-gpu-layers 32   <span class="comment"># Partial GPU (best balance)</span></span><br></pre></td></tr></table></figure><p>Or switch to a <strong>7B model</strong> â€” theyâ€™re faster, fit in memory, and often outperform bloated 30B models in practice.</p><hr><h2 id="ğŸ›-Part-3-The-pos-min-1-Bug-in-llama-cpp">ğŸ› Part 3: The <code>pos_min == -1</code> Bug in <code>llama.cpp</code></h2><p>After surviving the memory battle, you hit a new enemy:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Users/stanmac/Downloads/llm/llama.cpp/tools/server/server.cpp:3292: pos_min == -1, but n_past &gt; 0 - should not happen</span><br></pre></td></tr></table></figure><p>This is a <strong>known regression</strong> in recent <code>llama.cpp</code> builds (April 2025), triggered by:</p><ul><li>Chat format mismatches</li><li>Slot reuse bugs</li><li>Broken KV cache state</li></ul><p>The server <strong>crashes or freezes</strong>, and even <code>kill -9</code> fails.</p><p>LLDB shows:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* thread #1, stop reason = signal SIGSTOP</span><br><span class="line">frame #0: 0xffffffffffffffff </span><br></pre></td></tr></table></figure><p>ğŸ‘‰ The process is <strong>zombie-stuck</strong> â€” only a <strong>reboot</strong> can fully free the Metal GPU memory.</p><hr><h2 id="âœ…-Part-4-How-to-Actually-Succeed">âœ… Part 4: How to Actually Succeed</h2><p>Hereâ€™s what works â€” tested on M4 Mac 16GB.</p><h3 id="âœ…-1-Use-a-Stable-llama-cpp-Version">âœ… 1. Use a Stable <code>llama.cpp</code> Version</h3><p>Avoid the latest <code>master</code>. Use a known good commit:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout 8f7c702c</span><br><span class="line">make clean &amp;&amp; make server -j</span><br></pre></td></tr></table></figure><p>Or wait for the fix in:<br>ğŸ‘‰ <a href="https://github.com/ggml-org/llama.cpp/pull/13833">https://github.com/ggml-org/llama.cpp/pull/13833</a></p><hr><h3 id="âœ…-2-Run-This-Command-Safe-Stable">âœ… 2. Run This Command (Safe &amp; Stable)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./build/bin/llama-server \</span><br><span class="line">  --model <span class="string">"Your model path"</span> \</span><br><span class="line">  --port 10000 \</span><br><span class="line">  --n-gpu-layers 0 \</span><br><span class="line">  --ctx-size 4096 \</span><br><span class="line">  --batch-size 512 \</span><br><span class="line">  --threads 8 \</span><br><span class="line">  --temp 0.7 \</span><br><span class="line">  --repeat-penalty 1.1 \</span><br><span class="line">  --no-cache \</span><br><span class="line">  --log-disable</span><br></pre></td></tr></table></figure><h4 id="Key-Flags">Key Flags:</h4><ul><li><code>--n-gpu-layers 0</code>: Avoid GPU OOM</li><li><code>--ctx-size 4096</code>: Limit context to save memory</li><li><code>--no-cache</code>: Bypass broken KV cache logic</li><li><code>--log-disable</code>: Reduce noise</li></ul><hr><h3 id="âœ…-3-Use-completion-Not-chat-completions">âœ… 3. Use <code>/completion</code>, Not <code>/chat/completions</code></h3><p>Avoid the buggy chat format parser.</p><p>Use:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:10000/completion -d <span class="string">'{</span></span><br><span class="line"><span class="string">  "prompt": "def binary_search(arr, x):",</span></span><br><span class="line"><span class="string">  "n_predict": 128</span></span><br><span class="line"><span class="string">}'</span></span><br></pre></td></tr></table></figure><p>Not:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:10000/v1/chat/completions -d <span class="string">'{ "messages": [...] }'</span></span><br></pre></td></tr></table></figure><hr><h3 id="âœ…-4-Kill-Stuck-Processes">âœ… 4. Kill Stuck Processes</h3><p>When the server hangs:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkill -9 -f llama-server</span><br></pre></td></tr></table></figure><p>If that fails:</p><ul><li>Open <strong>Activity Monitor</strong> â†’ force quit</li><li>Or <strong>reboot</strong> (sadly, often necessary)</li></ul><hr><h3 id="âœ…-5-Better-Switch-to-7B-Models">âœ… 5. Better: Switch to 7B Models</h3><table><thead><tr><th>Model</th><th>Size</th><th>RAM Use</th><th>Speed</th><th>Quality</th></tr></thead><tbody><tr><td><code>Qwen2.5-Coder-7B-Q5_K_S.gguf</code></td><td>~6 GB</td><td>~9 GB</td><td>âš¡âš¡</td><td>âœ…âœ…âœ…</td></tr><tr><td><code>DeepSeek-Coder-V2-Lite-Q6_K.gguf</code></td><td>~5.2 GB</td><td>~8 GB</td><td>âš¡âš¡âš¡</td><td>âœ…âœ…âœ…âœ…</td></tr><tr><td><code>CodeLlama-7B-Instruct-Q5_K_M.gguf</code></td><td>~5.8 GB</td><td>~9 GB</td><td>âš¡âš¡</td><td>âœ…âœ…</td></tr></tbody></table><p>ğŸ‘‰ These run <strong>fully on GPU</strong>, are <strong>faster</strong>, and <strong>donâ€™t crash</strong>.</p><hr><h2 id="ğŸ-Conclusion-Be-Realistic-Be-Smart">ğŸ Conclusion: Be Realistic, Be Smart</h2><h3 id="âœ…-Do">âœ… Do:</h3><ul><li>Use <strong>7Bâ€“14B models</strong> for best experience</li><li>Stick to <strong>stable <code>llama.cpp</code></strong> versions</li><li>Use <code>--no-cache</code>, <code>--n-gpu-layers 0</code> for debugging</li><li>Prefer <code>/completion</code> over chat endpoints</li></ul><h3 id="âŒ-Donâ€™t">âŒ Donâ€™t:</h3><ul><li>Assume Q2_K = small memory</li><li>Run 30B models on 16GB Macs</li><li>Ignore the <code>pos_min == -1</code> bug â€” itâ€™s real</li><li>Expect GPU to save you â€” it shares memory</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Running large language models like Gemma 3 on a Mac mini M4 with only 16GB of RAM quickly forced me to confront the hard limits of local </summary>
      
    
    
    
    
    <category term="LLM" scheme="https://stan370.github.io/tags/LLM/"/>
    
  </entry>
  
  <entry>
    <title>å¹¶å‘æ•ˆç‡ä¸å¤šçº¿ç¨‹å®‰å…¨</title>
    <link href="https://stan370.github.io/2025/07/28/Concurrency/"/>
    <id>https://stan370.github.io/2025/07/28/Concurrency/</id>
    <published>2025-07-28T07:56:18.000Z</published>
    <updated>2025-07-28T07:56:26.830Z</updated>
    
    <content type="html"><![CDATA[<p>why you need to learn å¹¶å‘ä¸å¤šçº¿ç¨‹?<br>æœ€ç›´è§‚çš„æœåŠ¡å™¨å¤„ç†å¤šå®¢æˆ·ç«¯è®¿é—®çš„æ–¹å¼ï¼Œå°±æ˜¯ä¸ºæ¯ä¸ªè¿æ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ–è€…æ›´æ—©æœŸæ“ä½œç³»ç»Ÿé‡Œç”šè‡³æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚è™½ç„¶çº¿ç¨‹æ¯”è¿›ç¨‹æ›´è½»é‡ï¼Œåˆ‡æ¢æˆæœ¬ä¹Ÿæ›´ä½ï¼Œä½†æ¯è¿æ¥ä¸€ä¸ªçº¿ç¨‹åœ¨å¹¶å‘é‡å¤§æ—¶ä»ä¼šé¢ä¸´ä¸¤ä¸ªé—®é¢˜ï¼š</p><p>çº¿ç¨‹åˆ›å»º/é”€æ¯æœ‰ç³»ç»Ÿå¼€é”€ï¼ˆmalloc stackã€context switchï¼‰ã€‚</p><p>çº¿ç¨‹æ˜¯ç¨€ç¼ºèµ„æºï¼Œç³»ç»Ÿçº¿ç¨‹æ•°æœ‰ä¸Šé™ï¼ˆå¦‚ Linux é»˜è®¤ 1024~65535ï¼‰ã€‚</p><p>æ‰€ä»¥ï¼Œç°ä»£æœåŠ¡ç«¯æ¶æ„æ›´å€¾å‘äºä½¿ç”¨çº¿ç¨‹æ± æ¥å¤ç”¨çº¿ç¨‹èµ„æºã€‚çº¿ç¨‹æ± ä¸­æ¯ä¸ªçº¿ç¨‹ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–ä»»åŠ¡å¤„ç†ï¼Œé¿å…äº†åå¤åˆ›å»º/é”€æ¯çš„å¼€é”€ã€‚</p><p>ä½†çº¿ç¨‹æ± å¼•å…¥åé¢ä¸´å¦ä¸€ä¸ªé—®é¢˜ï¼šI/O é˜»å¡ä¼šæµªè´¹çº¿ç¨‹èµ„æºã€‚å¦‚æœä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ read(socket) è¢«é˜»å¡ï¼Œè€Œè¿æ¥ä¸Šæ²¡æœ‰æ•°æ®ï¼Œé‚£ä¹ˆæ•´ä¸ªçº¿ç¨‹å°±â€œå¡ä½â€äº†ï¼Œä¸èƒ½æœåŠ¡å…¶ä»–è¿æ¥ã€‚</p><p>ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°† socket è®¾ç½®ä¸ºéé˜»å¡æ¨¡å¼ã€‚è¿™æ · read() ä¸ä¼šé˜»å¡ï¼Œè€Œæ˜¯ç«‹å³è¿”å›ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®ï¼Œå°±è¿”å›é”™è¯¯ç  EAGAINã€‚çº¿ç¨‹å°±å¯ä»¥åœ¨ç”¨æˆ·ç©ºé—´â€œè½®è¯¢â€æ‰€æœ‰ socketã€‚</p><p>ä½†è¿™ç§æ–¹å¼ä¼šå¯¼è‡´é«˜ CPU å ç”¨ï¼Œå°¤å…¶åœ¨è¿æ¥æ•°å¤šæ—¶æ•ˆç‡ä½ã€‚</p><p>æ‰€ä»¥å¼•å…¥äº† I/O å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼ˆå¦‚ selectã€pollã€epollï¼‰ï¼Œå®ƒå…è®¸ä¸€ä¸ªçº¿ç¨‹é€šè¿‡ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚ epoll_waitï¼‰åŒæ—¶ç›‘å¬å¤šä¸ªè¿æ¥çš„çŠ¶æ€ï¼Œä¸€æ—¦æŸäº›è¿æ¥å¯è¯»ï¼ˆæˆ–å¯å†™ï¼‰ï¼Œå†…æ ¸å°±é€šçŸ¥æˆ‘ä»¬â€œè¿™äº›è¿æ¥å‡†å¤‡å¥½äº†â€ï¼Œæˆ‘ä»¬å†å» read()ï¼Œé¿å…äº†ä¸å¿…è¦çš„è½®è¯¢ã€‚</p><p>è¿™å°±æ˜¯åƒ Nginxã€Redisã€Node.jsã€netty ç­‰é«˜å¹¶å‘æœåŠ¡é‡‡ç”¨çš„åŸºç¡€æ¨¡å¼ï¼šI/O å¤šè·¯å¤ç”¨ + éé˜»å¡ I/O + äº‹ä»¶é©±åŠ¨æ¨¡å‹ã€‚Reactoræ¨¡å¼ç§°ä¸ºååº”å™¨æ¨¡å¼æˆ–åº”ç­”è€…æ¨¡å¼ï¼Œæ˜¯åŸºäºäº‹ä»¶é©±åŠ¨çš„è®¾è®¡æ¨¡å¼ï¼Œæ‹¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå¹¶å‘è¾“å…¥æºï¼Œæœ‰ä¸€ä¸ªæœåŠ¡å¤„ç†å™¨å’Œå¤šä¸ªè¯·æ±‚å¤„ç†å™¨ï¼ŒæœåŠ¡å¤„ç†å™¨ä¼šåŒæ­¥çš„å°†è¾“å…¥çš„è¯·æ±‚äº‹ä»¶ä»¥å¤šè·¯å¤ç”¨çš„æ–¹å¼åˆ†å‘ç»™ç›¸åº”çš„è¯·æ±‚å¤„ç†å™¨ã€‚<br>å• Reactor å•çº¿ç¨‹ï¼ˆRedisï¼‰<br>æ‰€æœ‰ I/O + ä¸šåŠ¡é€»è¾‘éƒ½åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ä¸²è¡Œå®Œæˆ</p><p>ç®€å•ã€æ€§èƒ½å¥½ï¼ˆä½†ä¸šåŠ¡å¤„ç†ä¸èƒ½å¤ªé‡ï¼‰</p><p>å• Reactor å¤šçº¿ç¨‹ï¼ˆNginxï¼‰<br>Reactor åªè´Ÿè´£ç›‘å¬/è°ƒåº¦ï¼Œä¸šåŠ¡é€»è¾‘äº¤ç»™çº¿ç¨‹æ± å¤„ç†</p><p>ä¸»ä» Reactorï¼ˆNettyï¼‰<br>ä¸» Reactor æ¥æ”¶è¿æ¥</p><p>ä» Reactor è´Ÿè´£å…·ä½“æ•°æ®è¯»å†™</p><p>åˆ†ç¦» accept å’Œ IO é˜¶æ®µï¼Œæé«˜å¯æ‰©å±•æ€§<br>Proactor æ˜¯æŠŠä»»åŠ¡äº¤ç»™æ“ä½œç³»ç»Ÿ / runtimeï¼Œè®©å®ƒå®Œæˆåé€šçŸ¥ä½ å¤„ç†ç»“æœ</p><p>å½“ä½ éœ€è¦è®©ç¨‹åºå¿«é€Ÿå¤„ç†å¤§é‡æ•°æ®æˆ–é«˜é¢‘ç‡çš„ä»»åŠ¡æ—¶ï¼Œå¹¶å‘å’Œå¤šçº¿ç¨‹èƒ½å¸®ä½ å……åˆ†å‘æŒ¥å¤šæ ¸å¤„ç†å™¨çš„ä¼˜åŠ¿ã€‚è¿™å°±åƒæ˜¯ç»™ä½ çš„åº”ç”¨è£…ä¸Šäº†å¤šå°å¼•æ“ï¼Œä½¿å¾—ä»»åŠ¡å¤„ç†æ›´åŠ è¿…é€Ÿé«˜æ•ˆã€‚æŒæ¡å¹¶å‘å’Œå¤šçº¿ç¨‹ï¼Œå¯ä»¥è®©ä½ æ›´é«˜æ•ˆåœ°ä½¿ç”¨ç³»ç»Ÿèµ„æºï¼Œæ¯”å¦‚CPUå’Œå†…å­˜ã€‚è¿™å°±åƒæ˜¯ä½ åœ¨åˆ†é…èµ„æºæ—¶ï¼Œèƒ½åšåˆ°å¿ƒä¸­æœ‰æ•°ï¼Œä¸è®©ç³»ç»Ÿèµ„æºé—²ç½®æµªè´¹ã€‚<br>é¿å…å¸¸è§é™·é˜±ï¼šç«äº‰æ¡ä»¶ã€æ­»é”å’Œèµ„æºåŒ®ä¹ç­‰çº¿ç¨‹é—®é¢˜åœ¨å¹¶å‘ç¼–ç¨‹ä¸­å¾ˆå¸¸è§ã€‚å¯¹è¿™äº›é—®é¢˜çš„æ·±å…¥ç†è§£æœ‰åŠ©äºå¼€å‘äººå‘˜ç¼–å†™é¿å…æ­¤ç±»é™·é˜±çš„ä»£ç ï¼Œä»è€Œå¼€å‘å‡ºæ›´å¼ºå¤§ã€æ›´å¯é çš„è½¯ä»¶ã€‚</p><p>å¹¶å‘æ€§ï¼ˆconcurrencyï¼‰æ˜¯æŒ‡ç¨‹åºã€ç®—æ³•æˆ–é—®é¢˜çš„ä¸åŒéƒ¨åˆ†æˆ–å•å…ƒå¯ä»¥åœ¨åŒä¸€æ—¶é—´æ®µå†…æ— åºåœ°åœ¨CPUä¸Šæ‰§è¡Œï¼Œä½†ä¸ä¼šå½±å“æœ€ç»ˆç»“æœçš„èƒ½åŠ›ã€‚æ¢å¥è¯è¯´ï¼Œå¹¶å‘æ€§å…è®¸ç¨‹åºçš„ä¸åŒéƒ¨åˆ†åŒæ—¶è¿›è¡Œï¼Œä½†å®ƒä»¬çš„æ‰§è¡Œé¡ºåºå¯ä»¥æ˜¯çµæ´»çš„ï¼Œåªè¦æœ€ç»ˆçš„ç»“æœä¸å—å½±å“ã€‚</p><p>å¹¶å‘Concurrentï¼šæ— è®ºä¸Šä¸€ä¸ªå¼€å§‹æ‰§è¡Œçš„ä»»åŠ¡æ˜¯å¦å®Œæˆï¼Œå½“å‰ä»»åŠ¡éƒ½å¯ä»¥å¼€å§‹æ‰§è¡Œ ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼ŒA B é¡ºåºæ‰§è¡Œçš„è¯ï¼ŒA ä¸€å®šä¼šæ¯” B å…ˆå®Œæˆï¼Œè€Œå¹¶å‘æ‰§è¡Œåˆ™ä¸ä¸€å®šã€‚ï¼‰ ä¸å¯ä»¥ä¸€èµ·æ‰§è¡Œçš„å¹¶è¡Œï¼ˆparallelï¼‰ç›¸å¯¹çš„æ˜¯ä¸å¯ä»¥ä¸€èµ·æ‰§è¡Œçš„ä¸²è¡Œï¼ˆserialï¼‰</p><p>ä»å®è§‚æ–¹é¢æ¥è¯´ï¼Œå¹¶å‘å°±æ˜¯åŒæ—¶è¿›è¡Œå¤šç§æ—¶é—´ï¼Œå®é™…ä¸Šï¼Œè¿™å‡ ç§æ—¶é—´ï¼Œå¹¶ä¸æ˜¯åŒæ—¶è¿›è¡Œçš„ï¼Œè€Œæ˜¯äº¤æ›¿è¿›è¡Œçš„ï¼Œè€Œç”±äºCPUçš„è¿ç®—é€Ÿåº¦éå¸¸çš„å¿«ï¼ŒåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹è¿è¡Œ</p><p>å¹¶è¡Œï¼šåˆ™æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„åŒæ—¶è¿›è¡Œå¤šç§äº‹æƒ…ã€‚è¿™ç§åªå¯ä»¥åœ¨å¤šæ ¸CPUçš„åŸºç¡€ä¸Šå®Œæˆã€‚</p><p>ç»¼ä¸Šï¼Œå¹¶å‘ä¸å¹¶è¡Œå¹¶ä¸æ˜¯äº’æ–¥çš„æ¦‚å¿µï¼Œåªæ˜¯å‰è€…å…³æ³¨çš„æ˜¯ä»»åŠ¡çš„æŠ½è±¡è°ƒåº¦ã€åè€…å…³æ³¨çš„æ˜¯ä»»åŠ¡çš„å®é™…æ‰§è¡Œã€‚è€Œå®ƒä»¬åˆæ˜¯ç›¸å…³çš„</p><p>åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œå¯è§æ€§ã€åŸå­æ€§å’Œæœ‰åºæ€§æ˜¯æŒ‡å¯¼å¹¶å‘ç¨‹åºæ­£ç¡®æ€§çš„é‡è¦æ¦‚å¿µï¼Œä¸ä¸Šè¿°ä¸‰å¤§é—®é¢˜ï¼ˆç«æ€æ¡ä»¶ã€æ­»é”å’Œå†…å­˜åŒæ­¥ï¼‰å¯†åˆ‡ç›¸å…³ã€‚</p><p><strong>å¯è§æ€§ï¼ˆVisibilityï¼‰ï¼š</strong></p><p>å¯è§æ€§æŒ‡çš„æ˜¯ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹æ˜¯å¦èƒ½å¤Ÿè¢«å…¶ä»–çº¿ç¨‹ç«‹å³è§‚å¯Ÿåˆ°ã€‚åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œç”±äºCPUç¼“å­˜ã€ç¼–è¯‘å™¨ä¼˜åŒ–ç­‰å› ç´ ï¼Œä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«æ•°æ®çš„ä¿®æ”¹å¯èƒ½ä¸ä¼šç«‹å³è¢«å…¶ä»–çº¿ç¨‹æ‰€æ„ŸçŸ¥ï¼Œé€ æˆä¸ä¸€è‡´çš„ç»“æœã€‚<strong>é€šè¿‡åˆé€‚çš„åŒæ­¥æœºåˆ¶ï¼ˆå¦‚äº’æ–¥é”ã€åŸå­æ“ä½œã€å†…å­˜å±éšœç­‰ï¼‰å¯ä»¥ç¡®ä¿å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹å¯¹å…¶ä»–çº¿ç¨‹æ˜¯å¯è§çš„ï¼Œä»è€Œä¿è¯äº†ç¨‹åºçš„æ­£ç¡®æ€§ã€‚</strong></p><p><strong>åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼š</strong></p><p>åŸå­æ€§æ˜¯æŒ‡ä¸€ä¸ªæ“ä½œè¦ä¹ˆå®Œå…¨æ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨ä¸æ‰§è¡Œï¼Œä¸å­˜åœ¨ä¸­é—´çŠ¶æ€ã€‚åœ¨å¹¶å‘ç¯å¢ƒä¸­ï¼Œå¤šä¸ªçº¿ç¨‹å¯èƒ½åŒæ—¶è®¿é—®åŒä¸€ä¸ªå˜é‡ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨ä¿®æ”¹æŸä¸ªå…±äº«å˜é‡æ—¶ï¼Œå¦‚æœæ²¡æœ‰é€‚å½“çš„åŒæ­¥æœºåˆ¶ï¼Œå…¶ä»–çº¿ç¨‹å¯èƒ½ä¼šè¯»å–åˆ°ä¸ä¸€è‡´çš„çŠ¶æ€ã€‚ä½¿ç”¨åŸå­æ“ä½œæˆ–é”å¯ä»¥ç¡®ä¿æŸä¸ªæ“ä½œæ˜¯åŸå­çš„ï¼Œå³åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šè¢«ä¸­æ–­æˆ–å½±å“ã€‚</p><p>åŸå­æ€§æ“ä½œåœ¨å¹¶å‘ç¼–ç¨‹ä¸­è‡³å…³é‡è¦ï¼Œå®ƒç¡®ä¿äº†ä¸€ç»„æ“ä½œçš„<strong>ä¸å¯åˆ†å‰²æ€§å’Œä¸­é—´çŠ¶æ€çš„ä¸å¯è§æ€§</strong>ã€‚é€šè¿‡ä½¿ç”¨åŸºæœ¬ç±»å‹çš„åŸå­æ“ä½œã€é”æœºåˆ¶ã€åŸå­å˜é‡å’Œæ•°æ®åº“äº‹åŠ¡ç­‰æŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰æ•ˆåœ°é¿å…ç«æ€æ¡ä»¶ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œæ­£ç¡®æ€§ã€‚</p><p><strong>æœ‰åºæ€§ï¼ˆOrderingï¼‰ï¼š</strong></p><p>æœ‰åºæ€§æŒ‡çš„æ˜¯ç¨‹åºä¸­çš„æ“ä½œåœ¨æ‰§è¡Œæ—¶ä¿æŒå…¶æŒ‡ä»¤é¡ºåºï¼Œä¸ä¼šå‡ºç°ä¹±åºæ‰§è¡Œçš„æƒ…å†µã€‚åœ¨ç°ä»£CPUä¸­ï¼Œç”±äºæŒ‡ä»¤é‡æ’ä¼˜åŒ–ï¼ŒCPU å¯èƒ½ä¼šé‡æ–°æ’åºæŒ‡ä»¤ä»¥æé«˜æ€§èƒ½ã€‚å¯¹äºå¹¶å‘ç¼–ç¨‹æ¥è¯´ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´çº¿ç¨‹ä¹‹é—´æ“ä½œçš„æ‰§è¡Œé¡ºåºä¸ä»£ç ç¼–å†™çš„é¡ºåºä¸ä¸€è‡´ã€‚ä½¿ç”¨å†…å­˜å±éšœï¼ˆMemory Barriersï¼‰æˆ–åŒæ­¥æœºåˆ¶å¯ä»¥ç¡®ä¿æŒ‡ä»¤ä¸ä¼šè¢«é‡æ’ï¼Œä»è€Œä¿æŒæ“ä½œçš„æœ‰åºæ€§ã€‚</p><p><strong>å…³ç³»ï¼š</strong></p><ul><li><strong>ç«æ€æ¡ä»¶</strong>é€šå¸¸ä¸å¯è§æ€§å’ŒåŸå­æ€§æœ‰å…³ã€‚ç«æ€æ¡ä»¶å¯èƒ½å‘ç”Ÿåœ¨å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºçš„è¯»å†™æ“ä½œä¸Šï¼Œå¦‚æœæ²¡æœ‰é€‚å½“çš„åŒæ­¥æœºåˆ¶æ¥ç¡®ä¿å¯è§æ€§å’ŒåŸå­æ€§ï¼Œå°±å¯èƒ½å¯¼è‡´ä¸ç¡®å®šçš„ç»“æœã€‚</li><li><strong>æ­»é”</strong>å¯èƒ½ä¸æœ‰åºæ€§æœ‰å…³ï¼Œå½“å¤šä¸ªçº¿ç¨‹æŒ‰ç…§ä¸åŒçš„é¡ºåºè·å–é”æˆ–èµ„æºæ—¶ï¼Œå¯èƒ½ä¼šäº§ç”Ÿæ­»é”ã€‚åˆç†åœ°è§„åˆ’èµ„æºè·å–é¡ºåºå¯ä»¥é¿å…æ­»é”çš„å‘ç”Ÿã€‚</li><li><strong>å†…å­˜åŒæ­¥é—®é¢˜</strong>ä¸å¯è§æ€§ã€åŸå­æ€§å’Œæœ‰åºæ€§å¯†åˆ‡ç›¸å…³ã€‚è§£å†³å†…å­˜åŒæ­¥é—®é¢˜éœ€è¦ç¡®ä¿å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹å¯¹å…¶ä»–çº¿ç¨‹æ˜¯å¯è§çš„ï¼ˆå¯è§æ€§ï¼‰ã€åŸå­æ“ä½œèƒ½å¤Ÿä¿è¯æ“ä½œçš„å®Œæ•´æ€§ï¼ˆåŸå­æ€§ï¼‰ï¼Œä»¥åŠæŒ‡ä»¤æ‰§è¡Œçš„æœ‰åºæ€§ã€‚</li></ul><h3 id="åŒæ­¥é—®é¢˜">åŒæ­¥é—®é¢˜</h3><p>**çº¿ç¨‹åŒæ­¥ï¼ˆThread Synchronizationï¼‰**æ˜¯æŒ‡åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œä¸ºäº†é¿å…å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯¹å…±äº«èµ„æºçš„å¹¶å‘è®¿é—®å¼•å‘çš„é—®é¢˜ï¼ˆå¦‚ç«äº‰æ¡ä»¶ã€æ­»é”ç­‰ï¼‰ï¼Œéœ€è¦é‡‡å–æªæ–½æ¥åè°ƒçº¿ç¨‹çš„æ‰§è¡Œï¼Œä»¥ç¡®ä¿çº¿ç¨‹ä¹‹é—´çš„æ“ä½œæŒ‰ç…§æœŸæœ›çš„é¡ºåºè¿›è¡Œã€‚çº¿ç¨‹åŒæ­¥çš„ç›®çš„æ˜¯ä¿è¯å¤šä¸ªçº¿ç¨‹èƒ½å¤Ÿæœ‰åºåœ°è®¿é—®å…±äº«èµ„æºï¼Œé¿å…æ•°æ®çš„ä¸ä¸€è‡´å’Œé”™è¯¯ã€‚</p><h2 id="å¸¸è§çš„çº¿ç¨‹åŒæ­¥æœºåˆ¶åŒ…æ‹¬ï¼š">å¸¸è§çš„çº¿ç¨‹åŒæ­¥æœºåˆ¶åŒ…æ‹¬ï¼š</h2><ol><li><p><strong>äº’æ–¥é”ï¼ˆMutexï¼‰ï¼š</strong> äº’æ–¥é”æ˜¯ä¸€ç§æœ€åŸºæœ¬çš„çº¿ç¨‹åŒæ­¥æœºåˆ¶ï¼Œç”¨äºä¿æŠ¤å…±äº«èµ„æºå…å—å¹¶å‘è®¿é—®ã€‚ä¸€æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤ŸæŒæœ‰äº’æ–¥é”ï¼Œå…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰å¾…ç›´åˆ°é”è¢«é‡Šæ”¾ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹åŒä¸€èµ„æºã€‚</p></li><li><p><strong>ä¿¡å·é‡ï¼ˆSemaphoreï¼‰ï¼š</strong> ä¿¡å·é‡æ˜¯ä¸€ç§è®¡æ•°å™¨ï¼Œç”¨äºæ§åˆ¶å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºçš„è®¿é—®ã€‚å®ƒå¯ä»¥ç”¨æ¥<strong>é™åˆ¶åŒæ—¶è®¿é—®èµ„æºçš„çº¿ç¨‹æ•°é‡</strong>ï¼Œä¹Ÿå¯ä»¥ç”¨äºçº¿ç¨‹é—´çš„é€šä¿¡ã€‚</p></li><li><p><strong>æ¡ä»¶å˜é‡ï¼ˆCondition Variableï¼‰ï¼š</strong> æ¡ä»¶å˜é‡ç”¨äºåœ¨çº¿ç¨‹ä¹‹é—´ä¼ é€’ä¿¡æ¯ï¼Œä»¥åŠåœ¨æŸäº›æ¡ä»¶æ»¡è¶³æ—¶å”¤é†’ç­‰å¾…çš„çº¿ç¨‹ã€‚å®ƒé€šå¸¸å’Œäº’æ–¥é”ä¸€èµ·ä½¿ç”¨ï¼Œä»¥å®ç°æ›´å¤æ‚çš„åŒæ­¥éœ€æ±‚ã€‚</p></li><li><p><strong>è¯»å†™é”ï¼ˆRead-Write Lockï¼‰ï¼š</strong> è¯»å†™é”å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å–å…±äº«èµ„æºï¼Œä½†åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå†™æ“ä½œã€‚è¿™å¯ä»¥æé«˜è¯»æ“ä½œçš„å¹¶å‘æ€§èƒ½ã€‚å¤šä¸ªè¯»çº¿ç¨‹å¯ä»¥åŒæ—¶è·å¾—é”ï¼Œå†™çº¿ç¨‹ä¼šé˜»å¡å…¶ä»–å†™çº¿ç¨‹å’Œè¯»çº¿ç¨‹ã€‚<strong>ä¹è§‚é”</strong></p></li><li><p><strong>åŸå­æ“ä½œï¼ˆAtomic Operationsï¼‰ï¼š</strong> åŸå­æ“ä½œæ˜¯ä¸å¯ä¸­æ–­çš„æ“ä½œï¼Œå¯ä»¥åœ¨å•ä¸ªæŒ‡ä»¤ä¸­å®Œæˆã€‚å®ƒä»¬å¯ä»¥ç”¨äºä¿æŠ¤ç®€å•çš„å…±äº«æ•°æ®ç»“æ„ï¼Œé¿å…ç«äº‰æ¡ä»¶ã€‚</p></li><li><p><strong>è‡ªæ—‹é”</strong>ï¼š è‡ªæ—‹é”ä¸äº’æ–¥é‡ç±»ä¼¼ï¼Œä½†å®ƒä¸ä½¿çº¿ç¨‹è¿›å…¥é˜»å¡æ€ï¼›è€Œæ˜¯åœ¨è·å–é”ä¹‹å‰ä¸€ç›´å ç”¨CPUï¼Œå¤„äºå¿™ç­‰ï¼ˆè‡ªæ—‹ï¼‰çŠ¶æ€ã€‚</p></li><li><p><strong>å±éšœï¼ˆBarrierï¼‰ï¼š</strong> å±éšœç”¨äºç­‰å¾…å¤šä¸ªçº¿ç¨‹éƒ½è¾¾åˆ°æŸä¸ªç‚¹ï¼Œç„¶åå†ç»§ç»­æ‰§è¡Œåç»­æ“ä½œï¼Œå¸¸ç”¨äºéœ€è¦å¤šä¸ªçº¿ç¨‹ååŒå®Œæˆçš„ä»»åŠ¡ã€‚</p></li><li><p><strong>ä¹è§‚é”</strong>ï¼šä¹è§‚é”æ˜¯ä¸€ç§å‡è®¾åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸ä¼šå‘ç”Ÿå†²çªçš„é”ã€‚å®ƒä¸ä¼šåœ¨è®¿é—®å…±äº«èµ„æºä¹‹å‰è·å–é”ï¼Œè€Œæ˜¯åœ¨æ›´æ–°å…±äº«èµ„æºæ—¶è¿›è¡Œæ£€æŸ¥ã€‚å¦‚æœæ£€æµ‹åˆ°å…¶ä»–çº¿ç¨‹å·²ç»æ›´æ–°äº†å…±äº«èµ„æºï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹å¯èƒ½éœ€è¦é‡è¯•æˆ–è€…é‡‡å–å…¶ä»–æªæ–½æ¥å¤„ç†å†²çªã€‚ä¹è§‚é”é€šå¸¸ç”¨äºå¤šè¯»çš„åœºæ™¯ï¼Œå¯ä»¥æé«˜ååé‡ã€‚</p></li><li><p><strong>æ‚²è§‚é”</strong>ï¼šæ‚²è§‚é”æ˜¯ä¸€ç§å‡è®¾åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¼šå‘ç”Ÿå†²çªçš„é”ã€‚å®ƒåœ¨è®¿é—®å…±äº«èµ„æºä¹‹å‰è·å–é”ï¼Œå¹¶å‡å®šå…¶ä»–çº¿ç¨‹ä¼šå¹²æ‰°ã€‚æ‚²è§‚é”é€šå¸¸ç”¨äºå†™å…¥æ“ä½œï¼Œä»¥ç¡®ä¿åœ¨å†™å…¥å…±äº«èµ„æºæ—¶ä¸ä¼šå‘ç”Ÿå†²çªã€‚</p></li></ol><p>ä¹è§‚é”çš„å®ç°æ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼šCASæœºåˆ¶å’Œç‰ˆæœ¬å·æœºåˆ¶ã€‚</p><p>å¯¹äºABAé—®é¢˜ï¼Œæ¯”è¾ƒæœ‰æ•ˆçš„æ–¹æ¡ˆæ˜¯å¼•å…¥ç‰ˆæœ¬å·ï¼Œå†…å­˜ä¸­çš„å€¼æ¯å‘ç”Ÿä¸€æ¬¡å˜åŒ–ï¼Œç‰ˆæœ¬å·éƒ½+1ï¼›åœ¨è¿›è¡ŒCASæ“ä½œæ—¶ï¼Œä¸ä»…æ¯”è¾ƒå†…å­˜ä¸­çš„å€¼ï¼Œä¹Ÿä¼šæ¯”è¾ƒç‰ˆæœ¬å·ï¼Œåªæœ‰å½“äºŒè€…éƒ½æ²¡æœ‰å˜åŒ–æ—¶ï¼ŒCASæ‰èƒ½æ‰§è¡ŒæˆåŠŸã€‚Javaä¸­çš„AtomicStampedReferenceç±»ä¾¿æ˜¯ä½¿ç”¨ç‰ˆæœ¬å·æ¥è§£å†³ABAé—®é¢˜çš„ã€‚</p><p>é™¤äº†CASï¼Œç‰ˆæœ¬å·æœºåˆ¶ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°ä¹è§‚é”ã€‚ç‰ˆæœ¬å·æœºåˆ¶çš„åŸºæœ¬æ€è·¯æ˜¯åœ¨æ•°æ®ä¸­å¢åŠ ä¸€ä¸ªå­—æ®µversionï¼Œè¡¨ç¤ºè¯¥æ•°æ®çš„ç‰ˆæœ¬å·ï¼Œæ¯å½“æ•°æ®è¢«ä¿®æ”¹ï¼Œç‰ˆæœ¬å·åŠ 1ã€‚å½“æŸä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®æ—¶ï¼Œå°†è¯¥æ•°æ®çš„ç‰ˆæœ¬å·ä¸€èµ·æŸ¥å‡ºæ¥ï¼›å½“è¯¥çº¿ç¨‹æ›´æ–°æ•°æ®æ—¶ï¼Œåˆ¤æ–­å½“å‰ç‰ˆæœ¬å·ä¸ä¹‹å‰è¯»å–çš„ç‰ˆæœ¬å·æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´æ‰è¿›è¡Œæ“ä½œã€‚</p><p>ä¸´ç•ŒåŒº å¯¹ä¸´ç•Œèµ„æºè¿›è¡Œè®¿é—®çš„é‚£æ®µä»£ç ç§°ä¸ºä¸´ç•ŒåŒºã€‚</p><p>ä¸ºäº†äº’æ–¥è®¿é—®ä¸´ç•Œèµ„æºï¼Œæ¯ä¸ªè¿›ç¨‹åœ¨è¿›å…¥ä¸´ç•ŒåŒºä¹‹å‰ï¼Œéœ€è¦å…ˆè¿›è¡Œæ£€æŸ¥ã€‚</p><p>// entry section // critical section; // exit section</p><ol><li>åŒæ­¥ä¸äº’æ–¥ åŒæ­¥ï¼šå¤šä¸ªè¿›ç¨‹å› ä¸ºåˆä½œäº§ç”Ÿçš„ç›´æ¥åˆ¶çº¦å…³ç³»ï¼Œä½¿å¾—è¿›ç¨‹æœ‰ä¸€å®šçš„å…ˆåæ‰§è¡Œå…³ç³»ã€‚ äº’æ–¥ï¼šå¤šä¸ªè¿›ç¨‹åœ¨åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªè¿›ç¨‹èƒ½è¿›å…¥ä¸´ç•ŒåŒºã€‚</li><li>ä¿¡å·é‡ ä¿¡å·é‡ï¼ˆSemaphoreï¼‰æ˜¯ä¸€ä¸ªæ•´å‹å˜é‡ï¼Œå¯ä»¥å¯¹å…¶æ‰§è¡Œ down å’Œ up æ“ä½œï¼Œä¹Ÿå°±æ˜¯å¸¸è§çš„ P å’Œ V æ“ä½œã€‚</li></ol><p>down : å¦‚æœä¿¡å·é‡å¤§äº 0 ï¼Œæ‰§è¡Œ -1 æ“ä½œï¼›å¦‚æœä¿¡å·é‡ç­‰äº 0ï¼Œè¿›ç¨‹ç¡çœ ï¼Œç­‰å¾…ä¿¡å·é‡å¤§äº 0ï¼› up ï¼šå¯¹ä¿¡å·é‡æ‰§è¡Œ +1 æ“ä½œï¼Œå”¤é†’ç¡çœ çš„è¿›ç¨‹è®©å…¶å®Œæˆ down æ“ä½œã€‚ down å’Œ up æ“ä½œéœ€è¦è¢«è®¾è®¡æˆåŸè¯­ï¼Œä¸å¯åˆ†å‰²ï¼Œé€šå¸¸çš„åšæ³•æ˜¯åœ¨æ‰§è¡Œè¿™äº›æ“ä½œçš„æ—¶å€™å±è”½ä¸­æ–­ã€‚</p><p>å¦‚æœä¿¡å·é‡çš„å–å€¼åªèƒ½ä¸º 0 æˆ–è€… 1ï¼Œé‚£ä¹ˆå°±æˆä¸ºäº† äº’æ–¥é‡ï¼ˆMutexï¼‰ ï¼Œ0 è¡¨ç¤ºä¸´ç•ŒåŒºå·²ç»åŠ é”ï¼Œ1 è¡¨ç¤ºä¸´ç•ŒåŒºè§£é”ã€‚</p><p><strong>äº’æ–¥é”</strong></p><p>1ä¸¥æ ¼è½®æ¢æ³• åŠ å…¥é”å˜é‡ 2 Petersonç®—æ³• è¿›ç¨‹0å‡ºä¸´ç•ŒåŒºåè¿›ç¨‹1æ‰ä¼šç¦»å¼€å¿™ç­‰</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">typedef int semaphore; semaphore mutex = <span class="number">1</span>; </span><br><span class="line"><span class="keyword">void</span> <span class="title function_">P1</span>(<span class="params"></span>) { <span class="title function_">down</span>(&amp;mutex);</span><br><span class="line"> <span class="comment">// ä¸´ç•ŒåŒº up(&amp;mutex); }</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">P2</span>(<span class="params"></span>) { <span class="title function_">down</span>(&amp;mutex); <span class="comment">// ä¸´ç•ŒåŒº up(&amp;mutex); } ä½¿ç”¨ä¿¡å·é‡å®ç°ç”Ÿäº§è€…-æ¶ˆè´¹è€…</span></span><br></pre></td></tr></table></figure><p>é—®é¢˜æè¿°ï¼šä½¿ç”¨ä¸€ä¸ªç¼“å†²åŒºæ¥ä¿å­˜ç‰©å“ï¼Œåªæœ‰ç¼“å†²åŒºæ²¡æœ‰æ»¡ï¼Œç”Ÿäº§è€…æ‰å¯ä»¥æ”¾å…¥ç‰©å“ï¼›åªæœ‰ç¼“å†²åŒºä¸ä¸ºç©ºï¼Œæ¶ˆè´¹è€…æ‰å¯ä»¥æ‹¿èµ°ç‰©å“ã€‚</p><p>å› ä¸ºç¼“å†²åŒºå±äºä¸´ç•Œèµ„æºï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ä¸€ä¸ªäº’æ–¥é‡ mutex æ¥æ§åˆ¶å¯¹ç¼“å†²åŒºçš„äº’æ–¥è®¿é—®ã€‚</p><p>ä¸ºäº†åŒæ­¥ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„è¡Œä¸ºï¼Œéœ€è¦è®°å½•ç¼“å†²åŒºä¸­ç‰©å“çš„æ•°é‡ã€‚æ•°é‡å¯ä»¥ä½¿ç”¨ä¿¡å·é‡æ¥è¿›è¡Œç»Ÿè®¡ï¼Œè¿™é‡Œéœ€è¦ä½¿ç”¨ä¸¤ä¸ªä¿¡å·é‡ï¼šempty è®°å½•ç©ºç¼“å†²åŒºçš„æ•°é‡ï¼Œfull è®°å½•æ»¡ç¼“å†²åŒºçš„æ•°é‡ã€‚å…¶ä¸­ï¼Œempty ä¿¡å·é‡æ˜¯åœ¨ç”Ÿäº§è€…è¿›ç¨‹ä¸­ä½¿ç”¨ï¼Œå½“ empty ä¸ä¸º 0 æ—¶ï¼Œç”Ÿäº§è€…æ‰å¯ä»¥æ”¾å…¥ç‰©å“ï¼›full ä¿¡å·é‡æ˜¯åœ¨æ¶ˆè´¹è€…è¿›ç¨‹ä¸­ä½¿ç”¨ï¼Œå½“ full ä¿¡å·é‡ä¸ä¸º 0 æ—¶ï¼Œæ¶ˆè´¹è€…æ‰å¯ä»¥å–èµ°ç‰©å“ã€‚</p><p>æ³¨æ„ï¼Œä¸èƒ½å…ˆå¯¹ç¼“å†²åŒºè¿›è¡ŒåŠ é”ï¼Œå†æµ‹è¯•ä¿¡å·é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸èƒ½å…ˆæ‰§è¡Œ down(mutex) å†æ‰§è¡Œ down(empty)ã€‚å¦‚æœè¿™ä¹ˆåšäº†ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼šç”Ÿäº§è€…å¯¹ç¼“å†²åŒºåŠ é”åï¼Œæ‰§è¡Œ down(empty) æ“ä½œï¼Œå‘ç° empty = 0ï¼Œæ­¤æ—¶ç”Ÿäº§è€…ç¡çœ ã€‚æ¶ˆè´¹è€…ä¸èƒ½è¿›å…¥ä¸´ç•ŒåŒºï¼Œå› ä¸ºç”Ÿäº§è€…å¯¹ç¼“å†²åŒºåŠ é”äº†ï¼Œæ¶ˆè´¹è€…å°±æ— æ³•æ‰§è¡Œ up(empty) æ“ä½œï¼Œempty æ°¸è¿œéƒ½ä¸º 0ï¼Œå¯¼è‡´ç”Ÿäº§è€…æ°¸è¿œç­‰å¾…ä¸‹ï¼Œä¸ä¼šé‡Šæ”¾é”ï¼Œæ¶ˆè´¹è€…å› æ­¤ä¹Ÿä¼šæ°¸è¿œç­‰å¾…ä¸‹å»ã€‚</p><h1>å¼‚æ­¥ç¼–ç¨‹</h1><p>å¼‚æ­¥ï¼ˆAsynchronousï¼‰ï¼šå¼‚æ­¥ç¼–ç¨‹æ˜¯ä¸€ç§å¤„ç†å¹¶å‘æ“ä½œçš„æ–¹å¼ï¼Œå…¶ä¸­ä¸éœ€è¦ç­‰å¾…ä¸€ä¸ªæ“ä½œå®Œæˆæ‰èƒ½æ‰§è¡Œä¸‹ä¸€ä¸ªæ“ä½œã€‚åœ¨å¼‚æ­¥ç¼–ç¨‹ä¸­ï¼Œä¸€ä¸ªæ“ä½œçš„å¯åŠ¨ä¸ä¼šé˜»å¡ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†ï¼Œ<strong>è€Œæ˜¯å…è®¸ç¨‹åºç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œï¼Œä¹‹åå½“å¼‚æ­¥æ“ä½œå®Œæˆæ—¶ï¼Œç¨‹åºä¼šå¾—åˆ°é€šçŸ¥æˆ–å›è°ƒã€‚<strong>è¿™ç§æ–¹å¼å¯ä»¥æé«˜ç¨‹åºçš„å“åº”æ€§å’Œå¹¶å‘æ€§ã€‚ä½†</strong>ç”±äºèµ„æºæœ‰é™ï¼Œè¿›ç¨‹çš„æ‰§è¡Œä¸æ˜¯ä¸€è´¯åˆ°åº•çš„ï¼Œè¿™å°±æ˜¯è¿›ç¨‹çš„å¼‚æ­¥æ€§ã€‚ å¼‚æ­¥å’ŒåŒæ­¥æ˜¯ç›¸å¯¹çš„ï¼ŒåŒæ­¥å°±æ˜¯é¡ºåºæ‰§è¡Œï¼Œæ‰§è¡Œå®Œä¸€ä¸ªå†æ‰§è¡Œä¸‹ä¸€ä¸ªï¼Œéœ€è¦ç­‰å¾…ã€åè°ƒè¿è¡Œ</strong></p><p>â€œå¼‚æ­¥é˜»å¡â€ æ„å‘³ç€å¯èƒ½å­˜åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè™½ç„¶ä½¿ç”¨äº†å¼‚æ­¥ç¼–ç¨‹çš„æ–¹å¼ï¼Œä½†åœ¨æŸäº›æ—¶åˆ»ç¨‹åºä»ç„¶è¢«é˜»å¡ï¼Œç­‰å¾…æŸäº›æ“ä½œçš„å®Œæˆã€‚è¿™ç§æƒ…å†µå¯èƒ½å‘ç”Ÿåœ¨ä»¥ä¸‹æƒ…å½¢ä¸‹ï¼š</p><ul><li>æŸäº›å¼‚æ­¥æ“ä½œå†…éƒ¨ä½¿ç”¨äº†åŒæ­¥æ“ä½œï¼Œå¯¼è‡´å½“å‰çº¿ç¨‹åœ¨ç­‰å¾…è¿™äº›åŒæ­¥æ“ä½œå®Œæˆæ—¶è¢«é˜»å¡ã€‚</li><li>å¼‚æ­¥æ“ä½œä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼ŒæŸä¸ªå¼‚æ­¥æ“ä½œå¿…é¡»ç­‰å¾…å¦ä¸€ä¸ªå¼‚æ­¥æ“ä½œå®Œæˆåæ‰èƒ½æ‰§è¡Œã€‚</li><li>ç¨‹åºä¸­çš„æŸäº›éƒ¨åˆ†ä»ç„¶é‡‡ç”¨åŒæ­¥ç¼–ç¨‹æ–¹å¼ï¼Œè€Œä¸æ˜¯å…¨é¢é‡‡ç”¨å¼‚æ­¥ç¼–ç¨‹ã€‚</li></ul><p>è¦é¿å…å¼‚æ­¥æ“ä½œä¸­çš„é˜»å¡ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹æ¡†æ¶å’Œæ¨¡å¼ï¼Œä»¥ç¡®ä¿åœ¨å¼‚æ­¥æ“ä½œä¸­ä¹Ÿä¸ä¼šé˜»å¡ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†ã€‚è¿™åŒ…æ‹¬ä½¿ç”¨å›è°ƒã€Promiseã€å¼‚æ­¥/awaitç­‰æœºåˆ¶æ¥ç®¡ç†å¼‚æ­¥æ“ä½œçš„æ‰§è¡Œé¡ºåºå’Œä¾èµ–å…³ç³»ï¼Œä»è€Œå®ç°çœŸæ­£çš„éé˜»å¡å¼‚æ­¥ç¼–ç¨‹ã€‚</p><p>eg.       æˆ‘ä»¬ä»¥ç»å…¸çš„è¯»å–æ–‡ä»¶çš„æ¨¡å‹ä¸¾ä¾‹ã€‚ï¼ˆå¯¹æ“ä½œç³»ç»Ÿè€Œè¨€ï¼Œæ‰€æœ‰çš„è¾“å…¥è¾“å‡ºè®¾å¤‡éƒ½è¢«æŠ½è±¡æˆæ–‡ä»¶ã€‚ï¼‰</p><p>åœ¨å‘èµ·è¯»å–æ–‡ä»¶çš„è¯·æ±‚æ—¶ï¼Œåº”ç”¨å±‚ä¼šè°ƒç”¨ç³»ç»Ÿå†…æ ¸çš„ I/O æ¥å£ã€‚</p><p>å¦‚æœåº”ç”¨å±‚è°ƒç”¨çš„æ˜¯é˜»å¡å‹ I/Oï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨ä¹‹åï¼Œåº”ç”¨å±‚å³åˆ»è¢«æŒ‚èµ·ï¼Œä¸€ç›´å‡ºäºç­‰å¾…æ•°æ®è¿”å›çš„çŠ¶æ€ï¼Œç›´åˆ°ç³»ç»Ÿå†…æ ¸ä»ç£ç›˜è¯»å–å®Œæ•°æ®å¹¶è¿”å›ç»™åº”ç”¨å±‚ï¼Œåº”ç”¨å±‚æ‰ç”¨è·å¾—çš„æ•°æ®è¿›è¡Œæ¥ä¸‹æ¥çš„å…¶ä»–æ“ä½œã€‚</p><p>å¦‚æœåº”ç”¨å±‚è°ƒç”¨çš„æ˜¯éé˜»å¡ I/Oï¼Œé‚£ä¹ˆè°ƒç”¨åï¼Œç³»ç»Ÿå†…æ ¸ä¼šç«‹å³è¿”å›ï¼ˆè™½ç„¶è¿˜æ²¡æœ‰æ–‡ä»¶å†…å®¹çš„æ•°æ®ï¼‰ï¼Œåº”ç”¨å±‚å¹¶ä¸ä¼šè¢«æŒ‚èµ·ï¼Œå®ƒå¯ä»¥åšå…¶ä»–ä»»æ„å®ƒæƒ³åšçš„æ“ä½œã€‚ï¼ˆè‡³äºæ–‡ä»¶å†…å®¹æ•°æ®å¦‚ä½•è¿”å›ç»™åº”ç”¨å±‚ï¼Œè¿™å·²ç»è¶…å‡ºäº†é˜»å¡å’Œéé˜»å¡çš„è¾¨åˆ«èŒƒç•´ã€‚ï¼‰</p><p>é˜»å¡å’Œéé˜»å¡è§£å†³äº†åº”ç”¨å±‚ç­‰å¾…æ•°æ®è¿”å›æ—¶çš„çŠ¶æ€é—®é¢˜ï¼Œé‚£ç³»ç»Ÿå†…æ ¸è·å–åˆ°çš„æ•°æ®åˆ°åº•å¦‚ä½•è¿”å›ç»™åº”ç”¨å±‚å‘¢ï¼Ÿæ˜¯å¦æ˜¯é˜»å¡è¿˜æ˜¯éé˜»å¡ï¼Œ<strong>å…³æ³¨çš„æ˜¯æ¥å£è°ƒç”¨ï¼ˆå‘å‡ºè¯·æ±‚ï¼‰åç­‰å¾…æ•°æ®è¿”å›æ—¶çš„çŠ¶æ€ã€‚</strong></p><p>åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Œ<strong>å…³æ³¨çš„æ˜¯ä»»åŠ¡å®Œæˆæ—¶æ¶ˆæ¯é€šçŸ¥çš„æ–¹å¼ã€‚ç”±è°ƒç”¨æ–¹ç›²ç›®ä¸»åŠ¨é—®è¯¢çš„æ–¹å¼æ˜¯åŒæ­¥è°ƒç”¨ï¼Œç”±è¢«è°ƒç”¨æ–¹ä¸»åŠ¨é€šçŸ¥è°ƒç”¨æ–¹ä»»åŠ¡å·²å®Œæˆçš„æ–¹å¼æ˜¯<a href="https://www.zhihu.com/search?q=%E5%BC%82%E6%AD%A5%E8%B0%83%E7%94%A8&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A%2222707398%22%7D">å¼‚æ­¥è°ƒç”¨</a>ã€‚</strong></p><h2 id="JAVAä¸­çš„çº¿ç¨‹å®‰å…¨">JAVAä¸­çš„çº¿ç¨‹å®‰å…¨</h2><p><strong>Javaå†…å­˜æ¨¡å‹åªä¿è¯äº†åŸºæœ¬è¯»å–å’Œèµ‹å€¼æ˜¯åŸå­æ€§æ“ä½œï¼Œå¦‚æœè¦å®ç°æ›´å¤§èŒƒå›´æ“ä½œçš„åŸå­æ€§ï¼Œå¯ä»¥é€šè¿‡synchronizedå’ŒLockæ¥å®ç°ã€‚</strong></p><p>Javaæä¾›äº†volatileå…³é”®å­—æ¥<strong>ä¿è¯å¯è§æ€§</strong>ã€‚å½“ä¸€ä¸ªå…±äº«å˜é‡è¢«volatileä¿®é¥°æ—¶ï¼Œå®ƒä¼šä¿è¯ä¿®æ”¹çš„å€¼ä¼š<strong>ç«‹å³</strong>è¢«æ›´æ–°åˆ°<strong>ä¸»å­˜</strong>ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–æ—¶ï¼Œå®ƒä¼šå»å†…å­˜ä¸­è¯»å–æ–°å€¼ã€‚å…³é—­ç¼“å­˜ï¼Œ<strong>ï¼ˆä»Loadåˆ°Storeï¼‰æ˜¯ä¸å®‰å…¨çš„ï¼Œä¸­é—´å¦‚æœå…¶ä»–çš„CPUä¿®æ”¹äº†å€¼å°†ä¼šä¸¢å¤±ã€‚ä¸‹é¢çš„æµ‹è¯•ä»£ç å¯ä»¥å®é™…æµ‹è¯•voaltileçš„è‡ªå¢æ²¡æœ‰åŸå­æ€§</strong>ï¼ˆåŸå­æ€§ï¼šå³ä¸€ä¸ªæ“ä½œæˆ–è€…å¤šä¸ªæ“ä½œ è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå¹¶ä¸”æ‰§è¡Œçš„è¿‡ç¨‹ä¸ä¼šè¢«ä»»ä½•å› ç´ æ‰“æ–­ï¼Œè¦ä¹ˆå°±éƒ½ä¸æ‰§è¡Œã€‚</p><p><strong>ç¼–è¯‘å™¨å±‚é¢ å’ŒCPUå±‚é¢éƒ½æä¾›äº†ä¸€å¥—å†…å­˜å±éšœæ¥ç¦æ­¢é‡æ’åºçš„æŒ‡ä»¤</strong>ï¼Œç¼–ç äººå‘˜éœ€è¦è¯†åˆ«å­˜åœ¨æ•°æ®ä¾èµ–çš„åœ°æ–¹åŠ ä¸Šä¸€ä¸ªå†…å­˜å±éšœæŒ‡ä»¤ï¼Œé‚£ä¹ˆæ­¤æ—¶è®¡ç®—æœºå°†ä¸ä¼šå¯¹å…¶è¿›è¡ŒæŒ‡ä»¤ä¼˜åŒ–ã€‚</p><p>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œç¡®ä¿ä»£ç æ­£ç¡®åŒæ­¥å’Œé¿å…é‡æ’åºreordingæ˜¯è‡³å…³é‡è¦çš„ã€‚Java æä¾›äº†å„ç§æœºåˆ¶æ¥å¸®åŠ©ç¨‹åºå‘˜åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹æ˜ç¡®è¡¨è¾¾æ•°æ®ä¾èµ–å’Œé¿å…æŒ‡ä»¤é‡æ’åºï¼š</p><ol><li><strong>volatile å…³é”®å­—ï¼š</strong> ä½¿ç”¨ <strong><code>volatile</code></strong> å…³é”®å­—å¯ä»¥ç¡®ä¿å˜é‡çš„å¯è§æ€§ï¼Œå¹¶é˜²æ­¢ç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯¹è¢« <strong><code>volatile</code></strong> ä¿®é¥°çš„å˜é‡è¿›è¡Œé‡æ’åºã€‚å®ƒé€‚ç”¨äºç®€å•çš„å˜é‡æ“ä½œï¼Œä½†ä¸èƒ½ä¿è¯åŸå­æ€§ã€‚</li><li><strong>synchronized å…³é”®å­—ï¼š</strong> ä½¿ç”¨ <strong><code>synchronized</code></strong> å…³é”®å­—å¯ä»¥ç¡®ä¿ä»£ç å—åœ¨åŒä¸€æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œä»è€Œä¿è¯äº†çº¿ç¨‹å®‰å…¨æ€§å’Œé¿å…äº†é‡æ’åºã€‚</li><li><strong>Lock æ¥å£åŠå…¶å®ç°ç±»ï¼š</strong> Java æä¾›äº† <strong><code>Lock</code></strong> æ¥å£åŠå…¶å®ç°ç±»ï¼Œå¦‚ <strong><code>ReentrantLock</code></strong>ï¼Œå…è®¸æ›´çµæ´»åœ°è¿›è¡Œé”å®šå’Œè§£é”ï¼Œå¹¶æä¾›äº†æ¯” <strong><code>synchronized</code></strong> æ›´å¤šçš„ç‰¹æ€§ã€‚</li><li><strong>Atomic ç±»ï¼š</strong> Java æä¾›äº†ä¸€ç³»åˆ—åŸå­æ“ä½œç±»ï¼Œå¦‚ <strong><code>AtomicInteger</code></strong>ã€<strong><code>AtomicBoolean</code></strong> ç­‰ï¼Œç”¨äºåœ¨ä¸ä½¿ç”¨é”çš„æƒ…å†µä¸‹æ‰§è¡ŒåŸå­æ“ä½œã€‚</li></ol><ul><li><p><strong>Happens-Before è§„åˆ™ï¼š</strong> Java å†…å­˜æ¨¡å‹å®šä¹‰äº† Happens-Before è§„åˆ™ï¼Œè§„å®šäº†ä¸€ç³»åˆ—æ“ä½œçš„é¡ºåºï¼Œä»¥ä¿è¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„ä¸€è‡´æ€§å’Œå¯é¢„æµ‹æ€§ã€‚ç¨‹åºå‘˜å¯ä»¥åˆ©ç”¨è¿™ä¸ªè§„åˆ™æ¥ç¡®ä¿ä»£ç æ­£ç¡®æ€§ã€‚</p><p>Java å†…å­˜æ¨¡å‹ä¸‹ä¸€å…±æœ‰ 8 æ¡ happens-before è§„åˆ™ï¼Œå¦‚æœçº¿ç¨‹é—´çš„æ“ä½œæ— æ³•ä»å¦‚ä¸‹å‡ ä¸ªè§„åˆ™æ¨å¯¼å‡ºæ¥ï¼Œé‚£ä¹ˆå®ƒä»¬çš„æ“ä½œå°±æ²¡æœ‰é¡ºåºæ€§ä¿éšœï¼Œè™šæ‹Ÿæœºæˆ–è€…æ“ä½œç³»ç»Ÿå°±èƒ½éšæ„åœ°è¿›è¡Œé‡æ’åºï¼Œä»è€Œå¯èƒ½ä¼šå‘ç”Ÿå¹¶å‘å®‰å…¨é—®é¢˜ã€‚</p><ul><li>ç¨‹åºæ¬¡åºè§„åˆ™ï¼ˆProgram Order Ruleï¼‰ï¼šåœ¨ä¸€ä¸ªçº¿ç¨‹å†…ï¼ŒæŒ‰ç…§ç¨‹åºä»£ç é¡ºåºï¼Œä¹¦å†™åœ¨å‰é¢çš„æ“ä½œå…ˆè¡Œå‘ç”Ÿäºä¹¦å†™åœ¨åé¢çš„æ“ä½œã€‚å‡†ç¡®åœ°è¯´ï¼Œåº”è¯¥æ˜¯æ§åˆ¶æµé¡ºåºè€Œä¸æ˜¯ç¨‹åºä»£ç é¡ºåºï¼Œå› ä¸ºè¦è€ƒè™‘åˆ†æ”¯ã€å¾ªç¯ç­‰ç»“æ„ã€‚</li><li>ç®¡ç¨‹é”å®šè§„åˆ™ï¼ˆMonitor Lock Ruleï¼‰ï¼šä¸€ä¸ª unlock æ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹åŒä¸€ä¸ªé”çš„ lock æ“ä½œã€‚è¿™é‡Œå¿…é¡»å¼ºè°ƒçš„æ˜¯åŒä¸€ä¸ªé”ï¼Œè€Œ â€œåé¢â€ æ˜¯æŒ‡æ—¶é—´ä¸Šçš„å…ˆåé¡ºåºã€‚</li><li>volatile å˜é‡è§„åˆ™ï¼ˆVolatile Variable Ruleï¼‰ï¼šå¯¹ä¸€ä¸ª volatile å˜é‡çš„å†™æ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹è¿™ä¸ªå˜é‡çš„è¯»æ“ä½œï¼Œè¿™é‡Œçš„ â€œåé¢â€ åŒæ ·æ˜¯æŒ‡æ—¶é—´ä¸Šçš„å…ˆåé¡ºåºã€‚</li><li>çº¿ç¨‹å¯åŠ¨è§„åˆ™ï¼ˆThread Start Ruleï¼‰ï¼šThread å¯¹è±¡çš„ start () æ–¹æ³•å…ˆè¡Œå‘ç”Ÿäºæ­¤çº¿ç¨‹çš„æ¯ä¸€ä¸ªåŠ¨ä½œã€‚</li><li>çº¿ç¨‹ç»ˆæ­¢è§„åˆ™ï¼ˆThread Termination Ruleï¼‰ï¼šçº¿ç¨‹ä¸­çš„æ‰€æœ‰æ“ä½œéƒ½å…ˆè¡Œå‘ç”Ÿäºå¯¹æ­¤çº¿ç¨‹çš„ç»ˆæ­¢æ£€æµ‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Thread.join () æ–¹æ³•ç»“æŸã€Thread.isAlive () çš„è¿”å›å€¼ç­‰æ‰‹æ®µæ£€æµ‹åˆ°çº¿ç¨‹å·²ç»ç»ˆæ­¢æ‰§è¡Œã€‚</li><li>çº¿ç¨‹ä¸­æ–­è§„åˆ™ï¼ˆThread Interruption Ruleï¼‰ï¼šå¯¹çº¿ç¨‹ interrupt () æ–¹æ³•çš„è°ƒç”¨å…ˆè¡Œå‘ç”Ÿäºè¢«ä¸­æ–­çº¿ç¨‹çš„ä»£ç æ£€æµ‹åˆ°ä¸­æ–­äº‹ä»¶çš„å‘ç”Ÿï¼Œå¯ä»¥é€šè¿‡ Thread.interrupted () æ–¹æ³•æ£€æµ‹åˆ°æ˜¯å¦æœ‰ä¸­æ–­å‘ç”Ÿã€‚</li><li>å¯¹è±¡ç»ˆç»“è§„åˆ™ï¼ˆFinalizer Ruleï¼‰ï¼šä¸€ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–å®Œæˆï¼ˆæ„é€ å‡½æ•°æ‰§è¡Œç»“æŸï¼‰å…ˆè¡Œå‘ç”Ÿäºå®ƒçš„ finalize () æ–¹æ³•çš„å¼€å§‹ã€‚</li><li>ä¼ é€’æ€§ï¼ˆTransitivityï¼‰ï¼šå¦‚æœæ“ä½œ A å…ˆè¡Œå‘ç”Ÿäºæ“ä½œ Bï¼Œæ“ä½œ B å…ˆè¡Œå‘ç”Ÿäºæ“ä½œ Cï¼Œé‚£å°±å¯ä»¥å¾—å‡ºæ“ä½œ A å…ˆè¡Œå‘ç”Ÿäºæ“ä½œ C çš„ç»“è®ºã€‚</li></ul></li></ul><ol><li><strong>çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»ï¼š</strong> Java æä¾›äº†ä¸€äº›çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»ï¼Œå¦‚ <strong><code>ConcurrentHashMap</code></strong>ã€<strong><code>CopyOnWriteArrayList</code></strong> ç­‰ï¼Œå¯ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å®‰å…¨åœ°è¿›è¡Œæ“ä½œã€‚</li><li><strong>volatile çš„åŒé‡æ£€æŸ¥é”å®šæ¨¡å¼ï¼ˆDouble-Checked Lockingï¼‰ï¼š</strong> åœ¨éœ€è¦å»¶è¿Ÿåˆå§‹åŒ–å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨åŒé‡æ£€æŸ¥é”å®šæ¨¡å¼ç»“åˆ <strong><code>volatile</code></strong> å…³é”®å­—ï¼Œå¯ä»¥ç¡®ä¿çº¿ç¨‹å®‰å…¨æ€§ã€‚</li></ol><p>ScheduledExecutorServiceçš„ä¸»è¦ä½œç”¨å°±æ˜¯å¯ä»¥å°†å®šæ—¶ä»»åŠ¡ä¸çº¿ç¨‹æ± åŠŸèƒ½ç»“åˆä½¿ç”¨</p><ul><li><p>Javaä¸­å­˜åœ¨ä¸¤ç§é”æœºåˆ¶ï¼šsynchronizedå’ŒLockï¼ŒLockæ¥å£åŠå…¶å®ç°ç±»æ˜¯JDK5å¢åŠ çš„å†…å®¹</p><p><strong>synchronized:</strong>  Javaçš„å…³é”®å­—ï¼Œåœ¨jvmå±‚é¢ä¸Š                 <strong>Lock:</strong> æ˜¯ä¸€ä¸ªæ¥å£</p><p><strong>ç”¨æ³•</strong></p><p><strong>synchronized:</strong> åœ¨éœ€è¦åŒæ­¥çš„å¯¹è±¡ä¸­åŠ å…¥æ­¤æ§åˆ¶ï¼Œsynchronizedå¯ä»¥åŠ åœ¨æ–¹æ³•ä¸Šï¼Œä¹Ÿå¯ä»¥åŠ åœ¨ç‰¹å®šä»£ç å—ä¸­ï¼Œæ‹¬å·ä¸­è¡¨ç¤ºéœ€è¦é”çš„å¯¹è±¡ã€‚</p><p><strong>Lock:</strong> ä¸€èˆ¬ä½¿ç”¨<strong>ReentrantLock</strong>ç±»åšä¸ºé”ã€‚åœ¨åŠ é”å’Œè§£é”å¤„éœ€è¦é€šè¿‡lock()å’Œunlock()æ˜¾ç¤ºæŒ‡å‡ºã€‚æ‰€ä»¥ä¸€å®šè¦åœ¨finallyå—ä¸­å†™unlock()ä»¥é˜²æ­»é”ã€‚</p><p><strong>é”çš„é‡Šæ”¾</strong></p><p><strong>synchronized:</strong> 1ã€ä»¥è·å–é”çš„çº¿ç¨‹æ‰§è¡Œå®ŒåŒæ­¥ä»£ç ï¼Œé‡Šæ”¾é” 2ã€çº¿ç¨‹æ‰§è¡Œå‘ç”Ÿå¼‚å¸¸ï¼Œjvmä¼šè®©çº¿ç¨‹é‡Šæ”¾é”ã€‚åœ¨å‘ç”Ÿå¼‚å¸¸æ—¶å€™ä¼šè‡ªåŠ¨é‡Šæ”¾å æœ‰çš„é”ï¼Œå› æ­¤ä¸ä¼šå‡ºç°æ­»é”</p><p><strong>Lock:</strong> åœ¨finallyä¸­å¿…é¡»é‡Šæ”¾é”ï¼Œä¸ç„¶å®¹æ˜“é€ æˆçº¿ç¨‹æ­»é”ã€‚å¿…é¡»æ‰‹åŠ¨unlockæ¥é‡Šæ”¾é”ï¼Œå¯èƒ½å¼•èµ·æ­»é”çš„å‘ç”Ÿ</p><p><strong>é”çš„è·å–</strong></p><p><strong>synchronized:</strong> å‡è®¾Açº¿ç¨‹è·å¾—é”ï¼ŒBçº¿ç¨‹ç­‰å¾…ã€‚å¦‚æœAçº¿ç¨‹é˜»å¡ï¼ŒBçº¿ç¨‹ä¼šä¸€ç›´ç­‰å¾…</p><p><strong>Lock:</strong> åˆ†æƒ…å†µè€Œå®šï¼ŒLockæœ‰å¤šä¸ªé”è·å–çš„æ–¹å¼ï¼Œå¤§è‡´å°±æ˜¯å¯ä»¥å°è¯•è·å¾—é”ï¼Œçº¿ç¨‹å¯ä»¥ä¸ç”¨ä¸€ç›´ç­‰å¾…(å¯ä»¥é€šè¿‡tryLockåˆ¤æ–­æœ‰æ²¡æœ‰é”)</p><p><strong>é”çš„çŠ¶æ€</strong>         <strong>synchronized:</strong> æ— æ³•åˆ¤æ–­                           <strong>Lock:</strong> å¯ä»¥åˆ¤æ–­</p><ul><li>Lockå¯ä»¥æé«˜å¤šä¸ªçº¿ç¨‹è¿›è¡Œè¯»æ“ä½œçš„æ•ˆç‡ã€‚ï¼ˆå¯ä»¥é€šè¿‡readwritelockå®ç°è¯»å†™åˆ†ç¦»ï¼‰</li><li><strong>åœ¨èµ„æºç«äº‰ä¸æ˜¯å¾ˆæ¿€çƒˆçš„æƒ…å†µä¸‹ï¼ŒSynchronizedçš„æ€§èƒ½è¦ä¼˜äºReetrantLockï¼Œä½†æ˜¯åœ¨èµ„æºç«äº‰å¾ˆæ¿€çƒˆçš„æƒ…å†µä¸‹ï¼ŒSynchronizedçš„æ€§èƒ½ä¼šä¸‹é™å‡ åå€ï¼Œä½†æ˜¯ReetrantLockçš„æ€§èƒ½èƒ½ç»´æŒå¸¸æ€ï¼›</strong></li><li>ReentrantLockæä¾›äº†å¤šæ ·åŒ–çš„åŒæ­¥ï¼Œæ¯”å¦‚æœ‰æ—¶é—´é™åˆ¶çš„åŒ æ­¥ï¼Œå¯ä»¥è¢«Interruptçš„åŒæ­¥ï¼ˆsynchronizedçš„åŒæ­¥æ˜¯ä¸èƒ½Interruptçš„ï¼‰ç­‰ã€‚åœ¨èµ„æºç«äº‰ä¸æ¿€çƒˆçš„æƒ…å½¢ä¸‹ï¼Œæ€§èƒ½ç¨å¾®æ¯”synchronizedå·®ç‚¹ç‚¹ã€‚ä½†æ˜¯å½“åŒæ­¥éå¸¸æ¿€çƒˆçš„æ—¶å€™ï¼Œsynchronizedçš„æ€§èƒ½ä¸€ä¸‹å­èƒ½ä¸‹é™å¥½å‡ åå€ã€‚è€ŒReentrantLockç¡®è¿˜èƒ½ç»´æŒå¸¸æ€ã€‚å…¬å¹³é”æœºåˆ¶ã€‚ä»€ä¹ˆå«å…¬å¹³é”å‘¢ï¼Ÿä¹Ÿå°±æ˜¯åœ¨é”ä¸Šç­‰å¾…æ—¶é—´æœ€é•¿çš„çº¿ç¨‹å°†è·å¾—é”çš„ä½¿ç”¨æƒã€‚é€šä¿—çš„ç†è§£å°±æ˜¯è°æ’é˜Ÿæ—¶é—´æœ€é•¿è°å…ˆæ‰§è¡Œè·å–é”ã€‚</li></ul><p>â‘¡ æ˜¯å¦å¯æ‰‹åŠ¨é‡Šæ”¾<br>synchronized ä¸éœ€è¦ç”¨æˆ·å»æ‰‹åŠ¨é‡Šæ”¾é”ï¼Œsynchronized ä»£ç æ‰§è¡Œå®Œåç³»ç»Ÿä¼šè‡ªåŠ¨è®©çº¿ç¨‹é‡Šæ”¾å¯¹é”çš„å ç”¨ï¼› ReentrantLockåˆ™éœ€è¦ç”¨æˆ·å»æ‰‹åŠ¨é‡Šæ”¾é”ï¼Œå¦‚æœæ²¡æœ‰æ‰‹åŠ¨é‡Šæ”¾é”ï¼Œå°±å¯èƒ½å¯¼è‡´æ­»é”ç°è±¡ã€‚ä¸€èˆ¬é€šè¿‡lock()å’Œunlock()æ–¹æ³•é…åˆtry/finallyè¯­å¥å—æ¥å®Œæˆï¼Œä½¿ç”¨é‡Šæ”¾æ›´åŠ çµæ´»ã€‚</p><p>â‘¢ æ˜¯å¦å¯ä¸­æ–­<br>synchronizedæ˜¯ä¸å¯ä¸­æ–­ç±»å‹çš„é”ï¼Œé™¤éåŠ é”çš„ä»£ç ä¸­å‡ºç°å¼‚å¸¸æˆ–æ­£å¸¸æ‰§è¡Œå®Œæˆï¼› ReentrantLockåˆ™å¯ä»¥ä¸­æ–­ï¼Œå¯é€šè¿‡trylock(long timeout,TimeUnit unit)è®¾ç½®è¶…æ—¶æ–¹æ³•æˆ–è€…å°†lockInterruptibly()æ”¾åˆ°ä»£ç å—ä¸­ï¼Œè°ƒç”¨interruptæ–¹æ³•è¿›è¡Œä¸­æ–­ã€‚</p><p>â‘£ æ˜¯å¦å…¬å¹³é”</p><p>æ‰€ä»¥å…¬å¹³å’Œéå…¬å¹³çš„åŒºåˆ«å°±æ˜¯ï¼šçº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æ—¶ï¼Œæ˜¯å¦ä¼šå»å°è¯•è·å–é”ã€‚</p><p>**å¦‚æœä¼šå°è¯•è·å–é”ï¼Œé‚£å°±æ˜¯éå…¬å¹³çš„ã€‚å¦‚æœä¸ä¼šå°è¯•è·å–é”ï¼Œç›´æ¥è¿›é˜Ÿåˆ—ï¼Œå†ç­‰å¾…å”¤é†’ï¼Œé‚£å°±æ˜¯å…¬å¹³çš„ã€‚**synchronizedä¸ºéå…¬å¹³é” ReentrantLockåˆ™å³å¯ä»¥é€‰å…¬å¹³é”ä¹Ÿå¯ä»¥é€‰éå…¬å¹³é”ï¼Œé€šè¿‡æ„é€ æ–¹æ³•new ReentrantLockæ—¶ä¼ å…¥booleanå€¼è¿›è¡Œé€‰æ‹©ï¼Œä¸ºç©ºé»˜è®¤falseéå…¬å¹³é”ï¼Œtrueä¸ºå…¬å¹³é”ã€‚</p><p>å¯é‡å…¥é”æ˜¯æŒ‡åŒä¸€ä¸ªçº¿ç¨‹å¦‚æœé¦–æ¬¡è·å¾—äº†è¿™æŠŠé”ï¼Œé‚£ä¹ˆå› ä¸ºå®ƒæ˜¯è¿™æŠŠé”çš„æ‹¥æœ‰è€…ï¼Œå› æ­¤ æœ‰æƒåˆ©å†æ¬¡è·å–è¿™æŠŠé”</p><p>å…¬å¹³é”æ˜¯ç­‰å¾…é”çš„çº¿ç¨‹<strong>ä¸ä¼šé¥¿æ­»ã€‚ç¼ºç‚¹æ˜¯æ•´ä½“ååæ•ˆç‡ç›¸å¯¹éå…¬å¹³é”è¦ä½</strong>ï¼Œç­‰å¾…é˜Ÿåˆ—ä¸­é™¤ç¬¬ä¸€ä¸ªçº¿ç¨‹ä»¥å¤–çš„æ‰€æœ‰çº¿ç¨‹éƒ½ä¼šé˜»å¡ï¼ŒCPUå”¤é†’é˜»å¡çº¿ç¨‹çš„å¼€é”€æ¯”éå…¬å¹³é”å¤§ã€‚</p><p>éå…¬å¹³é”çš„ä¼˜ç‚¹æ˜¯å¯ä»¥å‡å°‘å”¤èµ·çº¿ç¨‹çš„å¼€é”€ï¼Œæ•´ä½“çš„ååæ•ˆç‡é«˜ï¼Œå› ä¸ºçº¿ç¨‹æœ‰å‡ ç‡ä¸é˜»å¡ç›´æ¥è·å¾—é”ï¼ŒCPUä¸å¿…å”¤é†’æ‰€æœ‰çº¿ç¨‹ã€‚ç¼ºç‚¹æ˜¯å¤„äºç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹å¯èƒ½ä¼šé¥¿æ­»ï¼Œæˆ–è€…ç­‰å¾ˆä¹…æ‰ä¼šè·å¾—é”ã€‚</p><p><strong>è°ƒåº¦</strong></p><p><strong>synchronized:</strong> ä½¿ç”¨Objectå¯¹è±¡æœ¬èº«çš„wait ã€notifyã€notifyAllè°ƒåº¦æœºåˆ¶</p><p><strong>Lock:</strong> å¯ä»¥ä½¿ç”¨Conditionè¿›è¡Œçº¿ç¨‹ä¹‹é—´çš„è°ƒåº¦</p><p><strong>åº•å±‚å®ç°</strong></p><p><strong>synchronized:</strong> åº•å±‚ä½¿ç”¨æŒ‡ä»¤ç æ–¹å¼æ¥æ§åˆ¶é”çš„ï¼Œæ˜ å°„æˆå­—èŠ‚ç æŒ‡ä»¤å°±æ˜¯å¢åŠ æ¥ä¸¤ä¸ªæŒ‡ä»¤ï¼šmonitorenterå’Œmonitorexitã€‚å½“çº¿ç¨‹æ‰§è¡Œé‡åˆ°<a href="https://www.zhihu.com/search?q=monitorenter%E6%8C%87%E4%BB%A4&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A%22180469207%22%7D">monitorenteræŒ‡ä»¤</a>æ—¶ä¼šå°è¯•è·å–å†…ç½®é”ï¼Œå¦‚æœè·å–é”åˆ™é”è®¡æ•°å™¨+1ï¼Œå¦‚æœæ²¡æœ‰è·å–é”åˆ™é˜»å¡ï¼›å½“é‡åˆ°monitorexitæŒ‡ä»¤æ—¶é”è®¡æ•°å™¨-1ï¼Œå¦‚æœè®¡æ•°å™¨ä¸º0åˆ™é‡Šæ”¾é”ã€‚</p><p><strong>Lock:</strong> åº•å±‚æ˜¯CASä¹è§‚é”ï¼Œä¾èµ–AbstractQueuedSynchronizerç±»ï¼ŒæŠŠæ‰€æœ‰çš„<a href="https://www.zhihu.com/search?q=%E8%AF%B7%E6%B1%82%E7%BA%BF%E7%A8%8B&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A%22180469207%22%7D">è¯·æ±‚çº¿ç¨‹</a>æ„æˆä¸€ä¸ªCLHé˜Ÿåˆ—ã€‚è€Œå¯¹è¯¥é˜Ÿåˆ—çš„æ“ä½œå‡é€šè¿‡Lock-Freeï¼ˆCASï¼‰æ“ä½œã€‚</p><p>å…³äºReentrantLockå’ŒCASçš„å…³ç³»ï¼šReentrantLockæ˜¯ä¸€ä¸ªåŸºäºCASçš„æ‚²è§‚é”ï¼Œè€Œä¸æ˜¯ä¹è§‚é”ã€‚ReentrantLockä½¿ç”¨CASæ“ä½œæ¥å®ç°é”çš„è·å–å’Œé‡Šæ”¾ï¼Œä½†å®ƒçš„è¡Œä¸ºæ˜¯æ‚²è§‚çš„ï¼Œå› ä¸ºå®ƒè¦æ±‚çº¿ç¨‹åœ¨è®¿é—®å…±äº«èµ„æºä¹‹å‰è·å¾—é”ã€‚CASæœ¬èº«æ˜¯ä¸€ç§ä¹è§‚é”çš„å®ç°æ–¹å¼ï¼Œä½†ReentrantLockä½¿ç”¨CASæ¥ä¿è¯äº’æ–¥æ€§ï¼Œå› æ­¤å®ƒè¢«å½’ç±»ä¸ºæ‚²è§‚é”ã€‚æ€»çš„æ¥è¯´ï¼Œä¹è§‚é”å’Œæ‚²è§‚é”æ˜¯ä¸¤ç§ä¸åŒçš„å¹¶å‘æ§åˆ¶ç­–ç•¥ï¼Œå®ƒä»¬åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è§£å†³äº†ç«äº‰é—®é¢˜ï¼Œä½†å®ƒä»¬çš„ä½¿ç”¨åœºæ™¯å’Œå®ç°æ–¹å¼æœ‰æ‰€ä¸åŒã€‚ CASæ˜¯ä¸€ç§ç”¨äºå®ç°ä¹è§‚é”çš„åŸå­æ“ä½œï¼Œè€ŒReentrantLockæ˜¯ä¸€ç§åŸºäºCASçš„æ‚²è§‚é”ã€‚</p><ol><li><strong>ä¹è§‚é”</strong>ï¼šä¹è§‚é”æ˜¯ä¸€ç§å‡è®¾åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸ä¼šå‘ç”Ÿå†²çªçš„é”ã€‚å®ƒä¸ä¼šåœ¨è®¿é—®å…±äº«èµ„æºä¹‹å‰è·å–é”ï¼Œè€Œæ˜¯åœ¨æ›´æ–°å…±äº«èµ„æºæ—¶è¿›è¡Œæ£€æŸ¥ã€‚å¦‚æœæ£€æµ‹åˆ°å…¶ä»–çº¿ç¨‹å·²ç»æ›´æ–°äº†å…±äº«èµ„æºï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹å¯èƒ½éœ€è¦é‡è¯•æˆ–è€…é‡‡å–å…¶ä»–æªæ–½æ¥å¤„ç†å†²çªã€‚ä¹è§‚é”é€šå¸¸ç”¨äºå¤šè¯»çš„åœºæ™¯ï¼Œå¯ä»¥æé«˜ååé‡ã€‚</li><li><strong>æ‚²è§‚é”</strong>ï¼šæ‚²è§‚é”æ˜¯ä¸€ç§å‡è®¾åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¼šå‘ç”Ÿå†²çªçš„é”ã€‚å®ƒåœ¨è®¿é—®å…±äº«èµ„æºä¹‹å‰è·å–é”ï¼Œå¹¶å‡å®šå…¶ä»–çº¿ç¨‹ä¼šå¹²æ‰°ã€‚æ‚²è§‚é”é€šå¸¸ç”¨äºå†™å…¥æ“ä½œï¼Œä»¥ç¡®ä¿åœ¨å†™å…¥å…±äº«èµ„æºæ—¶ä¸ä¼šå‘ç”Ÿå†²çªã€‚</li></ol><p>ä¹è§‚é”çš„å®ç°æ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼šCASæœºåˆ¶å’Œç‰ˆæœ¬å·æœºåˆ¶ã€‚</p><p>å¯¹äºABAé—®é¢˜ï¼Œæ¯”è¾ƒæœ‰æ•ˆçš„æ–¹æ¡ˆæ˜¯å¼•å…¥ç‰ˆæœ¬å·ï¼Œå†…å­˜ä¸­çš„å€¼æ¯å‘ç”Ÿä¸€æ¬¡å˜åŒ–ï¼Œç‰ˆæœ¬å·éƒ½+1ï¼›åœ¨è¿›è¡ŒCASæ“ä½œæ—¶ï¼Œä¸ä»…æ¯”è¾ƒå†…å­˜ä¸­çš„å€¼ï¼Œä¹Ÿä¼šæ¯”è¾ƒç‰ˆæœ¬å·ï¼Œåªæœ‰å½“äºŒè€…éƒ½æ²¡æœ‰å˜åŒ–æ—¶ï¼ŒCASæ‰èƒ½æ‰§è¡ŒæˆåŠŸã€‚Javaä¸­çš„AtomicStampedReferenceç±»ä¾¿æ˜¯ä½¿ç”¨ç‰ˆæœ¬å·æ¥è§£å†³ABAé—®é¢˜çš„ã€‚</p><p>é™¤äº†CASï¼Œç‰ˆæœ¬å·æœºåˆ¶ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°ä¹è§‚é”ã€‚ç‰ˆæœ¬å·æœºåˆ¶çš„åŸºæœ¬æ€è·¯æ˜¯åœ¨æ•°æ®ä¸­å¢åŠ ä¸€ä¸ªå­—æ®µversionï¼Œè¡¨ç¤ºè¯¥æ•°æ®çš„ç‰ˆæœ¬å·ï¼Œæ¯å½“æ•°æ®è¢«ä¿®æ”¹ï¼Œç‰ˆæœ¬å·åŠ 1ã€‚å½“æŸä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®æ—¶ï¼Œå°†è¯¥æ•°æ®çš„ç‰ˆæœ¬å·ä¸€èµ·æŸ¥å‡ºæ¥ï¼›å½“è¯¥çº¿ç¨‹æ›´æ–°æ•°æ®æ—¶ï¼Œåˆ¤æ–­å½“å‰ç‰ˆæœ¬å·ä¸ä¹‹å‰è¯»å–çš„ç‰ˆæœ¬å·æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´æ‰è¿›è¡Œæ“ä½œã€‚</p></li></ul><p>æœ€ç»å…¸çš„åˆ†å¸ƒå¼é”æ˜¯å¯é‡å…¥çš„å…¬å¹³é”ï¼Œå¯é‡å…¥é”ï¼ˆReentrant Lockï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„é”ï¼Œå…è®¸åŒä¸€ä¸ªçº¿ç¨‹å¤šæ¬¡è·å–åŒä¸€ä¸ªé”è€Œä¸ä¼šå¯¼è‡´æ­»é”ã€‚è¿™ç§é”å¯ä»¥å¤šæ¬¡è¢«åŒä¸€çº¿ç¨‹è·å–ï¼Œè€Œä¸ä¼šå› ä¸ºåŒä¸€çº¿ç¨‹çš„é‡å¤è·å–è€Œé˜»å¡è‡ªå·±ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;why you need to learn å¹¶å‘ä¸å¤šçº¿ç¨‹?&lt;br&gt;
æœ€ç›´è§‚çš„æœåŠ¡å™¨å¤„ç†å¤šå®¢æˆ·ç«¯è®¿é—®çš„æ–¹å¼ï¼Œå°±æ˜¯ä¸ºæ¯ä¸ªè¿æ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ–è€…æ›´æ—©æœŸæ“ä½œç³»ç»Ÿé‡Œç”šè‡³æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚è™½ç„¶çº¿ç¨‹æ¯”è¿›ç¨‹æ›´è½»é‡ï¼Œåˆ‡æ¢æˆæœ¬ä¹Ÿæ›´ä½ï¼Œä½†æ¯è¿æ¥ä¸€ä¸ªçº¿ç¨‹åœ¨å¹¶å‘é‡å¤§æ—¶ä»ä¼šé¢ä¸´ä¸¤ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;p&gt;çº¿ç¨‹</summary>
      
    
    
    
    <category term="è®¡ç®—æœºç§‘å­¦" scheme="https://stan370.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/"/>
    
    
    <category term="è®¡ç®—æœºåŸºç¡€" scheme="https://stan370.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    <category term="å¤šçº¿ç¨‹" scheme="https://stan370.github.io/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>How blockchain evolves to a new world order?</title>
    <link href="https://stan370.github.io/2025/06/08/blockchain-overview/"/>
    <id>https://stan370.github.io/2025/06/08/blockchain-overview/</id>
    <published>2025-06-08T14:25:07.000Z</published>
    <updated>2025-06-10T09:51:10.491Z</updated>
    
    <content type="html"><![CDATA[<h1>A new world order</h1><p>In the world of crypto, few figures have shaped its philosophical and technical trajectory as deeply as Vitalik Buterin, the co-founder of Ethereum. Beyond the whitepaper that birthed the worldâ€™s most programmable blockchain, Vitalikâ€™s prolific blog output over the years has become a canon for developers, economists, and visionaries in the decentralized ecosystem.<br>For buildersâ€”especially those designing agent platforms, decentralized governance models, or crypto-powered coordination systemsâ€”these writings form a strategic blueprint. Build systems that are not only redundant in infrastructure but also politically and logically anti-fragile. Consider multisig governance, on-chain voting, and modular designs.</p><p>Total Value Locked (TVL) on Ethereum stands at <strong>$61.3â€¯billion</strong>, dwarfing competitorsâ€”Ethereum holds ~45% of DeFi capital versus Solanaâ€™s ~5% (<a href="https://defillama.com/chain/Ethereum">source</a>).</p><p>Liquid staking (LST) on Ethereum locks <strong>13.7â€¯million ETH (~$34.4B)</strong>.</p><p>ETH chain records <strong>~$676K/day in fees</strong> and nearly <strong>$1â€¯billion in 24-hour DEX volume</strong> (<a href="https://defillama.com/chain/Ethereum">source</a>).</p><p>See Vitalikâ€™s recent blogs:<br><a href="https://vitalik.eth.limo/general/2024/05/17/decentralization.html">The near and mid-term future of improving Ethereum</a><br><a href="https://vitalik.eth.limo/general/2024/10/17/futures2.html">Possible futures of Ethereum, Part 2</a></p><p><strong>This scope matters.</strong></p><h2 id="Defi-hatched">Defi hatched</h2><p>Enabling bold scaling ideas and ecosystem coordination requires such scale. Itâ€™s the bedrock on which Vitalikâ€™s decentralization blueprint stands.</p><p>These numbers matter not as vanity metrics but as hard evidence: much of what Vitalik Buterin proposes in his blog writingsâ€”modular scaling, credible neutrality, permissionless governanceâ€”depends on Ethereum sustaining this role as the settlement and security layer for global crypto coordination. When Vitalik speaks about â€œThe Meaning of Decentralization,â€ he doesnâ€™t just refer to network architecture but to the political and epistemic dimensions of control: who defines protocol values, who updates client software, and who can contest outcomes. That meaning only gains traction when backed by thousands of actively verifying nodes, diverse client implementations, and real capital at stake.</p><p>Projects like Uniswap and other DEXs didnâ€™t just emerge spontaneouslyâ€”they were incubated in a unique intersection of open research, early crypto capital, and public infrastructure built on Ethereum. Understanding how they were hatched and funded reveals the mechanics of permissionless innovation, the catalytic role of public goods, and the quiet but powerful function of narrative leverage.</p><p>Uniswap began as a Reddit comment by Vitalik Buterin in 2016, suggesting the idea of an automated market maker (AMM) based on constant product formulas. Hayden Adams, an unemployed mechanical engineer at the time, decided to implement the idea in 2017, teaching himself Solidity and building the protocolâ€™s early version. He received a $65,000 grant from the Ethereum Foundation in 2018, which helped him finish v1. Notably, Uniswap was one of the first examples of a successful public good funded entirely by EF grants before a token existed.</p><p>That original grant served a catalytic role, but the real growth came when Uniswap launched its protocol and began attracting liquidity. Paradigm, one of cryptoâ€™s leading VC firms, later invested in Uniswap Labs, helping it scale from a pure protocol to a company with developers, designers, and BD capacity. Paradigm reportedly led a $11M Series A round in 2020. Still, even as a venture-backed company, Uniswap the protocol has remained free and openâ€”anyone can fork the contracts and build on top. This public nature was essential to its early network effects.</p><p>The larger ecosystem of DEXs followed similar but slightly varied paths. Curve Finance, another AMM optimized for stablecoin swaps, was started by Michael Egorov, a physicist and software engineer. Unlike Uniswap, Curve focused early on tokenomics, launching the CRV token with an intricate governance and staking model. It began with relatively low initial funding, but quickly grew via liquidity mining, incentivizing users to provide capital.<br>So, the DeFi ecosystem was not built with the permission of capital allocatorsâ€”it emerged from a combination of ideas freely shared, public infrastructure like Ethereum and IPFS, and mechanisms like grants, liquidity mining, and retroactive public goods funding. What makes it novel is not just the technology, but how the capital formation and innovation pipeline itself was decentralized.</p><h2 id="Philosophy-and-vision">Philosophy and vision</h2><p>When I look at his posts, I think this is common for <strong>geniuses</strong> - itâ€™s not so much about being brilliant and solving whatever is at hand as it is a ton of hard work reading, writing (to clarify ideas) and brainstorm with others any thing that pops up in your head that may be relevant or applicable. Thereâ€™s always something useful that comes out of it and eventually those things accumulate to what you, and others, iterate into working solutions.</p><p><img src="https://vitalik.eth.limo/images/end/cryptomap.drawio.png" alt="This map"> itself is an intentional 50/50 mix of idealism and â€œdescribing realityâ€. Itâ€™s intended to show four major constituencies of the ecosystem that can have a supportive and symbiotic relationship with each other. Many crypto institutions in practice are a mix of all four.</p><p>Each of the four parts has something key to offer to the machine as a whole:</p><p>Token holders and defi users contribute greatly to financing the whole thing, which has been key to getting technologies like consensus algorithms and zero-knowledge proofs to production quality.<br>Intellectuals provide the ideas to make sure that the space is actually doing something meaningful.<br>Builders bridge the gap and try to build applications that serve users and put the ideas into practice.<br>Pragmatic users are the people we are ultimately serving.</p><p>Remember that todayâ€™s blockchains are by definition developed by people with no prior blockchain experience. We all learned what we know from just digging into it.</p><p>So if you want to understand where blockchains are going, donâ€™t start with whitepapers or Twitter threads. Look at Vitalikâ€™s postsâ€”but read them through the lens of what the data says. The writing is not a prediction. Itâ€™s a description of whatâ€™s already unfolding. If youâ€™re building in Web3, the frontier is more than technical. Itâ€™s moral, economic, and social. Vitalikâ€™s blog is not just a technical archive; itâ€™s a guide to building a new kind of world. Read it not just as a referenceâ€”but as a call to action.</p><p>â€œThe tools we build today encode the freedoms or limitations of tomorrow.â€ â€” V.B.</p><p>Further Reading: <a href="https://vitalik.eth.limo/">vitalik.ca</a></p><p>The following are <strong>Vitalikâ€™s most influential and discussed blog posts</strong>, categorized by topic and with brief analysis, I highly recommend:</p><ol><li><strong><a href="https://vitalik.ca/general/2017/02/28/decentralization.html">The Meaning of Decentralization (2017)</a></strong><br><strong>Keywords: logical decentralization, political decentralization, architectural decentralization</strong></li></ol><ul><li><p>Explained that decentralization is not just about node distribution, but also includes â€œwho controls whatâ€ and â€œdistribution of failure pointsâ€.</p></li><li><p>It has been cited countless times and is the philosophical starting point of the decentralized narrative of Web3.</p></li></ul><ol start="2"><li><strong><a href="https://ethereum.org/en/whitepaper/">Ethereum: Platform for Smart Contracts (2014)</a></strong></li></ol><ul><li><p>Not a blog, but equally important. This is the Ethereum white paper he wrote, which proposes the vision of â€œworld computerâ€.</p></li><li><p>If you havenâ€™t read it, many core designs of Ethereum are difficult to understand.</p></li></ul><ol start="3"><li><strong><a href="https://vitalik.ca/general/2021/04/07/sharding.html">Why sharding is great: demystifying the technical properties</a></strong></li></ol><ul><li><p>A popular explanation of the design ideas of Ethereum sharding.</p></li><li><p>It is crucial to understand the evolution roadmap of Ethereum scalability.</p></li></ul><ol><li><strong><a href="https://vitalik.ca/general/2022/09/20/daos.html">DAOs are not corporations: where decentralization in autonomous organizations matters</a></strong></li></ol><ul><li><p>In-depth analysis of the differences between DAO governance models and traditional companies.</p></li><li><p>DAO is more suitable in scenarios of â€œmarket externalitiesâ€, â€œhigh collaborationâ€ and â€œhigh divergenceâ€.</p></li></ul><ol start="5"><li><strong><a href="https://vitalik.ca/general/2019/12/07/quadratic.html">Quadratic Funding and Quadratic Voting</a></strong></li></ol><ul><li><p>Promote the concept of the secondary mechanism of <strong>Radical Markets</strong> and conduct experiments in combination with Gitcoin.</p></li><li><p>Emphasize that the strong preferences of a minority can be expressed fairly to avoid violent voting by large households.</p></li></ul><ol start="6"><li><strong><a href="https://vitalik.ca/general/2020/08/10/credibleneutrality.html">Credible Neutrality as a Guiding Principle</a></strong></li></ol><ul><li>Proposed â€œcredible neutralityâ€ (Credible Neutrality), applicable to chains, oracles, and protocol rules.</li><li>One of the most recognized design philosophies in the crypto field.</li></ul><ol start="7"><li><strong><a href="https://vitalik.ca/general/2021/01/05/rollup.html">An Incomplete Guide to Rollups</a></strong></li></ol><ul><li>Systematically summarizes the pros and cons of optimistic rollups and zk rollups.</li><li>Promoted Ethereumâ€™s â€œmodular blockchainâ€ paradigm shift.</li></ul><ol start="8"><li><strong><a href="https://vitalik.ca/general/2021/12/06/endgame.html">Endgame (2021)</a></strong></li></ol><ul><li>Propose the scalability, security, and endgame of centralized game of future blockchain architecture.</li><li>Assume that there is a super decentralized blockchain, but it must also rely on centralized building blocks (like sequencers).</li><li>Deeply reveal the future direction of L1-L2.</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;A new world order&lt;/h1&gt;
&lt;p&gt;In the world of crypto, few figures have shaped its philosophical and technical trajectory as deeply as Vitali</summary>
      
    
    
    
    
    <category term="blockchain" scheme="https://stan370.github.io/tags/blockchain/"/>
    
  </entry>
  
  <entry>
    <title>The Curse of Meritocracy</title>
    <link href="https://stan370.github.io/2025/04/13/Curse/"/>
    <id>https://stan370.github.io/2025/04/13/Curse/</id>
    <published>2025-04-13T08:39:20.000Z</published>
    <updated>2025-07-29T09:51:27.947Z</updated>
    
    <content type="html"><![CDATA[<p>From a young age, many of us are told: â€œIf you work hard and prove yourself, you will be rewarded.â€</p><p>We are steeped in the gospel of <strong>meritocracy</strong> from childhood. Study diligently, excel academically, collect the accolades â€“ the path to a successful future, we are assured, is paved with quantifiable effort and talent. As students aiming for demanding fields like Computer Engineering, this <strong>ethos</strong> becomes an intense reality. School morphs into an arena for performance, knowledge a means to an end measured in grades and rankings, and the ultimate prize: admission into prestigious institutions.</p><p>I bought into this promise wholeheartedly. I learned the rules, played the game, and poured years into mastering the metrics. And by the systemâ€™s own standards, I succeeded. Multiple Masterâ€™s offers in Computer Engineering from international universities felt like the culmination, the hard-earned validation.</p><p>**The Twist<br>**<br>However, life doesnâ€™t always go as expected. Thatâ€™s it.</p><p>I didnâ€™t plan to take a <strong>gap year</strong>, but I saw it coming.</p><p>Somewhere in this journey, I started questioning something deeper â€” not just <em>why itâ€™s hard to get a job in tech right now</em>, but <em>why it feels so personal</em>.</p><p>This reflection led me to confront a much bigger issue: the curse of meritocracy.<br>In a <em>true</em> meritocracy, these things should translate into opportunities, right?</p><ul><li>Get good grades</li><li>Win competitions</li><li>Find a job<br>So when job offers donâ€™t come in â€” or only come in under unfair terms â€” weâ€™re left confused, maybe even ashamed. â€œDid I not work hard enough?â€ becomes an internal voice of blame.</li></ul><p>Here lies the curse: when success is framed as purely based on merit, failure feels entirely like a personal defect.</p><p>But the truth is more complex. The job market is cyclical. Recruiters often filter by brand names, not by capability. Many good roles are never posted publicly. Policies, market recessions, and insider referrals all distort the game. This isnâ€™t a complaint â€” itâ€™s a reality check.</p><p>Merit is just one variable in a messy, nonlinear equation. The job market was still competitive, and societal expectations hadnâ€™t vanished. But something fundamental had shifted within me. I used to think not getting into a FAANG company meant I was behind.</p><p>But Is it really matter that i solve the leetcode in time in a interview?</p><p>For a while, I thought the solution was simple: solve more Leetcode problems, and do it faster. I treated technical interviews as puzzles I just needed to crack.</p><p>But hereâ€™s what I learned: solving algorithms under a time limit is a skill, but itâ€™s not the only one that matters.</p><p>What it doesnâ€™t prove in a person:<br>That youâ€™re a good software engineer.</p><p>That you can maintain and refactor complex codebases.</p><p>That you can build user-facing systems with long-term impact.</p><p>That you think creatively or critically beyond known patterns.</p><p>I think collaborating in hackathons gave me resilience, not just resume. Building tools and small games that someone actually use feels good.</p><p>Trying, failing, and reflecting on user feedback have taught me far more than traditional coursework ever did. I learned to build before I felt ready, to listen more than explain, and to treat failure not as a signal to stop, but as a prompt to iterate more fast.</p><p>To truly understand feedback, you have to step into the userâ€™s shoes. They are the ultimate arbiters of value. What seems intuitive to you might be completely confusing to them. What you thought was a killer feature might be ignored, while a minor element becomes unexpectedly popular.</p><p>That kind of growth doesnâ€™t show up on a transcript â€” but it shapes the kind of engineer, teammate, and thinker Iâ€™ve become.</p><p>Meritocracy told me to chase validation. Reality taught me to chase growth. It equates our human value with our output, fosters crippling anxiety, and can alienate us from our own genuine interests and sense of self. I didnâ€™t magically have all the answers, nor was I suddenly immune to the pressures of the world.</p><p>**To Others on a Similar Path<br>**<br>If youâ€™re always feel being left, or struggling to find your place â€” youâ€™re not behind. Youâ€™re just not playing a zero-sum game anymore.</p><p>Gap Year was transformative for me because it existed outside the metrics of the standardize life I should live. I didnâ€™t magically have all the answers, nor was I suddenly immune to the pressures of the world in the past 2 years. But something fundamental had shifted within me.</p><p>Iâ€™m still try to find the â€œrightâ€ job â€” but Iâ€™m no longer hunting approval. I think the most significant æˆé•¿ (growth) came from stepping outside the achievement framework altogether and find your own way of success.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;From a young age, many of us are told: â€œIf you work hard and prove yourself, you will be rewarded.â€&lt;/p&gt;
&lt;p&gt;We are steeped in the gospel o</summary>
      
    
    
    
    
    <category term="feelings" scheme="https://stan370.github.io/tags/feelings/"/>
    
    <category term="personal growth" scheme="https://stan370.github.io/tags/personal-growth/"/>
    
  </entry>
  
  <entry>
    <title>Learn Rust</title>
    <link href="https://stan370.github.io/2025/04/08/rust/"/>
    <id>https://stan370.github.io/2025/04/08/rust/</id>
    <published>2025-04-08T14:57:19.000Z</published>
    <updated>2025-05-21T07:20:29.055Z</updated>
    
    <content type="html"><![CDATA[<p>Recently, I applied for a project in Tor organization, which aims to reimplement the** <code>metrics-lib</code> **in Rust, maintaining the same functionality while leveragingÂ Rustâ€™s advantages in terms of performance, memory safety, and concurrency. This aligns with the Tor Projectâ€™s broader initiative to modernize the metrics pipeline.**The goal of this project is to rewrite the current Java-based Tor Metrics Library in Rust. This library is a crucial component for parsing and analyzing Tor network descriptors used by various services and researchers. By reimplementing the library in Rust, we aim to improve performance, take advantage of Rustâ€™s modern language features, and provide a more ergonomic API. This rewrite will also allow the Network Health Team (and others) to migrate some of their services to Rust. In addition to replicating current features, the new library will include some features from the DescriptorParser for exporting parsed descriptor data into formats like CSV, Parquet, or PostgreSQL tables, thereby enabling more advanced integrations and analysis capabilities.<br>The rust rewrite should provide the <strong>same</strong> parsing and validation functionalities provided by metrics-lib and in addition allow <strong>exporting</strong> of the documents in some external storage, like parquet files to be saved into object storage or a table on a postgresql database.</p><p>To modernize and improve maintainability, performance, and safety, this proposal outlines a full re-implementation of the library inÂ <strong>Rust</strong>, a systems programming language that offersÂ <strong>memory safety</strong>,Â <strong>zero-cost abstractions</strong>, andÂ <strong>better integration with modern data pipelines</strong>. Such as:</p><ul><li>Use Rustâ€™s ownership system for safe memory management</li><li>Implement zero-copy parsing where possible</li></ul><table><thead><tr><th><strong>Layer</strong></th><th><strong>Tech Stack</strong></th></tr></thead><tbody><tr><td>Language</td><td>Rust</td></tr><tr><td>Network IO</td><td><code>reqwest</code>, <code>hyper</code>, <code>tokio</code></td></tr><tr><td>Parsing</td><td><code>nom</code>, <code>pest</code></td></tr><tr><td>Storage Output</td><td><code>parquet</code>, <code>serde</code>, <code>postgres</code></td></tr><tr><td>Testing &amp; CI/CD</td><td><code>cargo test</code>, GitLab CI/CD</td></tr><tr><td>Docs &amp; Linting</td><td><code>rustdoc</code>, <code>clippy</code>, <code>rustfmt</code></td></tr></tbody></table><h3 id="2-1-Original-structure">2.1 Original structure</h3><p>The library has evolved significantly from version 1.0.0 to 2.26.0, over the past 10 years.</p><p>Key features include:</p><ol><li><strong>Data Sources:</strong><ul><li>The library primarily targets data archived by <strong>CollecTor</strong> (<code>collector.torproject.org</code>).</li><li>This data is typically stored in compressed tar archives (<code>.tar.xz</code>, <code>.tar.gz</code>, <code>.tar</code>) containing numerous individual data files.</li><li>It can also process individual, unarchived data files.</li></ul></li><li><strong>Supported Data Types:</strong><code>metrics-lib</code> can parse several distinct types of Tor network measurement data:<ul><li><strong>Relay Descriptors:</strong><ul><li><code>server-descriptors</code>: Detailed information published by relays about themselves (IP, ports, keys, bandwidth, policies, etc.). Parsed into <code>RelayServerDescriptor</code>.</li><li><code>extra-info-descriptors</code>: Additional information published by relays (bandwidth history, geoip data, etc.). Parsed into <code>RelayExtraInfoDescriptor</code>.</li><li><code>microdescriptors</code>: Smaller, more frequently updated versions of relay information used for client bootstrapping. Parsed into <code>RelayMicrodescriptor</code>.</li></ul></li><li><strong>Network Status Consensus Documents:</strong><ul><li>These documents represent a snapshot of the Tor network state at a specific time, as agreed upon by the Directory Authorities.</li><li><code>microdesc-consensus</code>: Contains references to microdescriptors, relay flags, bandwidth weights, etc. Parsed into <code>RelayMicrodescriptorConsensus</code>. Contains <code>NetworkStatusEntry</code> objects for each relay listed.</li><li><code>relay-consensus</code>: (Less common now, but historically used) Similar but based on server descriptors. Parsed into <code>RelayServerDescriptorConsensus</code>.</li></ul></li><li><strong>Exit Lists:</strong><ul><li>Snapshots of relays identified as Exit nodes at a particular time, often generated by services like TorDNSEL. Parsed into <code>ExitList</code>. Contains <code>ExitNodeEntry</code> objects.</li></ul></li><li><strong>Bridge Data:</strong><ul><li>Similar data types but specifically for Tor Bridges (unlisted relays).</li><li><code>bridge-server-descriptors</code>: Parsed into <code>BridgeServerDescriptor</code>.</li><li><code>bridge-extra-info-descriptors</code>: Parsed into <code>BridgeExtraInfoDescriptor</code>.</li><li><code>bridge-statuses</code>: Analogous to consensus documents but for bridges, generated by the Bridge Authority. Parsed into <code>BridgeAuthoritativeStatus</code>.</li></ul></li></ul></li><li><strong>Core Design Pattern: Readers and Iterators:</strong><ul><li>The library uses a <strong>Reader</strong> pattern for each major data category (e.g., <code>DescriptorReader</code>, <code>ConsensusReader</code>, <code>ExitListReader</code>, <code>BridgeDescriptorReader</code>, <code>BridgeStatusReader</code>).</li><li>You instantiate a Reader, providing it the path to an archive file (e.g., <code>.tar.xz</code>) or a single data file.</li><li>The Reader acts as an <strong>iterator</strong>. You loop over the reader (e.g., <code>for desc in DescriptorReader(path):</code>), and it yields parsed data objects one by one.</li><li>This is efficient as it typically doesnâ€™t load the entire archive or all data into memory at once (it likely streams through the archive).</li></ul></li><li><strong>Data Representation: Structured Objects:</strong><ul><li>When the Reader yields an item, itâ€™s a object (like <code>RelayServerDescriptor</code>, <code>NetworkStatusEntry</code>, <code>ExitNodeEntry</code>).</li><li>These objects have <strong>attributes</strong> corresponding to the fields parsed from the raw data files (e.g., <code>desc.nickname</code>, <code>desc.fingerprint</code>, <code>consensus.valid_after_time</code>, <code>relay_status.flags</code>, <code>exit_node.exit_addresses</code>).</li></ul></li><li><strong>Key Features &amp; Benefits:</strong><ul><li><strong>Abstraction:</strong> Hides file format details (descriptor syntax, consensus structure, tarball handling).</li><li><strong>Automation:</strong> Easily process large numbers of files within archives.</li><li><strong>Structured Data:</strong> Provides convenient object-oriented access to data fields.</li><li><strong>Type Dispatching:</strong> The <code>DescriptorReader</code> automatically identifies the type of descriptor (<code>@type</code> annotation in the file) and returns the appropriate object type (<code>RelayServerDescriptor</code>, <code>RelayExtraInfoDescriptor</code>, etc.).</li><li><strong>Error Handling:</strong> Includes mechanisms (like <code>InvalidDescriptor</code> exceptions) to handle malformed or unparseable files gracefully.</li></ul></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Recently, I applied for a project in Tor organization, which aims to reimplement the** &lt;code&gt;metrics-lib&lt;/code&gt; **in Rust, maintaining th</summary>
      
    
    
    
    
    <category term="ç¼–ç¨‹" scheme="https://stan370.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>è¿›æ­¥çš„å¹»è±¡ï¼šç”Ÿäº§åŠ›çš„å‘å±•å¸¦æ¥äº†ä»€ä¹ˆ</title>
    <link href="https://stan370.github.io/2025/04/07/capitalism/"/>
    <id>https://stan370.github.io/2025/04/07/capitalism/</id>
    <published>2025-04-07T05:31:55.000Z</published>
    <updated>2025-04-07T08:08:18.710Z</updated>
    
    <content type="html"><![CDATA[<h1>è¿›æ­¥çš„å¹»è±¡</h1><p>ç”Ÿäº§åŠ›çš„è¿›æ­¥ï¼Œé€šå¸¸è¢«è§†ä¸ºäººç±»ç¤¾ä¼šå‘å±•çš„æ ¸å¿ƒåŠ¨åŠ›ã€‚å®ƒæ„å‘³ç€ç”¨æ›´å°‘çš„èµ„æºå’Œæ—¶é—´åˆ›é€ æ›´å¤šçš„ä»·å€¼ï¼Œç†åº”å¸¦æ¥æ›´é«˜æ•ˆçš„ç”Ÿäº§ã€æ›´å¯Œè£•çš„ç”Ÿæ´»å’Œæ›´å¤šçš„é—²æš‡ã€‚ç„¶è€Œï¼Œç°å®å´å¸¸å¸¸å‘ˆç°å‡ºä¸€ç§ä»¤äººå›°æƒ‘ç”šè‡³ç»æœ›çš„æ™¯è±¡ï¼šéšç€æŠ€æœ¯çš„é£é€Ÿå‘å±•å’Œç”Ÿäº§æ•ˆç‡çš„æŒ‡æ•°çº§æé«˜ï¼Œè®¸å¤šäººéä½†æ²¡æœ‰å› æ­¤è·å¾—è§£æ”¾ï¼Œåè€Œæ„Ÿåˆ°æ›´åŠ åŠ³ç¢Œã€å‹åŠ›æ›´å¤§ã€‚<strong>å¦‚æœç”Ÿäº§åŠ›çš„è¿›æ­¥åªæ˜¯è®©äººæ›´åŠ ç–²æƒ«ä¸å ªï¼Œé‚£ä¹ˆè¿™ç§è¿›æ­¥çš„æ„ä¹‰ç©¶ç«Ÿä½•åœ¨ï¼Ÿæˆ‘ä»¬æ˜¯å¦é™·å…¥äº†ä¸€ç§â€œè¿›æ­¥çš„å¹»è±¡â€</strong>ï¼Œé‡å¤ç€å†å²çš„é”™è¯¯ï¼Œå´å§‹ç»ˆä¸æ„¿å¸å–æ•™è®­ï¼Ÿ</p><p>è¿™ç§ä»¤äººæ²®ä¸§çš„æ‚–è®ºå¹¶éæ–°é²œäº‹ã€‚å›é¡¾å†å²ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œç”Ÿäº§åŠ›è¿›æ­¥ä¸åŠ³åŠ¨è€…å¤„å¢ƒä¹‹é—´çš„å…³ç³»è¿œéç®€å•çš„çº¿æ€§æ­£ç›¸å…³ã€‚ä»¥20ä¸–çºª30å¹´ä»£çš„<strong>å¤§è§æ¡</strong>ä¸ºä¾‹ã€‚å½“æ—¶ï¼Œç¾å›½çš„å·¥å‚å·²ç»æ‹¥æœ‰äº†æƒŠäººçš„ç”Ÿäº§èƒ½åŠ›ï¼Œå¯ä»¥å¤§é‡åˆ¶é€ æ±½è½¦ã€æ”¶éŸ³æœºç­‰å•†å“ã€‚ä»ç”Ÿäº§åŠ›è§’åº¦çœ‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„é£è·ƒã€‚ç„¶è€Œï¼Œè¿™ç§è¿›æ­¥å´ä¼´éšç€å²æ— å‰ä¾‹çš„ç»æµå´©æºƒã€‚ç”Ÿäº§è¿‡å‰©ä¸æœ‰æ•ˆéœ€æ±‚ä¸è¶³å¹¶å­˜ï¼Œå·¥å‚å€’é—­ï¼Œæ•°ç™¾ä¸‡äººå¤±ä¸šï¼Œç¤¾ä¼šé™·å…¥è´«å›°å’Œæ··ä¹±ã€‚ç”Ÿäº§åŠ›çš„é«˜åº¦å‘è¾¾å¹¶æ²¡æœ‰è½¬åŒ–ä¸ºæ™®éçš„ç¹è£å’Œé—²æš‡ï¼Œåè€Œå¯¼è‡´äº†å¤§è§„æ¨¡çš„è‹¦éš¾ã€‚è¿™æ·±åˆ»åœ°æ­ç¤ºäº†ï¼šç”Ÿäº§åŠ›è¿›æ­¥æœ¬èº«å¹¶éç›®çš„ï¼Œå…¶ä»·å€¼å–å†³äºå…¶æˆæœå¦‚ä½•è¢«åˆ†é…å’Œç®¡ç†ã€‚å¦‚æœè¿›æ­¥çš„æœå®ä¸»è¦è¢«å°‘æ•°äººæ”«å–ï¼Œè€Œå¤šæ•°äººå´å› æŠ€æœ¯è¿›æ­¥å¸¦æ¥çš„ç»“æ„æ€§å¤±ä¸šæˆ–å¸‚åœºæ³¢åŠ¨è€Œé™·å…¥å›°å¢ƒï¼Œé‚£ä¹ˆè¿™ç§â€œè¿›æ­¥â€å¯¹å¤§å¤šæ•°äººè€Œè¨€å°±æ¯«æ— æ„ä¹‰ï¼Œç”šè‡³æ˜¯ä¸€ç§ç¾éš¾ã€‚</p><h2 id="1-How-to-turn-labor-into-Relentless-Machine">1. How to turn labor into Relentless Machine?</h2><p>éšç€æœºå™¨åŒ–å¤§å·¥ä¸šè“¬å‹ƒå‘å±•ï¼Œèµ„æœ¬ä¸»ä¹‰ä»·å€¼è¿åŠ¨çš„ä¸€ä¸ªå¿…ç„¶è¶‹åŠ¿å°±æ˜¯ï¼Œâ€œå¯¹è±¡åŒ–åŠ³åŠ¨åœ¨åŠ³åŠ¨è¿‡ç¨‹æœ¬èº«ä¸­ä¸æ´»åŠ³åŠ¨ç›¸å¯¹ç«‹è€Œæˆä¸ºæ”¯é…æ´»åŠ³åŠ¨çš„åŠ›é‡â€ï¼›ä¸æ­¤åŒæ—¶ï¼Œæ´»åŠ³åŠ¨åˆ™è½¬å˜ä¸ºæœºå™¨ç³»ç»Ÿä¸­â€œå•çº¯çš„æ´»çš„é™„ä»¶â€ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œä»ä»·å€¼å½¢æˆçš„ç”Ÿäº§è¿‡ç¨‹çœ‹ï¼Œèµ„æœ¬åœ¨è¿½é€è‡ªæˆ‘å¢æ®–è¿‡ç¨‹ä¸­ï¼Œä¸å¯é¿å…åœ°å¼•è‡´ä»·å€¼å®ä½“çš„â€œç©ºå£³åŒ–â€ã€‚å½¢è±¡åœ°è®²ï¼Œè¿™å¥½æ¯”èµ„æœ¬ä¸»ä¹‰ä»·å€¼è¿åŠ¨å­˜åœ¨â€œé»‘æ´â€ï¼Œåªåå™¬æ—§ä»·å€¼ï¼Œå´æ— æ³•åå‡ºæ–°ä»·å€¼ã€‚æ­£å¦‚ç¾å›½å­¦è€…å¤§å«Â·å“ˆç»´æ‰€æŒ‡å‡ºçš„ï¼Œâ€œå¦‚æœæ´»åŠ³åŠ¨æ˜¯ä»·å€¼å’Œåˆ©æ¶¦çš„æºæ³‰ï¼Œé‚£ä¹ˆç”¨æ­»åŠ³åŠ¨æˆ–æœºæ¢°åŠ³åŠ¨ä»£æ›¿æ´»åŠ³åŠ¨åœ¨æ”¿æ²»ä¸Šå’Œç»æµä¸Šéƒ½æ¯«æ— æ„ä¹‰ã€‚åœ¨é©¬å…‹æ€çœ‹æ¥ï¼Œè¿™æ˜¯èµ„æœ¬ä¸»ä¹‰çš„ä¸€ä¸ªæ ¸å¿ƒçŸ›ç›¾â€ã€‚<br>ã€€ã€€å›é¡¾èµ„æœ¬ä¸»ä¹‰ç”Ÿäº§å²ï¼Œåœ¨ç¦ç‰¹åˆ¶ä¸‹ï¼Œç§‘å­¦æŠ€æœ¯çš„èµ„æœ¬ä¸»ä¹‰åº”ç”¨ä¸æ–­æ¨è¿›ç”Ÿäº§æ ‡å‡†åŒ–å’Œè‡ªåŠ¨åŒ–ï¼Œå®ç°äººæœºå…³ç³»çš„æ ¹æœ¬ç¿»è½¬ï¼Œâ€œåœ¨å·¥åœºæ‰‹å·¥ä¸šå’Œæ‰‹å·¥ä¸šä¸­ï¼Œæ˜¯å·¥äººåˆ©ç”¨å·¥å…·ï¼Œåœ¨å·¥å‚ä¸­ï¼Œæ˜¯å·¥äººæœä¾æœºå™¨â€ï¼Œä½†åŠ³åŠ¨ä½œä¸ºâ€œæœ‰æ„è¯†çš„æœºä»¶â€ä¾ç„¶ä¸å¯æˆ–ç¼ºã€‚éšç€èµ„æœ¬ä¸»ä¹‰çš„å‘å±•ï¼Œéç‰©è´¨åŠ³åŠ¨å±•æ¼”äºäººä»¬çš„æ—¥å¸¸æ²Ÿé€šã€ç¤¾ä¼šåˆä½œå’Œæƒ…æ„Ÿäº¤æµä¹‹ä¸­ï¼Œèµ„æœ¬ä¸€æ—¶éš¾ä»¥å®ç°å¯¹å…¶è§„è®­ä¸å¸çº³ï¼Œé‘è®ºåˆ©ç”¨â€œèƒ½åŠ¨çš„æœºå™¨ä½“ç³»â€æ¥å–è€Œä»£ä¹‹ã€‚è¿›å…¥æ•°å­—èµ„æœ¬ä¸»ä¹‰é˜¶æ®µï¼Œèµ„æœ¬ä¸»ä¹‰æ™ºèƒ½åŒ–ç”Ÿäº§æ­¥å…¥å¿«è½¦é“ï¼Œæå¤§åœ°æ‹“å±•äº†â€œæœºå™¨æ¢äººâ€çš„æ“ä½œè¾¹ç•Œï¼Œç”Ÿäº§è¿‡ç¨‹ä¸­ç›´æ¥åŠ³åŠ¨åŠ é€Ÿç¼©å‡ã€‚ä½†æ•°å­—ç»æµå®è·µè¡¨æ˜ï¼Œåœ¨åˆ†æå¼äººå·¥æ™ºèƒ½æŠ€æœ¯é©±åŠ¨ä¸‹ï¼Œæ™ºèƒ½å¢å¼ºçš„æ•°å­—æœºå™¨ä¸ä»…å›¿äºç‰¹å®šä½œä¸šé¢†åŸŸï¼Œè€Œä¸”æ—¥æ¸æ›å…‰çš„â€œå¹½çµå·¥ä½œâ€æ—¶åˆ»æ˜­ç¤ºï¼šæ‰€è°“çš„â€œæ— äººåŒ–â€â€œé›¶åŠ³åŠ¨â€â€œåå·¥ä½œâ€ä¾ç„¶åªæ˜¯æŠ€æœ¯ä¹è§‚æ´¾çš„ä¸€ç§æ•°å­—ä¹Œæ‰˜é‚¦æƒ³è±¡ã€‚<br>ã€€ã€€å…¶å®ï¼Œåœ¨é©¬å…‹æ€è¯­å¢ƒä¸‹ï¼Œå³ä½¿èµ„æœ¬è·å¾—æœ€å®Œå–„ã€æœ€é€‚åº”çš„æœºå™¨ä½“ç³»ï¼Œå³è‡ªåŠ¨çš„æœºå™¨ä½“ç³»ï¼Œä¹Ÿä¸æ„å‘³ç€åŠ³åŠ¨çš„å½»åº•é€€å‡ºï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªç¯èŠ‚â€œåˆ†å¸ƒåœ¨æœºæ¢°ä½“ç³»çš„è®¸å¤šç‚¹ä¸Šâ€ã€‚å¹¶ä¸”ï¼Œåœ¨é©¬å…‹æ€çœ‹æ¥ï¼Œâ€œä¸€ä¸ªåœ¨æœ¬ç”Ÿäº§éƒ¨é—¨å†…å®Œå…¨ä¸ä½¿ç”¨å¯å˜èµ„æœ¬ï¼Œå› è€Œå®Œå…¨ä¸ä½¿ç”¨å·¥äººçš„èµ„æœ¬å®¶â€åªæ˜¯ä¸€ä¸ªæç«¯çš„å‡å®šã€‚å¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œä¼´éšèµ„æœ¬ä¸»ä¹‰ç”Ÿäº§ä»æœºæ¢°åŒ–åˆ°è‡ªåŠ¨åŒ–å†åˆ°æ™ºèƒ½åŒ–ï¼ŒåŠ³åŠ¨å½¢å¼ä¹Ÿä»ç‰©è´¨åŠ³åŠ¨åˆ°éç‰©è´¨åŠ³åŠ¨å†åˆ°æ•°å­—åŠ³åŠ¨ï¼Œåˆ›é€ ä»·å€¼çš„æ´»åŠ³åŠ¨ä»æ¥å°±æ²¡æœ‰çœŸæ­£ç¦»åœºã€‚â€œè’¸æ±½æœºã€çººç»‡æœºã€ç”µæ°”åŒ–å’Œç”µå­åŒ–ä»æœªæŒç»­å‡å°‘åŠ³åŠ¨é‡ï¼Œç›¸åæ›´åŠ å¤§äº†åŠ³åŠ¨é‡ã€‚â€ä½†ä¸‡äº‹å› æ—¶è€Œå˜ã€‚å¤§æ¨¡å‹ç”Ÿäº§è½åœ°åï¼Œåœ¨é€šç”¨äººå·¥æ™ºèƒ½çš„æŠ€æœ¯åŠ æŒä¸‹ï¼Œæ•°å­—æœºå™¨çš„å†³ç­–è‡ªä¸»å’Œèƒ½åŠ›æ³›åŒ–æ­£åœ¨ä»¥è¶…ä¹å¸¸äººæƒ³è±¡çš„èŠ‚å¥é£é€Ÿæå‡ã€‚æ’‡å¼€â€œè¶…çº§æ™ºèƒ½â€â€œæœºå™¨æ„è¯†â€ç­‰æå…·äº‰è®®æ€§è¯é¢˜ï¼Œä»èµ„æœ¬ä¸»ä¹‰ç”Ÿäº§è¿‡ç¨‹çœ‹ï¼Œå½“ä»Šæ•°å­—æœºå™¨å±•ç°æŒç»­è¿­ä»£çš„â€œé«˜é˜¶è‡ªåŠ¨åŒ–â€èƒ½åŠ›ï¼Œæ­£åœ¨ä½¿è¶Šæ¥è¶Šå¤šçš„è®¤çŸ¥åŠ³åŠ¨è¢«è¶…é«˜æ•ˆçš„æ™ºèƒ½ç®—æ³•æ‰€æ›¿ä»£ã€‚å¯ä»¥è¯´ï¼Œâ€œä»¥å¾€çš„å·¥ä¸šè‡ªåŠ¨åŒ–ç³»ç»Ÿæˆ–æ™ºèƒ½æœºæ¢°è§£æ”¾çš„ä¸»è¦æ˜¯äººçš„ä½“åŠ›ï¼Œå–ä»£çš„æ˜¯ä½“åŠ›åŠ³åŠ¨è€…ï¼Œä½†ChatGPTä¹‹ç±»é€šç”¨äººå·¥æ™ºèƒ½æ­£åœ¨é¢ è¦†äººçš„è„‘åŠ›åŠ³åŠ¨ï¼Œå–ä»£â€˜è„‘åŠ›åŠ³åŠ¨è€…â€™æ‰¿æ‹…çš„å„ç§å·¥ä½œâ€ã€‚<br>ã€€ã€€é¢å¯¹å·¥ä¸šæ—¶ä»£æœºå™¨ç³»ç»Ÿçš„å·¨å¤§åŠ›é‡ï¼Œé©¬å…‹æ€æ›¾æƒŠå‘¼ï¼šâ€œå¦‚æœæœºå™¨æ¶ˆç­äº†æ•´ä¸ªé›‡ä½£å·¥äººé˜¶çº§ï¼Œé‚£ä¹ˆè¿™å¯¹èµ„æœ¬æ¥è¯´å°†æ˜¯ä¸€ä»¶ååˆ†å¯æ€•çš„äº‹æƒ…ï¼Œå› ä¸ºèµ„æœ¬æ²¡æœ‰é›‡ä½£åŠ³åŠ¨å°±ä¸æˆå…¶ä¸ºèµ„æœ¬äº†ï¼â€æ¯‹åº¸ç½®ç–‘ï¼Œå¤§æ¨¡å‹æ—¶ä»£æ•°å­—æœºå™¨æ‰€å±•ç¤ºçš„ç”Ÿäº§å¨åŠ›ï¼Œä½¿è¿„ä»Šä¸ºæ­¢æ‰€æœ‰çš„å·¥ä¸šæœºå™¨éƒ½ç›¸å½¢è§ç»Œã€‚éšç€é€šç”¨äººå·¥æ™ºèƒ½çš„æŠ€æœ¯ç²¾è¿›å’Œåœºæ™¯åº”ç”¨ï¼Œâ€œç°åœ¨èµ„æœ¬æ­£æŠŠâ€˜æ´»åŠ³åŠ¨â€™çš„åŸºæœ¬èƒ½åŠ›â€”â€”è®¤çŸ¥å’Œæ„ŸçŸ¥â€”â€”é‡å¡‘ä¸ºé€‚åˆèµ„æœ¬çš„æœºå™¨å½¢å¼ï¼Œå®ƒè‡´åŠ›äºåŠ ç´§å¯¹è¿™äº›åŸºç¡€èƒ½åŠ›çš„æ•è·å¹¶åŠ å¿«è½¬åŒ–äºâ€˜åˆ†å¸ƒå¼â€™çš„æ™ºèƒ½ä½“ç³»ä¸­â€ã€‚ç…§æ­¤è¶‹åŠ¿å‘å±•ä¸‹å»ï¼Œä¸€ä¸ªä¸å®¹å›é¿çš„ç†è®ºè¿½é—®æ˜¯ï¼Œå°±è¿â€œç«™åœ¨ç”Ÿäº§è¿‡ç¨‹çš„æ—è¾¹â€ç…§æ–™æœºå™¨çš„æœºä¼šï¼Œç•™ç»™æ™®é€šåŠ³åŠ¨è€…çš„è¿˜ä¼šæœ‰å¤šå°‘ï¼Ÿ</p><h2 id="2-å¤§æ¨¡å‹ç”Ÿäº§æ”¾å¤§ä»·å€¼è¿åŠ¨çš„â€œå¸‚åœºæ‚–åâ€">2.ã€€å¤§æ¨¡å‹ç”Ÿäº§æ”¾å¤§ä»·å€¼è¿åŠ¨çš„â€œå¸‚åœºæ‚–åâ€</h2><p>åœ¨æ”¿æ²»ç»æµå­¦è¯­å¢ƒä¸‹ï¼Œä»·å€¼åæ˜ äº†å•†å“ç»æµæ¡ä»¶ä¸‹äººä»¬ç›¸äº’äº¤æ¢åŠ³åŠ¨çš„ç¤¾ä¼šå…³ç³»ã€‚å®ƒæ»¥è§äºç¤¾ä¼šåˆ†å·¥ä¸‹ç§äººåŠ³åŠ¨å’Œç¤¾ä¼šåŠ³åŠ¨çš„å¯¹ç«‹ï¼Œæˆå½¢äºå•†å“ç”Ÿäº§å’Œå•†å“æµé€šçš„ç»Ÿä¸€ã€‚æ¢è¨€ä¹‹ï¼Œä½œä¸ºä¸€ç§ç¤¾ä¼šç¡®è¯ï¼Œä»·å€¼ä»¥äº¤æ¢ä»·å€¼ä¸ºä¸­ä»‹å®ç°äº†å…·ä½“åŠ³åŠ¨å‘æŠ½è±¡åŠ³åŠ¨ã€ç§äººåŠ³åŠ¨å‘ç¤¾ä¼šåŠ³åŠ¨çš„åŒé‡è½¬æ¢ã€‚è¿›è€Œï¼Œâ€œåŠ³åŠ¨ä½œä¸ºä¸€èˆ¬åŠ³åŠ¨çš„å¯¹è±¡åŒ–å’Œä½œä¸ºæ»¡è¶³ä¸€èˆ¬éœ€è¦çš„[æ‰‹æ®µçš„]æ€§è´¨â€é€šè¿‡äº¤æ¢è¢«è‚¯å®šï¼Œè‡ªç„¶æˆä¸ºç»´ç³»èµ„æœ¬ä¸»ä¹‰ä»·å€¼ä½“ç³»çš„ç”Ÿæ­»æ”¸å…³ä¹‹äº‹äº†ã€‚<br>ã€€ã€€ä»ä»·å€¼å®ç°çœ‹ï¼Œéšç€èµ„æœ¬ä¸»ä¹‰ç”Ÿäº§åŠ›å¿«é€Ÿå‘å±•ï¼Œå•†å“ä¾›ç»™æ—¥è¶‹ä¸°å¯Œï¼Œå¸‚åœºå¼€æ‹“å’Œéœ€æ±‚æ‰©å¼ å°±å˜å¾—æ„ˆå‘è¿«åˆ‡ã€‚ä½†æ•°ç™¾å¹´èµ„æœ¬ä¸»ä¹‰ç»æµå‘å±•è¡¨æ˜ï¼Œè™½ç„¶èµ„æœ¬ä¸æ‹©æ‰‹æ®µæ¥å¼€æ‹“å›½å†…å¤–å¸‚åœºï¼Œä½†ç”Ÿäº§ç›¸å¯¹è¿‡å‰©å§‹ç»ˆä¸èµ„æœ¬ä¸»ä¹‰ç¤¾ä¼šåŒ–å¤§ç”Ÿäº§å¦‚å½±éšå½¢ã€‚ç©¶å…¶æ ¹æºï¼Œèµ„æœ¬è‡ªèº«çš„è¿åŠ¨ä¸€ç›´å­˜åœ¨æ— æ³•å…‹æœçš„â€œå¸‚åœºæ‚–åâ€ï¼šä¸€æ–¹é¢ï¼Œä¸ºäº†è·å–ä»·å€¼ï¼Œèµ„æœ¬ç«­åŠ›åˆ¶é€ æ—¥ç›Šä¸°å¯Œçš„å•†å“ä¾›ç»™ï¼›å¦ä¸€æ–¹é¢ï¼Œä¸ºäº†åŠ é€Ÿè‡ªæˆ‘å¢æ®–ï¼Œèµ„æœ¬åˆæå°½è´¬ä½åŠ³åŠ¨åŠ›ä»·å€¼ä¹‹èƒ½äº‹ã€‚å…¶ç»“æœï¼Œèµ„æœ¬ä¸»ä¹‰çš„ç”Ÿäº§æ‰©å¼ å’Œéœ€æ±‚èç¼©ç›¸å‘è€Œè¡Œï¼Œé€ æˆä»·å€¼è¿åŠ¨ä¸­æ–­ï¼Œå¼•å‘å‘¨æœŸæ€§å±æœºã€‚<br>ã€€ã€€è¿™é›†ä¸­ä½“ç°åœ¨ï¼šç¦ç‰¹åˆ¶ä¸‹ç”Ÿäº§æ ‡å‡†åŒ–ã€æµæ°´çº¿åŒ–ï¼ŒæŒç»­æ¨åŠ¨åŠ³åŠ¨â€œå»æŠ€èƒ½åŒ–â€ï¼Œâ€œå·¥äººå˜æˆäº†æœºå™¨çš„å•çº¯çš„é™„å±å“ï¼Œè¦æ±‚ä»–åšçš„åªæ˜¯æå…¶ç®€å•ã€æå…¶å•è°ƒå’Œæå®¹æ˜“å­¦ä¼šçš„æ“ä½œâ€ã€‚äºæ˜¯ï¼Œâ€œç”±äºè¿™ç§è½¬ç§»ï¼Œå·¥äººè‡ªå·±çš„åŠ³åŠ¨èƒ½åŠ›å°±è´¬å€¼äº†â€ã€‚åç¦ç‰¹åˆ¶å…´èµ·åï¼Œèµ„æœ¬åŠ›æ¨æ–°è‡ªç”±ä¸»ä¹‰çš„åˆ¶åº¦é©æ–°ï¼ŒæŒç»­æ¨åŠ¨å°±ä¸šä¸ç¨³å®šåŒ–ï¼Œè¶Šæ¥è¶Šå¤šçš„æ™®é€šåŠ³åŠ¨è€…åªèƒ½é æ¶ˆè´¹ä¿¡è´·å‹‰å¼ºåº¦æ—¥ã€‚è¿›å…¥æ•°å­—èµ„æœ¬ä¸»ä¹‰é˜¶æ®µï¼Œæ•°å­—åŠ³åŠ¨çš„å…´èµ·ç»™åŠ³åŠ¨è€…å¸¦æ¥æ–°çš„å°±ä¸šæ–¹å¼å’Œå·¥ä½œæœºä¼šï¼Œä½†æ•°å­—åŠ³åŠ¨çš„å¹³å°åŒ–ç»„ç»‡å’Œç®—æ³•åŒ–ç®¡ç†ï¼Œè¿›ä¸€æ­¥åŠ å‰§å°±ä¸šä¸ç¨³å®šã€‚<br>ã€€ã€€éšç€é€šç”¨äººå·¥æ™ºèƒ½æŠ€æœ¯å¼€å§‹æ™®åŠï¼Œæ•°å­—èµ„æœ¬ä¸»ä¹‰åƒè¡Œç™¾ä¸šçš„ç”Ÿäº§æµç¨‹éƒ½åœ¨ç»å†é‡ç»„å’Œé‡å¡‘ã€‚éº¦è‚¯é”¡ä¼°è®¡ï¼Œåœ¨63ä¸ªåº”ç”¨æ¡ˆä¾‹ä¸­ï¼Œç”Ÿæˆå¼AIåº”ç”¨æ¯å¹´èƒ½ç»™å…¨çƒç»æµå¸¦æ¥2.6ä¸‡äº¿ç¾å…ƒè‡³4.4ä¸‡äº¿ç¾å…ƒçš„æ½œåœ¨ä»·å€¼ã€‚ç›®å‰æ¥çœ‹ï¼Œæ•°å­—ç§‘æŠ€å·¨å¤´é€šè¿‡æ•°æ®ã€ç®—åŠ›å’Œç®—æ³•çš„å…¨æ–¹ä½å„æ–­ï¼Œç‰¢ç‰¢æŒæ§é€šç”¨äººå·¥æ™ºèƒ½çš„æŠ€æœ¯ç»æµç”Ÿæ€ï¼Œä¼å›¾ç‹¬äº«å¤§æ¨¡å‹ç”Ÿäº§é‡Šæ”¾çš„æ–°ä¸€è½®æ•°å­—çº¢åˆ©ã€‚å¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œæ•°å­—èµ„æœ¬ä¸»ä¹‰ç°è¡Œå¹³å°ä½“åˆ¶å¦‚ä¸æ”¹å¼¦æ›´å¼ ï¼Œå¿…ç„¶ä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„åŠ³åŠ¨è€…åœ¨æ•°å­—åŒ–è½¬å‹ä¸­è½å…¥â€œæ•°å­—ç©·äººâ€çš„ç”Ÿå­˜çª˜å¢ƒã€‚<br>ã€€ã€€è¿™æ˜¯å› ä¸ºï¼Œé¦–å…ˆï¼Œåœ¨å¤§æ¨¡å‹ç”Ÿäº§ä¸‹ï¼Œâ€œæœºå™¨æ¢äººâ€ç°è±¡æŒç»­å‘èµ„æœ¬ä¸»ä¹‰çŸ¥è¯†ç”Ÿäº§é¢†åŸŸè”“å»¶ï¼Œæ‹¥æœ‰çŸ¥è¯†ä¸“é•¿çš„â€œåˆ›æ„é˜¶å±‚â€å°†ä¼šæ­¥è“é¢†å·¥äººçš„åå°˜ï¼Œè¢«æ— æƒ…çš„å´æ“…äºå™äº‹çš„æ•°å­—èµ„æœ¬æŠ›å¼ƒã€‚å…¶æ¬¡ï¼Œé€šç”¨äººå·¥æ™ºèƒ½æŠ€æœ¯è¿›ä¸€æ­¥æ¿€æ´»æ•°å­—æ³°å‹’ä¸»ä¹‰ï¼Œæ•°å­—èµ„æœ¬åŠ é€Ÿæ‹†è§£äººç±»è®¤çŸ¥åŠ³åŠ¨è¿‡ç¨‹ï¼Œä¸æ–­å°†å¯è®¡ç®—çš„å·¥ä½œå†…å®¹æ ‡å‡†åŒ–ã€æ¨¡å—åŒ–å’Œè‡ªåŠ¨åŒ–ï¼Œä»è€Œå°†èµ„æœ¬ä¸»ä¹‰é«˜é˜¶åŠ³åŠ¨ä¹Ÿâ€œå»æŠ€èƒ½åŒ–â€ã€‚å¯ä»¥æ–™æƒ³çš„æ˜¯ï¼Œæ•°å­—èµ„æœ¬ä¸»ä¹‰å¤æ‚åŠ³åŠ¨ç®€å•åŒ–åŠ é€Ÿï¼Œå›½æ°‘æ”¶å…¥åˆ†é…æ ¼å±€ä¸­åŠ³åŠ¨å æ¯”æŒç»­èµ°ä½å°†æ˜¯å¿…ç„¶è¶‹åŠ¿ã€‚<br>ã€€ã€€å¦‚æ­¤ä¸€æ¥ï¼Œä¸€æ–¹é¢ï¼Œå¤§æ¨¡å‹ç”Ÿäº§å®ç°çŸ¥è¯†å•†å“çš„å·¥ä¸šåŒ–ç”Ÿäº§ï¼ŒåŠ ä¸Šé€šç”¨äººå·¥æ™ºèƒ½æŠ€æœ¯èµ‹èƒ½ä¼ ç»Ÿåˆ¶é€ æè´¨å¢æ•ˆï¼Œæ•°å­—èµ„æœ¬ä¸»ä¹‰å•†å“å’ŒæœåŠ¡äº§èƒ½å°†ä¼šå‘ˆç°æŒ‡æ•°çº§å¢é•¿ï¼›å¦ä¸€æ–¹é¢ï¼Œå¤§æ¨¡å‹ç”Ÿäº§å°†æ•°é‡æƒŠäººçš„çŸ¥è¯†å‹å·¥ä½œè€…ä»èµ„æœ¬ä¸»ä¹‰ç›´æ¥ç”Ÿäº§è¿‡ç¨‹æ’æŒ¤å‡ºå»ï¼Œè‡´ä½¿é•¿æœŸä»¥æ¥æ”¯æ’‘å‘è¾¾èµ„æœ¬ä¸»ä¹‰å›½å®¶å¤§ä¼—æ¶ˆè´¹çš„â€œä¸­äº§é˜¶çº§â€åŠ é€Ÿå¡Œé™·ã€‚å…¶ç»“æœï¼Œå¤§æ¨¡å‹ç”Ÿäº§è¿›ä¸€æ­¥æ”¾å¤§èµ„æœ¬ä¸»ä¹‰ç”Ÿäº§æ‰©å¼ ä¸éœ€æ±‚æ”¶ç¼©çš„â€œå¸‚åœºæ‚–åâ€ï¼Œæ•°å­—åŒ–çš„èµ„æœ¬ç”Ÿäº§å’Œæµé€šæ³¨å®šè¦é­é‡æ›´åŠ é¢‘ç¹çš„ç”Ÿäº§è¿‡å‰©å’Œæ›´åŠ å‰§çƒˆçš„å¸‚åœºåŠ¨è¡ã€‚</p><h2 id="3-Global-Perspective">3. Global Perspective</h2><p>ä»å…¨çƒä¾›åº”é“¾çš„è§’åº¦æ¥çœ‹ï¼Œç¾å›½ä¸ä¸­å›½ä¹‹é—´å»ºç«‹äº†æä¸ºå¤æ‚çš„ç»æµè”ç³»ã€‚ç¾å›½å¯¹ä¸­å›½é•¿æœŸå­˜åœ¨å·¨é¢è´¸æ˜“é€†å·®ï¼Œè¿›å£è¿œè¶…å‡ºå£ï¼Œè®¸å¤šç¾ä¼ä¾èµ–ä¸­å›½è¿›è¡Œä½æˆæœ¬åˆ¶é€ ï¼Œä»è€Œä¿æŒæ¶ˆè´¹ä»·æ ¼çš„ä½å»‰å¹¶æå‡è‡ªèº«åˆ©æ¶¦ã€‚è™½ç„¶è¿‘å¹´æ¥éƒ¨åˆ†ä¼ä¸šå®£å¸ƒå°†ç”Ÿäº§è½¬ç§»å›ç¾å›½æœ¬åœŸï¼Œä½†çœŸæ­£å®ç°å›æµçš„æ¯”ä¾‹ä»ç„¶æœ‰é™ã€‚åœ¨ç¾å›½é‡æ–°è®¾å‚å’Œæ‹›å‹Ÿç†Ÿç»ƒåŠ³åŠ¨åŠ›çš„æˆæœ¬é«˜æ˜‚ï¼Œæˆä¸ºç°å®æ“ä½œä¸­çš„å·¨å¤§é˜»åŠ›ã€‚</p><p>åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼Œç‰¹æœ—æ™®æ”¿åºœäº2018è‡³2020å¹´é—´æ¨è¡Œäº†å…³ç¨æˆ˜ç•¥ï¼Œå¯¹æ•°åäº¿ç¾å…ƒçš„ä¸­å›½äº§å“åŠ å¾å…³ç¨ï¼ŒåˆæœŸèšç„¦é’¢é“å’Œé“ï¼Œåæ‰©å±•è‡³å„ç±»æ¶ˆè´¹å“ã€‚å…¶æ—¢å®šç›®æ ‡åŒ…æ‹¬å‡å°‘è´¸æ˜“é€†å·®ã€æå‡ç¾å›½åˆ¶é€ ä¸šç«äº‰åŠ›ï¼Œæ¨åŠ¨åˆ¶é€ ä¸šå›æµã€‚ç„¶è€Œï¼Œæˆæ•ˆä¸é¢„æœŸä¹‹é—´å­˜åœ¨ä¸å°å·®è·ã€‚</p><p>ä¸æ­¤åŒæ—¶ï¼Œä¸­å›½çš„å…¨çƒè§’è‰²ä¹Ÿåœ¨å‘ç”Ÿè½¬å˜ã€‚ä»æ›¾ç»çš„â€œä¸–ç•Œå·¥å‚â€é€æ¸å‘ä»·å€¼é“¾ä¸Šæ¸¸ç§»åŠ¨ï¼Œä¸­å›½æ­£å°†å‘å±•é‡ç‚¹ä»åŸºç¡€åˆ¶é€ è½¬å‘æ›´å¤æ‚çš„é«˜é™„åŠ å€¼äº§ä¸šä¸æŠ€æœ¯åˆ›æ–°ï¼Œå¹¶åœ¨å…¨çƒç»æµä¸åœ°ç¼˜æ”¿æ²»é¢†åŸŸå±•ç°å‡ºæ›´å¼ºçš„è‡ªä¿¡å¿ƒã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç¾å›½å½“å‰æ‰€é‡‡å–çš„â€œå»é£é™©â€ï¼ˆde-riskingï¼‰æˆ˜ç•¥ï¼ŒåŒºåˆ«äºå…¨é¢â€œè„±é’©â€ï¼ˆdecouplingï¼‰ã€‚è¿™æ˜¯ä¸€ç§æ›´ä¸ºå®¡æ…çš„åšæ³•ï¼Œå³åœ¨å…³é”®äº§ä¸šé“¾å‡å°‘å¯¹ä¸­å›½çš„ä¾èµ–ï¼Œä½†å¹¶ä¸å®Œå…¨åˆ‡æ–­ä¸¤å›½ä¹‹é—´çš„ç»æµè”ç³»ã€‚<br>æ­£æ˜¯åœ¨è¿™ç§å…¨çƒç»“æ„çš„å˜åŒ–ä¹‹ä¸­ï¼Œä¸­å›½å›½å†…çš„åŠ³å·¥ç°çŠ¶æ›´æ·±åˆ»åœ°å±•ç°å‡ºè¿™ä¸€å¢é•¿é€»è¾‘çš„çŸ›ç›¾å’Œéäººé“ã€‚</p><p>ä¸­å›½æ”¹é©å¼€æ”¾ä»¥æ¥ï¼Œä¾æ‰˜å»‰ä»·åŠ³åŠ¨åŠ›å’Œå¼ºå¤§çš„ç»„ç»‡åŠ¨å‘˜èƒ½åŠ›ï¼Œå…¶ç”Ÿäº§åŠ›å–å¾—çˆ†ç‚¸å¼å¢é•¿ï¼Œä¸€è·ƒæˆä¸ºå…¨çƒåˆ¶é€ ä¸­å¿ƒï¼Œç”šè‡³åœ¨é«˜ç§‘æŠ€äº§ä¸šä¸Šäº¦è¿…é€Ÿå´›èµ·ã€‚ç„¶è€Œï¼Œä¸ä¹‹ä¼´éšçš„ï¼Œå´æ˜¯ä»¤äººå ªå¿§çš„åŠ³å·¥ç°å®ï¼šæ™®éç››è¡Œçš„â€œ996â€å·¥ä½œåˆ¶ã€æ¿€çƒˆçš„å†…å·æ–‡åŒ–ã€åˆ¶é€ ä¸šä¸æœåŠ¡ä¸šåŠ³åŠ¨è€…è¶…é•¿å·¥æ—¶ä¸é«˜å¼ºåº¦åŠ³åŠ¨æˆä¸ºå¸¸æ€ã€‚å¤§é‡å¹´è½»äººä¹ƒè‡³ä¸­å¹´äººèº«å¿ƒä¿±ç–²ï¼Œç¼ºä¹è‡ªä¸»ç”Ÿæ´»çš„ç©ºé—´ä¸æ—¶é—´ï¼Œä¸ªä½“ç”Ÿæ´»çš„è´¨é‡å¹¶æœªå› å›½å®¶çš„ç»æµå¢é•¿è€ŒåŒæ­¥æå‡ã€‚ åœ¨æ”¹é©å¼€æ”¾åçš„å‡ åå¹´é‡Œï¼Œä¸­å›½çš„ç”Ÿäº§åŠ›å®ç°äº†çˆ†ç‚¸å¼å¢é•¿ï¼Œæˆä¸ºâ€œä¸–ç•Œå·¥å‚â€ï¼Œé«˜ç§‘æŠ€äº§ä¸šä¹Ÿè¿…é€Ÿå´›èµ·ã€‚ç„¶è€Œï¼Œä¸æ­¤ç›¸ä¼´çš„å´æ˜¯æ™®éçš„â€œ996â€å·¥ä½œåˆ¶ã€æ¿€çƒˆçš„å†…å·ç«äº‰ã€ä»¥åŠè®¸å¤šåˆ¶é€ ä¸šå’ŒæœåŠ¡ä¸šåŠ³åŠ¨è€…é¢ä¸´çš„è¶…é•¿å·¥æ—¶å’Œé«˜å¼ºåº¦åŠ³åŠ¨ã€‚è®¸å¤šå¹´è½»äººå’Œä¸­å¹´äººæ„Ÿåˆ°èº«å¿ƒä¿±ç–²ï¼Œç¼ºä¹ç”Ÿæ´»çš„è‡ªä¸»æƒå’Œé—²æš‡æ—¶é—´ã€‚å°½ç®¡æ•´ä½“ç¤¾ä¼šè´¢å¯Œå¤§å¹…å¢åŠ ï¼Œä½†è®¸å¤šåŠ³åŠ¨è€…å¹¶æ²¡æœ‰å› æ­¤è·å¾—åº”æœ‰çš„å›æŠ¥ï¼Œåè€Œæ„Ÿåˆ°è¢«å·å…¥äº†æ— ä¼‘æ­¢çš„ç«äº‰å’ŒåŠ ç­ä¹‹ä¸­ã€‚ç”Ÿäº§åŠ›çš„è¿›æ­¥ä¼¼ä¹åªæ˜¯è®©èµ„æœ¬å’ŒæŠ€æœ¯æ‰€æœ‰è€…è·å¾—äº†æ›´å¤šåˆ©æ¶¦ï¼Œè€Œå¹¿å¤§åŠ³åŠ¨è€…å´ä¾ç„¶å¤„äºâ€œæ›´åŠ åŠ³ç¢Œâ€çš„å›°å¢ƒã€‚</p><p><strong>æ›´æ·±å±‚çš„éšå¿§åœ¨äºï¼Œè¿™ç§ç°è±¡å®é™…ä¸ŠåŠ å‰§äº†è´«å¯Œå·®è·çš„æ‰©å¤§ã€‚æŠ€æœ¯ä¸ç”Ÿäº§åŠ›çš„è¿›æ­¥ç¡®å®é‡Šæ”¾äº†å·¨å¤§çš„ç»æµæ½œèƒ½ï¼Œä½†è¿™äº›çº¢åˆ©çš„åˆ†é…æä¸ºä¸å‡ã€‚æŒæ¡èµ„æœ¬ã€æŠ€æœ¯ä¸ä¿¡æ¯èµ„æºçš„å°‘æ•°ç¾¤ä½“èƒ½å¤Ÿè½»æ¾ç§¯ç´¯è´¢å¯Œï¼Œè€Œæ™®é€šåŠ³åŠ¨è€…åˆ™åœ¨é¢å¯¹è‡ªåŠ¨åŒ–ã€AIç­‰æ–°æŠ€æœ¯çš„å†²å‡»ä¸‹è®®ä»·èƒ½åŠ›ä¸æ–­ä¸‹é™ï¼Œå·¥èµ„å¢é•¿æ»ç¼“ã€‚æœ€ç»ˆï¼Œä¸€éƒ¨åˆ†äººäº«å—ç€è‡ªç”±ä¸è´¢å¯Œï¼Œè€Œæ›´å¤šäººå´åœ¨åŠ ç­ä¸ç„¦è™‘ä¸­è‹¦è‹¦æŒ£æ‰ã€‚</strong></p><p>â€œ<strong>History happens over and over again, people dont learn any things!</strong>â€ è¿™å¥çœ‹ä¼¼å®¿å‘½è®ºçš„æ„Ÿå¹ï¼Œå´æ­ç¤ºäº†ä¸€ä¸ªä»¤äººæ²®ä¸§çš„ç°å®ã€‚ä»å¤§è§æ¡çš„æ•™è®­ï¼Œåˆ°å½“ä¸‹ä¸­å›½ä»¥åŠå…¨çƒèŒƒå›´å†…çš„åŠ³å·¥å›°å¢ƒå’Œè´«å¯Œå·®è·ï¼Œå†å²ä¼¼ä¹åœ¨ä¸æ–­é‡æ¼”ã€‚äººä»¬ä¼¼ä¹æ€»æ˜¯å®¹æ˜“è¢«â€œæ•ˆç‡â€å’Œâ€œå¢é•¿â€çš„å£å·æ‰€è¿·æƒ‘ï¼Œè€Œå¿½ç•¥äº†è¿›æ­¥çš„æœ€ç»ˆç›®çš„åº”è¯¥æ˜¯ä¸ºäº†äººç±»çš„ç¦ç¥‰ã€‚æˆ‘ä»¬æ‹¥æœ‰äº†å‰æ‰€æœªæœ‰çš„ç”Ÿäº§åŠ›ï¼Œä½†å´æ²¡æœ‰å»ºç«‹èµ·ä¸€å¥—èƒ½å¤Ÿå…¬å¹³åˆ†é…è¿™ç§ç”Ÿäº§åŠ›çš„ç¤¾ä¼šæœºåˆ¶å’Œä¼¦ç†å‡†åˆ™ã€‚æˆ‘ä»¬ä»ç„¶åœ¨ä»¥ä¸€ç§åŸå§‹çš„ã€å¼±è‚‰å¼ºé£Ÿçš„æ–¹å¼äº‰å¤ºç”Ÿäº§åŠ›è¿›æ­¥å¸¦æ¥çš„åˆ©ç›Šï¼Œè€Œæ²¡æœ‰è®¤è¯†åˆ°çœŸæ­£çš„è¿›æ­¥åº”è¯¥æ„å‘³ç€æ›´å°‘çš„åŠ³åŠ¨ã€æ›´å¤šçš„è‡ªç”±ã€æ›´å¹³ç­‰çš„ç¤¾ä¼šã€‚</p><p>å› æ­¤ï¼Œå¦‚æœç”Ÿäº§åŠ›çš„è¿›æ­¥åªæ˜¯å¯¼è‡´æ›´ä¸¥é‡çš„å‰¥å‰Šã€æ›´å‰§çƒˆçš„ç«äº‰ã€æ›´å·¨å¤§çš„è´«å¯Œå·®è·ï¼Œå¹¶æœ€ç»ˆè®©å¤šæ•°äººæ„Ÿåˆ°æ›´åŠ åŠ³ç¢Œï¼Œé‚£ä¹ˆè¿™ç§è¿›æ­¥å°±å¤±å»äº†å…¶åº”æœ‰çš„æ„ä¹‰ã€‚å®ƒåªæ˜¯ä¸€ç§æŠ€æœ¯ä¸Šçš„æˆåŠŸï¼Œè€Œä¸æ˜¯äººç±»æ–‡æ˜çš„è¿›æ­¥ã€‚è¡¡é‡è¿›æ­¥çš„æ ‡å‡†ä¸åº”ä»…ä»…æ˜¯GDPçš„å¢é•¿æˆ–ç”Ÿäº§æ•ˆç‡çš„æé«˜ï¼Œæ›´åº”è¯¥æ˜¯ç¤¾ä¼šæ•´ä½“ç¦ç¥‰çš„æå‡ã€åŠ³åŠ¨è€…çš„è§£æ”¾ã€ä»¥åŠäººä¸äººä¹‹é—´æ›´å…¬å¹³çš„å…³ç³»ã€‚</p><p>ç”Ÿäº§åŠ›çš„è¿›æ­¥æœ¬èº«æ˜¯ä¸­æ€§çš„ï¼Œå…¶ä»·å€¼å–å†³äºäººç±»å¦‚ä½•è¿ç”¨å®ƒã€‚æˆ‘ä»¬æ˜¯å¦èƒ½ä»å¤§è§æ¡ã€ä»å½“ä¸‹çš„åŠ³å·¥å›°å¢ƒä¸­å¸å–æ•™è®­ï¼Œä¸å†ä»…ä»…è¿½æ±‚â€œå¤šâ€å’Œâ€œå¿«â€ï¼Œè€Œæ˜¯è¿½æ±‚â€œå¥½â€å’Œâ€œå…¬å¹³â€ï¼Ÿè¿™éœ€è¦æˆ‘ä»¬é‡æ–°å®¡è§†è¿›æ­¥çš„å®šä¹‰ï¼Œéœ€è¦æ›´å¥å…¨çš„ç¤¾ä¼šä¿éšœä½“ç³»ã€æ›´åˆç†çš„è´¢å¯Œåˆ†é…æœºåˆ¶ã€æ›´ä»¥äººä¸ºæœ¬çš„æ”¿ç­–åˆ¶å®šã€‚å¦åˆ™ï¼Œæˆ‘ä»¬å¯èƒ½æ°¸è¿œæ— æ³•èµ°å‡ºâ€œè¿›æ­¥çš„å¹»è±¡â€ï¼Œåœ¨æ— ä¼‘æ­¢çš„åŠ³ç¢Œä¸­ï¼Œå¾’åŠ³åœ°è¿½é€ç€ä¸€ä¸ªçœ‹ä¼¼å…‰é²œå´æ¯«æ— æ„ä¹‰çš„æœªæ¥ã€‚çœŸæ­£çš„è¿›æ­¥ï¼Œåº”è¯¥è®©æ¯ä¸€ä¸ªäººéƒ½èƒ½åˆ†äº«å…¶æˆæœï¼Œè·å¾—æ›´å¤šé—²æš‡ã€æ›´å¤šå°Šä¸¥ï¼Œè€Œä¸æ˜¯è¢«å®ƒé©±ä½¿ç€æ°¸ä¸åœæ­‡ã€‚å†å²çš„é‡å¤æ˜¯å› ä¸ºäººç±»å¹¶æ²¡æœ‰ä»è¿‡å»çš„é”™è¯¯ä¸­å¸å–æ•™è®­ã€‚æˆ‘ä»¬ä»ç„¶åœ¨é‡å¤ç€åŒæ ·çš„é”™è¯¯ï¼Œä»ç„¶åœ¨è¿½æ±‚åˆ©æ¶¦è€Œä¸æ˜¯æ”¹å–„äººç±»çš„ç”Ÿæ´»ã€‚æˆ‘ä»¬éœ€è¦æ”¹å˜è¿™ç§æ€ç»´æ–¹å¼ï¼Œéœ€è¦å°†ç”Ÿäº§åŠ›çš„è¿›æ­¥è½¬åŒ–ä¸ºäººç±»ç”Ÿæ´»çš„æ”¹å–„ã€‚æˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€ä¸ªæ›´åŠ å…¬å¹³å’Œå…¬æ­£çš„ç¤¾ä¼šï¼Œåœ¨è¿™ä¸ªç¤¾ä¼šä¸­ï¼Œå·¥äººçš„åŠ³åŠ¨æˆæœè¢«å°Šé‡å’Œå¥–åŠ±ï¼Œè€Œä¸æ˜¯è¢«å‰¥å‰Šã€‚</p><p>å¦‚æœç”Ÿäº§åŠ›çš„è¿›æ­¥åªæ˜¯è®©äººæ›´åŠ åŠ³ç¢Œï¼Œé‚£ä¹ˆè¿™ç§è¿›æ­¥è¿˜æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿæˆ‘ä»¬éœ€è¦åæ€æˆ‘ä»¬çš„ä»·å€¼è§‚å’Œç¤¾ä¼šä½“ç³»ï¼Œéœ€è¦å°†ç”Ÿäº§åŠ›çš„è¿›æ­¥è½¬åŒ–ä¸ºäººç±»ç”Ÿæ´»çš„æ”¹å–„ã€‚åªæœ‰è¿™æ ·ï¼Œæˆ‘ä»¬æ‰èƒ½çœŸæ­£åœ°äº«å—ç”Ÿäº§åŠ›çš„è¿›æ­¥å¸¦æ¥çš„å¥½å¤„ï¼Œè€Œä¸æ˜¯é‡å¤ç€å†å²ä¸Šçš„é”™è¯¯ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;è¿›æ­¥çš„å¹»è±¡&lt;/h1&gt;
&lt;p&gt;ç”Ÿäº§åŠ›çš„è¿›æ­¥ï¼Œé€šå¸¸è¢«è§†ä¸ºäººç±»ç¤¾ä¼šå‘å±•çš„æ ¸å¿ƒåŠ¨åŠ›ã€‚å®ƒæ„å‘³ç€ç”¨æ›´å°‘çš„èµ„æºå’Œæ—¶é—´åˆ›é€ æ›´å¤šçš„ä»·å€¼ï¼Œç†åº”å¸¦æ¥æ›´é«˜æ•ˆçš„ç”Ÿäº§ã€æ›´å¯Œè£•çš„ç”Ÿæ´»å’Œæ›´å¤šçš„é—²æš‡ã€‚ç„¶è€Œï¼Œç°å®å´å¸¸å¸¸å‘ˆç°å‡ºä¸€ç§ä»¤äººå›°æƒ‘ç”šè‡³ç»æœ›çš„æ™¯è±¡ï¼šéšç€æŠ€æœ¯çš„é£é€Ÿå‘å±•å’Œç”Ÿäº§æ•ˆç‡çš„æŒ‡æ•°çº§æé«˜ï¼Œè®¸å¤šäººéä½†æ²¡æœ‰</summary>
      
    
    
    
    
    <category term="marxism" scheme="https://stan370.github.io/tags/marxism/"/>
    
  </entry>
  
  <entry>
    <title>3000å…ƒéƒ¨ç½²å¼€æºéšç§&quot;å¤§&quot;æ¨¡å‹ on Mac mini 16gB</title>
    <link href="https://stan370.github.io/2025/03/19/localLlama/"/>
    <id>https://stan370.github.io/2025/03/19/localLlama/</id>
    <published>2025-03-19T13:56:29.000Z</published>
    <updated>2025-09-25T05:51:08.627Z</updated>
    
    <content type="html"><![CDATA[<p>å¯¹äº 20Bä»¥ä¸Šçš„æ¨¡å‹ Mac mini 16GB è¿˜æ˜¯ä¸å¤ªå¤Ÿã€‚ èŠ¯ç‰‡è™½ç„¶ CPU å•æ ¸å¼ºï¼ŒNPU åŠŸè€—æ¯”ä¹Ÿä¸é”™ï¼Œä½†çœŸè¦è·‘ LLMï¼Œæœ€å¤§ç“¶é¢ˆä¸æ˜¯ CPUï¼Œè€Œæ˜¯å†…å­˜å¸¦å®½å’Œæ€» RAMã€‚ä½ æåˆ°çš„å†…å­˜å¸¦å®½å·®å¼‚ï¼Œæ‰æ˜¯å…³é”®ï¼š<br>M4ï¼šå¸¦å®½åœ¨ 120GB/s å·¦å³ï¼Œè·Ÿæ™®é€š DDR5 æ ¸æ˜¾ PC å·®ä¸å¤šï¼Œæ ¹æœ¬ä¸æ˜¯â€œæ˜¾å¡çº§â€ã€‚<br>M3 Proï¼š256GB/s<br>M3 Maxï¼š400GB/s<br>M3 Ultraï¼š800GB/sï¼ˆåŒèŠ¯å°è£…ï¼‰<br>AI æ¨ç† = å¸¦å®½ + æ˜¾å­˜ + å†…å­˜ + å¹¶å‘ IO<br>è¿™ä¸ªå¸¦å®½å†³å®šäº†å¤§æ¨¡å‹å‚æ•°è¯»å–é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯å¤šå¤´æ³¨æ„åŠ›å±‚å¯†é›†è®¿é—®æƒé‡æ—¶ï¼ŒM4 æ ¹æœ¬é¡¶ä¸ä½ã€‚è€Œä¸” 16GB RAM ä¸ä»…å®¹é‡å°ï¼Œç»Ÿä¸€å†…å­˜ç»“æ„è¿˜å®¹æ˜“åœ¨å¤šè¿›ç¨‹/æ¨¡å‹åˆ‡æ¢æ—¶æŠ–åŠ¨ï¼Œå°¤å…¶ä½ æµ‹è¯•è¿‡åŠ è½½ Qwen3-Coder-30Bï¼Œswap ä¸€ä¸Šï¼Œæ€§èƒ½å®Œå…¨åºŸæ‰ã€‚<br>æ›´åˆ«è¯´ GGUF æ¨¡å‹åŠ è½½æ—¶å†…å­˜å ç”¨ä¸åªæ˜¯æ¨¡å‹æƒé‡ï¼Œè¿˜æœ‰ KV Cacheã€ä¸´æ—¶ç¼“å†²ã€çº¿ç¨‹å¼€é”€ï¼Œè¿™äº›åŠ èµ·æ¥å¯¹ 16GB ç³»ç»Ÿç®€ç›´æ˜¯æé™æ‹‰æ‰¯ã€‚ 14B ä»¥ä¸‹çš„é‡åŒ–æ¨¡å‹ï¼ˆå°¤å…¶æ˜¯ Q4_Kã€Q5_Kã€ç”šè‡³ Q2_Kï¼‰ï¼Œåœ¨ Mac mini ä¸Šå‹‰å¼ºå¯è·‘ï¼Œä½†è¦çœ‹ä½ å®¹å¿çš„å“åº”é€Ÿåº¦å’Œå†…å­˜è¾¹ç•Œã€‚ä½† 3000å…ƒçš„ä»·æ ¼è¿˜è¦ä»€ä¹ˆè‡ªè¡Œè½¦</p><p>åœ¨å¤§æ¨¡å‹éƒ½æƒ³ä¸Šäº‘ã€ç»‘APIçš„æ—¶ä»£ï¼Œè¿˜æœ‰å¤šå°‘äººæ„¿æ„åœ¨å®¶ç”¨å°æœºå™¨ä¸Šï¼Œéƒ¨ç½²éšç§å‹å¥½ã€æœ¬åœ°ç¦»çº¿ã€å®Œå…¨æ§åˆ¶çš„æ¨¡å‹ç³»ç»Ÿï¼Ÿå¦‚æœä½ æ„¿æ„æŠ˜è…¾ï¼Œä¸€å°**ä¸åˆ°3000å…ƒçš„äºŒæ‰‹/æ•™è‚²ä¼˜æƒ  Mac mini M4ï¼ˆ16GB RAMï¼‰**å°±èƒ½è·‘èµ·ç›®å‰å¤§å¤šæ•°å¼€æº 20B ä»¥ä¸‹çš„é‡åŒ–æ¨¡å‹ï¼Œç”šè‡³è¿˜èƒ½å¤„ç†è¯­éŸ³ã€å›¾åƒã€ä»£ç ã€‚</p><p>æˆ‘åœ¨2024å¹´ä¸­åˆ°2025å¹´é—´å¯†é›†è¯•äº†å„ç§æ¡†æ¶ï¼Œä» Transformers åˆ° llama.cppï¼Œå†åˆ° Apple çš„ MLX + LM Studioï¼Œä¸‹é¢æ˜¯åŸºäºå®é™…ä½¿ç”¨ä½“éªŒ + ç¤¾åŒº benchmark å¯¹æ¯” + æœ¬åœ°æ¨ç†æ—¥å¿—çš„ä¸€ä»½éƒ¨ç½²æ€»ç»“ï¼Œé€‚åˆæœ‰ç¡¬ä»¶é™åˆ¶ä½†åˆæƒ³æœ€å¤§åŒ–åˆ©ç”¨ç°æœ‰èŠ¯ç‰‡èƒ½åŠ›çš„å¼€å‘è€…ã€‚ è¿™ç¯‡æ–‡ç« ä¼šåˆ†äº«æˆ‘çš„<strong>é€‰å‹æ€è€ƒ</strong>ã€<strong>ç”¨é€”åœºæ™¯</strong>ï¼Œä»¥åŠåœ¨æŠ˜è…¾è¿‡ç¨‹ä¸­æ”¶è·çš„ä¸€äº›ç»éªŒã€‚</p><hr><h1><strong>1. ä¸ºä»€ä¹ˆé€‰æ‹© Mac Mini M4ï¼Ÿ</strong></h1><p>åœ¨æŒ‘é€‰è®¾å¤‡æ—¶ï¼Œæˆ‘ä¸»è¦è€ƒè™‘äº†ä»¥ä¸‹å‡ ä¸ªå› ç´ ï¼š</p><h3 id="1-1-æ€§èƒ½-vs-èƒ½è€—ï¼šM4-çš„æ€§ä»·æ¯”æƒŠå–œ">** 1.1 æ€§èƒ½ vs. èƒ½è€—ï¼šM4 çš„æ€§ä»·æ¯”æƒŠå–œ**</h3><p>ç›¸æ¯” Intel/AMD æœåŠ¡å™¨æˆ–å°å¼æœºï¼Œ<strong>Apple Silicon çš„èƒ½è€—æ¯”ç¡®å®å¾ˆå¼º</strong>ã€‚M4 æ‹¥æœ‰<strong>10 æ ¸ CPU + 10 æ ¸ GPU + 16 æ ¸ NPU</strong>ï¼Œè€Œä¸”åŠŸè€—ä½åˆ°ç¦»è°±ï¼ˆå®˜æ–¹æ ‡ç§° 30Wï¼‰ã€‚<br>åœ¨é€‰æ‹©ç¡¬ä»¶æ—¶ï¼Œæˆ‘ç ”ç©¶äº†å¤šä¸ªé€‰é¡¹ï¼ŒåŒ…æ‹¬è‡ªå»º PCã€äº‘æœåŠ¡å™¨å’Œå…¶ä»–å“ç‰Œçš„å°å‹æœºï¼Œæœ€ç»ˆé”å®šäº† Mac Mini M4ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„ç†ç”±ã€‚<br>Mac Mini M4 çš„æ ¸å¿ƒäº®ç‚¹æ˜¯ Apple Silicon çš„ M4 èŠ¯ç‰‡ï¼Œå…¶ç»Ÿä¸€æ¶æ„å’Œé«˜èƒ½æ•ˆæ¯”åœ¨ AI å·¥ä½œè´Ÿè½½ä¸­è¡¨ç°å‡ºè‰²ã€‚ä»¥ä¸‹æ˜¯ M4 çš„ä¸€äº›å…³é”®å‚æ•°ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•æå‡ RAG å·¥ä½œæµçš„æ•ˆç‡ï¼š<br>CPU æ ¸å¿ƒï¼š<br>M4 é…å¤‡ 8 æ€§èƒ½æ ¸å¿ƒ + 4 æ•ˆç‡æ ¸å¿ƒï¼ˆæˆ–æ›´é«˜ç‰ˆæœ¬çš„ 12P+4Eï¼‰ï¼Œåœ¨å¤„ç†æ£€ç´¢ä»»åŠ¡ï¼ˆå¦‚æœç´¢å’Œç´¢å¼•ï¼‰æ—¶ï¼Œæ€§èƒ½æ ¸å¿ƒè´Ÿè´£é«˜è´Ÿè½½è®¡ç®—ï¼Œè€Œæ•ˆç‡æ ¸å¿ƒå¤„ç†è½»é‡ä»»åŠ¡å¦‚åå°æ•°æ®æ•´ç†ã€‚<br>GPU æ ¸å¿ƒï¼š<br>M4 çš„é›†æˆ GPU æä¾›äº† 16 æ ¸æˆ–æ›´é«˜çš„å›¾å½¢å¤„ç†èƒ½åŠ›ï¼Œå¹¶æ”¯æŒ Apple çš„ Metal APIã€‚å¯¹äºè¿è¡Œè½»é‡åŒ– LLMï¼ˆå¦‚é‡åŒ–åçš„ LLaMA 2ï¼‰æˆ–å®æ—¶ç”ŸæˆåµŒå…¥ï¼Œè¿™ç§ GPU æ€§èƒ½è¶³ä»¥åª²ç¾ä¸­ç«¯ç‹¬ç«‹æ˜¾å¡ã€‚<br>ç»Ÿä¸€å†…å­˜æ¶æ„ï¼ˆUnified Memory Architecture, UMAï¼‰ï¼š<br>16GB æˆ– 24GB çš„ç»Ÿä¸€å†…å­˜ä½¿å¾— CPU å’Œ GPU å…±äº«åŒä¸€å—é«˜é€Ÿå†…å­˜æ± ï¼Œé¿å…äº†ä¼ ç»Ÿæ¶æ„ä¸­é¢‘ç¹çš„æ•°æ®æ‹·è´ä¸å»¶è¿Ÿé—®é¢˜ã€‚è¿™å¯¹è¿è¡Œå¤§å‹æ¨¡å‹å’Œå‘é‡æ£€ç´¢çš„å®æ—¶è®¡ç®—éå¸¸é‡è¦ã€‚<br>Neural Engineï¼ˆç¥ç»å¼•æ“ï¼‰ï¼š<br>æ¯ç§’ 15.8 ä¸‡äº¿æ¬¡è¿ç®—ï¼ˆTOPSï¼‰ çš„ä¸“ç”¨ AI åŠ é€Ÿå™¨å¯ä»¥ç”¨æ¥æå‡æ¨¡å‹æ¨ç†é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯åœ¨è¿è¡Œé‡åŒ–åçš„ LLM æ—¶ã€‚<br>å­˜å‚¨é€Ÿåº¦ï¼š<br>å†…ç½® NVMe SSD æä¾› é«˜è¾¾ 7GB/s çš„è¯»å†™é€Ÿåº¦ï¼Œå¤§å¹…ç¼©çŸ­æ•°æ®æ£€ç´¢å’Œæ¨¡å‹åŠ è½½çš„æ—¶é—´ã€‚<br>ç›¸æ¯”ä¹‹ä¸‹ï¼š</p><ul><li>å¦‚æœé€‰æ‹© <strong>AMD 9600X + 192G å†…å­˜</strong>ï¼Œä¸ä»…åŠŸè€—é«˜ï¼ŒåæœŸè¿˜å¾—è€ƒè™‘é£æ‰‡å™ªéŸ³ã€æ•£çƒ­é—®é¢˜ã€‚</li><li><strong>Epyc æœåŠ¡å™¨æ–¹æ¡ˆ</strong>ï¼ˆ768GB å†…å­˜é‚£å¥—ï¼‰è™½ç„¶å¯ä»¥è·‘æ›´å¤§çš„æ¨¡å‹ï¼Œä½†ä»·æ ¼å’ŒåŠŸè€—éƒ½å¤ªé«˜ï¼Œä¸é€‚åˆä¸ªäººç©å®¶ã€‚</li><li><strong>Mac Mini M4</strong> ä»·æ ¼åŠ ä¸Šå›½è¡¥ <strong>æœ€ä½ 3000 RMB</strong>ï¼Œçœå»äº†æŠ˜è…¾ç”µæºã€æ•£çƒ­ã€æœºç®±çš„éº»çƒ¦ï¼Œè€Œä¸” macOS çš„ç”Ÿæ€ä¹Ÿé€‚åˆå¼€å‘è€…ã€‚<br>ä½¿ç”¨äº‘æœåŠ¡å™¨ï¼ˆå¦‚ AWSã€GCPï¼‰è¿è¡Œ RAG ç³»ç»Ÿï¼Œæ¯æœˆæˆæœ¬å¯èƒ½é«˜è¾¾æ•°ç™¾ç¾å…ƒï¼Œè€Œæœ¬åœ°è¿è¡Œçš„ Mac Mini ä¸€æ¬¡æ€§æŠ•å…¥åï¼Œå‡ ä¹æ²¡æœ‰é¢å¤–è´¹ç”¨ã€‚<br>ç»¼åˆæ¥çœ‹ï¼ŒM4 æ˜¯ä¸€ä¸ª <strong>ä½åŠŸè€—é«˜æ€§ä»·æ¯”çš„é€‰æ‹©</strong>ï¼Œç‰¹åˆ«é€‚åˆæ—¥å¸¸æ¨ç†å°å‹ LLMï¼ˆ&lt;14B å‚æ•°è§„æ¨¡ï¼‰ã€‚</li></ul><hr><p>å¥½ï¼Œè¿™æ˜¯ä¸€ä¸ªé¢å‘æŠ€æœ¯è¯»è€…ã€å¼ºè°ƒå®é™…æµ‹è¯•æ•°æ®ã€éƒ¨ç½²ä½“éªŒå’Œè¾¹é™…æ€§ä»·æ¯”çš„åšå®¢è‰ç¨¿ã€‚è¯­æ°”åçœŸå®ç”¨æˆ·åˆ†äº«ï¼Œå†…å®¹ç»“æ„æ¾æ•£ä½†ä¿¡æ¯é‡é«˜ï¼š</p><hr><h1>ç”¨ä¸åˆ°3000å…ƒéƒ¨ç½²å¼€æºâ€œç±»å¤§æ¨¡å‹â€ï¼šMac mini 16GBçš„æé™æŒ‘æˆ˜ä¸å®è·µæ€»ç»“ï¼ˆæˆªè‡³2025-08-04ï¼‰</h1><p>åœ¨å¤§æ¨¡å‹éƒ½æƒ³ä¸Šäº‘ã€ç»‘APIçš„æ—¶ä»£ï¼Œè¿˜æœ‰å¤šå°‘äººæ„¿æ„åœ¨å®¶ç”¨å°æœºå™¨ä¸Šï¼Œéƒ¨ç½²<strong>éšç§å‹å¥½ã€æœ¬åœ°ç¦»çº¿ã€å®Œå…¨æ§åˆ¶çš„æ¨¡å‹ç³»ç»Ÿ</strong>ï¼Ÿå¦‚æœä½ æ„¿æ„æŠ˜è…¾ï¼Œä¸€å°**ä¸åˆ°3000å…ƒçš„äºŒæ‰‹/æ•™è‚²ä¼˜æƒ  Mac mini M4ï¼ˆ16GB RAMï¼‰**å°±èƒ½è·‘èµ·ç›®å‰å¤§å¤šæ•°å¼€æº 20B ä»¥ä¸‹çš„é‡åŒ–æ¨¡å‹ï¼Œç”šè‡³è¿˜èƒ½å¤„ç†è¯­éŸ³ã€å›¾åƒã€ä»£ç ã€‚</p><p>æˆ‘åœ¨2024å¹´ä¸­åˆ°2025å¹´é—´å¯†é›†è¯•äº†å„ç§æ¡†æ¶ï¼Œä» Transformers åˆ° llama.cppï¼Œå†åˆ° Apple çš„ MLX + LM Studioï¼Œä¸‹é¢æ˜¯åŸºäº<strong>å®é™…ä½¿ç”¨ä½“éªŒ + ç¤¾åŒº benchmark å¯¹æ¯” + æœ¬åœ°æ¨ç†æ—¥å¿—</strong>çš„ä¸€ä»½éƒ¨ç½²æ€»ç»“ï¼Œé€‚åˆæœ‰ç¡¬ä»¶é™åˆ¶ä½†åˆæƒ³æœ€å¤§åŒ–åˆ©ç”¨ç°æœ‰èŠ¯ç‰‡èƒ½åŠ›çš„å¼€å‘è€…ã€‚</p><hr><h2 id="ğŸ“¦-ç³»ç»Ÿä¸ç¯å¢ƒé…ç½®">ğŸ“¦ ç³»ç»Ÿä¸ç¯å¢ƒé…ç½®</h2><ul><li><p><strong>è®¾å¤‡</strong>ï¼šMac mini M4ï¼Œ16GB ç»Ÿä¸€å†…å­˜ï¼Œ256GB SSD</p></li><li><p><strong>ç³»ç»Ÿ</strong>ï¼šmacOS 15ï¼ŒTerminal + zshï¼ŒiStat Menu ç›‘æ§å†…å­˜</p></li><li><p><strong>æ¡†æ¶</strong>ï¼š</p><ul><li><code>LM Studio</code> v0.2.12 (MLX åç«¯ï¼Œæ”¯æŒ MLX safetensors 4bit)</li><li><code>llama.cpp</code>ï¼ˆé…åˆ llama-swapï¼Œè‡ªå»ºæ¨¡å‹ proxyï¼‰</li><li><code>Ollama+OpenWebUI</code>ï¼ˆç”¨äºå¿«é€Ÿé›†æˆ + å¯è§†åŒ–æµ‹è¯•ï¼‰</li><li><code>Whisper.cpp</code>, <code>Bark</code>, <code>llava.cpp</code>ï¼Œè‡ªç¼–è¯‘æ”¯æŒæœ¬åœ°éŸ³é¢‘å’Œå›¾æ–‡æ¨ç†</li><li><code>huggingface-cli</code>, <code>gguf-convert.py</code>, <code>mlx-community-convert</code> è„šæœ¬</li></ul></li></ul><h2 id="å†…å­˜æé™åœ¨å“ªé‡Œï¼Ÿ">å†…å­˜æé™åœ¨å“ªé‡Œï¼Ÿ</h2><p>åœ¨ Mac mini 16GB ä¸Šï¼Œæ“ä½œç³»ç»Ÿæœ¬èº«çº¦å  2.5GBï¼Œå³ä¾¿å…³é—­ iCloudã€Spotlightã€Stage Manager ç­‰æœåŠ¡ï¼Œç†è®ºæœ€å¤§æ¨¡å‹ä½“ç§¯ä¹Ÿå°±åœ¨ <strong>11.5~12GB å·¦å³</strong>ã€‚å®è·µä¸­ï¼š</p><ul><li>å¼€å¯ <code>llama-swap</code> å¯é‡Šæ”¾æ¨¡å‹ä¹‹é—´çš„ KV Cacheï¼Œé™ä½å³°å€¼å†…å­˜ï¼ˆéå¸¸æ¨èï¼‰</li><li><code>MLX</code> åŠ è½½æ›´å¿«ï¼Œä½†å ç”¨ GPU RAM å¤šï¼Œä¸é€‚åˆåŒæ—¶è·‘å¤šæ¨¡å‹</li></ul><h3 id="GGufæ¨¡å‹éƒ¨ç½²å†…å­˜è®¡ç®—">GGufæ¨¡å‹éƒ¨ç½²å†…å­˜è®¡ç®—</h3><p>ä¼°ç®—ä¸€ä¸ªé‡åŒ–æ¨¡å‹åœ¨å†…å­˜é‡Œçš„çœŸå®å ç”¨ï¼Œä¸èƒ½åªçœ‹ç£ç›˜ä¸Š GGUF æ–‡ä»¶çš„å¤§å°ï¼Œè¿˜è¦æŠŠæ¨¡å‹æƒé‡è§£å‹åˆ°å†…å­˜ã€KV cacheã€ä»¥åŠ llama.cpp è¿è¡Œæ—¶çš„å„ç§ç¼“å†²åŒºéƒ½ç®—è¿›å»ã€‚æœ€æ ¸å¿ƒçš„ä¸‰ä¸ªéƒ¨åˆ†æ˜¯ï¼š</p><p>é¦–å…ˆï¼Œæ¨¡å‹æƒé‡æœ¬èº«ã€‚é‡åŒ–å GGUF æ–‡ä»¶é‡Œå­˜çš„å°±æ˜¯å‹ç¼©è¿‡çš„æ•´æ•°æƒé‡ï¼Œä½† llama.cpp åŠ è½½æ—¶ä¼šæŠŠå®ƒä»¬è§£ç åˆ°ç´§å‡‘çš„å¼ é‡é‡Œã€‚å¯¹äº 2 bit Ã— group quantï¼ˆQ2_Kï¼‰ï¼Œå®æµ‹å†…å­˜å ç”¨çº¦æ˜¯æ–‡ä»¶å¤§å°çš„ 1.5 å€å·¦å³â€”â€”æ¯”å¦‚ä¸€ä¸ª 9.3 GB çš„ Q2_K æ–‡ä»¶ï¼ŒåŠ è½½åå·®ä¸å¤šè¦å  14 GB å·¦å³ã€‚è¿™è·Ÿç¤¾åŒºé‡Œå¸¸è¯´â€œé‡åŒ–æ¨¡å‹åŠ è½½è¦ âˆ¼(æ–‡ä»¶å¤§å°) Ã— (bits/8) Ã— è§£å‹ç³»æ•°â€å»åˆï¼Œä¹Ÿå°è¯äº†â€œå†…å­˜éœ€æ±‚å¤§çº¦æ˜¯ç£ç›˜å¤§å°çš„ 2 â€“ 4 å€â€è¿™ä¸ªç»éªŒï¼ˆWizardLMâ€“7B 14 GB æ–‡ä»¶åŠ è½½è¦ç”¨ âˆ¼30 GB å†…å­˜ï¼‰(<a href="https://ai.stackexchange.com/questions/40839/for-an-llm-model-how-can-i-estimate-its-memory-requirements-based-on-storage-us?utm_source=chatgpt.com" title="For an LLM model, how can I estimate its memory ...">Artificial Intelligence Stack Exchange</a>)ã€‚</p><p>å…¶æ¬¡ï¼ŒKV cacheã€‚è¯­å¥ä¸Šä¸‹æ–‡è¶Šé•¿ï¼Œéœ€è¦å­˜çš„ key/value å¯¹è¶Šå¤šã€‚æ¯ä¸ª Transformer å±‚è¦ä¸º context_lengthï¼ˆä¾‹å¦‚ 4096ï¼‰ç”Ÿæˆä¸€ä»½ KV å¼ é‡ï¼Œå½¢çŠ¶æ˜¯ (context_length, head_count_kv, head_size)ï¼Œæ•°å­—ä¸€èˆ¬ä»¥ FP16 å­˜å‚¨ã€‚ä»¥ Qwen3-Coder-30B ä¸ºä¾‹ï¼š48 å±‚ã€head_count_kv=4ã€head_size=128ã€å¯æ˜¯ embedding_length=2048ï¼Œå…¶å®å°±æ˜¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">layers Ã— context Ã— embedding_length Ã— 2 bytes  </span><br><span class="line">â‰ˆ 48 Ã— 4096 Ã— 2048 Ã— 2 B  </span><br><span class="line">â‰ˆ 800â€‰MiB</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ å¼€æ›´é•¿çš„ contextï¼ˆåƒ 16 Kï¼‰ï¼ŒKV cache å°±ä¼šçº¿æ€§ç¿»å€ã€‚</p><p>æœ€åï¼Œè¿è¡Œæ—¶ç¼“å†²åŒºå’Œçº¿ç¨‹å¼€é”€ï¼Œä¼šæŠŠæ€»é‡å†æ¨é«˜ä¸ªå‡ ååˆ°å‡ ç™¾ MBã€‚åŒ…æ‹¬å‰å‘ä¸­é—´æ¿€æ´»ã€å¤šçº¿ç¨‹æ•°æ®ç»“æ„ã€stack bufferï¼ŒmacOS ä¸‹çš„ mmap ä¹Ÿä¼šå¤šå ç‚¹ã€‚</p><p>æŠŠå®ƒä»¬åˆå¹¶ï¼Œå¾—å‡ºå¤§è‡´å…¬å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ€»å†…å­˜ â‰ˆ æƒé‡å†…å­˜ + KV cache å†…å­˜ + å…¶ä»–ç¼“å†²</span><br><span class="line">æƒé‡å†…å­˜ â‰ˆ GGUF æ–‡ä»¶å¤§å° Ã— è§£å‹ç³»æ•°ï¼ˆQ2_K ä¸‹å¤§çº¦ 1.5ï¼‰</span><br><span class="line">KV cache â‰ˆ å±‚æ•° Ã— context_length Ã— embedding_length Ã— bytes_per_value</span><br><span class="line">å…¶ä»–ç¼“å†² â‰ˆ æ•°ç™¾ MB</span><br></pre></td></tr></table></figure><p>ä¸¾ä¸ªä¾‹å­ï¼š<br>Qwen3-Coder-30B-A3B-Instruct-UD-Q2_K_XL.gguf æ–‡ä»¶ 9.3 GBï¼ŒåŠ ä¸Šçº¦ 14 GB æƒé‡è§£å‹ã€âˆ¼0.8 GB KV cacheã€âˆ¼0.2 GB å…¶ä»–ï¼Œå°±å·®ä¸å¤šéœ€è¦ 15 GB ä»¥ä¸Šæ‰èƒ½ç¨³å®šè·‘ã€‚Mac mini 16 GB ç†è®ºä¸Šå‹‰å¼ºå¤Ÿï¼Œä½†æ˜¯ç³»ç»Ÿå’Œå…¶ä»–è¿›ç¨‹è¿˜è¦å  2 â€“ 4 GBï¼Œç»å¸¸ä¼šè§¦å‘ swapï¼Œæ€§èƒ½å°±å¾ˆç³Ÿã€‚</p><p>å¦‚æœä½ æ”¹ç”¨ Q4_0ï¼ˆ4 bitï¼‰ï¼Œè§£å‹ç³»æ•°æ‰åˆ° âˆ¼1.2ï¼Œ9.3 GB æ–‡ä»¶åªè¦ 11 GB å·¦å³ï¼›Q8_0ï¼ˆ8 bitï¼‰åŸºæœ¬æ˜¯ 1.0 å€ï¼Œå°±æ˜¯æ–‡ä»¶å¤§å°æœ¬èº«ã€‚ä½†ç²¾åº¦å’Œé€Ÿåº¦ä¹Ÿè·Ÿç€èµ°ã€‚</p><p>è¿™æ ·ä½ å°±èƒ½æ ¹æ®ç£ç›˜ä¸Šä¸åŒ quant æ ¼å¼çš„æ–‡ä»¶å¤§å°ï¼ŒæŒ‰ä¸Šè¿°ç³»æ•°ç®—å‡ºå¤§æ¦‚è¦å¤šå°‘å†…å­˜ï¼Œå†æ¯”ç…§è‡ªå·±ç¡¬ä»¶çš„å¯ç”¨ RAMï¼Œé€‰æœ€åˆé€‚çš„æ¨¡å‹é‡åŒ–ç­‰çº§ã€‚</p><p>æˆªæ­¢ 2025-08ï¼Œä»¥ä¸‹æ¨¡å‹<strong>å¯ç¨³å®šè¿è¡Œ</strong></p><table><thead><tr><th>æ¨¡å‹å</th><th>æ ¼å¼</th><th>å¤§å°</th><th>Tokens/s (ç”Ÿæˆ)</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td><code>gemma-3n-E4B-it</code></td><td>MLX 4bit</td><td>2.5GB</td><td>100+</td><td>å®æµ‹æœ€æµç•…</td></tr><tr><td><code>deepseek-coder-1.3b-instruct</code></td><td>GGUF Q4_K_M</td><td>~2.8GB</td><td>~80</td><td>llama.cpp è·‘</td></tr><tr><td><code>qwen1.5-7b-chat</code></td><td>GGUF Q4_K_M</td><td>~5GB</td><td>~35</td><td>è¯­ä¹‰è¡¨ç°ç¨³å®š</td></tr><tr><td><code>unsloth/Qwen3-Coder-30B-A3B-Instruct</code></td><td>GGUF Q2_K_S</td><td>~11.8GB</td><td>~10â€“13</td><td>å‹‰å¼ºå¯ç”¨ï¼Œå†…å­˜å‹çº¿</td></tr><tr><td><code>mistral-7b-instruct-v0.3</code></td><td>GGUF Q4_K_M</td><td>~5.8GB</td><td>~30â€“40</td><td>LLM åŸºçº¿</td></tr><tr><td><code>gemma3n</code> 8bit</td><td>MLX 8bit</td><td>~5GB</td><td>~65</td><td>ç¨³å®šè¿è¡Œï¼ŒCPUå æ¯”ç¨é«˜</td></tr><tr><td><code>openai/whisper-large-v3</code></td><td>FP16</td><td>~5.2GB</td><td>~1Ã—å®æ—¶éŸ³é¢‘</td><td>whisper.cpp ç¼–è¯‘ï¼Œè¡¨ç°å¥½</td></tr></tbody></table><h3 id="âŒ-æ— æ³•ç¨³å®šè¿è¡Œçš„æ¨¡å‹">âŒ æ— æ³•ç¨³å®šè¿è¡Œçš„æ¨¡å‹</h3><p>å¤§äº15Bçš„æ¨¡å‹</p><table><thead><tr><th>æ¨¡å‹å</th><th>æ ¼å¼</th><th>åŸå› </th></tr></thead><tbody><tr><td><code>llama3-70b-instruct</code></td><td>GGUF</td><td>æ¨¡å‹æ–‡ä»¶ &gt;30GBï¼Œç›´æ¥ OOM</td></tr><tr><td><code>deepseek-coder-33b</code></td><td>GGUF Q2_K</td><td>Q2_K æ–‡ä»¶ &gt;14GBï¼Œæ¨¡å‹åŠ è½½åå³ crash</td></tr><tr><td><code>Claude 3 ç³»åˆ—</code>, <code>Mixtral 12x7B</code></td><td>Sharded/é GGUF</td><td>æ— æ³•åŠ è½½æˆ–æ ¼å¼ä¸å…¼å®¹</td></tr></tbody></table><hr><hr><h2 id="è¯­éŸ³-å›¾åƒèƒ½åŠ›è¯„ä¼°">è¯­éŸ³ + å›¾åƒèƒ½åŠ›è¯„ä¼°</h2><h3 id="Whisper-Large-v3">Whisper Large v3</h3><ul><li>ç¼–è¯‘ <code>whisper.cpp</code> with <code>-O3 -DCOREML -DWHISPER_COREML_FULL</code></li><li>å®æµ‹æ¨ç†é€Ÿåº¦ä¸º <strong>1x å®æ—¶éŸ³é¢‘é€Ÿåº¦</strong>ï¼Œå¯æœ¬åœ°è½¬å†™æ’­å®¢/ä¼šè®®å½•éŸ³</li></ul><h3 id="Bark-AudioLM">Bark / AudioLM</h3><ul><li>æ¨ç†æ—¶é—´é•¿ï¼Œä¸é€‚åˆ 16GB å†…å­˜åœºæ™¯ï¼Œæ¨è remote inference</li></ul><h3 id="LLaVA-MiniGPT">LLaVA + MiniGPT</h3><ul><li><code>llava-llama-2-7b-lightning.Q4_K_M</code> å¯åŠ è½½ï¼Œä½†å›¾åƒè½¬æ–‡å­—çº¦éœ€ 8â€“10s</li><li>CoreML GPU æ²¡æ˜¾è‘—åŠ é€Ÿï¼Œå›¾åƒå¤„ç†ç“¶é¢ˆä¸»è¦åœ¨é¢„å¤„ç†é˜¶æ®µï¼ˆclip embeddingï¼‰</li></ul><p>åœ¨è€ƒè™‘åœ¨Macç³»ç»Ÿä¸Šä½¿ç”¨LLMæ„å»ºå’Œç®¡ç†ä¸ªäººçŸ¥è¯†åŸºç¡€çš„å·¥å…·æ—¶ï¼ŒLM Studio MLXå’ŒOllamaéƒ½æ˜¯ä¸é”™çš„é€‰æ‹©ï¼Œä½†å…·æœ‰è‡ªå·±çš„ä¼˜åŠ¿ã€‚è®©æˆ‘ä»¬åˆ†è§£å¦‚ä½•åœ¨åŠŸèƒ½ï¼Œç”¨ä¾‹å’Œæ˜“ç”¨æ€§æ–¹é¢è¿›è¡Œæ¯”è¾ƒã€‚æœ‰é™çš„å®šåˆ¶ï¼šOllama çš„ç®€å•æ€§æ˜¯ä»¥çµæ´»æ€§ä¸ºä»£ä»·çš„ã€‚å¦‚æœæ‚¨æƒ³è¦æ›´å¥½åœ°æ§åˆ¶æ¨¡å‹è¡Œä¸ºã€å®šåˆ¶æˆ–ä¸å…¶ä»–ç³»ç»Ÿçš„é›†æˆï¼ŒOllama å¯èƒ½ä¸å¦‚ LM Studio MLX å¼ºå¤§ã€‚<br>åŸºæœ¬åŠŸèƒ½ï¼šè™½ç„¶ Ollama éå¸¸é€‚åˆç®€å•æŸ¥è¯¢å’Œç®¡ç†å°å‹çŸ¥è¯†åº“ï¼Œä½†å®ƒæ²¡æœ‰ LM Studio MLX é‚£ä¹ˆå¤šé«˜çº§åŠŸèƒ½ï¼Œä¾‹å¦‚å¤æ‚çš„æ•°æ®ç»“æ„ã€è®­ç»ƒæˆ–å¤šæ¨¡å‹é›†æˆã€‚</p><p>LM Studioç”¨è‡ªå·±çš„UIå¸¦æ¥äº†æ•´ä¸ªåŒ…è£…ã€‚åœ¨MacOSä¸Šï¼Œå®ƒä¹Ÿæ˜¯è¿è¡ŒMLXå‹å·çš„æœ€ç®€å•é€‰æ‹©ä¹‹ä¸€ã€‚ä¸äººä»¬ä¼¼ä¹æƒ³åˆ°çš„ç›¸åï¼Œå®ƒä¹Ÿå¯ä»¥åœ¨åå°è¿è¡Œå¹¶æˆä¸ºå…¶ä»–åº”ç”¨ç¨‹åºçš„åç«¯ï¼ˆOpenAi API +ä»–ä»¬è‡ªå·±çš„APIï¼‰ã€‚è‡³äºå…¶ç¼ºé™·ï¼Œå®ƒæ˜¯â€œElectron APPâ€ï¼Œå®ƒæ›´åŠ è‡ƒè‚¿ï¼ˆæ‚¨å¯èƒ½ä¸éœ€è¦æ‰€æœ‰å†…å®¹ï¼‰ï¼Œå¹¶ä¸”æ˜¾ç„¶æ˜¯å°é—­çš„ï¼ˆéƒ¨åˆ†æ˜¯ç”±å¼€æºæŠ€æœ¯æ”¯æŒï¼‰ã€‚</p><ol><li><p><strong>Ollama</strong> + GGUF é‡åŒ–æ¨¡å‹ï¼ˆQ4ã€Q6ï¼‰</p><ul><li><code>ollama pull deepseek-coder:6b</code>ï¼ˆæœ¬åœ°ä»£ç åŠ©æ‰‹ï¼‰</li><li><code>ollama pull phi3:4b</code>ï¼ˆè½»é‡æ¨ç†ï¼Œå¿«é€Ÿå“åº”ï¼‰</li><li>Ollama ç”Ÿæ€ä¸°å¯Œï¼Œå†…ç½® <code>RAG</code> åŠŸèƒ½ï¼Œå¯ä»¥å¿«é€Ÿæ­å»ºä¸ªäººçŸ¥è¯†åº“ã€‚</li></ul></li><li><p><strong>MLXï¼ˆApple è‡ªç ”çš„ PyTorch æ›¿ä»£å“ï¼‰</strong></p><ul><li>Apple æä¾›çš„ <code>MLX</code> æ¡†æ¶ï¼Œå¯ä»¥è®© LLM å……åˆ†åˆ©ç”¨ <strong>Mac çš„ NPU</strong>ï¼Œè¿›ä¸€æ­¥æå‡æ¨ç†æ€§èƒ½ã€‚</li><li>MLX é€‚åˆéœ€è¦è‡ªå·±è®­ç»ƒæˆ–è€…å¾®è°ƒï¼ˆfine-tuneï¼‰å°æ¨¡å‹çš„ç”¨æˆ·ï¼Œæ€§èƒ½æ¯” <code>torch-metal</code> æ›´ç¨³å®šã€‚</li></ul></li></ol><hr><h3 id="1-3-ä»·æ ¼-vs-æ‰©å±•æ€§ï¼šæœ€åˆ’ç®—çš„-macOS-è®¾å¤‡">** 1.3 ä»·æ ¼ vs. æ‰©å±•æ€§ï¼šæœ€åˆ’ç®—çš„ macOS è®¾å¤‡**</h3><p>ä¹° Mac Mini M4 æœ‰å‡ ä¸ªéšè—çš„ä¼˜ç‚¹ï¼š</p><ol><li><p><strong>æ¯” Mac Studio / MacBook Pro ä¾¿å®œå¾—å¤š</strong></p><ul><li>Mac Studioï¼ˆM2 Ultraï¼‰èµ·æ­¥ä»· 20,000+ï¼Œå®Œå…¨ä¸åˆ’ç®—ã€‚</li><li>MacBook Pro 14/16 è‹±å¯¸ä»·æ ¼é«˜ï¼Œä½†æ€§èƒ½å’Œ Mini å·®ä¸å¤šã€‚</li></ul></li><li><p><strong>å†…å­˜å’Œå­˜å‚¨å¯ä»¥å¤–æ¥æ‰©å±•</strong></p><ul><li>è¿æ¥ <strong>Thunderbolt SSD</strong>ï¼Œå¯ä»¥æ‰©å±•å¤§å®¹é‡å­˜å‚¨ï¼Œä¸ç”¨ä¹°å®˜æ–¹è¶…è´µçš„ SSD ç‰ˆæœ¬ã€‚</li><li><strong>64GB å†…å­˜çš„ç‰ˆæœ¬ç¡®å®æ›´è´µ</strong>ï¼Œä½†è€ƒè™‘åˆ° macOS çš„ <strong>Swap æœºåˆ¶</strong>ï¼Œ16GB ä¹Ÿèƒ½å‡‘åˆã€‚</li></ul></li><li><p><strong>macOS ç”Ÿæ€å¯¹å¼€å‘è€…å‹å¥½</strong></p><ul><li>è‡ªå¸¦ Unix ç¯å¢ƒï¼Œæ¯” Windows å¥½ç”¨ï¼ˆM4 ä¹Ÿæ”¯æŒ Asahi Linuxï¼‰ã€‚</li><li><strong>Python + Homebrew + Rust + Ollama</strong> ä¸€æ¡é¾™æ”¯æŒï¼Œå¾ˆé€‚åˆ LLM å’Œ AI å¼€å‘ã€‚</li></ul></li></ol><p>ç»¼åˆæ¥çœ‹ï¼ŒMac Mini M4 <strong>åœ¨æ€§èƒ½ã€ä»·æ ¼ã€å¯æ‰©å±•æ€§ä¹‹é—´æ‰¾åˆ°äº†æœ€ä¼˜è§£</strong>ï¼Œæ¯” iMacã€MacBook æ›´åˆé€‚åš LLM éƒ¨ç½²æœºã€‚</p><hr><h2 id="2-Mac-Mini-M4-åœ¨æˆ‘çš„-AI-å·¥ä½œæµä¸­çš„ä½œç”¨"><strong>2. Mac Mini M4 åœ¨æˆ‘çš„ AI å·¥ä½œæµä¸­çš„ä½œç”¨</strong></h2><p>ä¹°äº† Mac Mini M4 ä¹‹åï¼Œæˆ‘ä¸»è¦ç”¨å®ƒæ¥åš <strong>æœ¬åœ° AI åŠ©æ‰‹ + ä¸ªäººçŸ¥è¯†åº“</strong>ï¼Œå…·ä½“ç”¨é€”åŒ…æ‹¬ï¼š</p><h3 id="2-1-ä¸ªäººçŸ¥è¯†åº“ï¼ˆLocal-RAGï¼‰">** 2.1 ä¸ªäººçŸ¥è¯†åº“ï¼ˆLocal RAGï¼‰**</h3><ul><li>é€šè¿‡ <code>Ollama + LangChain</code> æ­å»º**æœ¬åœ° RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰**ç³»ç»Ÿã€‚</li><li>æ•°æ®å­˜å‚¨åœ¨ <strong>ChromaDB</strong> æˆ– <strong>Qdrant</strong> é‡Œï¼Œé…åˆ <code>Mistral 7B</code> æˆ– <code>Phi-3</code> è¿›è¡ŒæŸ¥è¯¢ã€‚</li><li>å®ç°ä¸€ä¸ªç¦»çº¿å¯ç”¨çš„ AI åŠ©æ‰‹ï¼Œä¸ä¾èµ– OpenAI APIã€‚</li></ul><h3 id="2-2-æœ¬åœ°ä»£ç åŠ©æ‰‹">** 2.2 æœ¬åœ°ä»£ç åŠ©æ‰‹**</h3><ul><li>ç”¨ <code>Deepseek Coder</code> ä½œä¸º <strong>ç¦»çº¿ä»£ç è¡¥å…¨åŠ©æ‰‹</strong>ï¼Œåœ¨ VS Code é‡Œè¿è¡Œ <code>ollama run deepseek-coder:6b</code>ã€‚</li><li>ç»“åˆ <code>Copilot</code>ï¼Œæé«˜ä»£ç å†™ä½œæ•ˆç‡ï¼Œé€‚åˆç¦»çº¿ç¯å¢ƒæˆ–æ•°æ®éšç§è¦æ±‚é«˜çš„é¡¹ç›®ã€‚</li></ul><h3 id="2-3-è½»é‡çº§-AI-è®­ç»ƒ">** 2.3 è½»é‡çº§ AI è®­ç»ƒ**</h3><ul><li>ä¸»è¦ç”¨ <code>MLX</code> è·‘ä¸€äº›å°æ¨¡å‹çš„å¾®è°ƒï¼ˆFine-tuneï¼‰ã€‚</li><li><code>MLX</code> å¯ä»¥å……åˆ†åˆ©ç”¨ Mac çš„ <strong>Neural Engineï¼ˆNPUï¼‰</strong>ï¼Œæ¯” CPU-only æ–¹æ¡ˆå¿«å¾ˆå¤šã€‚</li></ul><hr><h2 id="3-æŠ˜è…¾çš„æ”¶è·"><strong>3. æŠ˜è…¾çš„æ”¶è·</strong></h2><p>ä»¥ DeepSeek-R1-0528-Qwen3-8B-GGUFä¸ºä¾‹ï¼Œ è¿™ä¸ªæ¨¡å‹çš„å¤šä¸ªé‡åŒ–ç‰ˆæœ¬ï¼ˆæ¯”å¦‚ Q4_K_XLã€Q5_K_Mã€Q6_K ç­‰ï¼‰ï¼Œè¯¥å¦‚ä½•é€‰æ‹©æœ€åˆé€‚çš„ä¸€ä¸ªç”¨äºéƒ¨ç½²åœ¨ ollama æˆ–å…¶ä»–æœ¬åœ°æ¨ç†ç¯å¢ƒä¸Šã€‚ä¸‹é¢ä»å‡ ä¸ªå…³é”®ç»´åº¦æ¥å¸®ä½ åˆ†æé€‰å‹ã€‚<br>è¿™äº› Q4_K_Mã€Q5_K_Sã€Q6_K_XL æ˜¯ GGUF æ ¼å¼æ¨¡å‹çš„é‡åŒ–é…ç½®ï¼Œä»£è¡¨ä¸åŒç²¾åº¦å’Œå†…å­˜å ç”¨ã€‚æ•°å­—ä»£è¡¨ä½æ•°ï¼ˆ4bitã€5bitã€6bitâ€¦ï¼‰ï¼ŒK è¡¨ç¤ºä½¿ç”¨ k-bit quantization çš„ç®—æ³•å˜ç§ï¼ˆç›®å‰æœ€ä½³å®è·µï¼‰ï¼Œåç¼€ M/S/XL è¡¨ç¤ºç²¾åº¦å·®å¼‚ä¸æ¨¡å‹é‡åŒ–ç»†èŠ‚ã€‚</p><p>Q4_0, Q4_1: æœ€åŸºç¡€çš„ 4bit é‡åŒ–ï¼Œé€Ÿåº¦å¿«ï¼Œå ç”¨å°ï¼Œä½†å‡†ç¡®ç‡ä¸‹é™æ˜æ˜¾ã€‚</p><p>Q4_K_M, Q4_K_XL: å±äº k-quant å®¶æ—ä¸­ä¼˜åŒ–è¿‡çš„ 4bit ç‰ˆæœ¬ï¼Œåœ¨ç²¾åº¦å’Œæ€§èƒ½é—´æŠ˜ä¸­è¾ƒå¥½ã€‚</p><p>Q5_K_<em>, Q6_K_</em>: ç²¾åº¦æ›´é«˜ï¼Œå ç”¨æ›´å¤šèµ„æºï¼Œé€‚åˆéœ€è¦è¾ƒé«˜å‡†ç¡®åº¦çš„ä»»åŠ¡ã€‚</p><p>Q8_0, Q8_K_XL: å‡ ä¹æ˜¯ FP16 çº§åˆ«çš„ç²¾åº¦ï¼Œå ç”¨å¤§ï¼Œæ¨ç†æ…¢ä½†å‡†ç¡®ç‡æ¥è¿‘åŸå§‹æ¨¡å‹ã€‚</p><p>ç¡¬ä»¶èµ„æºçº¦æŸï¼ˆMac mini M4 16GBï¼‰<br>ä½ åœ¨ Mac mini M4 ä¸Šè·‘æœ¬åœ°æ¨¡å‹ï¼ˆå‡è®¾æ—  GPUï¼Œåªç”¨ CPU + NEï¼‰ï¼Œå®é™…èƒ½ç”¨çš„ RAM ä¸åˆ° 13GBï¼ˆç³»ç»Ÿå’Œåº”ç”¨ä¼šåƒæ‰ä¸€éƒ¨åˆ†ï¼‰ã€‚æ‰€ä»¥è¿™å°±é™åˆ¶äº†ä½ æœ€å¤šåªèƒ½åŠ è½½åˆ° Q6_K_XL ç”šè‡³ Q6_Kï¼Œè€Œ Q8_K_XL ä½“ç§¯ &gt;10GBï¼Œä¼šéå¸¸åƒå†…å­˜å’Œ swapï¼Œä¸¥é‡æ‹–æ…¢å“åº”ã€‚</p><table><thead><tr><th>ç‰ˆæœ¬å</th><th>å¤§å°</th><th>æ˜¯å¦æ¨èï¼ˆMac mini 16GBï¼‰</th></tr></thead><tbody><tr><td>Q4_0</td><td>4.79GB</td><td>âœ… å¿«é€Ÿæµ‹è¯•/å¾®äº¤äº’å‹ä»»åŠ¡</td></tr><tr><td>Q4_K_M</td><td>5.03GB</td><td>âœ… æ¨èåˆå§‹éƒ¨ç½²</td></tr><tr><td>Q4_K_XL</td><td>5.12GB</td><td>âœ… å¹³è¡¡å¥½æ€§èƒ½å’Œå‡†ç¡®ç‡</td></tr><tr><td>Q5_K_S</td><td>5.72GB</td><td>âœ… è‹¥ä½ è¿½æ±‚æ›´é«˜å‡†ç¡®ç‡</td></tr><tr><td>Q6_K_XL</td><td>7.49GB</td><td>âš ï¸ ä¸´ç•Œï¼Œå®¹æ˜“çˆ†å†…å­˜</td></tr><tr><td>Q8_K_XL</td><td>10.8GB</td><td>âŒ å¯èƒ½æ— æ³•åŠ è½½æˆ–å¤ªæ…¢</td></tr></tbody></table><p>è¿™æ®µæ—¶é—´æŠ˜è…¾ä¸‹æ¥ï¼Œæˆ‘æœ‰å‡ ä¸ªæ„Ÿæ‚Ÿï¼š</p><ol><li><p><strong>Mac ç¡®å®é€‚åˆæœ¬åœ°æ¨ç†ï¼Œä½†ä¸é€‚åˆè®­ç»ƒå¤§æ¨¡å‹ã€‚</strong></p><ul><li>Mac Mini M4 åœ¨ <strong>7B LLM åŠä»¥ä¸‹çš„æ¨ç†</strong> ä½“éªŒå¾ˆå¥½ï¼Œä½†è¦è·‘æ›´å¤§çš„æ¨¡å‹ï¼ˆ&gt;14Bï¼‰ï¼Œè¿˜æ˜¯å¾—ä¸Š <strong>PC + é«˜å†…å­˜æ–¹æ¡ˆ</strong>ã€‚</li><li>å¾®è°ƒï¼ˆFine-tuneï¼‰è™½ç„¶å¯ä»¥ç”¨ MLXï¼Œä½†è¿œä¸å¦‚ <strong>Linux + A100/3090 æœåŠ¡å™¨</strong> æ¥å¾—é«˜æ•ˆã€‚</li></ul></li><li><p><strong>Ollama çš„ä½“éªŒè¿œè¶…æƒ³è±¡ï¼Œä½†ä¸‹è½½é€Ÿåº¦éœ€è¦ä¼˜åŒ–ã€‚</strong></p><ul><li><code>ollama pull</code> é€Ÿåº¦åæœŸéª¤é™ï¼Œ<strong>å¯èƒ½æ˜¯æœåŠ¡å™¨/CDN é™æµ</strong>ï¼Œéœ€è¦æ‰‹åŠ¨ä¼˜åŒ–ä¸‹è½½ç­–ç•¥ï¼ˆè§æˆ‘çš„ <code>pull -&gt; stop -&gt; sleep</code> æ–¹æ¡ˆï¼‰ã€‚</li></ul></li></ol><h2 id="ä¼˜åŒ–-Bash-ç‰ˆæœ¬ï¼ˆé€‚ç”¨äº-Linux-macOSï¼‰"><strong>ä¼˜åŒ– Bash ç‰ˆæœ¬ï¼ˆé€‚ç”¨äº Linux/macOSï¼‰</strong></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">MODEL_NAME=<span class="string">"deepseek-coder-v2:16b"</span></span><br><span class="line">MAX_ATTEMPTS=10  <span class="comment"># æœ€å¤§å°è¯•æ¬¡æ•°</span></span><br><span class="line">TIMEOUT=120      <span class="comment"># æ¯æ¬¡ä¸‹è½½æ—¶é—´ï¼ˆç§’ï¼‰</span></span><br><span class="line">SLEEP_TIME=3     <span class="comment"># åœæ­¢åç­‰å¾…æ—¶é—´</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">trap</span> <span class="string">"echo 'Stopping...'; exit 1"</span> SIGINT SIGTERM</span><br><span class="line"></span><br><span class="line">attempt=1</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$attempt</span> -le <span class="variable">$MAX_ATTEMPTS</span> ]; <span class="keyword">do</span></span><br><span class="line">    <span class="comment"># æ£€æŸ¥æ˜¯å¦å·²ä¸‹è½½</span></span><br><span class="line">    <span class="keyword">if</span> ollama list | awk <span class="string">'{print $1}'</span> | grep -q <span class="string">"^$MODEL_NAME$"</span>; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">" Model <span class="variable">$MODEL_NAME</span> is fully downloaded."</span></span><br><span class="line">        <span class="built_in">exit</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"â³ Attempt <span class="variable">$attempt</span>: Pulling model <span class="variable">$MODEL_NAME</span>..."</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å¼€å§‹ä¸‹è½½</span></span><br><span class="line">    ollama pull <span class="string">"<span class="variable">$MODEL_NAME</span>"</span> &amp;</span><br><span class="line">    PID=$!</span><br><span class="line">    <span class="built_in">sleep</span> <span class="variable">$TIMEOUT</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åœæ­¢è¿›ç¨‹</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"â¹ï¸ Stopping download..."</span></span><br><span class="line">    <span class="built_in">kill</span> <span class="variable">$PID</span> 2&gt;/dev/null</span><br><span class="line">    <span class="built_in">sleep</span> <span class="variable">$SLEEP_TIME</span></span><br><span class="line"></span><br><span class="line">    attempt=$((attempt+<span class="number">1</span>))</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"âš ï¸ Model download incomplete after <span class="variable">$MAX_ATTEMPTS</span> attempts. Please check manually."</span></span><br><span class="line"><span class="built_in">exit</span> 1</span><br></pre></td></tr></table></figure><hr><h3 id="Windows-PowerShell-ç‰ˆæœ¬"><strong>Windows PowerShell ç‰ˆæœ¬</strong></h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$MODEL_NAME</span> = <span class="string">"deepseek-coder-v2:16b"</span></span><br><span class="line"><span class="variable">$MAX_ATTEMPTS</span> = <span class="number">10</span></span><br><span class="line"><span class="variable">$TIMEOUT</span> = <span class="number">120</span></span><br><span class="line"><span class="variable">$SLEEP_TIME</span> = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$attempt</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> (<span class="variable">$attempt</span> <span class="operator">-le</span> <span class="variable">$MAX_ATTEMPTS</span>) {</span><br><span class="line">    <span class="comment"># æ£€æŸ¥æ˜¯å¦å·²ä¸‹è½½</span></span><br><span class="line">    <span class="variable">$modelExists</span> = ollama list | <span class="built_in">Select-String</span> <span class="variable">$MODEL_NAME</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$modelExists</span>) {</span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="string">" Model <span class="variable">$MODEL_NAME</span> is fully downloaded."</span></span><br><span class="line">        <span class="keyword">exit</span> <span class="number">0</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Write-Host</span> <span class="string">"â³ Attempt <span class="variable">$attempt:</span> Pulling model <span class="variable">$MODEL_NAME</span>..."</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯åŠ¨ä¸‹è½½</span></span><br><span class="line">    <span class="built_in">Start-Process</span> <span class="literal">-NoNewWindow</span> <span class="literal">-FilePath</span> <span class="string">"ollama.exe"</span> <span class="literal">-ArgumentList</span> <span class="string">"pull <span class="variable">$MODEL_NAME</span>"</span></span><br><span class="line">    <span class="built_in">Start-Sleep</span> <span class="literal">-Seconds</span> <span class="variable">$TIMEOUT</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç»ˆæ­¢ä¸‹è½½</span></span><br><span class="line">    <span class="built_in">Write-Host</span> <span class="string">"â¹ï¸ Stopping download..."</span></span><br><span class="line">    <span class="built_in">Stop-Process</span> <span class="literal">-Name</span> <span class="string">"ollama"</span> <span class="literal">-Force</span> <span class="literal">-ErrorAction</span> SilentlyContinue</span><br><span class="line">    <span class="built_in">Start-Sleep</span> <span class="literal">-Seconds</span> <span class="variable">$SLEEP_TIME</span></span><br><span class="line"></span><br><span class="line">    <span class="variable">$attempt</span>++</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="built_in">Write-Host</span> <span class="string">"âš ï¸ Model download incomplete after <span class="variable">$MAX_ATTEMPTS</span> attempts. Please check manually."</span></span><br><span class="line"><span class="keyword">exit</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><ul><li><strong>æœ¬åœ° LLM ä½“éªŒå¾ˆæ£’</strong>ï¼Œå¯ä»¥å®Œå…¨æ›¿ä»£éƒ¨åˆ† ChatGPT ä½¿ç”¨åœºæ™¯ã€‚</li></ul><ol start="3"><li><strong>Mac Mini M4 æœªæ¥çš„ä»·å€¼å¾ˆå¤§ã€‚</strong><ul><li>Apple çš„ <strong>Neural Engineï¼ˆNPUï¼‰</strong> è¶Šæ¥è¶Šå¼ºï¼Œæœªæ¥ M4 Proã€M5 å¯èƒ½ä¼šæ›´é€‚åˆ AI éƒ¨ç½²ã€‚</li><li><strong>æœ¬åœ° AI+RAG æ˜¯è¶‹åŠ¿</strong>ï¼Œä¸ªäººè®¾å¤‡ä¸Šçš„ LLM ä¼šå˜å¾—è¶Šæ¥è¶Šæ™®åŠã€‚</li></ul></li></ol><hr><hr><h2 id="ğŸ› ï¸-å®ç”¨æŠ€å·§-æ¨èç¤¾åŒº">ğŸ› ï¸ å®ç”¨æŠ€å·§ &amp; æ¨èç¤¾åŒº</h2><ul><li>å–„ç”¨ <a href="https://huggingface.co/TheBloke">HuggingFace</a>, <a href="https://huggingface.co/catalyst">catalyst</a>, <code>mlx-community</code> æ¨¡å‹ä»“åº“ï¼Œç¬¬ä¸€æ—¶é—´èƒ½è·å–æœ€æ–° GGUF æˆ– MLX è½¬æ¢ç‰ˆæœ¬ã€‚</li><li>åŠ å…¥ <a href="https://www.reddit.com/r/LocalLLaMA/">r/LocalLLaMA</a> å’Œ Discord ç¾¤ä½“ï¼Œè·Ÿè¸ªæ¨¡å‹å‘å¸ƒèŠ‚å¥ä¸ benchmarkï¼Œå¯¹å®é™…èƒ½è·‘çš„æ¨¡å‹ä¸€ç›®äº†ç„¶ã€‚</li><li>å¤šå…³æ³¨ <code>TheBloke</code>, <code>Undi95</code>, <code>unsloth</code>, <code>ggerganov</code>, <code>mlx-examples</code> ä»“åº“ï¼Œ90% çš„é‡åŒ–æ¨¡å‹éƒ½ä»è¿™äº› repo èµ·æºã€‚</li><li>åˆ©ç”¨ <code>llama-cpp-server</code> + <code>llama-swap</code> è‡ªå»º API proxyï¼Œå¯å¤ç”¨æ¨¡å‹å¹¶é¿å… LM Studio å¤šæ¨¡å‹å†²çªã€‚<br>ğŸ’¡ é€‚åˆï¼šä½ å¯¹ macOS/Linux é…ç½®ç†Ÿæ‚‰ï¼Œåªéœ€è¦ 1-2 ä¸ªæœåŠ¡<br>å¦‚æœä½ åªæƒ³è·‘ Open WebUI æˆ– AnythingLLMï¼Œå¯ä»¥æ‰‹åŠ¨å®‰è£…ä¾èµ–ï¼Œæ¯”å¦‚ï¼š</li></ul><p>sh<br>å¤åˆ¶<br>ç¼–è¾‘</p><h1>å®‰è£… Node.js</h1><p>brew install node</p><h1>å®‰è£… Open WebUI</h1><p>git clone <a href="https://github.com/open-webui/open-webui.git">https://github.com/open-webui/open-webui.git</a><br>cd open-webui<br>npm install<br>npm run dev<br>ğŸ“Œ ä¼˜åŠ¿ï¼š<br>ä¸éœ€è¦ Dockerï¼Œå‡å°‘èµ„æºå ç”¨<br>å¯ä»¥è‡ªå·±æ§åˆ¶ç¯å¢ƒï¼Œé¿å… Docker é¢å¤–çš„ç£ç›˜æ¶ˆè€—</p><h2 id="4-ç»“è®ºï¼šMac-Mini-M4ï¼Œæœ€å…·æ€§ä»·æ¯”çš„æœ¬åœ°-AI-è®¾å¤‡"><strong>4. ç»“è®ºï¼šMac Mini M4ï¼Œæœ€å…·æ€§ä»·æ¯”çš„æœ¬åœ° AI è®¾å¤‡</strong></h2><p>å¦‚æœä½ çš„éœ€æ±‚æ˜¯ <strong>è·‘æœ¬åœ° AI åŠ©æ‰‹ã€LLM æ¨ç†ã€ä¸ªäººçŸ¥è¯†åº“</strong>ï¼Œ<strong>Mac Mini M4 ç»å¯¹æ˜¯ç›®å‰æœ€å…·æ€§ä»·æ¯”çš„ Apple è®¾å¤‡</strong>ã€‚</p><p>ğŸ“Œ <strong>é€‚åˆäººç¾¤</strong>ï¼š<br>æƒ³æŠ˜è…¾æœ¬åœ° AIï¼Œä½“éªŒ Ollama / MLX<br>éœ€è¦ä¸€ä¸ªä½åŠŸè€—ã€é«˜æ€§ä»·æ¯”çš„ macOS è®¾å¤‡<br>ä¸»è¦è·‘ 7B ä»¥å†… LLMï¼Œæˆ–åšå°å‹ RAG / æœ¬åœ° AI åº”ç”¨</p><p>ğŸ’¡ <strong>ä¸é€‚åˆ</strong>ï¼š<br>âŒ è®­ç»ƒå¤§æ¨¡å‹ï¼ˆå»ºè®®ä¸Š Linux + 3090/A100ï¼‰<br>âŒ éœ€è¦ 64GB ä»¥ä¸Šå†…å­˜ï¼ˆM4 Mini æœ€é«˜åªæ”¯æŒ 36GBï¼‰</p><p>ç›®å‰æ¥çœ‹ï¼ŒMac Mini M4 æ˜¯ <strong>ä½æˆæœ¬ä¸ªäºº LLM éƒ¨ç½²æœ€åˆ’ç®—çš„é€‰æ‹©</strong>ï¼Œæ¯”æœåŠ¡å™¨æˆ–é«˜ç«¯ Mac æ–¹æ¡ˆéƒ½æ›´é€‚åˆæŠ˜è…¾ï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¯¹äº 20Bä»¥ä¸Šçš„æ¨¡å‹ Mac mini 16GB è¿˜æ˜¯ä¸å¤ªå¤Ÿã€‚ èŠ¯ç‰‡è™½ç„¶ CPU å•æ ¸å¼ºï¼ŒNPU åŠŸè€—æ¯”ä¹Ÿä¸é”™ï¼Œä½†çœŸè¦è·‘ LLMï¼Œæœ€å¤§ç“¶é¢ˆä¸æ˜¯ CPUï¼Œè€Œæ˜¯å†…å­˜å¸¦å®½å’Œæ€» RAMã€‚ä½ æåˆ°çš„å†…å­˜å¸¦å®½å·®å¼‚ï¼Œæ‰æ˜¯å…³é”®ï¼š&lt;br&gt;
M4ï¼šå¸¦å®½åœ¨ 120GB/s å·¦å³ï¼Œè·Ÿæ™®é€š DDR5</summary>
      
    
    
    
    
    <category term="LLM" scheme="https://stan370.github.io/tags/LLM/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘ä»¬æ˜¯è¢«æ€ä¹ˆå¡‘é€ çš„ï¼Ÿ</title>
    <link href="https://stan370.github.io/2025/03/11/Whoarewe/"/>
    <id>https://stan370.github.io/2025/03/11/Whoarewe/</id>
    <published>2025-03-11T13:11:46.000Z</published>
    <updated>2025-06-07T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>Lately, Iâ€™ve been reflecting on how deeply our upbringing, culture, and self-perception influence our present. Many of our strugglesâ€”perfectionism, anxiety, or even feeling out of placeâ€”can often be traced back to these invisible forces shaping us from childhood.</p><p>æˆ‘ä»¬ç™»ä¸Šçš„å¹¶éæˆ‘ä»¬æ‰€é€‰æ‹©çš„èˆå°ï¼Œæ¼”å‡ºå¹¶éæˆ‘ä»¬æ‰€é€‰æ‹©çš„å‰§æœ¬.We donâ€™t choose our starting point. Parents, school, and society hand us a blueprint for how to think, behave, and define success. Some people grow up with constant pressure to achieve, while others are raised in environments that encourage self-expression and risk-taking. These early experiences shape our core beliefsâ€”ideas we hold about ourselves and the world, often without questioning them.</p><p>If you grew up in an environment where failure was unacceptable, you might internalize perfectionism.<br>If you were constantly compared to others, self-worth might feel conditionalâ€”only valid when you achieve something.<br>If your culture emphasized collectivism over individualism, personal desires might feel selfish, making decisions harder.</p><p>Asian cultures (and many others with strong traditional values) often emphasize duty, hierarchy, and stability over self-expression. This is a double-edged sword:<br>âœ… It fosters discipline, responsibility, and strong family bonds.<br>âŒ It can also create rigid expectations, where success is narrowly defined (grades, career, financial stability).</p><p>In contrast, Western culturesâ€”especially in English-speaking and Protestant European countriesâ€”tend to prioritize self-expression, independence, and questioning authority. Neither is inherently better, but conflicts arise when someone raised in a more traditional setting starts questioning these values.</p><p>For example:</p><p>Wanting to change careers or take risks might feel like betraying expectations.<br>Prioritizing mental well-being over external success might seem selfish.<br>Expressing emotions openly might feel unnatural or weak.</p><p>The good news? Your beliefs are not fixed. Cognitive Behavioral Therapy (CBT) teaches that thoughts create emotions, and emotions shape behavior. By questioning negative core beliefs, you can reframe your self-perception and break free from limiting patterns.</p><p>For example:</p><p>Instead of â€œI must be perfect to be worthy,â€ try â€œI am valuable beyond my achievements.â€<br>Instead of â€œI canâ€™t fail, or Iâ€™ll disappoint everyone,â€ try â€œFailure is proof that Iâ€™m trying something worthwhile.â€<br>Instead of â€œI must follow the safest path,â€ try â€œExploring my own path is an act of self-respect.â€<br>Defining Life Values: What Truly Matters? At some point, we have to decide: Whose values are we living by?</p><p>Are we chasing success defined by society, family, or our true selves?<br>Are we making choices based on fear or genuine desire?<br>Are we prioritizing what looks good externally or what feels right internally?<br>Finding inner peace comes not from external achievements but from aligning life with authentic values. Some people find it in creative work, relationships, impact, or even embracing uncertainty. Thereâ€™s no single right answerâ€”only the one that resonates with you.</p><p>Final Thoughts<br>Culture and upbringing shape us, but they donâ€™t have to define us forever. Recognizing the patterns, questioning them, and rewriting our own narrative is part of growth. The goal isnâ€™t to reject where we came from but to integrate it with who we choose to become.<br>If free will means being completely uncaused by prior events, it probably doesnâ€™t exist. But if it means acting based on your own reasoning, emotions, and desires (even if those are influenced by prior causes), then we can still meaningfully say we have free will.</p><p>The real question is: Do you need â€œultimateâ€ free will to feel like your choices matter?<br>Would love to hear from othersâ€”have you ever questioned the values you were raised with? What helped you redefine them?</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Lately, Iâ€™ve been reflecting on how deeply our upbringing, culture, and self-perception influence our present. Many of our strugglesâ€”perf</summary>
      
    
    
    
    <category term="æ„Ÿæƒ³" scheme="https://stan370.github.io/categories/%E6%84%9F%E6%83%B3/"/>
    
    
  </entry>
  
  <entry>
    <title>The Roads I Couldnâ€™t Take</title>
    <link href="https://stan370.github.io/2025/03/05/poem/index/"/>
    <id>https://stan370.github.io/2025/03/05/poem/index/</id>
    <published>2025-03-05T07:49:50.000Z</published>
    <updated>2025-03-19T13:49:45.577Z</updated>
    
    <content type="html"><![CDATA[<p>tossed no books, yet lost my pages,<br>Watched my past slip through the ages.<br>A younger me once held them tight,<br>But let them go into the night.</p><p>set my sights on distant lands,<br>With open heart and empty hands.<br>Locked in walls I couldnâ€™t break,<br>Dreams delayedâ€”what path to take?</p><p>The rules shift, the borders change,<br>Plans collapse, yet I remain.<br>Not a thread but woven streams,<br>Not one path but countless dreams.</p><p>If gates are closed, Iâ€™ll build my door,<br>If tides retreat, Iâ€™ll row the shore.<br>Not bound by place, nor time, nor fate,<br>I shape my worldâ€”itâ€™s not too late.</p><p>Though the past is cast in stone,<br>The futureâ€™s mine to carve alone.<br>All those moments will be lost in time<br>like tears in rain.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;tossed no books, yet lost my pages,&lt;br&gt;
Watched my past slip through the ages.&lt;br&gt;
A younger me once held them tight,&lt;br&gt;
But let them go</summary>
      
    
    
    
    <category term="æ„Ÿæƒ³" scheme="https://stan370.github.io/categories/%E6%84%9F%E6%83%B3/"/>
    
    
  </entry>
  
  <entry>
    <title>è®¿é—®localhostçš„æ—¶å€™ä½ çš„ç”µè„‘å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</title>
    <link href="https://stan370.github.io/2025/02/28/Network/network/"/>
    <id>https://stan370.github.io/2025/02/28/Network/network/</id>
    <published>2025-02-28T14:20:57.000Z</published>
    <updated>2025-03-19T12:12:05.248Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-ç¯å›åœ°å€ï¼ˆ127-0-0-1ï¼‰çš„è¯·æ±‚æµç¨‹"><strong>1. ç¯å›åœ°å€ï¼ˆ127.0.0.1ï¼‰çš„è¯·æ±‚æµç¨‹</strong></h2><h4 id="1-åè®®æ ˆçš„å¤„ç†"><strong>(1) åè®®æ ˆçš„å¤„ç†</strong></h4><ul><li><strong>æ•°æ®åŒ…ä»ç„¶ä¼šèµ°å®Œæ•´çš„ç½‘ç»œåè®®æ ˆ</strong>ï¼ˆåº”ç”¨å±‚ â†’ ä¼ è¾“å±‚ â†’ ç½‘ç»œå±‚ â†’ é“¾è·¯å±‚ï¼‰ï¼Œä½†é“¾è·¯å±‚å’Œç‰©ç†å±‚çš„å¤„ç†æ˜¯è™šæ‹Ÿçš„ã€‚</li><li><strong>å…³é”®ç‚¹ï¼š</strong><ul><li><strong>ç½‘ç»œå±‚ï¼ˆIPå±‚ï¼‰ï¼š</strong> æ•°æ®åŒ…çš„ç›®æ ‡åœ°å€æ˜¯ <code>127.0.0.1</code>ï¼Œæ“ä½œç³»ç»Ÿè¯†åˆ«ä¸ºç¯å›åœ°å€ï¼Œä¸ä¼šå°†æ•°æ®åŒ…å‘é€åˆ°ç‰©ç†ç½‘å¡ã€‚</li><li><strong>é“¾è·¯å±‚å’Œç‰©ç†å±‚ï¼š</strong> æ“ä½œç³»ç»Ÿé€šè¿‡è™šæ‹Ÿçš„ç¯å›æ¥å£ï¼ˆ<code>lo</code> æˆ– <code>Loopback Adapter</code>ï¼‰å¤„ç†æ•°æ®åŒ…ï¼Œä¸ä¼šè§¦å‘çœŸå®çš„ç¡¬ä»¶æ“ä½œï¼ˆå¦‚ç½‘å¡æ”¶å‘æ•°æ®ï¼‰ã€‚</li><li><strong>ä¼ è¾“å±‚ï¼ˆTCP/UDPï¼‰ï¼š</strong> ä»ç„¶éœ€è¦å®Œæˆç«¯å£ç»‘å®šã€è¿æ¥ç®¡ç†ç­‰é€»è¾‘ï¼ˆä¾‹å¦‚ TCP çš„ä¸‰æ¬¡æ¡æ‰‹ï¼‰ã€‚</li></ul></li></ul><h4 id="2-ç¤ºä¾‹ï¼šPing-127-0-0-1"><strong>(2) ç¤ºä¾‹ï¼šPing 127.0.0.1</strong></h4><ul><li>å½“æ‰§è¡Œ <code>ping 127.0.0.1</code> æ—¶ï¼š<br>å½“ä½ åœ¨æµè§ˆå™¨ã€cURL æˆ–ä»»ä½•åº”ç”¨ç¨‹åºï¼ˆå¦‚ ping 127.0.0.1ï¼‰ä¸­è¾“å…¥ 127.0.0.1ï¼š</li></ul><p>åº”ç”¨ç¨‹åºä¼šå°è¯•è§£æè¯¥åœ°å€ï¼Œä½† 127.0.0.1 æ˜¯ä¸€ä¸ª IP åœ°å€ï¼Œä¸éœ€è¦ DNS è§£æã€‚<br>å®ƒä¼šé€‰æ‹©åè®®ï¼ˆé€šå¸¸æ˜¯ TCP æˆ– UDPï¼‰ï¼Œå¹¶è°ƒç”¨ç³»ç»Ÿ APIï¼ˆå¦‚ socket()ã€connect()ï¼‰ã€‚<br>2. ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰<br>å¦‚æœä½¿ç”¨ TCPï¼ˆå¦‚ HTTP è¯·æ±‚ï¼‰ï¼Œåº”ç”¨ç¨‹åºä¼šåˆ›å»ºä¸€ä¸ª TCP è¿æ¥, å†…æ ¸ä¼šç”Ÿæˆ TCP ä¸‰æ¬¡æ¡æ‰‹ï¼ˆSYN -&gt; SYN+ACK -&gt; ACKï¼‰ã€‚<br>å¦‚æœä½¿ç”¨ UDPï¼Œåˆ™ä¸ä¼šæœ‰è¿æ¥å»ºç«‹çš„è¿‡ç¨‹ï¼Œè€Œæ˜¯ç›´æ¥å‘é€æ•°æ®æŠ¥ã€‚<br>3. ç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰<br>ä¼ è¾“å±‚å°†æ•°æ®äº¤ç»™ ç½‘ç»œå±‚ï¼ŒæŒ‡å®šç›®æ ‡åœ°å€ 127.0.0.1ã€‚<br>ç½‘ç»œå±‚æ£€æµ‹åˆ° 127.0.0.1 å±äº ç¯å›åœ°å€ï¼ˆLoopback Addressï¼‰ï¼š<br>è¿™ä¸€åœ°å€ä¸ä¼šè¢«è·¯ç”±åˆ°å¤–éƒ¨ç½‘ç»œã€‚<br>æ“ä½œç³»ç»Ÿä¼šå°†æ•°æ®åŒ… ç›´æ¥é€å›æœ¬æœº å¤„ç†ï¼Œè€Œä¸ç»è¿‡ç½‘å¡ã€‚</p><p>a. ICMP è¯·æ±‚ï¼ˆç½‘ç»œå±‚ï¼‰ç”Ÿæˆå¹¶å‘é€åˆ°ç¯å›æ¥å£ã€‚<br>b. æ“ä½œç³»ç»Ÿç›´æ¥åœ¨å†…æ ¸ä¸­å°†è¯·æ±‚è½¬å‘ç»™æ¥æ”¶é€»è¾‘ï¼Œä¸ç»è¿‡ç‰©ç†ç½‘å¡ã€‚<br>c. å› æ­¤ï¼Œèƒ½ <code>ping</code> é€šï¼Œä½†æ•°æ®åŒ…ä»…åœ¨å†…å­˜ä¸­å¤„ç†ï¼Œä¸æ¶‰åŠç¡¬ä»¶ã€‚</p><ul><li><p>127.0.0.1ï¼š æ˜¯ä¸€ä¸ª IPv4 åœ°å€,  ç½‘ç»œå±‚æ£€æµ‹åˆ° <code>127.0.0.1</code> å±äº <strong>ç¯å›åœ°å€ï¼ˆLoopback Addressï¼‰</strong></p></li><li><p>åœ¨æ”¯æŒ IPv6 çš„ç³»ç»Ÿä¸­ï¼Œ<code>localhost</code>Â å¯èƒ½åŒæ—¶æ˜ å°„åˆ°Â <code>127.0.0.1</code>ï¼ˆIPv4ï¼‰å’ŒÂ <code>::1</code>ï¼ˆIPv6ï¼‰ã€‚</p><ul><li>å¦‚æœæœåŠ¡åªç›‘å¬ IPv4ï¼Œä½¿ç”¨Â <code>localhost</code>Â å¯èƒ½ä¼šå¯¼è‡´è¿æ¥å¤±è´¥ã€‚</li></ul></li><li><p><strong>æ€§èƒ½å·®å¼‚ï¼š</strong></p><ul><li>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ<code>localhost</code>Â å’ŒÂ <code>127.0.0.1</code>Â çš„æ€§èƒ½å·®å¼‚å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚</li><li>ä½†åœ¨é«˜å¹¶å‘æˆ–æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ä¸­ï¼Œç›´æ¥ä½¿ç”¨Â <code>127.0.0.1</code>Â å¯èƒ½æ›´é«˜æ•ˆã€‚</li></ul></li></ul><hr><h3 id="2-localhost-çš„è¯·æ±‚æµç¨‹"><strong>2. localhost çš„è¯·æ±‚æµç¨‹</strong></h3><ul><li><strong><code>localhost</code> æ˜¯ä¸»æœºå</strong>ï¼Œé»˜è®¤è§£æä¸º <code>127.0.0.1</code>ï¼Œå› æ­¤å…¶è¡Œä¸ºä¸ç›´æ¥ä½¿ç”¨ <code>127.0.0.1</code> å®Œå…¨ç›¸åŒã€‚</li><li><strong>è¯·æ±‚æµç¨‹ï¼š</strong><ol><li>åº”ç”¨å±‚å‘èµ·è¯·æ±‚ï¼ˆä¾‹å¦‚è®¿é—® <code>http://localhost:8080</code>ï¼‰ã€‚</li><li>DNS è§£æå°† <code>localhost</code> è½¬æ¢ä¸º <code>127.0.0.1</code>ã€‚</li></ol></li></ul><p><code>localhost</code> çš„è¯·æ±‚å¤„ç†æ–¹å¼ä»ç„¶ä¾èµ–äºç½‘ç»œåè®®æ ˆ, å¦‚æœ <code>localhost</code> å®Œå…¨ç»•è¿‡ç½‘ç»œåè®®æ ˆï¼Œç›´æ¥è®©åº”ç”¨å±‚å¤„ç†è¯·æ±‚ï¼Œé‚£å®ƒç¡®å®æ›´åƒ <strong>è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰</strong>ï¼Œæ¯”å¦‚ï¼š</p><ul><li><strong>Unix Domain Socketï¼ˆUDSï¼‰</strong></li><li><strong>å…±äº«å†…å­˜ã€ç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—</strong></li></ul><p>ä½†å®é™…æƒ…å†µæ˜¯ï¼š</p><ul><li><code>localhost</code> ä¾ç„¶éœ€è¦è§£æä¸º IP åœ°å€å¹¶èµ° TCP/IP åè®®æ ˆã€‚</li><li>åªä¸è¿‡æ•°æ®ä¸ä¼šç»è¿‡ç‰©ç†ç½‘å¡ï¼Œè€Œæ˜¯åœ¨ <strong>å†…æ ¸</strong> ä¸­å®Œæˆå›ç¯å¤„ç†ã€‚</li><li>æ‰€ä»¥å®ƒæ¯”æ™®é€šçš„ç½‘ç»œè¯·æ±‚å¿«ï¼Œä½†æ¯” IPC æ–¹å¼æ…¢ã€‚</li></ul><hr><h3 id="3-localhost-è¯·æ±‚-vs-æœ¬åœ°è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰"><strong>3. localhost è¯·æ±‚ vs. æœ¬åœ°è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰</strong></h3><h4 id="1-ç›¸ä¼¼ä¹‹å¤„"><strong>(1) ç›¸ä¼¼ä¹‹å¤„</strong></h4><ul><li><strong>ä¸ä¾èµ–ç‰©ç†ç½‘ç»œï¼š</strong> ä¸¤è€…éƒ½ä¸éœ€è¦ç‰©ç†ç½‘å¡æˆ–å¤–éƒ¨ç½‘ç»œè®¾å¤‡ã€‚</li><li><strong>é«˜æ€§èƒ½ï¼š</strong> ç”±äºæ•°æ®åœ¨å†…å­˜ä¸­å¤„ç†ï¼Œå»¶è¿Ÿæä½ã€‚</li></ul><h4 id="2-å…³é”®åŒºåˆ«"><strong>(2) å…³é”®åŒºåˆ«</strong></h4><table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>localhostï¼ˆç¯å›æ¥å£ï¼‰</strong></th><th><strong>æœ¬åœ°è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰</strong></th></tr></thead><tbody><tr><td><strong>åè®®æ ˆ</strong></td><td>èµ°å®Œæ•´çš„ç½‘ç»œåè®®æ ˆï¼ˆTCP/IPï¼‰</td><td>ç›´æ¥é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„ IPC æœºåˆ¶ï¼ˆå¦‚ç®¡é“ã€å…±äº«å†…å­˜ï¼‰</td></tr><tr><td><strong>ç¼–ç¨‹æ¥å£</strong></td><td>ä½¿ç”¨ Socket APIï¼ˆå¦‚ <code>bind()</code>, <code>listen()</code>ï¼‰</td><td>ä½¿ç”¨ IPC ä¸“ç”¨ APIï¼ˆå¦‚ <code>pipe()</code>, <code>shm_open()</code>ï¼‰</td></tr><tr><td><strong>å…¼å®¹æ€§</strong></td><td>ä¸ç½‘ç»œé€šä¿¡ä»£ç å®Œå…¨å…¼å®¹</td><td>éœ€è¦ä¸“é—¨è®¾è®¡ IPC é€»è¾‘</td></tr><tr><td><strong>æ•°æ®å°è£…</strong></td><td>éœ€è¦å¤„ç† TCP/UDP åŒ…å¤´ã€IP åŒ…å¤´ç­‰</td><td>ç›´æ¥ä¼ è¾“åŸå§‹æ•°æ®</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>æ¨¡æ‹Ÿç½‘ç»œæœåŠ¡ã€æµ‹è¯•å®¢æˆ·ç«¯-æœåŠ¡ç«¯é€»è¾‘</td><td>é«˜æ€§èƒ½è¿›ç¨‹é—´æ•°æ®äº¤æ¢</td></tr></tbody></table><h4 id="3-ä¸ºä»€ä¹ˆç¯å›æ¥å£ä»è¦èµ°åè®®æ ˆï¼Ÿ"><strong>(3) ä¸ºä»€ä¹ˆç¯å›æ¥å£ä»è¦èµ°åè®®æ ˆï¼Ÿ</strong></h4><ul><li><strong>å…¼å®¹æ€§ï¼š</strong> å¼€å‘è€…å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ç½‘ç»œç¼–ç¨‹ä»£ç ï¼ˆå¦‚ Socket APIï¼‰æµ‹è¯•æœ¬åœ°æœåŠ¡ï¼Œæ— éœ€ä¿®æ”¹é€»è¾‘ã€‚</li><li><strong>éš”ç¦»æ€§ï¼š</strong> é€šè¿‡ç«¯å£å·éš”ç¦»ä¸åŒæœåŠ¡ï¼Œä¸è¿œç¨‹é€šä¿¡çš„è¡Œä¸ºä¸€è‡´ã€‚</li><li><strong>å®‰å…¨æ€§ï¼š</strong> é˜²ç«å¢™è§„åˆ™å¯ä»¥ç»Ÿä¸€ç®¡ç†ç¯å›æ¥å£å’Œç‰©ç†æ¥å£çš„æµé‡ã€‚</li></ul><hr><h3 id="4-æ“ä½œç³»ç»Ÿçš„å®ç°ä¼˜åŒ–"><strong>4. æ“ä½œç³»ç»Ÿçš„å®ç°ä¼˜åŒ–</strong></h3><ul><li><strong>å†…æ ¸ä¼˜åŒ–ï¼š</strong> æ“ä½œç³»ç»Ÿä¼šå¯¹ç¯å›æ¥å£çš„æµé‡è¿›è¡Œä¼˜åŒ–ï¼Œä¾‹å¦‚ï¼š<ul><li>è·³è¿‡ç‰©ç†ç½‘å¡é©±åŠ¨å’Œä¸­æ–­å¤„ç†ã€‚</li><li>å‡å°‘æ•°æ®æ‹·è´æ¬¡æ•°ï¼ˆå¦‚ä»åº”ç”¨å±‚ç›´æ¥ä¼ é€’åˆ°æ¥æ”¶ç¼“å†²åŒºï¼‰ã€‚</li></ul></li><li><strong>æ€§èƒ½å¯¹æ¯”ï¼š</strong><ul><li><strong>ç¯å›æ¥å£ï¼š</strong> å»¶è¿Ÿé€šå¸¸åœ¨å¾®ç§’çº§ï¼ˆÎ¼sï¼‰ï¼Œååé‡å¯è¾¾æ•°å Gbpsã€‚</li><li><strong>IPCï¼š</strong> å»¶è¿Ÿå¯ä½è‡³çº³ç§’çº§ï¼ˆnsï¼‰ï¼Œååé‡æ›´é«˜ï¼ˆå–å†³äºå…·ä½“ IPC æœºåˆ¶ï¼‰ã€‚</li></ul></li></ul><hr><h3 id="5-å®éªŒéªŒè¯"><strong>5. å®éªŒéªŒè¯</strong></h3><h4 id="1-ä½¿ç”¨-Wireshark-æŠ“åŒ…"><strong>(1) ä½¿ç”¨ Wireshark æŠ“åŒ…</strong></h4><ul><li>æŠ“å–ç¯å›æ¥å£ï¼ˆå¦‚ <code>Loopback</code>ï¼‰çš„æµé‡ï¼Œå¯ä»¥çœ‹åˆ°å®Œæ•´çš„ TCP/IP æ•°æ®åŒ…ï¼ˆåŒ…æ‹¬ä»¥å¤ªç½‘å¸§å¤´ï¼‰ï¼Œä½†è¿™äº›å¸§å¤´æ˜¯è™šæ‹Ÿç”Ÿæˆçš„ï¼Œä¸ä¼šå‘é€åˆ°ç‰©ç†ç½‘å¡ã€‚</li></ul><h2 id="Internet-protocol">Internet protocol</h2><p><strong>åœ¨å½“ä»Šäº’è”äº’é€šçš„ä¸–ç•Œä¸­ï¼ŒTCP/IPï¼ˆTransmission Control Protocol/Internet Protocolï¼Œä¼ è¾“æ§åˆ¶åè®®/äº’è”ç½‘åè®®ï¼‰åè®®æ ˆæ„æˆäº†ç°ä»£ç½‘ç»œé€šä¿¡çš„æ ¸å¿ƒã€‚æ— è®ºæ˜¯è®¿é—®ç½‘é¡µã€å‘é€ç”µå­é‚®ä»¶ï¼Œè¿˜æ˜¯è¿›è¡Œè§†é¢‘é€šè¯ï¼Œæ‰€æœ‰æ•°æ®çš„ä¼ è¾“éƒ½ä¾èµ–äºè¿™ä¸€åˆ†å±‚åè®®ä½“ç³»ã€‚TCP/IP åè®®æ ˆé‡‡ç”¨åˆ†å±‚æ¶æ„ï¼Œé€šå¸¸åˆ†ä¸ºå››ä¸ªå±‚æ¬¡ï¼šåº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚å’Œæ•°æ®é“¾è·¯å±‚ï¼Œæ¯ä¸€å±‚éƒ½æ‰¿æ‹…ç‰¹å®šçš„åŠŸèƒ½ï¼Œå…±åŒå®ç°å¯é ã€é«˜æ•ˆçš„æ•°æ®ä¼ è¾“ã€‚ç½‘ç»œå±‚ï¼ˆIPï¼‰è´Ÿè´£å¯»å€å’Œè·¯ç”±ï¼Œç¡®ä¿æ•°æ®åŒ…èƒ½å¤Ÿè·¨è¶Šå…¨çƒç½‘ç»œåˆ°è¾¾ç›®æ ‡åœ°å€ï¼›ä¼ è¾“å±‚ï¼ˆTCP/UDPï¼‰æä¾›æ•°æ®ä¼ è¾“çš„å¯é æ€§å’Œæ•ˆç‡ï¼Œè€Œåº”ç”¨å±‚åˆ™æ‰¿è½½ HTTPã€FTPã€DNS ç­‰å®é™…æœåŠ¡ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿä¾¿æ·åœ°è®¿é—®äº’è”ç½‘èµ„æºã€‚</strong></p><p>ä½œä¸ºç°ä»£ç½‘ç»œçš„åŸºçŸ³ï¼ŒTCP/IP åè®®æ ˆä¸ä»…æ¨åŠ¨äº†å…¨çƒäº’è”ç½‘çš„å‘å±•ï¼Œä¹Ÿæˆä¸ºä¼ä¸šç½‘ç»œã€äº‘è®¡ç®—ã€ç‰©è”ç½‘ï¼ˆIoTï¼‰ç­‰æŠ€æœ¯çš„é€šä¿¡æ ‡å‡†ã€‚å®ƒçš„å¼€æ”¾æ€§å’Œå¯æ‰©å±•æ€§ä½¿å…¶èƒ½å¤Ÿä¸æ–­é€‚åº”æ–°çš„æŠ€æœ¯éœ€æ±‚ï¼ŒæŒç»­å¼•é¢†æ•°å­—æ—¶ä»£çš„ç½‘ç»œæ¼”è¿›ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Stan370/stan370.github.io@main/source/_posts/Network/Untitled.png" alt="TCP/IP Protocol Stack"></p><p>Protocol defines format,order of messages was sent, received among network entities ,and  actions taken on transmission,receipt</p><h3 id="OSI">OSI</h3><p>MACâˆˆdatalink LANå±‚</p><p>å¸¸è§çš„ç½‘ç»œç¼–ç¨‹ä¸­çš„é—®é¢˜ä¸»è¦æ˜¯æ€ä¹ˆå®šä½ç½‘ç»œä¸Šçš„ä¸€å°ä¸»æœºæˆ–å¤šå°ä¸»æœºï¼Œå¦ä¸€ä¸ªæ˜¯å®šä½åå¦‚ä½•è¿›è¡Œæ•°æ®çš„ä¼ è¾“ã€‚å¯¹äºå‰è€…ï¼Œåœ¨ç½‘ç»œå±‚ä¸­ä¸»è¦è´Ÿè´£ç½‘ç»œä¸»æœºçš„å®šä½ï¼Œæ•°æ®ä¼ è¾“çš„è·¯ç”±ï¼Œç”±IPåœ°å€å¯ä»¥å”¯ä¸€åœ°ç¡®å®šInternetä¸Šçš„ä¸€å°ä¸»æœºã€‚å¯¹äºåè€…ï¼Œåœ¨ä¼ è¾“å±‚åˆ™æä¾›é¢å‘åº”ç”¨çš„å¯é ï¼ˆtcpï¼‰çš„æˆ–éå¯é ï¼ˆUDPï¼‰çš„æ•°æ®ä¼ è¾“æœºåˆ¶ã€‚</p><p>å¯¹äºå®¢æˆ·ç«¯/æœåŠ¡å™¨ï¼ˆC/Sï¼‰ç»“æ„ã€‚ å³é€šä¿¡åŒæ–¹ä¸€æ–¹ä½œä¸ºæœåŠ¡å™¨ç­‰å¾…å®¢æˆ·æå‡ºè¯·æ±‚å¹¶äºˆä»¥å“åº”ã€‚å®¢æˆ·åˆ™åœ¨éœ€è¦æœåŠ¡æ—¶å‘æœåŠ¡å™¨æå‡ºç”³è¯·ã€‚æœåŠ¡å™¨ä¸€èˆ¬ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹å§‹ç»ˆè¿è¡Œï¼Œç›‘å¬ç½‘ç»œç«¯å£ï¼Œä¸€æ—¦æœ‰å®¢æˆ·è¯·æ±‚ï¼Œå°±ä¼šå¯åŠ¨ä¸€ä¸ªæœåŠ¡è¿›ç¨‹æ¥å“åº”è¯¥å®¢æˆ·ï¼ŒåŒæ—¶è‡ªå·±ç»§ç»­ç›‘å¬æœåŠ¡ç«¯å£ï¼Œä½¿åæ¥çš„å®¢æˆ·ä¹Ÿèƒ½åŠæ—¶å¾—åˆ°æœåŠ¡ã€‚</p><p>å¯¹äºæµè§ˆå™¨/æœåŠ¡å™¨ï¼ˆB/Sï¼‰ç»“æ„ã€‚ å®¢æˆ·åˆ™åœ¨éœ€è¦æœåŠ¡æ—¶å‘æœåŠ¡å™¨è¿›è¡Œè¯·æ±‚ã€‚æœåŠ¡å™¨å“åº”ååŠæ—¶è¿”å›ï¼Œä¸éœ€è¦å®æ—¶ç›‘å¬ç«¯å£ã€‚</p><p>äºŒè€…çš„åŒºåˆ«ï¼Œå–å†³äºæ€ä¹ˆçœ‹ä»–ä»¬ï¼Œ<strong>å¦‚æœä½¿ç”¨æµè§ˆå™¨ï¼Œæµè§ˆå™¨å°±æ˜¯æŒ‡â€œå®¢æˆ·ç«¯â€ï¼Œ</strong>â€œclient/serverâ€ å’Œ â€œbrowser/serverâ€ä¸¤ç§ä½“ç³»ç»“æ„æ²¡æœ‰çœŸæ­£çš„åŒºåˆ«ï¼Œæ²¡æ³•æ¯”è¾ƒ</p><img src="C:\Users\Stan\AppData\Roaming\Typora\typora-user-images\image-20210920175427765.png" alt="image-20210920175427765" style="zoom:50%;"><h4 id="HTTP-TCP-IP">HTTP TCP IP</h4><p>HTTPè§„å®šäº†æ¯æ®µæ•°æ®ä»¥ä»€ä¹ˆå½¢å¼è¡¨è¾¾æ‰æ˜¯èƒ½å¤Ÿè¢«å¦å¤–ä¸€å°è®¡ç®—æœºç†è§£ã€‚è€ŒTCPæ‰€è¦è§„å®šçš„æ˜¯æ•°æ®åº”è¯¥æ€ä¹ˆä¼ è¾“æ‰èƒ½ç¨³å®šä¸”é«˜æ•ˆçš„ä¼ é€’ä¸è®¡ç®—æœºä¹‹é—´ã€‚</p><p><strong>HTTP</strong>:</p><p>200OK  è¯·æ±‚æˆåŠŸ  400 bad request</p><p>Idempotentå¹‚ç­‰æ€§æ¦‚å¿µï¼šå¹‚ç­‰é€šä¿—æ¥è¯´æ˜¯æŒ‡ä¸ç®¡è¿›è¡Œå¤šå°‘æ¬¡é‡å¤æ“ä½œï¼Œéƒ½æ˜¯å®ç°ç›¸åŒçš„ç»“æœã€‚</p><p>2.RESTè¯·æ±‚ä¸­å“ªäº›æ˜¯å¹‚ç­‰æ“ä½œ<br>GETï¼ŒPUTï¼ŒDELETEéƒ½æ˜¯å¹‚ç­‰æ“ä½œï¼Œè€ŒPOSTä¸æ˜¯ï¼Œä»¥ä¸‹è¿›è¡Œåˆ†æï¼š</p><p>é¦–å…ˆGETè¯·æ±‚å¾ˆå¥½ç†è§£ï¼Œå¯¹èµ„æºåšæŸ¥è¯¢å¤šæ¬¡ï¼Œæ­¤å®ç°çš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚    PUTè¯·æ±‚çš„å¹‚ç­‰æ€§å¯ä»¥è¿™æ ·ç†è§£ï¼Œå°†Aä¿®æ”¹ä¸ºB</p><p>SSL</p><blockquote><p>SSL(Secure Sockets Layer å®‰å…¨å¥—æ¥å±‚)æ˜¯ä¸ºç½‘ç»œé€šä¿¡æä¾›å®‰å…¨åŠæ•°æ®å®Œæ•´æ€§çš„ä¸€ç§å®‰å…¨åè®®ã€‚SSL æ˜¯ â€œSecure Sockets Layerâ€ çš„ç¼©å†™ï¼Œä¸­æ–‡æ„æ€ä¸ºâ€œå®‰å…¨å¥—æ¥å±‚â€ï¼Œè€Œ TLS åˆ™æ˜¯æ ‡å‡†åŒ–ä¹‹åçš„ SSLã€‚</p></blockquote><p>TLS</p><blockquote><p>å®‰å…¨ä¼ è¾“å±‚åè®®ï¼ˆTLSï¼šTransport Layer Securityï¼‰ç”¨äºåœ¨ä¸¤ä¸ªé€šä¿¡åº”ç”¨ç¨‹åºä¹‹é—´æä¾›ä¿å¯†æ€§å’Œæ•°æ®å®Œæ•´æ€§ã€‚è¯¥åè®®ç”±ä¸¤å±‚ç»„æˆï¼š TLS è®°å½•åè®®ï¼ˆTLS Recordï¼‰å’Œ TLS æ¡æ‰‹åè®®ï¼ˆTLS Handshakeï¼‰ï¼Œæ˜¯æ›´æ–°ã€æ›´å®‰å…¨çš„SSLç‰ˆæœ¬ã€‚ HTTPS use TLS1.3</p></blockquote><h5 id="HTTPçš„æ ¸å¿ƒæ¦‚å¿µ"><strong>HTTPçš„æ ¸å¿ƒæ¦‚å¿µ</strong></h5><p>é™¤äº†HTTPå­˜åœ¨äºåº”ç”¨å±‚ä¹‹å¤–ï¼Œè¯¥åè®®è¿˜æœ‰5ä¸ªç‰¹ç‚¹ã€‚</p><ol><li><p>HTTPçš„æ ‡å‡†å»ºç«‹åœ¨å°†ä¸¤å°è®¡ç®—æœºè§†ä¸ºä¸åŒçš„è§’è‰²ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ã€‚å®¢æˆ·ç«¯ä¼šå‘æœåŠ¡å™¨ä¼ é€ä¸åŒçš„è¯·æ±‚(request)ï¼Œè€ŒæœåŠ¡å™¨ä¼šå¯¹åº”æ¯ä¸ªè¯·æ±‚ç»™å‡ºå›åº”(response)ã€‚<strong>æ— è¿æ¥</strong></p></li><li><p>HTTPå±äº<strong>æ— çŠ¶æ€åè®®(Stateless)</strong>ã€‚è¿™è¡¨ç¤ºæ¯ä¸€ä¸ªè¯·æ±‚ä¹‹é—´æ˜¯æ²¡æœ‰ç›¸å…³æ€§çš„ã€‚åœ¨è¯¥åè®®çš„è§„åˆ™ä¸­æœåŠ¡å™¨æ˜¯ä¸ä¼šè®°å½•ä»»ä½•å®¢æˆ·ç«¯æ“ä½œï¼Œæ¯ä¸€æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚ï¼ˆè®°å½•ç”¨æˆ·æµè§ˆè¡Œä¸ºä¼šé€šè¿‡å…¶ä»–æŠ€æœ¯å®ç°ï¼‰</p></li><li><p>å®¢æˆ·ç«¯çš„è¯·æ±‚è¢«å®šä¹‰åœ¨å‡ ä¸ªåŠ¨è¯æ„ä¹‰èŒƒå›´å†…ã€‚æœ€é•¿ç”¨åˆ°çš„æ˜¯GETå’ŒPOSTï¼Œå…¶ä»–åŠ¨è¯è¿˜åŒ…æ‹¬DELETE, HEADç­‰ç­‰ã€‚</p><h3 id="GETå’ŒPOSTä¸¤ç§httpè¯·æ±‚æ–¹æ³•çš„åŒºåˆ«">[GETå’ŒPOSTä¸¤ç§httpè¯·æ±‚æ–¹æ³•çš„åŒºåˆ«]</h3><p>GETå’ŒPOSTæ˜¯HTTPè¯·æ±‚çš„ä¸¤ç§åŸºæœ¬æ–¹æ³•, HTTPçš„åº•å±‚æ˜¯TCP/IPã€‚æ‰€ä»¥GETå’ŒPOSTçš„åº•å±‚ä¹Ÿæ˜¯TCP/IPï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒGET/POSTéƒ½æ˜¯TCPé“¾æ¥ã€‚**GETè¯·æ±‚æ²¡æœ‰bodyï¼Œåªæœ‰urlï¼Œè¯·æ±‚æ•°æ®æ”¾åœ¨urlçš„querystringä¸­ï¼›POSTè¯·æ±‚çš„æ•°æ®åœ¨bodyä¸­â€œã€‚ä½†è¿™ç§æƒ…å†µä»…é™äºæµè§ˆå™¨å‘è¯·æ±‚çš„åœºæ™¯ã€‚**GETå’ŒPOSTèƒ½åšçš„äº‹æƒ…æ˜¯ä¸€æ ·ä¸€æ ·çš„ã€‚ä½ è¦ç»™GETåŠ ä¸Šrequest bodyï¼Œç»™POSTå¸¦ä¸Šurlå‚æ•°ï¼ŒæŠ€æœ¯ä¸Šæ˜¯å®Œå…¨è¡Œçš„é€šçš„ã€‚</p><p><strong>GET</strong></p><p>â€œè¯»å–â€œä¸€ä¸ªèµ„æºã€‚<strong>æ¯”å¦‚Getåˆ°ä¸€ä¸ªhtmlæ–‡ä»¶ã€‚åå¤è¯»å–ä¸åº”è¯¥å¯¹è®¿é—®çš„æ•°æ®æœ‰å‰¯ä½œç”¨ã€‚æ¯”å¦‚â€GETä¸€ä¸‹ï¼Œç”¨æˆ·å°±ä¸‹å•äº†ï¼Œè¿”å›è®¢å•å·²å—ç†â€œï¼Œè¿™æ˜¯ä¸å¯æ¥å—çš„ã€‚æ²¡æœ‰å‰¯ä½œç”¨è¢«ç§°ä¸ºâ€œå¹‚ç­‰â€œï¼ˆIdempotent)ã€‚</strong></p><p>å› ä¸ºGETå› ä¸ºæ˜¯è¯»å–ï¼Œå°±å¯ä»¥å¯¹GETè¯·æ±‚çš„æ•°æ®åšç¼“å­˜ã€‚è¿™ä¸ªç¼“å­˜å¯ä»¥åšåˆ°æµè§ˆå™¨æœ¬èº«ä¸Šï¼ˆå½»åº•é¿å…æµè§ˆå™¨å‘è¯·æ±‚ï¼‰ï¼Œä¹Ÿå¯ä»¥åšåˆ°ä»£ç†ä¸Šï¼ˆå¦‚nginxï¼‰ï¼Œæˆ–è€…åšåˆ°serverç«¯ï¼ˆç”¨Etagï¼Œè‡³å°‘å¯ä»¥å‡å°‘å¸¦å®½æ¶ˆè€—ï¼‰</p><ul><li>åƒä¸‡ä¸è¦ç”¨GETæ–¹æ³•ä¼ é€å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯ï¼ï¼ˆå‘å‡ºçš„æ•°æ®ä¼šåœ¨æµè§ˆå™¨åœ°å€æ ä¸­æ˜¾ç¤ºå‡ºæ¥ï¼‰</li></ul><p><strong>POST</strong></p><p>åœ¨é¡µé¢é‡Œ<form> æ ‡ç­¾ä¼šå®šä¹‰ä¸€ä¸ªè¡¨å•ã€‚<strong>ç‚¹å‡»å…¶ä¸­çš„submitå…ƒç´ ä¼šå‘å‡ºä¸€ä¸ªPOSTè¯·æ±‚è®©æœåŠ¡å™¨åšä¸€ä»¶äº‹ã€‚è¿™ä»¶äº‹å¾€å¾€æ˜¯æœ‰å‰¯ä½œç”¨çš„ï¼Œä¸å¹‚ç­‰çš„ã€‚</strong></form></p><p>ä¸å¹‚ç­‰ä¹Ÿå°±æ„å‘³ç€ä¸èƒ½éšæ„å¤šæ¬¡æ‰§è¡Œã€‚å› æ­¤ä¹Ÿå°±ä¸èƒ½ç¼“å­˜ã€‚æ¯”å¦‚é€šè¿‡POSTä¸‹ä¸€ä¸ªå•ï¼ŒæœåŠ¡å™¨åˆ›å»ºäº†æ–°çš„è®¢å•ï¼Œç„¶åè¿”å›è®¢å•æˆåŠŸçš„ç•Œé¢ã€‚è¿™ä¸ªé¡µé¢ä¸èƒ½è¢«ç¼“å­˜ã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœPOSTè¯·æ±‚è¢«æµè§ˆå™¨ç¼“å­˜äº†ï¼Œé‚£ä¹ˆä¸‹å•è¯·æ±‚å°±å¯ä»¥ä¸å‘æœåŠ¡å™¨å‘è¯·æ±‚ï¼Œè€Œç›´æ¥è¿”å›æœ¬åœ°ç¼“å­˜çš„â€œä¸‹å•æˆåŠŸç•Œé¢â€ï¼Œå´åˆæ²¡æœ‰çœŸçš„åœ¨æœåŠ¡å™¨ä¸‹å•ã€‚é‚£æ˜¯ä¸€ä»¶å¤šä¹ˆæ»‘ç¨½çš„äº‹æƒ…ã€‚</p><p>å› ä¸ºPOSTå¯èƒ½æœ‰å‰¯ä½œç”¨ï¼Œæ‰€ä»¥æµè§ˆå™¨å®ç°ä¸ºä¸èƒ½æŠŠPOSTè¯·æ±‚ä¿å­˜ä¸ºä¹¦ç­¾ã€‚æƒ³æƒ³ï¼Œå¦‚æœç‚¹ä¸€ä¸‹ä¹¦ç­¾å°±ä¸‹ä¸€ä¸ªå•ï¼Œæ˜¯ä¸æ˜¯å¾ˆææ€–ï¼Ÿã€‚</p><p><strong>POSTæ–¹æ³•æ¯”GETæ–¹æ³•æ›´å¥å£®ã€æ›´å®‰å…¨ï¼Œè€Œä¸”POSTæ–¹æ³•å¯¹æ•°æ®å¤§å°æ²¡æœ‰é™åˆ¶ã€‚</strong></p></li><li><p>æœåŠ¡å™¨çš„å›åº”è¢«å®šä¹‰åœ¨å‡ ä¸ªçŠ¶æ€ç ä¹‹é—´ï¼š5å¼€å¤´è¡¨ç¤ºæœåŠ¡å™¨é”™è¯¯ï¼Œ4å¼€å¤´è¡¨ç¤ºå®¢æˆ·ç«¯é”™è¯¯ï¼Œ3å¼€å¤´è¡¨ç¤ºéœ€è¦åšè¿›ä¸€æ­¥å¤„ç†ï¼Œ2å¼€å¤´è¡¨ç¤ºæˆåŠŸï¼Œ1å¼€å¤´è¡¨ç¤ºåœ¨è¯·æ±‚è¢«æ¥å—å¤„ç†çš„åŒæ—¶æä¾›çš„é¢å¤–ä¿¡æ¯ã€‚</p></li><li><p>ä¸ç®¡æ˜¯å®¢æˆ·ç«¯çš„è¯·æ±‚ä¿¡æ¯è¿˜æ˜¯æœåŠ¡å™¨çš„å›åº”ï¼ŒåŒæ–¹éƒ½æ‹¥æœ‰ä¸€å—å¤´éƒ¨ä¿¡æ¯(Header)ã€‚å¤´éƒ¨ä¿¡æ¯æ˜¯è‡ªå®šä¹‰ï¼Œå…¶ç”¨é€”åœ¨äºä¼ é€’é¢å¤–ä¿¡æ¯ï¼ˆæµè§ˆå™¨ä¿¡æ¯ã€è¯·æ±‚çš„å†…å®¹ç±»å‹ã€ç›¸åº”çš„è¯­è¨€ï¼‰ã€‚</p></li></ol><h5 id="æŒä¹…-or-pipeline-è¿æ¥">æŒä¹… or pipeline è¿æ¥</h5><p>**æŒä¹…è¿æ¥ï¼š**ä½¿ç”¨åŒä¸€ä¸ªTCPè¿æ¥å‘é€å’Œæ¥å— <strong>å¤šä¸ª</strong> httpè¯·æ±‚/åº”ç­”ï¼›<br>ã€€ã€€**éæŒä¹…è¿æ¥ï¼š**ä¸€ä¸ªTCPè¿æ¥åªèƒ½å‘é€å’Œæ¥å— <strong>ä¸€ä¸ª</strong> httpè¯·æ±‚/åº”ç­”ï¼›</p><p>stateful contains stateless filter, which is the most flexible but cost more.</p><p><strong>HTTP2.0 å¤šè·¯å¤ç”¨ (Multiplexing)</strong></p><p><strong>å¤šè·¯å¤ç”¨å…è®¸åŒæ—¶é€šè¿‡å•ä¸€çš„ HTTP/2 è¿æ¥å‘èµ·å¤šé‡çš„è¯·æ±‚-å“åº”æ¶ˆæ¯ã€‚</strong></p><p><strong>pipelineè¿æ¥</strong></p><p>HTTP/1.1çš„æ–°ç‰¹æ€§ï¼Œå…è®¸åœ¨æŒä¹…è¿æ¥ä¸Šå¯é€‰åœ°ä½¿ç”¨è¯·æ±‚ç®¡é“ã€‚åœ¨å“åº”åˆ°è¾¾ä¹‹å‰ï¼Œå¯ä»¥å°†å¤šæ¡è¯·æ±‚æ”¾å…¥é˜Ÿåˆ—ã€‚å½“ç¬¬ä¸€æ¡è¯·æ±‚é€šè¿‡ç½‘ç»œæµå‘æœåŠ¡å™¨æ—¶ï¼Œç¬¬äºŒæ¡å’Œç¬¬ä¸‰æ¡è¯·æ±‚ä¹Ÿå¯ä»¥å¼€å§‹å‘é€äº†ã€‚<strong>åœ¨é«™æ—¶å»¶ç½‘ç»œæ¡ä»¶ä¸‹ï¼Œè¿™æ ·åšå¯ä»¥é™ä½ç½‘ç»œçš„ç¯å›æ—¶é—´ï¼Œæé«˜æ€§èƒ½ã€‚</strong></p><p><strong>ç®¡é“åŒ–è¿æ¥æœ‰å¦‚ä¸‹å‡ æ¡é™åˆ¶ï¼š</strong></p><ol><li>å®¢æˆ·ç«¯å¿…é¡»ç¡®è®¤æ˜¯<strong>æŒä¹…è¿æ¥</strong>æ‰èƒ½ä½¿ç”¨ç®¡é“ï¼›</li></ol><p>TCP/IP æ„å‘³ç€ TCP å’Œ IP åœ¨ä¸€èµ·ååŒå·¥ä½œã€‚TCP è´Ÿè´£åº”ç”¨è½¯ä»¶ï¼ˆæ¯”å¦‚æ‚¨çš„æµè§ˆå™¨ï¼‰å’Œç½‘ç»œè½¯ä»¶ä¹‹é—´çš„é€šä¿¡ã€‚</p><p>Internet çš„<strong>ä¼ è¾“å±‚</strong>æœ‰ä¸¤ä¸ªä¸»è¦åè®®ï¼Œäº’ä¸ºè¡¥å……ã€‚æ— è¿æ¥çš„æ˜¯ UDPï¼Œå®ƒé™¤äº†ç»™åº”ç”¨ç¨‹åºå‘é€æ•°æ®åŒ…åŠŸèƒ½å¹¶å…è®¸å®ƒä»¬åœ¨æ‰€éœ€çš„å±‚æ¬¡ä¸Šæ¶æ„è‡ªå·±çš„åè®®ä¹‹å¤–ï¼Œå‡ ä¹æ²¡æœ‰åšä»€ä¹ˆç‰¹åˆ«çš„äº‹æƒ…ã€‚é¢å‘è¿æ¥çš„æ˜¯ <a href="https://baike.baidu.com/item/TCP/33012">TCP</a>ï¼Œè¯¥åè®®å‡ ä¹åšäº†æ‰€æœ‰çš„äº‹æƒ…ã€‚</p><p><em><strong>ä½¿ç”¨æ— è¿æ¥åè®®å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ”¯æŒä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€é€šä¿¡ï¼Œè€Œé¢å‘è¿æ¥åè®®é€šå¸¸éƒ½éœ€è¦å¤šä¸ªç‹¬ç«‹çš„è¿æ¥æ‰èƒ½åšåˆ°ã€‚ä½†æ›´é‡è¦çš„æ˜¯ï¼Œæ— è¿æ¥åè®®æ˜¯æ„å»ºé¢å‘è¿æ¥åè®®çš„åŸºç¡€</strong>ã€‚TCP/IP æ˜¯åŸºäºä¸€ä¸ªï¼”å±‚çš„åè®®æ ˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</em></p><p>IP è´Ÿè´£è®¡ç®—æœºä¹‹é—´çš„é€šä¿¡ã€‚TCP è´Ÿè´£å°†æ•°æ®åˆ†å‰²å¹¶è£…å…¥ IP åŒ…ï¼Œç„¶ååœ¨å®ƒä»¬åˆ°è¾¾çš„æ—¶å€™é‡æ–°ç»„åˆå®ƒä»¬ã€‚IP è´Ÿè´£å°†åŒ…å‘é€è‡³æ¥å—è€…ã€‚</p><h2 id="Transport-layer"><strong>Transport layer</strong></h2><p>TCP/IP æ„å‘³ç€ TCP å’Œ IP åœ¨ä¸€èµ·ååŒå·¥ä½œã€‚TCP è´Ÿè´£åº”ç”¨è½¯ä»¶ï¼ˆæ¯”å¦‚æ‚¨çš„æµè§ˆå™¨ï¼‰å’Œç½‘ç»œè½¯ä»¶ä¹‹é—´çš„é€šä¿¡ã€‚</p><p>Internet çš„<strong>ä¼ è¾“å±‚</strong>æœ‰ä¸¤ä¸ªä¸»è¦åè®®ï¼Œäº’ä¸ºè¡¥å……ã€‚æ— è¿æ¥çš„æ˜¯ UDPï¼Œå®ƒé™¤äº†ç»™åº”ç”¨ç¨‹åºå‘é€æ•°æ®åŒ…åŠŸèƒ½å¹¶å…è®¸å®ƒä»¬åœ¨æ‰€éœ€çš„å±‚æ¬¡ä¸Šæ¶æ„è‡ªå·±çš„åè®®ä¹‹å¤–ï¼Œå‡ ä¹æ²¡æœ‰åšä»€ä¹ˆç‰¹åˆ«çš„äº‹æƒ…ã€‚é¢å‘è¿æ¥çš„æ˜¯ <a href="https://baike.baidu.com/item/TCP/33012">TCP</a>ï¼Œè¯¥åè®®å‡ ä¹åšäº†æ‰€æœ‰çš„äº‹æƒ…ã€‚</p><ul><li><strong>ä½¿ç”¨æ— è¿æ¥åè®®å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ”¯æŒä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€é€šä¿¡ï¼Œè€Œé¢å‘è¿æ¥åè®®é€šå¸¸éƒ½éœ€è¦å¤šä¸ªç‹¬ç«‹çš„è¿æ¥æ‰èƒ½åšåˆ°ã€‚ä½†æ›´é‡è¦çš„æ˜¯ï¼Œæ— è¿æ¥åè®®æ˜¯æ„å»ºé¢å‘è¿æ¥åè®®çš„åŸºç¡€</strong>ã€‚</li></ul><p>IP è´Ÿè´£è®¡ç®—æœºä¹‹é—´çš„é€šä¿¡ã€‚TCP è´Ÿè´£å°†æ•°æ®åˆ†å‰²å¹¶è£…å…¥ IP åŒ…ï¼Œç„¶ååœ¨å®ƒä»¬åˆ°è¾¾çš„æ—¶å€™é‡æ–°ç»„åˆå®ƒä»¬ã€‚IP è´Ÿè´£å°†åŒ…å‘é€è‡³æ¥å—è€…ã€‚</p><p>Here are some key differences between TCP and UDP:</p><ol><li><strong>Reliability</strong>: TCP is a reliable protocol, while UDP is unreliable. TCP provides guaranteed delivery of data packets, ensuring that they arrive at the destination in the correct order and without errors. UDP, on the other hand, does not have built-in mechanisms for error checking, retransmission of lost packets, or ensuring packet ordering. It is up to the application layer to handle these aspects if required.</li><li>Connection-oriented vs. Connectionless: TCP is a connection-oriented protocol, which means it establishes a connection between the sender and receiver before data transmission. It performs a handshake process, establishes a reliable channel, and ensures a secure data transfer. UDP, on the other hand, is connectionless. It does not establish a dedicated connection before data transfer and simply sends packets to the destination without any handshake or setup.</li><li>Packet overhead:å¼€é”€ TCP has a higher packet overhead compared to UDP. TCP adds additional information to each packet, such as sequence numbers, acknowledgments, and other control flags, which increases the overall size of the transmitted data. UDP has a smaller packet overhead, resulting in less network congestion and lower latency.</li><li>Ordering of packets: TCP guarantees the ordering of packets. If packets arrive out of order, TCP reorders them at the receiverâ€™s end, ensuring that the application layer receives the data in the correct order. UDP does not provide any mechanisms for ordering packets, so the application layer must handle packet ordering if required.</li><li>Flow control and congestion control: TCP implements flow control and congestion control mechanisms to manage the rate of data transmission and avoid network congestion. It dynamically adjusts the transmission rate based on network conditions and ensures that the receiver can handle the incoming data. UDP does not have built-in flow control or congestion control mechanisms, and itâ€™s up to the application layer to manage these aspects if necessary.</li><li>Application suitability: TCP is commonly used for applications that require reliable and ordered data delivery, such as web browsing, email, file transfer, and remote desktop. UDP is suitable for applications that prioritize speed and efficiency over reliability, such as real-time streaming, online gaming, DNS (Domain Name System), and VoIP (Voice over IP).</li></ol><ul><li><p>TCPå®ç°ç»†èŠ‚</p><p><a href="https://blog.csdn.net/m0_46156900/article/details/113809699%E4%BC%A0%E8%BE%93%E5%B1%82%E6%A6%82%E8%BF%B0%E3%80%81%E4%BC%A0%E8%BE%93%E5%B1%82%E6%9C%8D%E5%8A%A1%E3%80%81%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E5%92%8C%E8%A7%A3%E5%A4%8D%E7%94%A8%E3%80%81%E6%97%A0%E8%BF%9E%E6%8E%A5%E4%BC%A0%E8%BE%93">https://blog.csdn.net/m0_46156900/article/details/113809699ä¼ è¾“å±‚æ¦‚è¿°ã€ä¼ è¾“å±‚æœåŠ¡ã€å¤šè·¯å¤ç”¨å’Œè§£å¤ç”¨ã€æ— è¿æ¥ä¼ è¾“</a> UDP</p><h3 id="DEMUX"><strong>DEMUX</strong></h3><p><strong>connectionless</strong>: ä¸»æœºæ¥æ”¶åˆ°<strong>UDP</strong> segment (dest port dest IP)</p><p>connection <strong>oriented</strong>:</p><ul><li><strong>æœåŠ¡å™¨èƒ½å¤Ÿåœ¨ä¸€ä¸ªTCPç«¯å£ä¸ŠåŒæ—¶æ”¯æŒå¤šä¸ªTCPå¥—æ¥å­—ï¼š</strong><br>ï­ æ¯ä¸ªå¥—æ¥å­—ç”±å…¶å››å…ƒç»„æ ‡è¯†ï¼ˆæœ‰ä¸åŒçš„æºIPå’ŒæºPORTï¼‰</li><li><strong>ï² WebæœåŠ¡å™¨å¯¹æ¯ä¸ªè¿æ¥å®¢æˆ·ç«¯æœ‰ä¸åŒçš„å¥—æ¥å­—</strong><br>ï­ éæŒä¹…å¯¹æ¯ä¸ªè¯·æ±‚æœ‰ä¸åŒçš„å¥—æ¥å­—</li></ul><p>â€œæœåŠ¡å™¨èƒ½å¤Ÿæ ¹æ®æºIPåœ°å€å’Œæºç«¯å£å·æ¥åŒºåˆ†æ¥è‡ªä¸åŒå®¢æˆ·æœºçš„æŠ¥æ–‡æ®µã€‚<br>ä½†æ˜¯å¥—æ¥å­—ä¸è¿›ç¨‹ä¹‹é—´å¹¶éæ€»æ˜¯æœ‰ç€ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚<br>äº‹å®ä¸Šï¼ŒWebæœåŠ¡å™¨é€šå¸¸ä¸€ä¸ªæœåŠ¡è¿›ç¨‹å¯ä»¥ä¸ºæ¯ä¸ªæ–°çš„å®¢æˆ·æœºè¿æ¥åˆ›å»ºä¸€ä¸ªå…·æœ‰æ–°è¿æ¥å¥—æ¥å­—çš„çº¿ç¨‹ã€‚<br>æ˜¾ç„¶ï¼Œå¯¹äºè¿™æ ·çš„æœåŠ¡å™¨ï¼Œåœ¨ä»»æ„ç»™å®šçš„æ—¶é—´å†…éƒ½å¯èƒ½æœ‰å¾ˆå¤šå¥—æ¥å­—(å…·æœ‰ä¸åŒçš„æ ‡è¯†)è¿æ¥åˆ°åŒä¸€ä¸ªè¿›ç¨‹ã€‚â€</p><h3 id="rdt3-0ï¼š"><strong>rdt3.0ï¼š</strong></h3><p>å…·æœ‰æ¯”ç‰¹å·®é”™å’Œåˆ†ç»„ä¸¢å¤±çš„ä¿¡é“</p><p><strong>æ–°çš„å‡è®¾ï¼š****ä¸‹å±‚ä¿¡é“å¯èƒ½ä¼šä¸¢å¤±åˆ†ç»„ï¼ˆæ•°æ®æˆ–ACKï¼‰</strong>(å¥½æ¯”ä¹‹å‰è¯´çš„è·¯ç”±å™¨é˜Ÿåˆ—æ’æ»¡äº†ï¼Œæ–°æ¥çš„å°±è¢«dropæ‰)</p><ul><li><strong>ï­ ä¼šæ­»é”</strong></li><li><strong>ï­ æœºåˆ¶è¿˜ä¸å¤Ÿå¤„ç†è¿™ç§çŠ¶å†µï¼š</strong><br>â€¢ <strong>ï² rdt3.0å¯ä»¥å·¥ä½œï¼Œä½†é“¾è·¯å®¹é‡æ¯”è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œæ€§èƒ½å¾ˆå·®ï­ é“¾è·¯å®¹é‡æ¯”è¾ƒå¤§ï¼Œä¸€æ¬¡å‘ä¸€ä¸ªPDU çš„ä¸èƒ½å¤Ÿå……åˆ†åˆ©ç”¨é“¾è·¯çš„ä¼ è¾“èƒ½åŠ›</strong></li><li><strong>pipelined protocol</strong></li></ul><p><strong>ä¸¤ç§é€šç”¨çš„æµæ°´çº¿åè®®ï¼šå›é€€Næ­¥(GBN)å’Œé€‰æ‹©é‡ä¼ (SR)</strong></p><p>go-back-nçš„ä¸€ä¸ªç¼ºç‚¹ *æ˜¯å•ä¸ªåˆ†ç»„ç«¯å·®é”™èƒ½å¤Ÿå¼•èµ·å¤§é‡åˆ†ç»„ç«¯é‡ä¼ ï¼Œè®¸å¤šåˆ†ç»„å…¶å®æ²¡å¿…è¦é‡ä¼ ã€‚*ä¸ºäº†è§£å†³è¿™ä¸ªç¼ºç‚¹ï¼Œ selective repeatæ¥äº†</p><p>æ»‘åŠ¨çª—å£          (slide window)åè®®</p><ul><li><strong>ï² å‘é€ç¼“å†²åŒº</strong><br>ï­ å½¢å¼ï¼šå†…å­˜ä¸­çš„ä¸€ä¸ªåŒºåŸŸï¼Œè½å…¥ç¼“å†²åŒºçš„åˆ†ç»„å¯ä»¥å‘é€<br>ï­ åŠŸèƒ½ï¼šç”¨äºå­˜æ”¾<strong>å·²å‘é€</strong>ï¼Œä½†æ˜¯æ²¡æœ‰<strong>æœªç»ç¡®è®¤</strong>çš„åˆ†ç»„<br>ï­ å¿…è¦æ€§ï¼šéœ€è¦é‡å‘æ—¶å¯ç”¨</li><li><strong>å‘é€ç¼“å†²åŒºä¸­çš„åˆ†ç»„</strong><br>ï­ æœªå‘é€çš„ï¼šè½å…¥å‘é€ç¼“å†²åŒºçš„åˆ†ç»„ï¼Œå¯ä»¥è¿ç»­å‘é€å‡ºå»ï¼›<br>ï­ å·²å‘é€ã€ç­‰å¾…ç¡®è®¤çš„ï¼šå‘é€ç¼“å†²åŒºçš„åˆ†ç»„åªæœ‰å¾—åˆ°ç¡®è®¤æ‰èƒ½åˆ é™¤</li></ul><p>selective repeatï¼š</p><p>!<a href="https://img-blog.csdnimg.cn/20190524220207716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDAyNzg5Nw==,size_16,color_FFFFFF,t_70">https://img-blog.csdnimg.cn/20190524220207716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDAyNzg5Nw==,size_16,color_FFFFFF,t_70</a></p><p>**sender ç«¯ï¼š**æ¥æ”¶ä¸Šå±‚ç«¯æ•°æ®ï¼Œä¸º åˆ†ç»„ assign åºå·ï¼Œå¦‚æœ åœ¨ window èŒƒå›´å†…ï¼Œåˆ™å‘é€ï¼ŒåŒæ—¶ä¸ºæ¯ä¸€ä¸ªåˆ†ç»„èµ·ä¸€ä¸ªé€»è¾‘å®šæ—¶å™¨ï¼Œå“ªä¸ªåˆ†ç»„ç«¯å®šæ—¶å™¨è¶…æ—¶ï¼Œé‡ä¼ å“ªä¸ªåˆ†ç»„ã€‚ä¸Šå›¾ä¸­ï¼Œ pkt 2 timeoutï¼Œåªé‡ä¼  pkt2ï¼Œå¯¹å…¶ä»– packageæ²¡æœ‰å½±å“ã€‚<br>pkt3 å‘é€å®Œä¼šæœ‰ä¸€ä¸ªwaitçš„åŠ¨ä½œï¼Œå› ä¸ºç°åœ¨çª—å£æ»¡äº†ï¼Œåœ¨æ”¶åˆ°å›å¤ä¹‹å‰ä¸ä¼šå‘é€ä¸‹ä¸€ä¸ªåˆ†ç»„ã€‚</p><p>TCP fast <strong>retransmit:</strong> if the receiver sends triple duplicate ACK for same  data,  sender resend unacked segment</p><p><strong>receiver ç«¯ï¼š<strong>ç¡®è®¤æ¯ä¸€ä¸ªæ­£ç¡®æ¥æ”¶çš„åˆ†ç»„ï¼Œè€Œä¸ç®¡æ˜¯å¦ä¹±åºï¼Œä¹±åºç«¯åˆ†ç»„è¢«ç¼“å­˜ï¼Œç›´åˆ°ä¸¢å¤±åˆ†ç»„ï¼ˆå³åºå·æ›´å°çš„åˆ†ç»„ï¼‰å…¨éƒ¨æ¥æ”¶ï¼Œå°†è¿™ä¸€æ‰¹åˆ†ç»„æŒ‰åºäº¤ä»˜ç»™ä¸Šå±‚ã€‚ä¸Šå›¾ä¸­ï¼Œæ”¶åˆ° pkt1ï¼Œäº¤ä»˜ï¼Œæ”¶åˆ° pkt2ï¼Œäº¤ä»˜ï¼Œæ”¶åˆ°pkt3ï¼Œç¼“å­˜ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºä»€ä¹ˆsender ç«¯åœ¨æ”¶åˆ°ack0 æ—¶ä¼šç«‹å³å‘é€pk4ï¼Œä½†æ˜¯æ”¶åˆ°ack3æ—¶æ²¡æœ‰ç»§ç»­å¾€å¤–å‘é€æ•°æ®å‘¢ï¼ŒåŸå› æ˜¯receiverç«¯å‘é€ACK3æ—¶ï¼Œå·²ç»çŸ¥é“pkt2è¿˜æœªåˆ°åˆ°ï¼Œæ‰€ä»¥åœ¨</strong>ACK3ä¸­å¸¦ç«¯ nextsequence æ˜¯pkt2ï¼Œè€Œæ­¤æ—¶å‘é€ç«¯æ­£åœ¨ç­‰å¾…pkt2çš„è¶…æ—¶ï¼ˆæˆ–è€…ACK2ï¼‰ï¼Œæ‰€ä»¥åœ¨pkt2è¶…æ—¶ä¹‹å‰ä¸ä¼šæœ‰æ–°ç«¯packageå‘å‡ºã€‚</strong></p><h3 id="TCP-flow-control"><strong>TCP flow control</strong></h3><p>receiver controls the sender that sender will not overflow receiver by transmit too much</p><p>!<a href="https://img-blog.csdnimg.cn/20210217120510616.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70">https://img-blog.csdnimg.cn/20210217120510616.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70</a></p><p><strong>MTU</strong>ï¼š<br>Maximum Transmission Unitï¼Œæœ€å¤§æ•°æ®ä¼ è¾“å•å…ƒï¼Œç½‘ç»œä¼ è¾“æœ€å¤§æŠ¥æ–‡åŒ…ï¼›ä»¥å¤ªç½‘MTUæœ€å¤§å€¼æ˜¯1500B<br><strong>MSS</strong>ï¼š<br>Maximum Segment Size ï¼ŒTCPæäº¤ç»™IPå±‚æœ€å¤§åˆ†æ®µå¤§å°ï¼Œä¸åŒ…å«TCP Headerå’Œ TCP Optionï¼ŒåªåŒ…å«TCP Payload ï¼ŒMSSæ˜¯TCPç”¨æ¥é™åˆ¶applicationå±‚æœ€å¤§çš„å‘é€å­—èŠ‚æ•°ã€‚å¦‚æœåº•å±‚ç‰©ç†æ¥å£MTU= 1500 byteï¼Œåˆ™ MSS = 1500- 20(IP Header) -20 (TCP Header) = 1460 byteï¼Œå¦‚æœapplication æœ‰2000 byteå‘é€ï¼Œéœ€è¦ä¸¤ä¸ªsegmentæ‰å¯ä»¥å®Œæˆå‘é€ï¼Œç¬¬ä¸€ä¸ªTCP segment = 1460ï¼Œç¬¬äºŒä¸ªTCP segment = 540.è¦æ ¹æ®MSSçš„å¤§å°è¿›è¡Œåˆ‡åˆ†å’ŒåŠ TCPå¤´éƒ¨ä¿¡æ¯ï¼Œå˜æˆTCPæŠ¥æ–‡æ®µï¼ˆsegmentï¼‰<br>Â·<br>æ‰€ä»¥ï¼Œï¼ˆMessage è½¬æ¢æˆå­—èŠ‚æµï¼Œå†è¢«åˆ’åˆ†æˆä¸€ä¸ªä¸ªçš„MSSï¼‰<br>MSS+TCPå¤´éƒ¨ä¿¡æ¯+IPå¤´éƒ¨ä¿¡æ¯ = MTU(æ¯”å¦‚ä»¥å¤ªç½‘MTU1500B)ï¼Œï¼ˆâ€œäºæ˜¯å°±å­˜åœ¨ä¸€ä¸ªåˆ†ç‰‡çš„é—®é¢˜ï¼Ÿâ€ä»€ä¹ˆåˆ†ç‰‡â€¦ï¼‰</p><p><strong>IPåˆ†ç‰‡</strong></p><p>åœ¨TCP/IPåˆ†å±‚ä¸­ï¼Œæ•°æ®é“¾è·¯å±‚ç”¨MTUï¼ˆMaximum Transmission Unitï¼Œæœ€å¤§ä¼ è¾“å•å…ƒï¼‰æ¥é™åˆ¶æ‰€èƒ½ä¼ è¾“çš„æ•°æ®åŒ…å¤§å°ï¼ŒMTUæ˜¯æŒ‡ä¸€æ¬¡ä¼ é€çš„æ•°æ®æœ€å¤§é•¿åº¦ï¼Œä¸åŒ…æ‹¬æ•°æ®é“¾è·¯å±‚æ•°æ®å¸§çš„å¸§å¤´ã€‚å½“å‘é€çš„IPæ•°æ®æŠ¥çš„å¤§å°è¶…è¿‡äº†MTUæ—¶ï¼ŒIPå±‚å°±éœ€è¦å¯¹æ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼Œå¦åˆ™æ•°æ®å°†æ— æ³•å‘é€æˆåŠŸã€‚</p><p>ä¸€ä¸ªIPæ•°æ®æŠ¥çš„æ¯ä¸ªåˆ†ç‰‡éƒ½å…·æœ‰è‡ªå·±çš„IPå¤´éƒ¨ä¿¡æ¯ï¼Œå®ƒä»¬éƒ½å…·æœ‰ç›¸åŒçš„æ ‡è¯†å€¼ï¼Œä½†æ˜¯å…·æœ‰ä¸åŒçš„ä½åç§»ï¼Œä¸”é™¤äº†æœ€åä¸€ä¸ªåˆ†ç‰‡fragflag=0å¤–ï¼Œå…¶ä»–åˆ†ç‰‡éƒ½å°†è®¾ç½®fragflag=1æ ‡å¿—ã€‚æ­¤å¤–ï¼Œæ¯ä¸ªåˆ†ç‰‡çš„IPå¤´éƒ¨çš„æ€»é•¿åº¦å­—æ®µå°†è¢«è®¾ç½®ä¸ºè¯¥åˆ†ç‰‡çš„é•¿åº¦ã€‚</p><p>ä¾‹å¦‚ï¼Œä»¥å¤ªç½‘å¸§çš„MTUæ˜¯1500å­—èŠ‚ï¼Œå› æ­¤å®ƒçš„æ•°æ®éƒ¨åˆ†æœ€å¤§ä¸º1480å­—èŠ‚(IPå¤´éƒ¨å ç”¨20å­—èŠ‚)ã€‚</p><h3 id="Nagleç®—æ³•"><strong>Nagleç®—æ³•</strong></h3><p>A problem can occur when an application generates data very slowly.<br>ï‚§ Consider, ssh or telnet that generate data only when a user types.<br>ï‚§ This means (for ssh/telnet) one packet sent every time user hits key          â€”â€”&gt; Nagleâ€™s algorithm</p><p>\1. å‘é€ TCP å‘é€å®ƒæ¥æ”¶åˆ°çš„ç¬¬ä¸€æ¡æ•°æ® - æ— è®ºå¤§å°</p><ol><li>å‘é€ TCP åœ¨ç¼“å†²åŒºä¸­ç´¯ç§¯æ•°æ®å¹¶ç­‰å¾…ä»¥ä¸‹ä¹‹ä¸€ï¼Œç„¶åå†å‘é€è¯¥æ®µï¼š â€¢ æ¥æ”¶ TCP å‘é€ç¡®è®¤â€¢ æ•°æ®å·²ç´¯ç§¯ä»¥å¡«å……æœ€å¤§å¤§å°çš„æ®µ</li><li>é‡å¤æ­¥éª¤ 2 æ³¨æ„ï¼šæœ‰æ—¶åº”å…³é—­ Nagle ç®—æ³•â€”â€”ä¾‹å¦‚å½“å¿«é€Ÿäº¤äº’è‡³å…³é‡è¦å¹¶ä¸”æ‚¨å¸Œæœ›å‘é€å°æ•°æ®åŒ…æ—¶</li></ol><p>è¯¥ç®—æ³•çš„ä¼˜è¶Šä¹‹å¤„åœ¨äºå®ƒæ˜¯è‡ªé€‚åº”çš„ï¼Œç¡®è®¤åˆ°è¾¾çš„è¶Šå¿«ï¼Œæ•°æ®ä¹Ÿå°±å‘å“¦é€çš„è¶Šå¿«</p><h3 id="Congestion-control"><strong>Congestion control</strong></h3><ul><li><strong>ï² éæ­£å¼çš„å®šä¹‰:â€œå¤ªå¤šçš„æ•°æ®éœ€è¦ç½‘ç»œä¼ è¾“ï¼Œè¶…è¿‡äº†ç½‘ç»œçš„å¤„ç†èƒ½åŠ›â€</strong></li><li><strong>ï² æ‹¥å¡çš„è¡¨ç°:</strong><ul><li>ï­ åˆ†ç»„<strong>ä¸¢å¤±</strong> (è·¯ç”±å™¨ç¼“å†²åŒºæº¢å‡º)</li><li>ï­ åˆ†ç»„ç»å†æ¯”<strong>è¾ƒé•¿çš„å»¶è¿Ÿ</strong>(åœ¨è·¯ç”±å™¨çš„é˜Ÿåˆ—ä¸­æ’é˜Ÿ)</li></ul></li></ul><p>é€Ÿç‡æ§åˆ¶æ–¹æ³•</p><p>!<a href="https://img-blog.csdnimg.cn/20210218100930516.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70">https://img-blog.csdnimg.cn/20210218100930516.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70</a></p><p>å¦‚ä½•æ§åˆ¶å‘é€ç«¯å‘é€çš„é€Ÿç‡ï¼Ÿ</p><p>ï² (å‘é€æ–¹)ç»´æŒä¸€ä¸ªæ‹¥å¡çª—å£çš„å€¼ï¼šCongWinï¼ˆCongestionWindowä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰<br>å®ƒå¯¹ä¸€ä¸ªTCPå‘é€æ–¹èƒ½å‘ç½‘ç»œä¸­å‘é€æµé‡çš„é€Ÿç‡è¿›è¡Œäº†é™åˆ¶ã€‚<br>ï² å‘é€ç«¯é™åˆ¶å·²å‘é€ä½†æ˜¯æœªç¡®è®¤çš„æ•°æ®é‡ï¼ˆçš„ä¸Šé™ï¼‰:<br>LastByteSent - LastByteAcked &lt;= CongWin<br>ï² ä»è€Œç²—ç•¥åœ°æ§åˆ¶å‘é€æ–¹çš„å¾€ç½‘ç»œä¸­æ³¨å…¥çš„é€Ÿç‡</p><p>TCP reno : loss  indicated by 3 ACKs                  ;</p><p>tcp Tahoe sets cwnd to 1</p><p>rate = cwnd/RTT                          avg TCP throughput = 3Window size /4 RTT</p></li></ul><p>!<a href="https://img-blog.csdnimg.cn/20210216113823842.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70">https://img-blog.csdnimg.cn/20210216113823842.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70</a></p><p>åœ¨HTTPçš„è§„èŒƒå†…ï¼Œä¸¤å°è®¡ç®—æœºçš„äº¤äº’è¢«è§†ä¸ºrequestå’Œresponseçš„ä¼ é€’ã€‚<strong>è€Œåœ¨å®é™…çš„TCPæ“ä½œä¸­ï¼Œä¿¡æ¯ä¼ é€’ä¼šæ¯”å•çº¯çš„ä¼ é€’requestå’Œresponseè¦å¤æ‚ã€‚é€šè¿‡TCPå»ºç«‹çš„é€šè®¯å¾€å¾€éœ€è¦è®¡ç®—æœºä¹‹é—´å¤šæ¬¡çš„äº¤æ¢ä¿¡æ¯æ‰èƒ½å®Œæˆä¸€æ¬¡requestæˆ–responseã€‚</strong></p><p>TCPçš„ä¼ è¾“æ•°æ®çš„æ ¸å¿ƒæ˜¯åœ¨äºå°†æ•°æ®åˆ†ä¸ºè‹¥å¹²æ®µå¹¶å°†æ¯æ®µæ•°æ®æŒ‰é¡ºåºæ ‡è®°ã€‚æ ‡è®°åçš„é¡ºåºå¯ä»¥ä»¥ä¸åŒçš„é¡ºåºè¢«å¦ä¸€æ–¹æ¥æ”¶å¹¶é›†æˆå›å®Œæ•´çš„æ•°æ®ã€‚è®¡ç®—æœºå¯¹æ¯ä¸€æ®µæ•°æ®çš„æˆåŠŸæ¥æ”¶éƒ½ä¼šåšå‡ºç›¸åº”ï¼Œç¡®ä¿æ‰€æœ‰æ•°æ®çš„å®Œæ•´æ€§ã€‚</p><p>TCPåœ¨ä¼ é€’æ•°æ®æ—¶ä¾èµ–äºå®ç°å®šä¹‰å¥½çš„å‡ ä¸ªæ ‡è®°ï¼ˆFlagsï¼‰å»å‘å¦ä¸€æ–¹è¡¨æ€ä¼ è¾¾æ•°æ®å’Œè¿æ¥çš„çŠ¶æ€ï¼š</p><ul><li>F : FIN - ç»“æŸ; ç»“æŸä¼šè¯</li><li>S : SYN - åŒæ­¥; è¡¨ç¤ºå¼€å§‹ä¼šè¯è¯·æ±‚</li><li>R : RST - å¤ä½;ä¸­æ–­ä¸€ä¸ªè¿æ¥ P : PUSH - æ¨é€; æ•°æ®åŒ…ç«‹å³å‘é€</li><li>A : ACK - åº”ç­” U : URG - ç´§æ€¥ E : ECE - æ˜¾å¼æ‹¥å¡æé†’å›åº”</li><li>W : CWR - æ‹¥å¡çª—å£å‡å°‘</li></ul><p><strong>Connectionå»ºç«‹&amp; close</strong></p><p>ä¹Ÿæ˜¯åŸºäºè¿™äº›æ ‡å¿—TCPå¯ä»¥å®ç°<a href="https://blog.csdn.net/qzcsu/article/details/72861891">ä¸‰æ¬¡ï¼ˆthree ways handshakeï¼‰å’Œå››æ¬¡æ¡æ‰‹ (four ways tear down)</a>ã€‚ä¸‰æ¬¡æ¡æ‰‹æ˜¯åˆæ­¥å»ºç«‹è¿æ¥çš„æœºåˆ¶ï¼Œè€Œå››æ¬¡æ¡æ‰‹åˆ™æ˜¯<strong>æ–­å¼€é“¾æ¥</strong>ã€‚ä¸¤è€…ä¹‹é—´å¤§è‡´æ“ä½œæ˜¯ä¸€æ ·çš„ï¼ŒAå‘å‡ºå»ºç«‹é“¾æ¥(SYN)æˆ–è€…æ–­å¼€é“¾æ¥(FIN)çš„è¯·æ±‚ï¼ŒBè®¤å¯(A CK)å…¶è¯·æ±‚ç„¶åå‘å‡ºåŒæ ·çš„è¯·æ±‚ç»™Aå¹¶ç­‰å¾…Açš„è®¤å¯ã€‚åœ¨åŒæ–¹è®¤å¯åï¼Œé“¾æ¥æ­£å¼æˆç«‹æˆ–è€…æ–­å¼€ã€‚</p><p>!<a href="https://img2020.cnblogs.com/blog/2098532/202105/2098532-20210520103027590-619536232.png">https://img2020.cnblogs.com/blog/2098532/202105/2098532-20210520103027590-619536232.png</a></p><p>!<a href="https://img2020.cnblogs.com/blog/2098532/202105/2098532-20210520103048249-324869987.png">https://img2020.cnblogs.com/blog/2098532/202105/2098532-20210520103048249-324869987.png</a></p><p>1ã€ä¸ºä»€ä¹ˆå»ºç«‹è¿æ¥åè®®æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œå…³é—­è¿æ¥å´æ˜¯å››æ¬¡æ¡æ‰‹å‘¢ï¼Ÿ</p><p>å»ºç«‹è¿æ¥æ—¶ï¼ŒACKå’ŒSYNå¯ä»¥æ”¾åœ¨ä¸€ä¸ªæŠ¥æ–‡é‡Œæ¥å‘é€ã€‚è€Œå…³é—­è¿æ¥æ—¶ï¼Œ<strong>è¢«åŠ¨å…³é—­æ–¹å¯èƒ½è¿˜éœ€è¦å‘é€ä¸€äº›æ•°æ®å</strong>ï¼Œå†å‘é€FINæŠ¥æ–‡è¡¨ç¤ºåŒæ„ç°åœ¨å¯ä»¥å…³é—­è¿æ¥äº†ï¼Œæ‰€ä»¥å®ƒè¿™é‡Œçš„ACKæŠ¥æ–‡å’ŒFINæŠ¥æ–‡å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯åˆ†å¼€å‘é€çš„ã€‚</p><p>2ã€ä¸ºä»€ä¹ˆTIME_WAITçŠ¶æ€è¿˜éœ€è¦ç­‰2MSLåæ‰èƒ½è¿”å›åˆ°CLOSEDçŠ¶æ€ï¼Ÿ</p><p>ä¸¤ä¸ªå­˜åœ¨çš„ç†ç”±ï¼š1ã€æ— æ³•ä¿è¯æœ€åå‘é€çš„ACKæŠ¥æ–‡ä¼šä¸€å®šè¢«å¯¹æ–¹æ”¶åˆ°ï¼Œæ‰€ä»¥éœ€è¦é‡å‘å¯èƒ½ä¸¢å¤±çš„ACKæŠ¥æ–‡ã€‚2ã€å…³é—­é“¾æ¥ä¸€æ®µæ—¶é—´åå¯èƒ½ä¼šåœ¨ç›¸åŒçš„IPåœ°å€å’Œç«¯å£å»ºç«‹æ–°çš„è¿æ¥ï¼Œä¸ºäº†é˜²æ­¢æ—§è¿æ¥çš„é‡å¤åˆ†ç»„åœ¨æ–°è¿æ¥å·²ç»ç»ˆæ­¢åå†ç°ã€‚2MSLè¶³ä»¥è®©åˆ†ç»„æœ€å¤šå­˜æ´»mslç§’è¢«ä¸¢å¼ƒã€‚</p><p>3ã€ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸èƒ½ç”¨ä¸¤æ¬¡æ¡æ‰‹è¿›è¡Œè¿æ¥ï¼Ÿ</p><p>è®°ä½æœåŠ¡å™¨çš„èµ„æºå®è´µä¸èƒ½æµªè´¹! å¦‚æœåœ¨æ–­å¼€è¿æ¥åï¼Œç¬¬ä¸€æ¬¡æ¡æ‰‹è¯·æ±‚è¿æ¥çš„åŒ…æ‰åˆ°ä¼šä½¿æœåŠ¡å™¨æ‰“å¼€è¿æ¥ï¼Œå ç”¨èµ„æºè€Œä¸”å®¹æ˜“è¢«æ¶æ„æ”»å‡»ï¼é˜²æ­¢æ”»å‡»çš„æ–¹æ³•ï¼Œç¼©çŸ­æœåŠ¡å™¨ç­‰å¾…æ—¶é—´ã€‚ä¸¤æ¬¡æ¡æ‰‹å®¹æ˜“æ­»é”ã€‚å¦‚æœæœåŠ¡å™¨çš„åº”ç­”åˆ†ç»„åœ¨ä¼ è¾“ä¸­ä¸¢å¤±ï¼Œå°†ä¸çŸ¥é“Så»ºç«‹ä»€ä¹ˆæ ·çš„åºåˆ—å·ï¼ŒCè®¤ä¸ºè¿æ¥è¿˜æœªå»ºç«‹æˆåŠŸï¼Œå°†å¿½ç•¥Så‘æ¥çš„ä»»ä½•æ•°æ®åˆ†ç»„ï¼Œåªç­‰å¾…è¿æ¥ç¡®è®¤åº”ç­”åˆ†ç»„ã€‚è€ŒSåœ¨å‘å‡ºçš„åˆ†ç»„è¶…æ—¶åï¼Œé‡å¤å‘é€åŒæ ·çš„åˆ†ç»„ã€‚è¿™æ ·å°±å½¢æˆäº†<strong>æ­»é”</strong>ã€‚</p><h3 id="QUIC">QUIC</h3><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/83f96e4c-b464-4932-a980-04c73797197a/Untitled.png" alt="Untitled"></p><p>QUIC çš„ç›®æ ‡æ˜¯å‡ ä¹ç­‰åŒäº TCP è¿æ¥ï¼Œä½†<a href="https://en.wikipedia.org/wiki/Network_delay">å»¶è¿Ÿ</a>å¤§å¤§é™ä½ã€‚<a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">å®ƒä¸»è¦é€šè¿‡ä¾èµ–äºå¯¹HTTP</a>æµé‡è¡Œä¸ºçš„ç†è§£çš„ä¸¤é¡¹æ›´æ”¹æ¥å®ç°è¿™ä¸€ç‚¹ã€‚<a href="https://en.wikipedia.org/wiki/QUIC#cite_note-ARSnext-20">[20]</a></p><p>ç¬¬ä¸€ä¸ªå˜åŒ–æ˜¯å¤§å¤§å‡å°‘è¿æ¥å»ºç«‹æœŸé—´çš„å¼€é”€ã€‚ç”±äºå¤§å¤šæ•° HTTP è¿æ¥éƒ½éœ€è¦<a href="https://en.wikipedia.org/wiki/Transport_Layer_Security">TLS</a>ï¼ŒQUIC å°†è®¾ç½®å¯†é’¥å’Œæ”¯æŒçš„åè®®çš„äº¤æ¢ä½œä¸ºåˆå§‹<a href="https://en.wikipedia.org/wiki/Handshake_(computing)">æ¡æ‰‹è¿‡ç¨‹</a>çš„ä¸€éƒ¨åˆ†ã€‚å½“å®¢æˆ·ç«¯æ‰“å¼€è¿æ¥æ—¶ï¼Œå“åº”æ•°æ®åŒ…åŒ…å«æœªæ¥æ•°æ®åŒ…ä½¿ç”¨åŠ å¯†æ‰€éœ€çš„æ•°æ®ã€‚è¿™æ¶ˆé™¤äº†å»ºç«‹ TCP è¿æ¥ç„¶åé€šè¿‡é™„åŠ æ•°æ®åŒ…åå•†å®‰å…¨åè®®çš„éœ€è¦ã€‚å…¶ä»–åè®®å¯ä»¥ä»¥ç›¸åŒçš„æ–¹å¼æä¾›æœåŠ¡ï¼Œå°†å¤šä¸ªæ­¥éª¤ç»„åˆæˆä¸€ä¸ªè¯·æ±‚-å“åº”ã€‚ç„¶åï¼Œæ­¤æ•°æ®å¯ç”¨äºåˆå§‹è®¾ç½®ä¸­çš„åç»­è¯·æ±‚ï¼Œä»¥åŠå°†ä»¥å…¶ä»–æ–¹å¼åå•†ä¸ºå•ç‹¬è¿æ¥çš„æœªæ¥è¯·æ±‚ã€‚<a href="https://en.wikipedia.org/wiki/QUIC#cite_note-ARSnext-20">[20]</a></p><p>ç¬¬äºŒä¸ªå˜åŒ–æ˜¯ä½¿ç”¨<a href="https://en.wikipedia.org/wiki/User_Datagram_Protocol">UDP</a>è€Œä¸æ˜¯ TCP ä½œä¸ºå…¶åŸºç¡€ï¼Œå…¶ä¸­ä¸åŒ…æ‹¬<a href="https://en.wikipedia.org/wiki/Packet_loss">ä¸¢å¤±</a>æ¢å¤ã€‚ç›¸åï¼Œæ¯ä¸ª QUIC æµéƒ½æ˜¯å•ç‹¬è¿›è¡Œæµé‡æ§åˆ¶çš„ï¼Œä¸¢å¤±çš„æ•°æ®åœ¨ QUIC çº§åˆ«è€Œä¸æ˜¯ UDP çº§åˆ«é‡æ–°ä¼ è¾“ã€‚è¿™æ„å‘³ç€å¦‚æœä¸€ä¸ªæµä¸­å‘ç”Ÿé”™è¯¯ï¼Œå¦‚ä¸Šé¢çš„å›¾æ ‡ç¤ºä¾‹ï¼Œ<a href="https://en.wikipedia.org/wiki/Protocol_stack">åè®®æ ˆ</a>å¯ä»¥ç»§ç»­ç‹¬ç«‹åœ°ä¸ºå…¶ä»–æµæä¾›æœåŠ¡ã€‚è¿™å¯¹äºæé«˜å®¹æ˜“å‡ºé”™çš„é“¾æ¥çš„æ€§èƒ½éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåœ¨ TCP æ³¨æ„åˆ°æ•°æ®åŒ…ä¸¢å¤±æˆ–æŸåä¹‹å‰å¯èƒ½ä¼šæ”¶åˆ°å¤§é‡é¢å¤–æ•°æ®ï¼Œå¹¶ä¸”åœ¨æ›´æ­£é”™è¯¯æ—¶æ‰€æœ‰è¿™äº›æ•°æ®éƒ½è¢«é˜»æ­¢ç”šè‡³åˆ·æ–°ã€‚åœ¨ QUIC ä¸­ï¼Œåœ¨ä¿®å¤å•ä¸ªå¤šè·¯å¤ç”¨æµæ—¶ï¼Œå¯ä»¥è‡ªç”±å¤„ç†è¿™äº›æ•°æ®ã€‚<a href="https://en.wikipedia.org/wiki/QUIC#cite_note-27">[27]</a></p><p>QUIC è¿˜åŒ…æ‹¬è®¸å¤šå…¶ä»–æ›´æ”¹ï¼Œè¿™äº›æ›´æ”¹ä¹Ÿå¯ä»¥æ”¹å–„æ•´ä½“å»¶è¿Ÿå’Œååé‡ã€‚ä¾‹å¦‚ï¼Œæ•°æ®åŒ…è¢«å•ç‹¬åŠ å¯†ï¼Œå› æ­¤å®ƒä»¬ä¸ä¼šå¯¼è‡´åŠ å¯†æ•°æ®ç­‰å¾…éƒ¨åˆ†æ•°æ®åŒ…ã€‚è¿™åœ¨ TCP ä¸‹é€šå¸¸æ˜¯ä¸å¯èƒ½çš„ï¼Œå…¶ä¸­åŠ å¯†è®°å½•åœ¨å­—èŠ‚<a href="https://en.wikipedia.org/wiki/Bytestream">æµ</a>ä¸­ï¼Œåè®®æ ˆä¸çŸ¥é“è¯¥æµä¸­çš„é«˜å±‚è¾¹ç•Œã€‚è¿™äº›å¯ä»¥ç”±è¿è¡Œåœ¨é¡¶å±‚çš„å±‚åå•†ï¼Œä½† QUIC çš„ç›®æ ‡æ˜¯åœ¨ä¸€æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­å®Œæˆæ‰€æœ‰è¿™äº›ã€‚<a href="https://en.wikipedia.org/wiki/QUIC#cite_note-IETF_QUIC_Intro-8">[8]</a></p><p>QUIC ç³»ç»Ÿçš„å¦ä¸€ä¸ªç›®æ ‡æ˜¯æé«˜ç½‘ç»œåˆ‡æ¢äº‹ä»¶æœŸé—´çš„æ€§èƒ½ï¼Œä¾‹å¦‚å½“ç§»åŠ¨è®¾å¤‡çš„ç”¨æˆ·ä»æœ¬åœ°<a href="https://en.wikipedia.org/wiki/Hotspot_(Wi-Fi)">WiFi çƒ­ç‚¹</a>ç§»åŠ¨åˆ°<a href="https://en.wikipedia.org/wiki/Cellular_network">ç§»åŠ¨ç½‘ç»œ</a>æ—¶å‘ç”Ÿçš„æƒ…å†µã€‚å½“è¿™ç§æƒ…å†µå‘ç”Ÿåœ¨ TCP ä¸Šæ—¶ï¼Œä¸€ä¸ªæ¼«é•¿çš„è¿‡ç¨‹å¼€å§‹ï¼Œæ¯ä¸ªç°æœ‰çš„è¿æ¥ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°è¶…æ—¶ï¼Œç„¶åæ ¹æ®éœ€è¦é‡æ–°å»ºç«‹ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒQUIC åŒ…å«ä¸€ä¸ªè¿æ¥æ ‡è¯†ç¬¦ï¼Œå®ƒå¯ä»¥å”¯ä¸€æ ‡è¯†ä¸æœåŠ¡å™¨çš„è¿æ¥ï¼Œè€Œä¸ç®¡æ¥æºå¦‚ä½•ã€‚<a href="https://en.wikipedia.org/wiki/IP_address">è¿™å…è®¸é€šè¿‡å‘é€å§‹ç»ˆåŒ…å«æ­¤ ID çš„æ•°æ®åŒ…ç®€å•åœ°é‡æ–°å»ºç«‹è¿æ¥ï¼Œå› ä¸ºå³ä½¿ç”¨æˆ·çš„IP åœ°å€</a>æ›´æ”¹ï¼ŒåŸå§‹è¿æ¥ ID ä»ç„¶æœ‰æ•ˆã€‚<a href="https://en.wikipedia.org/wiki/QUIC#cite_note-QUICoverview-28">[28]</a></p><p>!<a href="https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/HTTP-1.1_vs._HTTP-2_vs._HTTP-3_Protocol_Stack.svg/336px-HTTP-1.1_vs._HTTP-2_vs._HTTP-3_Protocol_Stack.svg.png">https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/HTTP-1.1_vs._HTTP-2_vs._HTTP-3_Protocol_Stack.svg/336px-HTTP-1.1_vs._HTTP-2_vs._HTTP-3_Protocol_Stack.svg.png</a></p><p>!<a href="https://en.wikipedia.org/w/extensions/ImageMap/resources/desc-20.png?15600">https://en.wikipedia.org/w/extensions/ImageMap/resources/desc-20.png?15600</a></p><p>HTTP/3 ä¸ HTTP/1.1 å’Œ HTTP/2 å¯¹æ¯”çš„åè®®æ ˆ</p><p>QUIC å¯ä»¥åœ¨åº”ç”¨ç¨‹åºç©ºé—´ä¸­å®ç°ï¼Œè€Œä¸æ˜¯åœ¨<a href="https://en.wikipedia.org/wiki/Operating_system_kernel">æ“ä½œç³»ç»Ÿå†…æ ¸</a>ä¸­ã€‚å½“æ•°æ®åœ¨åº”ç”¨ç¨‹åºä¹‹é—´ç§»åŠ¨æ—¶ï¼Œç”±äº<a href="https://en.wikipedia.org/wiki/Context_switch">ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿™é€šå¸¸ä¼šè°ƒç”¨é¢å¤–çš„å¼€é”€ã€‚</a>ç„¶è€Œï¼Œå°± QUIC è€Œè¨€ï¼Œåè®®æ ˆæ—¨åœ¨ä¾›å•ä¸ªåº”ç”¨ç¨‹åºä½¿ç”¨ï¼Œæ¯ä¸ªä½¿ç”¨ QUIC çš„åº”ç”¨ç¨‹åºéƒ½æœ‰è‡ªå·±çš„è¿æ¥æ‰˜ç®¡åœ¨ UDP ä¸Šã€‚æœ€ç»ˆå·®å¼‚å¯èƒ½éå¸¸å°ï¼Œå› ä¸ºæ•´ä¸ª HTTP/2 å †æ ˆçš„å¤§éƒ¨åˆ†å·²ç»åœ¨åº”ç”¨ç¨‹åºä¸­ï¼ˆæˆ–æ›´å¸¸è§çš„æ˜¯å®ƒä»¬çš„åº“ï¼‰ã€‚å°†å…¶ä½™éƒ¨åˆ†æ”¾åœ¨è¿™äº›åº“ä¸­ï¼Œæœ¬è´¨ä¸Šæ˜¯çº é”™ï¼Œå¯¹ HTTP/2 å †æ ˆçš„å¤§å°æˆ–æ•´ä½“å¤æ‚æ€§å‡ ä¹æ²¡æœ‰å½±å“ã€‚<a href="https://en.wikipedia.org/wiki/QUIC#cite_note-IETF_QUIC_Intro-8">[8]</a></p><p>è¿™ç§ç»„ç»‡å…è®¸æ›´å®¹æ˜“åœ°è¿›è¡Œæœªæ¥çš„æ›´æ”¹ï¼Œå› ä¸ºå®ƒä¸éœ€è¦æ›´æ”¹å†…æ ¸<a href="https://en.wikipedia.org/wiki/Kernel_(operating_system)">æ¥</a>è¿›è¡Œæ›´æ–°ã€‚QUIC çš„é•¿æœŸç›®æ ‡ä¹‹ä¸€æ˜¯æ·»åŠ ç”¨äº<a href="https://en.wikipedia.org/wiki/Forward_error_correction">å‰å‘çº é”™</a>(FEC) å’Œæ”¹è¿›æ‹¥å¡æ§åˆ¶çš„æ–°ç³»ç»Ÿ</p><h2 id="Network-layer"><strong>Network layer</strong></h2><p>2functions: forwarding <strong>è½¬å‘:</strong> (æ˜¯ä¸€ç§å±€éƒ¨çš„æ¦‚å¿µ/åŠŸèƒ½â€¦æ•°æ®å¹³é¢çš„â€¦ä¾èµ–äºè·¯ç”±è¡¨â€¦)å°†åˆ†ç»„ä»è·¯ç”±å™¨çš„<strong>è¾“å…¥æ¥å£è½¬å‘åˆ°åˆé€‚çš„è¾“å‡ºæ¥å£</strong></p><p>routing: determine the</p><p>1.router examines header fields in all IP datagram</p><p>!<a href="https://img-blog.csdnimg.cn/20210218141705669.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70">https://img-blog.csdnimg.cn/20210218141705669.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70</a></p><p>!<a href="https://img-blog.csdnimg.cn/20210218174446962.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70">https://img-blog.csdnimg.cn/20210218174446962.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70</a></p><h3 id="è·¯ç”±å™¨"><strong>è·¯ç”±å™¨</strong></h3><p><strong>åŠŸèƒ½</strong></p><ul><li>è¿è¡Œè·¯ç”±ç®—æ³•/åè®®ï¼ˆRIPï¼ŒOSPFï¼ŒBGPï¼‰</li><li>å°†æ•°æ®æŠ¥ä»å…¥å£é“¾è·¯è½¬å‘åˆ°å‡ºå£é“¾è·¯</li></ul><p>router structure:</p><p>!<a href="https://img-blog.csdnimg.cn/2021021815334083.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70">https://img-blog.csdnimg.cn/2021021815334083.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70</a></p><p>ipv6 IP addr 128bits 16bytes</p><ul><li>å®é™…ä¸­çš„è·¯ç”±å™¨çš„Router input portså’Œ output ports <strong>æ˜¯åŒä¸€ä¸ªç«¯å£</strong>ï¼Œ</li><li>åªæ˜¯ä¸ºäº†æ–¹ä¾¿è¾“å…¥è¾“å‡ºç«¯å£çš„è®²è§£æ‰<strong>åˆ†æˆä¸¤ä¸ªâ€œç‹¬ç«‹çš„è¾“å…¥è¾“å‡ºç«¯å£â€</strong></li></ul><h3 id="IP"><strong>IP</strong></h3><p>!<a href="https://img-blog.csdnimg.cn/20210218184213704.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70">https://img-blog.csdnimg.cn/20210218184213704.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70</a></p><p>å±€åŸŸç½‘æ¥å…¥Internetçš„æŠ€æœ¯æœ‰ä¸‰ç§<a href="https://blog.csdn.net/wenqiang1208/article/details/72403785%EF%BC%9A">https://blog.csdn.net/wenqiang1208/article/details/72403785ï¼š</a></p><ol><li>ç›´æ¥è·¯ç”±</li><li>ä»£ç†æœåŠ¡å™¨(proxy)ä»£ç†æœåŠ¡å™¨ï¼ˆProxy Serverï¼‰æ˜¯ä¸€ç§é‡è¦çš„æœåŠ¡å™¨å®‰å…¨åŠŸèƒ½ï¼Œå®ƒçš„å·¥ä½œä¸»è¦åœ¨(OSI)æ¨¡å‹çš„ä¼šè¯å±‚ï¼Œä»è€Œèµ·åˆ°é˜²ç«å¢™çš„ä½œç”¨ã€‚ä»£ç†æœåŠ¡å™¨å¤§å¤šè¢«ç”¨æ¥è¿æ¥INTERNETï¼ˆå›½é™…äº’è”ç½‘ï¼‰å’ŒLocal Area Networkï¼ˆå±€åŸŸç½‘ï¼‰ã€‚<br>ä»£ç†åˆ†ç±»ï¼šHTTPä»£ç†ï¼›socksä»£ç†ï¼›VPNä»£ç†ï¼›FTPä»£ç†</li><li>ç½‘ç»œåœ°å€è½¬æ¢(NAT)NATå°†è‡ªåŠ¨ä¿®æ”¹IPæŠ¥æ–‡çš„æºIPåœ°å€å’Œç›®çš„IPåœ°å€ï¼ŒIpåœ°å€æ ¡éªŒåˆ™åœ¨NATå¤„ç†è¿‡ç¨‹ä¸­è‡ªåŠ¨å®Œæˆã€‚æœ‰äº›åº”ç”¨ç¨‹åºå°†æºIPåœ°å€åµŒå…¥åˆ°IPæŠ¥æ–‡çš„æ•°æ®éƒ¨åˆ†ä¸­ï¼Œæ‰€ä»¥è¿˜éœ€è¦åŒæ—¶å¯¹æŠ¥æ–‡çš„æ•°æ®éƒ¨åˆ†è¿›è¡Œä¿®æ”¹ï¼Œä»¥åŒ¹é…IPå¤´ä¸­å·²ç»ä¿®æ”¹è¿‡çš„æºIPåœ°å€ã€‚å¦åˆ™ï¼Œåœ¨æŠ¥æ–‡æ•°æ®éƒ¨åˆ†åµŒå…¥IPåœ°å€çš„åº”ç”¨ç¨‹åºå°±ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚</li></ol><p><strong>NATç±»å‹ï¼š</strong></p><ul><li><strong>NAT0ï¼ˆå…¨é”¥å½¢NATï¼‰ï¼š</strong>Â æ‚¨çš„è®¾å¤‡æ‹¥æœ‰ä¸€ä¸ªçœŸå®çš„å…¬ç½‘IPåœ°å€ï¼Œå¯ä»¥ç›´æ¥ä¸äº’è”ç½‘ä¸Šçš„å…¶ä»–è®¾å¤‡é€šä¿¡ï¼Œæ— éœ€ç»è¿‡é¢å¤–çš„è½¬æ¢ã€‚è¿™æ˜¯æœ€ç†æƒ³çš„ç½‘ç»œç±»å‹ï¼Œé€‚åˆéœ€è¦é«˜æ€§èƒ½å’Œå…¬ç½‘è®¿é—®çš„åº”ç”¨åœºæ™¯ã€‚</li><li><strong>NAT1ï¼ˆå¯¹ç§°å‹NATï¼‰ï¼š</strong>Â æ‚¨çš„è®¾å¤‡å¯ä»¥é€šè¿‡ç«¯å£æ˜ å°„ä¸äº’è”ç½‘ä¸Šçš„å…¶ä»–è®¾å¤‡é€šä¿¡ï¼Œä½†éœ€è¦æ‰‹åŠ¨é…ç½®ç«¯å£æ˜ å°„è§„åˆ™ã€‚ç›¸å¯¹NAT0æ¥è¯´ï¼Œæ€§èƒ½ç¨å·®ï¼Œä½†ä»èƒ½æ»¡è¶³å¤§å¤šæ•°åº”ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚</li><li><strong>NAT2ï¼ˆç«¯å£é™åˆ¶å‹NATæˆ–é”¥å½¢NATï¼‰ï¼š</strong>Â æ‚¨çš„è®¾å¤‡åªèƒ½ä¸å·²å»ºç«‹è¿æ¥çš„è®¾å¤‡é€šä¿¡ï¼Œæ— æ³•ä¸»åŠ¨å‘èµ·è¿æ¥ã€‚è¿™ä¼šé™åˆ¶æŸäº›åº”ç”¨çš„ä½¿ç”¨ï¼Œä¾‹å¦‚P2Pä¸‹è½½ã€éƒ¨åˆ†æ¸¸æˆç­‰ã€‚</li><li><strong>NAT3ï¼ˆå®Œå…¨ç«¯å£é™åˆ¶å‹NATï¼‰ï¼š</strong>Â æ‚¨çš„è®¾å¤‡åªèƒ½ä¸å·²å»ºç«‹è¿æ¥çš„è®¾å¤‡é€šä¿¡ï¼Œä¸”åªèƒ½ä½¿ç”¨ç‰¹å®šçš„ç«¯å£ã€‚è¿™æ˜¯é™åˆ¶æœ€ä¸¥æ ¼çš„NATç±»å‹ï¼Œä¼šå¯¹å¤§éƒ¨åˆ†åº”ç”¨é€ æˆå½±å“ã€‚</li></ul><p>IP   <strong>(Fragmentation &amp; Reassembly)</strong></p><p>ï² ç½‘ç»œé“¾è·¯æœ‰MTU(æœ€å¤§ä¼ è¾“å•å…ƒ) â€“ é“¾è·¯å±‚å¸§æ‰€æºå¸¦çš„æœ€å¤§æ•°æ®é•¿åº¦ï­ ä¸åŒçš„é“¾è·¯ç±»å‹ï­ ä¸åŒçš„MTU</p><p>å¦‚æœIPå±‚æœ‰ä¸€ä¸ªæ•°æ®æŠ¥è¦ä¼ ï¼Œè€Œä¸”<strong>æ•°æ®å¸§çš„é•¿åº¦æ¯”é“¾è·¯å±‚çš„MTUè¿˜</strong>å¤§ï¼Œ<br>é‚£ä¹ˆIPå±‚å°±éœ€è¦è¿›è¡Œåˆ†ç‰‡( fragmentation)ï¼Œå³æŠŠæ•°æ®æŠ¥åˆ†æˆè‹¥å¹²ç‰‡ï¼Œè¿™æ ·æ¯ä¸€ç‰‡å°±éƒ½å°äºMTUã€‚<br>ï¬ æœ€åä¸€ä¸ªåˆ†ç‰‡æ ‡è®°ä¸º0ï­ â€œé‡ç»„â€åªåœ¨æœ€ç»ˆçš„ç›®æ ‡ä¸»æœºè¿›è¡Œï­ IPå¤´éƒ¨çš„ä¿¡æ¯è¢«ç”¨äºæ ‡è¯†ï¼Œæ’åºç›¸å…³åˆ†ç‰‡</p><p><strong>IPï¼ˆä¸“ç”¨ï¼‰åœ°å€ åªåœ¨å±€éƒ¨ç½‘ç»œä¸­æœ‰æ„ä¹‰ï¼ŒåŒºåˆ†ä¸åŒçš„è®¾å¤‡</strong><br>ï² è·¯ç”±å™¨ä¸å¯¹ç›®æ ‡åœ°å€æ˜¯ä¸“ç”¨åœ°å€çš„åˆ†ç»„è¿›è¡Œè½¬å‘<br>ï² ä¸“ç”¨åœ°å€èŒƒå›´ï¼ˆAã€Bã€Cç±»éƒ½æœ‰ï¼‰ä¸ç”¨å‘ispç”³è¯·</p><p>!<a href="https://img-blog.csdnimg.cn/20210218205701933.png">https://img-blog.csdnimg.cn/20210218205701933.png</a></p><p>ï­ Class A 10.0.0.0-10.255.255.255 MASK 255.0.0.0<br>ï­ Class B 172.16.0.0-172.31.255.255 MASK 255.255.0.0<br>ï­ Class C 192.168.0.0-192.168.255.255 MASK 255.255.255.0</p><p><strong>åˆ†ç±»å¯»å€</strong> (Classful Addressing)ï¼šå°† IP åœ°å€åˆ†ä¸º ABCDE äº”ç±»ï¼Œä¸‰ä¸ªä¸»è¦ç±»ä¸º ABC ä¸‰ç±»ï¼ŒåŒºåˆ«åœ¨äºç½‘ç»œå·å’Œä¸»æœºå·çš„é•¿åº¦ï¼Œç½‘ç»œå·å’Œä¸»æœºå·çš„åˆ’åˆ†çº¿åœ¨å…«ä½å­—èŠ‚è¾¹ç•Œï¼Œå¦‚ C ç±»åœ°å€å‰ 24 bits ä¸ºç½‘ç»œå·ï¼Œå 8 bits ä¸ºä¸»æœºå·ã€‚<br>å­ç½‘åˆ†ç±»å¯»å€ (Subnetted Classful Addressing)ï¼šåœ¨å­ç½‘å¯»å€ç³»ç»Ÿä¸­ï¼Œé€šè¿‡ä»ä¸»æœºå·ä¸­æ‹¿å–å‰ç«¯éƒ¨åˆ† bits ä½œä¸ºå­ç½‘å·ï¼Œç”¨äºè¯†åˆ«å­ç½‘ï¼Œè¿™å°†åŸæœ¬çš„ä¸¤å±‚åˆ’åˆ†ç³»ç»Ÿï¼ˆç½‘ç»œå·/ä¸»æœºå·ï¼‰è¢«æ”¹ä¸ºä¸‰å±‚åˆ’åˆ†ç³»ç»Ÿï¼ˆç½‘ç»œå·/å­ç½‘å·/ä¸»æœºå·ï¼‰ã€‚<br>æ— ç±»å¯»å€ (Classless Addressing)ï¼šå°†åŸå§‹çš„åˆ†ç±»å¯»å€æŠ›å¼€ï¼Œç½‘ç»œå·å’Œä¸»æœºå·å¯ä»¥åœ¨ä»»æ„ç‚¹åˆ’åˆ†ï¼Œä¸éœ€è¦åƒåˆ†ç±»å¯»ä¹‹ä¸­é‚£æ ·åˆ’åˆ†åœ¨å…«ä½å­—èŠ‚è¾¹ç•Œã€‚è¿™ç§æ–¹æ¡ˆæ›´åŠ çµæ´»æœ‰å¼¹æ€§ã€‚</p><p><strong>CIDR: Classless InterDomain Routing</strong>ï¼ˆæ— ç±»åŸŸé—´è·¯ç”±ï¼‰</p><blockquote><p>ç½‘ç»œå‰ç¼€è¶ŠçŸ­ï¼Œ<br>å…¶åœ°å€å—æ‰€åŒ…å«çš„åœ°å€æ•°å°±è¶Šå¤šã€‚<br>è€Œåœ¨ä¸‰çº§ç»“æ„çš„IPåœ°å€ä¸­ï¼Œåˆ’åˆ†å­ç½‘æ˜¯ä½¿ç½‘ç»œå‰ç¼€å˜é•¿ã€‚</p></blockquote><p>VLSM(<a href="https://baike.baidu.com/item/%E5%8F%AF%E5%8F%98%E9%95%BF%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81/9163142">å¯å˜é•¿å­ç½‘æ©ç </a>) æ˜¯ä¸ºäº†æœ‰æ•ˆçš„ä½¿ç”¨<a href="https://baike.baidu.com/item/%E6%97%A0%E7%B1%BB%E5%88%AB%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1/15758573">æ— ç±»åˆ«åŸŸé—´è·¯ç”±</a>ï¼ˆCIDRï¼‰å’Œè·¯ç”±æ±‡èš(route summary)æ¥æ§åˆ¶<a href="https://baike.baidu.com/item/%E8%B7%AF%E7%94%B1%E8%A1%A8/2707408">è·¯ç”±è¡¨</a>çš„å¤§å°ï¼Œå®ƒæ˜¯ç½‘ç»œç®¡ç†å‘˜å¸¸ç”¨çš„IPå¯»å€æŠ€æœ¯</p><p>CIDRæ— ç±»ç½‘ç»œæ˜¯ä¸€ç§ç›¸å¯¹äºæœ‰ç±»ç½‘ç»œçš„ç½‘ç»œï¼Œæ— ç±»ç½‘ç»œIPåœ°å€çš„æ©ç æ˜¯å˜é•¿çš„ã€‚<br>åœ¨æœ‰ç±»ç½‘ç»œçš„åŸºç¡€ä¸Šï¼Œæ‹¿å‡ºä¸€éƒ¨åˆ†ä¸»æœºIDä½œä¸ºå­ç½‘IDã€‚<br>ä¾‹å¦‚ï¼š<br>IPåœ°å€ä¸º192.168.250.44 å­ç½‘æ©ç ä¸èƒ½æ˜¯å°äº24ä½ã€‚<br>å› ä¸ºè¿™æ˜¯ä¸€ä¸ªCç±»åœ°å€ï¼ˆå‰3Bytesæ˜¯ç½‘ç»œå·ï¼‰ï¼Œå­ç½‘æ©ç åªèƒ½å¤§äº24ä½ã€‚<br>è€Œæ©ç 255.255.248.0ï¼ˆ21ä½ï¼‰æ˜¯ä¸ç¬¦åˆè§„å®šçš„ã€‚<br>Â·<br>å¦‚æœä¸€ä¸ªç½‘ç»œä¸­çš„ä¸»æœºæœ‰100å°ï¼Œ<br>é‚£ä¹ˆï¼Œå¯ä»¥ç”¨å­ç½‘æ©ç /25æ¥åˆ’åˆ†è¿™ä¸ªCç±»ç½‘ç»œï¼ˆâ€œ192.168.250.0/24â€ï¼‰ï¼š<br>åˆ’åˆ†æˆ192.168.250.0/25 å’Œ192.168.250.128/25ä¸¤ä¸ªå­ç½‘ã€‚<br>â€”ä¸»æœº192.168.250.44/25 å±äºå­ç½‘192.168.250.0/25ã€‚</p><p>Subnet</p><p><strong>å­ç½‘æ©ç ä¸èƒ½å•ç‹¬å­˜åœ¨</strong>ï¼Œå®ƒ<strong>å¿…é¡»ç»“åˆIPåœ°å€</strong>ä¸€èµ·ä½¿ç”¨ã€‚<br>å­ç½‘æ©ç <strong>åªæœ‰ä¸€ä¸ªä½œç”¨</strong>ï¼Œå°±æ˜¯å°†æŸä¸ªIPåœ°å€<strong>åˆ’åˆ†</strong>æˆ<strong>ç½‘ç»œåœ°å€</strong>å’Œ<strong>ä¸»æœºåœ°å€</strong>ä¸¤éƒ¨åˆ†ã€‚</p><p>IPåœ°å€åˆ†é…ä¸­çš„å‡ ä¸ªç‰¹å®šç±»åˆ«ï¼Œä»¥ä¸‹æ˜¯å¯¹å®ƒä»¬çš„è§£é‡Šï¼š</p><ol><li><strong>å•æ’­åœ°å€ï¼ˆUnicastï¼‰ï¼š</strong><ul><li>å•æ’­åœ°å€ç”¨äºä¸€å¯¹ä¸€é€šä¿¡ï¼Œè¡¨ç¤ºæ•°æ®åŒ…ä»ä¸€ä¸ªå‘é€è€…ä¼ è¾“åˆ°ä¸€ä¸ªç‰¹å®šçš„æ¥æ”¶è€…ã€‚å®ƒæ˜¯æœ€å¸¸è§çš„IPåœ°å€ç±»å‹ã€‚</li><li>Aã€Bã€C ç±»åœ°å€éƒ½æ˜¯å•æ’­åœ°å€ï¼Œåˆ†åˆ«ç”¨äºå¤§å‹ç½‘ç»œã€ä¸­ç­‰å¤§å°ç½‘ç»œå’Œå°å‹ç½‘ç»œã€‚</li></ul></li><li><strong>ç»„æ’­åœ°å€ï¼ˆMulticastï¼‰ï¼š</strong><ul><li>ç»„æ’­åœ°å€ç”¨äºä¸€å¯¹å¤šé€šä¿¡ï¼Œè¡¨ç¤ºæ•°æ®åŒ…ä»ä¸€ä¸ªå‘é€è€…ä¼ è¾“åˆ°ä¸€ä¸ªç‰¹å®šçš„ç»„ä¸­çš„å¤šä¸ªæ¥æ”¶è€…ã€‚</li><li>D ç±»åœ°å€æ˜¯ç»„æ’­åœ°å€ï¼Œç”¨äºæŒ‡ç¤ºæ•°æ®æµå‘ä¸€ç»„è®¾å¤‡ã€‚å¤šä¸ªä¸»æœºå¯ä»¥é€šè¿‡åŠ å…¥ä¸€ä¸ªç‰¹å®šçš„ç»„æ’­ç»„æ¥æ¥æ”¶è¿™äº›æ•°æ®ã€‚</li></ul></li><li><strong>å¹¿æ’­åœ°å€ï¼ˆBroadcastï¼‰ï¼š</strong><ul><li>å¹¿æ’­åœ°å€ç”¨äºä¸€å¯¹æ‰€æœ‰é€šä¿¡ï¼Œåœ¨ä¸€ä¸ªå­ç½‘æˆ–å±€åŸŸç½‘ä¸­å‘æ‰€æœ‰è®¾å¤‡å‘é€æ•°æ®åŒ…ã€‚</li><li>åœ¨ IPv4 ä¸­ï¼Œå¹¿æ’­åœ°å€é€šå¸¸æ˜¯ç‰¹å®šçš„åœ°å€ï¼Œä¾‹å¦‚å…¨ç½‘å¹¿æ’­åœ°å€ä¸º255.255.255.255ï¼Œç”¨äºå‘é€æ•°æ®åŒ…ç»™åŒä¸€ç½‘ç»œä¸­çš„æ‰€æœ‰è®¾å¤‡ã€‚</li></ul></li><li><strong>E ç±»åœ°å€ï¼ˆReservedï¼‰ï¼š</strong><ul><li>E ç±»åœ°å€æ˜¯ä¿ç•™åœ°å€ï¼Œç”¨äºæœªæ¥å¯èƒ½çš„ç”¨é€”ã€‚è¿™ä¸ªåœ°å€ç©ºé—´æš‚æ—¶æ²¡æœ‰åˆ†é…ç»™ç‰¹å®šç”¨é€”ï¼Œè¢«ä¿ç•™åœ¨IPåœ°å€åˆ†é…æ–¹æ¡ˆä¸­ã€‚</li></ul></li></ol><h3 id="è·¯ç”±å™¨-2">è·¯ç”±å™¨</h3><p><strong>åŠŸèƒ½</strong></p><ul><li>è¿è¡Œè·¯ç”±ç®—æ³•/åè®®ï¼ˆRIPï¼ŒOSPFï¼ŒBGPï¼‰</li><li>å°†æ•°æ®æŠ¥ä»å…¥å£é“¾è·¯è½¬å‘åˆ°å‡ºå£é“¾è·¯</li></ul><h4 id="ç»“æ„">ç»“æ„</h4><p><strong>è¾“å…¥ç«¯å£(input port)ï¼š</strong></p><ul><li>ç‰©ç†å±‚ï¼šæ¥æ”¶ç‰©ç†ä¿¡å·ï¼Œå°†å…¶è½¬æ¢ä¸ºbit</li><li>ä¸æ•°æ®é“¾è·¯å±‚äº¤äº’æ¥æ‰§è¡Œæ•°æ®é“¾è·¯å±‚åŠŸèƒ½</li><li>ç½‘ç»œå±‚ï¼šæŸ¥æ‰¾ã€è½¬å‘ã€æ’é˜Ÿ</li><li>éé›†ä¸­å¼çš„äº¤æ¢ï¼šè½¬å‘è¡¨çš„å‰¯æœ¬å·²å‘é€ç»™æ¯ä¸ªè¾“å…¥ç«¯å£ï¼Œå› æ­¤ï¼Œè½¬å‘å†³ç­–ç”±è¾“å…¥ç«¯å£åœ¨æœ¬åœ°å®Œæˆ<ul><li>æ ¹æ®æ•°æ®æŠ¥çš„ç›®çš„åœ°å€ï¼Œåœ¨è¾“å…¥ç«¯å£å†…å­˜çš„è½¬å‘è¡¨ä¸­å¯»æ‰¾è¾“å‡ºç«¯å£</li><li>ç›®æ ‡ï¼šä»¥çº¿ç¼†ä¸€çº§çš„é€Ÿåº¦å®Œæˆè¾“å…¥ç«¯å£å¤„ç†</li><li>é˜Ÿåˆ—ï¼šå¦‚æœæ•°æ®æŠ¥è¾¾åˆ°çš„é€Ÿç‡å¤§äºå¤„ç†é€Ÿç‡åˆ™éœ€è¦æ’é˜Ÿ</li></ul></li></ul><p>Input queuing caused  by input buffer overflow.</p><p><strong>Output port:  datagram can be lost due to congestion,lack of buffers(arrive rate fabric &gt; transmission rate).</strong></p><p><strong>scheduling discipline: priority scheduling- network neutrality</strong></p><p><strong>äº¤æ¢ç»“æ„fabric 3ç§ï¼šmemory, bus,interconnection network</strong></p><p>äº¤æ¢ç»“æ„å°†è·¯ç”±å™¨çš„è¾“å…¥ç«¯å£è¿æ¥åˆ°å®ƒçš„è¾“å‡ºç«¯å£ã€‚è¿™ç§äº¤æ¢ç»“æ„åŒ…å«åœ¨è·¯ç”±ä¹‹ä¸­ï¼Œæ˜¯ä¸€ä¸ªè·¯ç”±å™¨ä¸­çš„"ç½‘ç»œ"</p><p><strong>è¾“å‡ºç«¯å£</strong></p><img src="https://img-blog.csdnimg.cn/20210218162449429.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" style="zoom:67%;"><p>è¾“å‡ºç«¯å£å­˜å‚¨ä»äº¤æ¢ç»“æ„æ¥æ”¶åˆ°çš„åˆ†ç»„ï¼Œå¹¶åœ¨è¾“å‡ºé“¾è·¯ä¸Šä¼ è¾“è¿™äº›åˆ†ç»„ã€‚å½“ä¸€æ¡é“¾è·¯æ˜¯åŒå‘çš„æ—¶ï¼Œè¾“å‡ºç«¯å£å¸¸ä¸è¯¥é“¾è·¯è¾“å…¥ç«¯å£æˆå¯¹å‡ºç°åœ¨åŒä¸€çº¿è·¯å¡ä¸Šã€‚</p><ul><li>ç¼“å†²åŒºï¼šå½“äº¤æ¢ç»“æ„é€Ÿç‡è¾ƒå¿«æ—¶ï¼Œå°±éœ€è¦ç¼“å­˜ï¼Œå¦åˆ™ï¼Œåœ¨é‡åˆ°æ‹¥å¡æ—¶ï¼Œä¼šå¯¼è‡´åˆ†ç»„ä¸¢å¤±</li><li>åˆ†ç»„è°ƒåº¦ï¼šå…ˆæ¥å…ˆæœåŠ¡ï¼ˆFCFSï¼‰è§„åˆ™ï¼ŒåŠ æƒå…¬å¹³æ’é˜Ÿè§„åˆ™ï¼ˆWFQï¼‰ï¼Œéµå¾ªâ€œç½‘ç»œä¸­ç«‹â€åŸåˆ™ï¼Œä¸ºæœåŠ¡è´¨é‡ä¿éšœï¼ˆQoSï¼‰èµ·åˆ°å…³é”®ä½œç”¨</li></ul><p><strong>æ•°æ®å¹³é¢ã€æ§åˆ¶å¹³é¢</strong></p><p>control plane methods:</p><p>1 traditional router algorithm</p><p>2 software-defined networking (SDN): åœ¨è¿œç¨‹çš„æœåŠ¡å™¨ä¸­å®ç°<br>ï¼ˆCompare to the traditional routing algorithmï¼ŒSDN is much more flexible.</p><p>router structure:</p><p><img src="https://img-blog.csdnimg.cn/2021021815334083.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" style="zoom: 67%;"><img src="https://lh3.googleusercontent.com/proxy/UbaWC9LZvA2qcCc4sJOaCj1mlbaVV_QzDOfS1prFWQ9qpMrnAiL3i1DGa01YhwvxazVI9pjt1ww82_euDQxWf4n1TER0fHFYcT8KTkaIvpCdWKJ6bw6aGA_yUJfQx4pvTw" alt="TCP/IP Ports and Sockets Explained">ipv6 IP addr 128bits 16bytes</p><ul><li>å®é™…ä¸­çš„è·¯ç”±å™¨çš„Router input portså’Œ output ports <strong>æ˜¯åŒä¸€ä¸ªç«¯å£</strong>ï¼Œ</li><li>åªæ˜¯ä¸ºäº†æ–¹ä¾¿è¾“å…¥è¾“å‡ºç«¯å£çš„è®²è§£æ‰<strong>åˆ†æˆä¸¤ä¸ªâ€œç‹¬ç«‹çš„è¾“å…¥è¾“å‡ºç«¯å£â€</strong></li></ul><p>longest prefix matching</p><p>TCAM with high speed</p><h5 id="scheduling">scheduling</h5><p>Priority scheduling</p><ul><li><p><strong><a href="https://blog.csdn.net/pzw_0612/article/details/47357221">Round Robin (RR) schedulingï¼ˆæœ¬æ„ç¯å½¢ä¸å¸¦ï¼Œå…¶å®å«è½®è¯¢è°ƒåº¦</a>ï¼‰:</strong></p><p><strong>Weighted Fair Queuing (WFQï¼ŒåŠ æƒå…¬å¹³é˜Ÿåˆ—):</strong></p></li><li><p>FIFO scheduling</p></li></ul><h3 id="IP-2">IP</h3><img src="https://img-blog.csdnimg.cn/20210218184213704.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" style="zoom:80%;"><p>å±€åŸŸç½‘æ¥å…¥Internetçš„æŠ€æœ¯æœ‰ä¸‰ç§<a href="https://blog.csdn.net/wenqiang1208/article/details/72403785%EF%BC%9A">https://blog.csdn.net/wenqiang1208/article/details/72403785ï¼š</a></p><ol><li><p>ç›´æ¥è·¯ç”±</p></li><li><p>ä»£ç†æœåŠ¡å™¨(proxy)ä»£ç†æœåŠ¡å™¨ï¼ˆProxy Serverï¼‰æ˜¯ä¸€ç§é‡è¦çš„æœåŠ¡å™¨å®‰å…¨åŠŸèƒ½ï¼Œå®ƒçš„å·¥ä½œä¸»è¦åœ¨(OSI)æ¨¡å‹çš„ä¼šè¯å±‚ï¼Œä»è€Œèµ·åˆ°é˜²ç«å¢™çš„ä½œç”¨ã€‚ä»£ç†æœåŠ¡å™¨å¤§å¤šè¢«ç”¨æ¥è¿æ¥INTERNETï¼ˆå›½é™…äº’è”ç½‘ï¼‰å’ŒLocal Area Networkï¼ˆå±€åŸŸç½‘ï¼‰ã€‚<br>ä»£ç†åˆ†ç±»ï¼šHTTPä»£ç†ï¼›socksä»£ç†ï¼›VPNä»£ç†ï¼›FTPä»£ç†</p></li><li><p>ç½‘ç»œåœ°å€è½¬æ¢(NAT)NATå°†è‡ªåŠ¨ä¿®æ”¹IPæŠ¥æ–‡çš„æºIPåœ°å€å’Œç›®çš„IPåœ°å€ï¼ŒIpåœ°å€æ ¡éªŒåˆ™åœ¨NATå¤„ç†è¿‡ç¨‹ä¸­è‡ªåŠ¨å®Œæˆã€‚æœ‰äº›åº”ç”¨ç¨‹åºå°†æºIPåœ°å€åµŒå…¥åˆ°IPæŠ¥æ–‡çš„æ•°æ®éƒ¨åˆ†ä¸­ï¼Œæ‰€ä»¥è¿˜éœ€è¦åŒæ—¶å¯¹æŠ¥æ–‡çš„æ•°æ®éƒ¨åˆ†è¿›è¡Œä¿®æ”¹ï¼Œä»¥åŒ¹é…IPå¤´ä¸­å·²ç»ä¿®æ”¹è¿‡çš„æºIPåœ°å€ã€‚å¦åˆ™ï¼Œåœ¨æŠ¥æ–‡æ•°æ®éƒ¨åˆ†åµŒå…¥IPåœ°å€çš„åº”ç”¨ç¨‹åºå°±ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚</p></li></ol><h4 id="IP-åˆ†ç‰‡å’Œé‡ç»„"><strong>IP åˆ†ç‰‡å’Œé‡ç»„</strong></h4><p><strong>(Fragmentation &amp; Reassembly)</strong></p><p>ï² ç½‘ç»œé“¾è·¯æœ‰MTU(æœ€å¤§ä¼ è¾“å•å…ƒ) â€“ é“¾è·¯å±‚å¸§æ‰€æºå¸¦çš„æœ€å¤§æ•°æ®é•¿åº¦ï­ ä¸åŒçš„é“¾è·¯ç±»å‹ï­ ä¸åŒçš„MTU</p><p>å¦‚æœIPå±‚æœ‰ä¸€ä¸ªæ•°æ®æŠ¥è¦ä¼ ï¼Œè€Œä¸”<strong>æ•°æ®å¸§çš„é•¿åº¦æ¯”é“¾è·¯å±‚çš„MTUè¿˜</strong>å¤§ï¼Œ<br>é‚£ä¹ˆIPå±‚å°±éœ€è¦è¿›è¡Œåˆ†ç‰‡( fragmentation)ï¼Œå³æŠŠæ•°æ®æŠ¥åˆ†æˆè‹¥å¹²ç‰‡ï¼Œè¿™æ ·æ¯ä¸€ç‰‡å°±éƒ½å°äºMTUã€‚<br>ï¬ æœ€åä¸€ä¸ªåˆ†ç‰‡æ ‡è®°ä¸º0ï­ â€œé‡ç»„â€åªåœ¨æœ€ç»ˆçš„ç›®æ ‡ä¸»æœºè¿›è¡Œï­ IPå¤´éƒ¨çš„ä¿¡æ¯è¢«ç”¨äºæ ‡è¯†ï¼Œæ’åºç›¸å…³åˆ†ç‰‡</p><p><strong>IPï¼ˆä¸“ç”¨ï¼‰åœ°å€</strong> åªåœ¨å±€éƒ¨ç½‘ç»œä¸­æœ‰æ„ä¹‰ï¼ŒåŒºåˆ†ä¸åŒçš„è®¾å¤‡<br>ï² è·¯ç”±å™¨ä¸å¯¹ç›®æ ‡åœ°å€æ˜¯ä¸“ç”¨åœ°å€çš„åˆ†ç»„è¿›è¡Œè½¬å‘<br>ï² ä¸“ç”¨åœ°å€èŒƒå›´ï¼ˆAã€Bã€Cç±»éƒ½æœ‰ï¼‰ä¸ç”¨å‘ispç”³è¯·</p><p><img src="https://img-blog.csdnimg.cn/20210218205701933.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>ï­ Class A 10.0.0.0-10.255.255.255 MASK 255.0.0.0<br>ï­ Class B 172.16.0.0-172.31.255.255 MASK 255.255.0.0<br>ï­ Class C 192.168.0.0-192.168.255.255 MASK 255.255.255.0</p><p><strong>åˆ†ç±»å¯»å€</strong> (Classful Addressing)ï¼šå°† IP åœ°å€åˆ†ä¸º ABCDE äº”ç±»ï¼Œä¸‰ä¸ªä¸»è¦ç±»ä¸º ABC ä¸‰ç±»ï¼ŒåŒºåˆ«åœ¨äºç½‘ç»œå·å’Œä¸»æœºå·çš„é•¿åº¦ï¼Œç½‘ç»œå·å’Œä¸»æœºå·çš„åˆ’åˆ†çº¿åœ¨å…«ä½å­—èŠ‚è¾¹ç•Œï¼Œå¦‚ C ç±»åœ°å€å‰ 24 bits ä¸ºç½‘ç»œå·ï¼Œå 8 bits ä¸ºä¸»æœºå·ã€‚<br>å­ç½‘åˆ†ç±»å¯»å€ (Subnetted Classful Addressing)ï¼šåœ¨å­ç½‘å¯»å€ç³»ç»Ÿä¸­ï¼Œé€šè¿‡ä»ä¸»æœºå·ä¸­æ‹¿å–å‰ç«¯éƒ¨åˆ† bits ä½œä¸ºå­ç½‘å·ï¼Œç”¨äºè¯†åˆ«å­ç½‘ï¼Œè¿™å°†åŸæœ¬çš„ä¸¤å±‚åˆ’åˆ†ç³»ç»Ÿï¼ˆç½‘ç»œå·/ä¸»æœºå·ï¼‰è¢«æ”¹ä¸ºä¸‰å±‚åˆ’åˆ†ç³»ç»Ÿï¼ˆç½‘ç»œå·/å­ç½‘å·/ä¸»æœºå·ï¼‰ã€‚<br>æ— ç±»å¯»å€ (Classless Addressing)ï¼šå°†åŸå§‹çš„åˆ†ç±»å¯»å€æŠ›å¼€ï¼Œç½‘ç»œå·å’Œä¸»æœºå·å¯ä»¥åœ¨ä»»æ„ç‚¹åˆ’åˆ†ï¼Œä¸éœ€è¦åƒåˆ†ç±»å¯»ä¹‹ä¸­é‚£æ ·åˆ’åˆ†åœ¨å…«ä½å­—èŠ‚è¾¹ç•Œã€‚è¿™ç§æ–¹æ¡ˆæ›´åŠ çµæ´»æœ‰å¼¹æ€§ã€‚</p><h4 id="ç¼–ç CIDR">ç¼–ç CIDR</h4><p><strong>CIDR: Classless InterDomain Routing</strong>ï¼ˆæ— ç±»åŸŸé—´è·¯ç”±ï¼‰</p><blockquote><p><strong>ç½‘ç»œå‰ç¼€è¶ŠçŸ­ï¼Œ</strong><br>å…¶åœ°å€å—æ‰€<strong>åŒ…å«çš„åœ°å€æ•°å°±è¶Šå¤š</strong>ã€‚<br>è€Œåœ¨ä¸‰çº§ç»“æ„çš„IPåœ°å€ä¸­ï¼Œ<strong>åˆ’åˆ†å­ç½‘æ˜¯ä½¿ç½‘ç»œå‰ç¼€å˜é•¿ã€‚</strong></p></blockquote><p>VLSM(<a href="https://baike.baidu.com/item/%E5%8F%AF%E5%8F%98%E9%95%BF%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81/9163142">å¯å˜é•¿å­ç½‘æ©ç </a>) æ˜¯ä¸ºäº†æœ‰æ•ˆçš„ä½¿ç”¨<a href="https://baike.baidu.com/item/%E6%97%A0%E7%B1%BB%E5%88%AB%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1/15758573">æ— ç±»åˆ«åŸŸé—´è·¯ç”±</a>ï¼ˆCIDRï¼‰å’Œè·¯ç”±æ±‡èš(route summary)æ¥æ§åˆ¶<a href="https://baike.baidu.com/item/%E8%B7%AF%E7%94%B1%E8%A1%A8/2707408">è·¯ç”±è¡¨</a>çš„å¤§å°ï¼Œå®ƒæ˜¯ç½‘ç»œç®¡ç†å‘˜å¸¸ç”¨çš„IPå¯»å€æŠ€æœ¯</p><p>CIDRæ— ç±»ç½‘ç»œæ˜¯ä¸€ç§ç›¸å¯¹äºæœ‰ç±»ç½‘ç»œçš„ç½‘ç»œï¼Œæ— ç±»ç½‘ç»œIPåœ°å€çš„æ©ç æ˜¯å˜é•¿çš„ã€‚<br>åœ¨æœ‰ç±»ç½‘ç»œçš„åŸºç¡€ä¸Šï¼Œæ‹¿å‡ºä¸€éƒ¨åˆ†ä¸»æœºIDä½œä¸ºå­ç½‘IDã€‚<br>ä¾‹å¦‚ï¼š<br>IPåœ°å€ä¸º192.168.250.44 å­ç½‘æ©ç ä¸èƒ½æ˜¯å°äº24ä½ã€‚<br>å› ä¸ºè¿™æ˜¯ä¸€ä¸ªCç±»åœ°å€ï¼ˆå‰3Bytesæ˜¯ç½‘ç»œå·ï¼‰ï¼Œå­ç½‘æ©ç åªèƒ½å¤§äº24ä½ã€‚<br>è€Œæ©ç 255.255.248.0ï¼ˆ21ä½ï¼‰æ˜¯ä¸ç¬¦åˆè§„å®šçš„ã€‚<br>Â·<br>å¦‚æœä¸€ä¸ªç½‘ç»œä¸­çš„ä¸»æœºæœ‰100å°ï¼Œ<br>é‚£ä¹ˆï¼Œå¯ä»¥ç”¨å­ç½‘æ©ç /25æ¥åˆ’åˆ†è¿™ä¸ªCç±»ç½‘ç»œï¼ˆâ€œ192.168.250.0/24â€ï¼‰ï¼š<br>åˆ’åˆ†æˆ192.168.250.0/25 å’Œ192.168.250.128/25ä¸¤ä¸ªå­ç½‘ã€‚<br>â€”ä¸»æœº192.168.250.44/25 å±äºå­ç½‘192.168.250.0/25ã€‚</p><h5 id="subnet">subnet</h5><p><strong>å­ç½‘æ©ç ä¸èƒ½å•ç‹¬å­˜åœ¨</strong>ï¼Œå®ƒ<strong>å¿…é¡»ç»“åˆIPåœ°å€</strong>ä¸€èµ·ä½¿ç”¨ã€‚<br>å­ç½‘æ©ç <strong>åªæœ‰ä¸€ä¸ªä½œç”¨</strong>ï¼Œå°±æ˜¯å°†æŸä¸ªIPåœ°å€<strong>åˆ’åˆ†</strong>æˆ<strong>ç½‘ç»œåœ°å€</strong>å’Œ<strong>ä¸»æœºåœ°å€</strong>ä¸¤éƒ¨åˆ†ã€‚</p><p>Aã€Bã€Cç±»çš„åœ°å€å«åšå•æ’­åœ°å€ï¼ˆunicastï¼‰â€”â€”â€œæˆ‘åˆ°ä½ â€ã€‚è€ŒD ç±»åœ°å€å«ç»„æ’­åœ°å€ï¼ˆmulticastï¼‰â€”â€”â€œæˆ‘åˆ°è¿™ä¸ªDç±»ç»„çš„â€â€¦<br>è¿˜ä»¥ä¸€ç§å«å¹¿æ’­åœ°å€ï¼ˆbroadcastï¼‰â€”â€”â€œæˆ‘åˆ°æ‰€æœ‰â€ï¼Œä¸€èˆ¬åœ¨å±€åŸŸç½‘å†…éƒ¨<br>E ç±»åœ°å€é¢„ç•™çš„ï¼ˆReserved for future useï¼‰ ï¼ˆä½†å­˜æ–¹å¯¸åœ°,ç•™ä¸å­å­™è€•ï¼‰<br>åœ¨<strong>è·¯ç”±ä¿¡æ¯çš„é€šå‘Šçš„è¿‡ç¨‹å½“ä¸­</strong>ï¼Œè¿˜ä¸æ–­åœ°åš<strong>è·¯ç”±èšé›†</strong>ã€‚<strong>å‡å°‘è¡¨é¡¹ï¼Œè·¯ç”±å‡è´Ÿã€‚</strong><br><strong>è·¯ç”±èšé›†çš„ä½œç”¨ï¼š</strong><br><img src="https://img-blog.csdnimg.cn/20210218212207583.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTU2OTAw,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" style="zoom:67%;"></p><h5 id="DHCP">DHCP</h5><p>ç¬¬ä¸€æ­¥ï¼šClienté€šè¿‡å¹¿æ’­ï¼ˆbroadcastï¼‰å‘é€DHCP Discover æŠ¥æ–‡ï¼ŒLook foræœåŠ¡å™¨ç«¯</p><p>ç¬¬äºŒæ­¥ï¼šServeré€šè¿‡å•æ’­ï¼ˆunicastï¼‰å‘é€DHCP Offer æŠ¥æ–‡å‘å®¢æˆ·ç«¯æä¾›IPåœ°å€ç­‰ç½‘ç»œä¿¡æ¯</p><p>ç¬¬ä¸‰æ­¥ï¼šClienté€šè¿‡å¹¿æ’­<strong>DHCP Request æŠ¥æ–‡å‘ŠçŸ¥æœåŠ¡å™¨ç«¯æœ¬åœ°é€‰æ‹©ä½¿ç”¨å“ªä¸ªIPåœ°å€</strong></p><p>ç¬¬å››æ­¥ï¼šServeré€šè¿‡DHCP AckæŠ¥æ–‡å‘ŠçŸ¥å®¢æˆ·ç«¯IPåœ°å€æ˜¯åˆæ³•å¯ç”¨çš„<br>DHCPè¿”å›ï¼š<em>ipåœ°å€ã€ç½‘å…³ï¼ˆrouterã€å­ç½‘æ©ç ã€DNS</em></p><h5 id="NAT">NAT</h5><p>network address translation</p><p><strong>åŠ¨æœº</strong>ï¼ˆä½¿ç”¨NATçš„åŸå› ï¼‰: æœ¬åœ°ç½‘ç»œåªæœ‰ä¸€ä¸ªæœ‰æ•ˆIPåœ°å€:<br>ï­ä¸éœ€è¦ä»ISPåˆ†é…ä¸€å—åœ°å€ï¼Œå¯ç”¨ä¸€ä¸ªIPåœ°å€ç”¨äºæ‰€æœ‰çš„ï¼ˆå±€åŸŸç½‘ï¼‰è®¾å¤‡ â€“çœé’±<br>ï­<strong>å¯ä»¥åœ¨å±€åŸŸç½‘æ”¹å˜è®¾å¤‡çš„åœ°å€æƒ…å†µä¸‹è€Œæ— é¡»é€šçŸ¥å¤–ç•Œ</strong><br>ï­å¯ä»¥æ”¹å˜ISPï¼ˆåœ°å€å˜åŒ–ï¼‰è€Œä¸éœ€è¦æ”¹å˜å†…éƒ¨çš„è®¾å¤‡åœ°å€<br>ï­å±€åŸŸç½‘å†…éƒ¨çš„è®¾å¤‡æ²¡æœ‰æ˜ç¡®çš„åœ°å€ï¼Œå¯¹å¤–æ˜¯ä¸å¯è§çš„ â€“å®‰å…¨</p><ul><li><strong>å¦‚æœæµé‡ä»Insideç«¯å£è¿›æ¥ï¼Œé‚£ä¹ˆå…ˆæ‰§è¡Œè·¯ç”±ï¼Œåæ‰§è¡ŒNAT(æœ¬åœ° åˆ° å…¨å±€)ã€‚</strong></li><li><strong>å¦‚æœæµé‡ä»Outsideç«¯å£è¿›æ¥ï¼Œé‚£ä¹ˆå…ˆæ‰§è¡ŒNAT(å…¨å±€ åˆ° æœ¬åœ°)ï¼Œåæ‰§è¡Œè·¯ç”±ã€‚</strong></li></ul><h4 id="Data-plane">Data plane</h4><p>a set of match-action rules send by a controller.</p><p>traditional: longest prefix match forwarding <strong>vs</strong>. SDN allows more flexibility</p><p><strong>openFlow abstraction: match+action</strong></p><ul><li><p>Matchï¼ŒåŒ¹é…æ•°æ®åŒ…å¤´éƒ¨</p></li><li><p>Actionï¼Œæ ¹æ®åŒ¹é…çš„ç»“æœï¼Œåšç›¸åº”çš„æ“ä½œï¼Œæ¯”å¦‚ä¿®æ”¹MACåœ°å€ï¼ŒACLä¹‹ç±»</p></li><li><p>OpenFlowèƒ½å¤Ÿå¯åŠ¨è¿œç¨‹çš„æ§åˆ¶å™¨ï¼Œç»ç”±<a href="https://baike.baidu.com/item/%E7%BD%91%E7%BB%9C%E4%BA%A4%E6%8D%A2%E5%99%A8/8534019">ç½‘ç»œäº¤æ¢å™¨</a>ï¼Œå†³å®šç½‘ç»œæ•°æ®åŒ…è¦ç”±ä½•ç§è·¯å¾„é€šè¿‡<a href="https://baike.baidu.com/item/%E7%BD%91%E7%BB%9C%E4%BA%A4%E6%8D%A2%E6%9C%BA/2105356">ç½‘ç»œäº¤æ¢æœº</a>ã€‚è¿™ä¸ªåè®®çš„å‘æ˜è€…ï¼Œå°†å®ƒå½“æˆ<a href="https://baike.baidu.com/item/%E8%BD%AF%E4%BB%B6%E5%AE%9A%E4%B9%89%E7%BD%91%E7%BB%9C">è½¯ä»¶å®šä¹‰ç½‘ç»œ</a>ï¼ˆSoftware-defined networkingï¼‰çš„å¯åŠ¨å™¨ã€‚ [1] OpenFlowå…è®¸ä»è¿œç¨‹æ§åˆ¶ç½‘ç»œäº¤æ¢å™¨çš„<a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%8C%85">æ•°æ®åŒ…</a>è½¬é€è¡¨ï¼Œé€è¿‡æ–°å¢ã€ä¿®æ”¹ä¸ç§»é™¤æ•°æ®åŒ…æ§åˆ¶è§„åˆ™ä¸è¡ŒåŠ¨ï¼Œæ¥æ”¹å˜æ•°æ®åŒ…è½¬é€çš„è·¯å¾„ã€‚æ¯”èµ·ç”¨<a href="https://baike.baidu.com/item/%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E8%A1%A8">è®¿é—®æ§åˆ¶è¡¨</a>(ACLs) å’Œè·¯ç”±åè®®ï¼Œå…è®¸æ›´å¤æ‚çš„æµé‡ç®¡ç†ã€‚åŒæ—¶ï¼ŒOpenFlowå…è®¸ä¸åŒä¾›åº”å•†ç”¨ä¸€ä¸ªç®€å•ï¼Œå¼€æºçš„åè®®å»è¿œç¨‹ç®¡ç†äº¤æ¢æœºï¼ˆé€šå¸¸æä¾›ä¸“æœ‰çš„æ¥å£å’Œæè¿°è¯­è¨€ï¼‰ã€‚</p><p>OpenFlow<a href="https://baike.baidu.com/item/%E5%8D%8F%E8%AE%AE">åè®®</a>ç”¨æ¥æè¿°æ§åˆ¶å™¨å’Œäº¤æ¢æœºä¹‹é—´äº¤äº’æ‰€ç”¨ä¿¡æ¯çš„æ ‡å‡†ï¼Œä»¥åŠæ§åˆ¶å™¨å’Œäº¤æ¢æœºçš„æ¥å£æ ‡å‡†ã€‚åè®®çš„æ ¸å¿ƒéƒ¨åˆ†æ˜¯ç”¨äºOpenFlowåè®®ä¿¡æ¯ç»“æ„çš„é›†åˆã€‚OpenFlow<a href="https://baike.baidu.com/item/%E5%8D%8F%E8%AE%AE%E6%94%AF%E6%8C%81">åè®®æ”¯æŒ</a>ä¸‰ç§ä¿¡æ¯ç±»å‹ï¼šController-to-Switchï¼ŒAsynchronouså’ŒSymmetricï¼Œæ¯ä¸€ä¸ªç±»å‹éƒ½æœ‰å¤šä¸ªå­ç±»å‹ã€‚Controller-to-Switchä¿¡æ¯ç”±æ§åˆ¶å™¨å‘èµ·å¹¶ä¸”ç›´æ¥ç”¨äºæ£€æµ‹äº¤æ¢æœºçš„çŠ¶æ€ã€‚Asynchronousä¿¡æ¯ç”±äº¤æ¢æœºå‘èµ·å¹¶é€šå¸¸ç”¨äºæ›´æ–°æ§åˆ¶å™¨çš„ç½‘ç»œäº‹ä»¶å’Œæ”¹å˜äº¤æ¢æœºçš„çŠ¶æ€ã€‚Symmetricä¿¡æ¯å¯ä»¥åœ¨æ²¡æœ‰è¯·æ±‚çš„æƒ…å†µä¸‹ç”±æ§åˆ¶å™¨æˆ–äº¤æ¢æœºå‘èµ·ã€‚</p></li></ul><h4 id="Control-plane">Control plane</h4><p>why logically centralized control plane?</p><p>æ§åˆ¶å¹³é¢åœ¨ç‰©ç†ä¸Šä¸è½¬å‘å¹³é¢åˆ†ç¦»ï¼Œæ§åˆ¶è½¯ä»¶ä½¿ç”¨å¼€æ”¾æ¥å£ï¼ˆä¾‹å¦‚OpenFlowï¼‰å¯¹è½¬å‘å¹³é¢ï¼ˆä¾‹å¦‚ï¼Œäº¤æ¢æœºå’Œè·¯ç”±å™¨ï¼‰è¿›è¡Œç¼–ç¨‹ã€‚</p><h3 id=""></h3><p><strong>data plane:  mainly forwarding . each router contains a flow table by a centralized routing controller</strong></p><ul><li></li></ul><h3 id="routing-protocol">routing protocol</h3><h4 id="link-state">link state</h4><ol><li>â€‹                         <strong>è´ªå¿ƒç®—æ³•</strong>        <strong>global: all routers have complete topology</strong></li></ol><p>Dijkstraç®—æ³•</p><p><strong>conditionï¼šany è·¯å¾„&gt;0  &amp; å•æº å·²çŸ¥å‡ºå‘ç‚¹</strong></p><p>/ä¸´è¿‘ï¼Œæ ‡è®°ï¼<img src="C:\Users\Stan\AppData\Roaming\Typora\typora-user-images\image-20211222155611157.png" alt="image-20211222155611157" style="zoom:50%;"></p><p>ç›´åˆ°å…¨éƒ¨ç‚¹æ ‡è®°ç»“æŸï¼Œå›æº¯æ‰¾å‡ºè·¯å¾„</p><h4 id="distance-vector">distance vector</h4><ol start="2"><li><p>è·ç¦»çŸ¢é‡ç®—æ³•(distance vector routing)                 <strong>åŠ¨æ€è§„åˆ’</strong>  decentralized<br>â€ƒâ€ƒæ¯ä¸ªè·¯ç”±å™¨ç»´æŠ¤ä¸€å¼ è¡¨ï¼ˆå³ä¸€ä¸ªçŸ¢é‡ï¼‰ï¼Œè¡¨ä¸­åˆ—å‡ºäº†å½“å‰å·²çŸ¥çš„åˆ°æ¯ä¸ªç›®æ ‡çš„æœ€ä½³è·ç¦»ï¼Œä»¥åŠæ‰€ç”¨çš„é“¾è·¯ã€‚è¿™äº›è¡¨é€šè¿‡é‚»å±…ä¹‹é—´äº¤æ¢ä¿¡æ¯è€Œä¸æ–­è¢«æ›´æ–°ï¼Œæœ€ç»ˆæ¯ä¸ªè·¯ç”±å™¨éƒ½äº†è§£åˆ°è¾¾æ¯ä¸ªç›®çš„åœ°çš„æœ€ä½³é“¾è·¯ã€‚ä¹Ÿå«åˆ†å¸ƒå¼Bellman-Fordè·¯ç”±ç®—æ³•</p><p>å¯ä»¥å‚è€ƒï¼šè·ç¦»çŸ¢é‡ç®—æ³•ç®€ä»‹ å’Œ è·ç¦»çŸ¢é‡ç®—æ³•ç¤ºä¾‹</p><p>è¿™ä¸ªç®—æ³•å­˜åœ¨ä¸€ä¸ªä¸¥é‡çš„ç¼ºé™·ï¼šè™½ç„¶å®ƒæ€»æ˜¯èƒ½å¤Ÿæ”¶æ•›åˆ°æ­£ç¡®çš„ç­”æ¡ˆï¼Œä½†<strong>é€Ÿåº¦å¯èƒ½éå¸¸æ…¢</strong>ã€‚å°¤å…¶æ˜¯ï¼Œå®ƒå¯¹äºå¥½æ¶ˆæ¯çš„ååº”éå¸¸è¿…é€Ÿï¼Œè€Œå¯¹äºåæ¶ˆæ¯çš„ååº”å¼‚å¸¸è¿Ÿé’ã€‚è¿™ä¸ªç®—æ³•å­˜åœ¨æ— ç©·è®¡æ•°çš„é—®é¢˜ã€‚å¯æ‰©å±•æ€§å¾ˆå·®ï¼Œè¶Šå¤§çš„ç½‘ç»œæ”¶æ•›çš„è¶Šæ…¢ã€‚è€Œä¸”ï¼Œä¼šå ç”¨æ¯”è¾ƒå¤§çš„ç½‘ç»œå¸¦å®½ã€‚</p></li></ol><p>ç›¸æ¯”äºè·ç¦»çŸ¢é‡ç®—æ³•ï¼Œ<strong>é“¾è·¯çŠ¶æ€è·¯ç”±ç®—æ³•éœ€è¦æ›´å¤šçš„å†…å­˜å’Œè®¡ç®—</strong>ï¼Œåœ¨å¤§å‹ç½‘ç»œä¸­è¿è¡Œè¿™ä¸ªç®—æ³•ä¾ç„¶æ˜¯ä¸ªé—®é¢˜ã€‚ä¸è¿‡ï¼Œåœ¨è®¸å¤šç°å®åœºåˆï¼Œé“¾è·¯çŠ¶æ€è·¯ç”±ç®—æ³•å·¥ä½œå¾—éå¸¸å¥½ï¼Œå› ä¸ºå®ƒæ²¡æœ‰æ…¢æ”¶æ•›å¾—é—®é¢˜ã€‚</p><p>OSPFå’ŒIS-ISçš„å‡ºç°ï¼Œè®¸å¤šäººè®¤ä¸ºRIPï¼ˆdistance vectorï¼‰å·²ç»è¿‡æ—¶äº†ã€‚ä½†äº‹å®ä¸ŠRIPä¹Ÿæœ‰å®ƒè‡ªå·±çš„ä¼˜ç‚¹ã€‚å¯¹äºå°å‹ç½‘ç»œï¼ŒRIPå°±æ‰€å å¸¦å®½è€Œè¨€å¼€é”€å°ï¼Œæ˜“äºé…ç½®ã€ç®¡ç†å’Œå®ç°ï¼Œå¹¶ä¸”RIPè¿˜åœ¨å¤§é‡ä½¿ç”¨ä¸­ã€‚é“¾è·¯çŠ¶æ€è·¯ç”±ç®—æ³•è¢«å¹¿æ³›åº”ç”¨äºå®é™…ç½‘ç»œä¸­ã€‚IS-ISï¼ŒIntermediate System-Intermediate Systemï¼Œè¢«å¾ˆå¤šçš„ISPä½¿ç”¨ã€‚åæ¥å®ƒè¢«ISOé‡‡çº³ç”¨äºOSIåè®®ï¼›ç„¶åå®ƒè¢«ä¿®æ”¹å¤šæ¬¡ä»¥ä¾¿èƒ½å¤Ÿå¤„ç†å¤šç§åè®®ï¼Œæ¯”å¦‚IPåè®®ã€‚<strong>OSPFï¼ŒOpen Shortest Path Firstï¼Œæ˜¯å¦ä¸€ä¸ªä¸»æµçš„é“¾è·¯çŠ¶æ€åè®®</strong>ã€‚</p><h3 id="AS">AS</h3><p><strong>Intra-AS routing:         aka IGP</strong></p><p><strong>OSPF</strong>(Open Shortest Path First<a href="https://baike.baidu.com/item/%E5%BC%80%E6%94%BE%E5%BC%8F%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%BC%98%E5%85%88/8966505">å¼€æ”¾å¼æœ€çŸ­è·¯å¾„ä¼˜å…ˆ</a>ï¼‰æ˜¯ä¸€ä¸ª<a href="https://baike.baidu.com/item/%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE/167192">å†…éƒ¨ç½‘å…³åè®®</a>(Interior Gateway Protocolï¼Œç®€ç§°IGPï¼‰ï¼Œç”¨äºåœ¨å•ä¸€<a href="https://baike.baidu.com/item/%E8%87%AA%E6%B2%BB%E7%B3%BB%E7%BB%9F">è‡ªæ²»ç³»ç»Ÿ</a>ï¼ˆautonomous system,ASï¼‰å†…å†³ç­–<a href="https://baike.baidu.com/item/%E8%B7%AF%E7%94%B1">è·¯ç”±</a>ã€‚æ˜¯å¯¹<a href="https://baike.baidu.com/item/%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE/1219386">é“¾è·¯çŠ¶æ€è·¯ç”±åè®®</a>çš„ä¸€ç§å®ç°ï¼Œéš¶å±å†…éƒ¨ç½‘å…³åè®®ï¼ˆIGPï¼‰ï¼Œæ•…è¿ä½œäºè‡ªæ²»ç³»ç»Ÿå†…éƒ¨ã€‚è‘—åçš„è¿ªå…‹æ–¯å½»ï¼ˆDijkstraï¼‰ç®—æ³•è¢«ç”¨æ¥è®¡ç®—<a href="https://baike.baidu.com/item/%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E6%A0%91">æœ€çŸ­è·¯å¾„æ ‘</a>ã€‚OSPFæ”¯æŒè´Ÿè½½å‡è¡¡å’ŒåŸºäºæœåŠ¡ç±»å‹çš„é€‰è·¯ï¼Œä¹Ÿæ”¯æŒå¤šç§è·¯ç”±å½¢å¼ï¼Œå¦‚ç‰¹å®šä¸»æœºè·¯ç”±å’Œå­ç½‘è·¯ç”±ç­‰</p><p>inter-AS routing:</p><p>job: learn which dests are reachable in other inter-AS system<strong>ç³»ç»Ÿé—´ä¼ æ’­(eBGP) ,</strong></p><p>and propagate the reachability info to all routers in AS1.<strong>å†…(iBGP)</strong></p><p>intra-AS: <strong>IGP</strong>             CONTAIN: RIP OSPF IGRP</p><p><strong>BGP</strong> inter domain routing protocol</p><p>ç½‘å…³å°±æ˜¯è·¯ç”±å™¨çš„IP</p><h3 id="SDN-control-plane">SDN control plane</h3><p>logically centralized : easy management:avoid router mis configurations</p><h3 id="ICMP">ICMP</h3><p>ICMP enables a router or destination host to communicate with a source host, for example,to report an error in datagram processing. (2 marks)Path MTU discovery uses the Type-3 Destination Unreachable ICMP messages as follows: TCP negotiates initial MTU size â€“ usually TCP/IP sends datagram with Donâ€™t Fragment flag set If datagram is too large an ICMP Destination Unreachable is received Reduce Maximum Transfer Unit.</p><p>Internetæ§åˆ¶<a href="https://baike.baidu.com/item/%E6%8A%A5%E6%96%87/3164352">æŠ¥æ–‡</a>åè®®ã€‚å®ƒæ˜¯<a href="https://baike.baidu.com/item/TCP%2FIP%E5%8D%8F%E8%AE%AE%E7%B0%87">TCP/IPåè®®ç°‡</a>çš„ä¸€ä¸ªå­åè®®ï¼Œç”¨äºåœ¨IP<a href="https://baike.baidu.com/item/%E4%B8%BB%E6%9C%BA/455151">ä¸»æœº</a>ã€<a href="https://baike.baidu.com/item/%E8%B7%AF%E7%94%B1">è·¯ç”±</a>å™¨ä¹‹é—´ä¼ é€’æ§åˆ¶æ¶ˆæ¯ã€‚æ§åˆ¶æ¶ˆæ¯æ˜¯æŒ‡<a href="https://baike.baidu.com/item/%E7%BD%91%E7%BB%9C%E9%80%9A">ç½‘ç»œé€š</a>ä¸é€šã€<a href="https://baike.baidu.com/item/%E4%B8%BB%E6%9C%BA/455151">ä¸»æœº</a>æ˜¯å¦å¯è¾¾ã€<a href="https://baike.baidu.com/item/%E8%B7%AF%E7%94%B1/363497">è·¯ç”±</a>æ˜¯å¦å¯ç”¨ç­‰ç½‘ç»œæœ¬èº«çš„æ¶ˆæ¯ã€‚è¿™äº›æ§åˆ¶æ¶ˆæ¯è™½ç„¶å¹¶ä¸ä¼ è¾“ç”¨æˆ·æ•°æ®ï¼Œä½†æ˜¯å¯¹äºç”¨æˆ·æ•°æ®çš„ä¼ é€’èµ·ç€é‡è¦çš„ä½œç”¨ã€‚ICMPä½¿ç”¨IPçš„åŸºæœ¬æ”¯æŒï¼Œå°±åƒå®ƒæ˜¯ä¸€ä¸ªæ›´é«˜çº§åˆ«çš„åè®®ï¼Œä½†æ˜¯ï¼ŒICMP in IP datagram.</p><p>above â€œIPâ€ error reporting and echo request/reply</p><p><strong>traceroute</strong> (<a href="https://baike.baidu.com/item/Windows/165458">Windows</a> ç³»ç»Ÿä¸‹æ˜¯<a href="https://baike.baidu.com/item/tracert/7578188">tracert</a>) å‘½ä»¤åˆ©ç”¨<a href="https://baike.baidu.com/item/ICMP/572452">ICMP</a> åè®®å®šä½æ‚¨çš„è®¡ç®—æœºå’Œç›®æ ‡è®¡ç®—æœºä¹‹é—´çš„æ‰€æœ‰<a href="https://baike.baidu.com/item/%E8%B7%AF%E7%94%B1%E5%99%A8/108294">è·¯ç”±å™¨</a>ã€‚TTL å€¼å¯ä»¥åæ˜ æ•°æ®åŒ…ç»è¿‡çš„è·¯ç”±å™¨æˆ–ç½‘å…³çš„æ•°é‡ï¼Œé€šè¿‡æ“çºµç‹¬ç«‹ICMP å‘¼å«æŠ¥æ–‡çš„TTL å€¼å’Œè§‚å¯Ÿè¯¥æŠ¥æ–‡è¢«æŠ›å¼ƒçš„è¿”å›ä¿¡æ¯ï¼Œtracerouteå‘½ä»¤èƒ½å¤Ÿéå†åˆ°æ•°æ®åŒ…ä¼ è¾“è·¯å¾„ä¸Šçš„æ‰€æœ‰è·¯ç”±å™¨ã€‚</p><h2 id="Datalink-layer">Datalink layer</h2><h3 id="Service">Service</h3><p><strong>ç»„å¸§framing,é“¾è·¯æ¥å…¥ link access</strong></p><p>å°è£…æ•°æ®æŠ¥æ„æˆæ•°æ®å¸§ï¼ŒåŠ é¦–éƒ¨å’Œå°¾éƒ¨å¸§åŒæ­¥</p><p>å¦‚æœæ˜¯å…±äº«ä»‹è´¨ï¼Œéœ€è¦è§£å†³ä¿¡é“æ¥å…¥</p><p>å¸§é¦–éƒ¨çš„â€œMACâ€åœ°å€ï¼Œç”¨äºæ ‡è¯†å¸§çš„æºå’Œç›®çš„</p><ul><li>ä¸åŒäºIPåœ°å€</li></ul><p><strong>ç›¸é‚»ç»“ç‚¹é—´å¯é äº¤ä»˜</strong></p><ul><li>åœ¨ä½è¯¯ç ç‡çš„æœ‰çº¿é“¾è·¯å¾ˆå°‘é‡‡ç”¨</li></ul><p><strong>æµé‡æ§åˆ¶</strong></p><ul><li>åè°ƒç›¸é‚»çš„å‘é€ç»“ç‚¹å’Œæ¥æ”¶</li></ul><p><strong>å·®é”™çº æ­£</strong></p><ul><li>æ¥æ”¶ç«¯ç›´æ¥çº æ­£æ¯”ç‰¹å·®é”™</li></ul><p><strong>å…¨åŒå·¥å’ŒåŠåŒå·¥é€šä¿¡æ§åˆ¶</strong></p><ul><li>å…¨åŒå·¥ï¼šé“¾è·¯ä¸¤ç«¯ç»“ç‚¹åŒæ—¶åŒå‘ä¼ è¾“</li><li>åŠåŒå·¥ï¼šé“¾è·¯ä¸¤ç«¯ç»“ç‚¹äº¤æ›¿åŒå‘ä¼ è¾“</li></ul><p><strong>MACåœ°å€</strong>ï¼ˆ<strong>è‹±è¯­ï¼šMedia Access Control Addressï¼‰</strong>ï¼Œç›´è¯‘ä¸º<strong>åª’ä½“å­˜å–æ§åˆ¶ä½å€</strong>ï¼Œä¹Ÿç§°ä¸º<strong>å±€åŸŸç½‘åœ°å€</strong>ï¼ˆLAN Addressï¼‰ï¼Œ<strong>MACä½å€</strong>ï¼Œ<strong>ä»¥å¤ªç½‘åœ°å€</strong>ï¼ˆEthernet Addressï¼‰æˆ–<strong>ç‰©ç†åœ°å€</strong>ï¼ˆPhysical Addressï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨æ¥ç¡®è®¤ç½‘ç»œè®¾å¤‡ä½ç½®çš„ä½å€ã€‚åœ¨<a href="https://baike.baidu.com/item/OSI%E6%A8%A1%E5%9E%8B">OSIæ¨¡å‹</a>ä¸­ï¼Œç¬¬ä¸‰å±‚ç½‘ç»œå±‚è´Ÿè´£<a href="https://baike.baidu.com/item/IP%E5%9C%B0%E5%9D%80">IPåœ°å€</a>ï¼Œç¬¬äºŒå±‚æ•°æ®é“¾è·¯å±‚åˆ™è´Ÿè´£MACä½å€ [1] ã€‚MACåœ°å€ç”¨äºåœ¨ç½‘ç»œä¸­å”¯ä¸€æ ‡ç¤ºä¸€ä¸ª<a href="https://baike.baidu.com/item/%E7%BD%91%E5%8D%A1">ç½‘å¡</a>ï¼Œä¸€å°è®¾å¤‡è‹¥æœ‰ä¸€æˆ–å¤šä¸ªç½‘å¡ï¼Œåˆ™æ¯ä¸ªç½‘å¡éƒ½éœ€è¦å¹¶ä¼šæœ‰ä¸€ä¸ªå”¯ä¸€çš„MACåœ°å€</p><p>å¾ªç¯å†—ä½™æ£€éªŒCRC(Cyclic Redundancy Check)</p><h3 id="Multiple-access-protocol">Multiple access protocol</h3><p>å¤šè·¯è®¿é—®æ§åˆ¶åè®®</p><p>å†²çª(collision)ï¼šç»“ç‚¹åŒæ—¶æ¥æ”¶åˆ°ä¸¤ä¸ªæˆ–è€…å¤šä¸ªä¿¡å·â†’æ¥æ”¶å¤±è´¥ï¼</p><p>MACåè®®é‡‡ç”¨åˆ†å¸ƒå¼ç®—æ³•å†³å®šç»“ç‚¹å¦‚ä½•å…±äº«ä¿¡é“ï¼Œå³å†³ç­–ç»“ç‚¹ä½•æ—¶å¯ä»¥ä¼ è¾“æ•°æ®ã€‚</p><p>å…¶å¿…é¡»åŸºäºä¿¡é“æœ¬èº«ï¼Œé€šä¿¡ä¿¡é“å…±äº«åè°ƒä¿¡æ¯ã€‚æ— å¸¦å¤–ä¿¡é“ç”¨äºåè°ƒã€‚</p><ul><li><strong>ä¿¡é“åˆ’åˆ†(channel partitioning)MACåè®®</strong></li></ul><p><strong>TDMA: time division multiple access</strong></p><p>TDM å°†æ—¶é—´åˆ’åˆ†ä¸ºæ—¶é—´å¸§(timeframe),å¹¶è¿›ä¸€æ­¥åˆ’åˆ†æ¯ä¸ªæ—¶é—´å¸§ä¸ºNä¸ªæ—¶éš™(slot)</p><p>æ¯ä¸ªç«™ç‚¹åœ¨æ¯ä¸ªæ—¶é—´å¸§ï¼Œå ç”¨å›ºå®šé•¿åº¦çš„æ—¶éš™(é•¿åº¦=åˆ†ç»„ä¼ è¾“æ—¶é—´)ï¼›æœªç”¨æ—¶éš™ç©ºé—²(idle)</p><p>å¦‚å›¾ï¼š6ç«™ç‚¹LANï¼Œ134ä¼ è¾“åˆ†ç»„ï¼Œ256ç©ºé—²</p><p><a href="https://images2018.cnblogs.com/blog/1424868/201807/1424868-20180712103350498-1397118573.png"><img src="https://images2018.cnblogs.com/blog/1424868/201807/1424868-20180712103350498-1397118573.png" alt="img"></a></p><p><strong>FDMA: frequency division multiple access</strong></p><p>ä¿¡é“é¢‘è°±åˆ’åˆ†ä¸ºè‹¥å¹²é¢‘å¸¦(frequency bands)</p><p>æ¯ä¸ªç«™ç‚¹åˆ†é…ä¸€ä¸ªå›ºå®šçš„é¢‘å¸¦ï¼Œä¸ä¼šå†²çªä½†ä¿¡é“åˆ©ç”¨ç‡å¯èƒ½ä¸é«˜ï¼›æ— ä¼ è¾“é¢‘å¸¦ç©ºé—²</p><p>å¦‚å›¾ï¼š6ç«™ç‚¹LAN, 134é¢‘å¸¦ä¼ è¾“æ•°æ®ï¼Œ256é¢‘å¸¦ç©ºé—²ã€‚</p><p><a href="https://images2018.cnblogs.com/blog/1424868/201807/1424868-20180712103357376-1532136065.png"><img src="https://images2018.cnblogs.com/blog/1424868/201807/1424868-20180712103357376-1532136065.png" alt="img" style="zoom:67%;"></a></p><h4 id="Random-access-protocol">Random access protocol</h4><p>åŒ…æ‹¬ ALOHA,CSMA,CSMA/CA,CSMA/CD             (t<em>ransmit entire frame</em>)</p><p>Specify å¦‚ä½•æ£€æµ‹collision å¦‚ä½•æ¢å¤</p><h5 id="slotted-ALOHA">slotted ALOHA</h5><p>ç»“ç‚¹åªèƒ½åœ¨æ—¶éš™å¼€å§‹æ—¶åˆ»å‘é€å¸§ï¼Œå½“ç»“ç‚¹æœ‰æ–°çš„å¸§æ—¶åœ¨ä¸‹ä¸€ä¸ªæ—¶éš™(slot)å‘é€å¦‚æœ2ä¸ªæˆ–2ä¸ªä»¥ä¸Šç»“ç‚¹åœ¨åŒä¸€æ—¶éš™å‘é€å¸§ï¼Œç»“ç‚¹å³æ£€æµ‹åˆ°å†²çª.å¦‚æœæ— å†²çªï¼šè¯¥ç»“ç‚¹å¯ä»¥åœ¨ä¸‹ä¸€ä¸ªæ—¶éš™ç»§ç»­å‘é€æ–°çš„å¸§.  å¦‚æœå†²çªï¼šè¯¥ç»“ç‚¹åœ¨ä¸‹ä¸€ä¸ªæ—¶éš™ä»¥æ¦‚ç‡pé‡ä¼ è¯¥å¸§ï¼Œç›´è‡³æˆåŠŸ.Slotted aloha reduces the number of collisions to half and doubles the efficiency of pure aloha.</p><p>** pure ALOHA**</p><p>no synchronization(CLOCK) but only half as efficient as slooted</p><p><strong>è½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®åè®® CSMA(carrier sense multiple access)åè®®</strong></p><p>Listen before transmit</p><h5 id="CSMA-CD">CSMA/CD</h5><p>easy in wired LAN (ethernet)     <strong>reduce channel wastage, improve effiency</strong></p><p><strong>é¿å…å†²çªçš„è½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®åè®®  CSMA/CA(CSMA with Collision Avoidance)åè®®</strong></p><p><strong>802.11æ— çº¿</strong>å±€åŸŸç½‘ä¸­ï¼Œä¸èƒ½åƒCSMA/CDé‚£æ ·ï¼Œè¾¹å‘é€ã€è¾¹æ£€æµ‹å†²çªï¼ŒåŸå› ä¸ºï¼š</p><p>ï¼ˆ1ï¼‰æ£€æµ‹ç¢°æ’çš„èƒ½åŠ›è¦æ±‚ç«™ç‚¹å…·æœ‰åŒæ—¶å‘é€ï¼ˆç«™ç‚¹è‡ªå·±çš„ä¿¡å·ï¼‰å’Œæ¥æ”¶ï¼ˆæ£€æµ‹å…¶ä»–ç«™ç‚¹æ˜¯å¦ä¹Ÿåœ¨å‘é€ï¼‰çš„èƒ½åŠ›ã€‚å› ä¸ºåœ¨802. 11é€‚é…å™¨ä¸Šï¼Œæ¥æ”¶ä¿¡å·çš„å¼ºåº¦é€šå¸¸è¿œè¿œå°äºå‘é€ä¿¡å·çš„å¼ºåº¦ï¼Œåˆ¶é€ å…·æœ‰æ£€æµ‹ç¢°æ’èƒ½åŠ›çš„ç¡¬ä»¶ä»£ä»·è¾ƒå¤§ã€‚</p><p>802.11å‘é€ç«¯ï¼š</p><p>ï¼ˆ1ï¼‰å¦‚æœç›‘å¬åˆ°ä¿¡é“ç©ºé—²äº†åˆ†å¸ƒå¼å¸§é—´é—´éš”DIFSåï¼Œåˆ™åœ¨å‘é€æ•´ä¸ªå¸§ï¼ˆå‘é€çš„åŒæ—¶ä¸æ£€æµ‹å†²çªï¼‰</p><p>å‘é€ç«¯é¦–å…ˆåˆ©ç”¨CSMAå‘BSå‘é€ä¸€ä¸ªå¾ˆçŸ­çš„è¯·æ±‚å‘é€ï¼ˆrequest-to-sendï¼ŒRTSï¼‰æ§åˆ¶å¸§é¢„çº¦ä¿¡é“ï¼Œè€Œä¸æ˜¯éšæœºå‘é€æ•°æ®å¸§ï¼Œåˆ©ç”¨å°é¢„çº¦å¸§é¿å…é•¿æ•°æ®å¸§çš„å†²çªã€‚RTSå¸§ä»ç„¶å¯èƒ½å½¼æ­¤å†²çªï¼ˆä½†RTSå¸§å¾ˆçŸ­ï¼‰</p><p>APå¹¿æ’­ä¸€ä¸ªå¾ˆçŸ­çš„å…è®¸å‘é€ï¼ˆclear-to-sendï¼ŒCTSï¼‰æ§åˆ¶å¸§ä½œä¸ºå¯¹RTSçš„å“åº”ï¼ŒCTSå¸§å¯ä»¥è¢«æ‰€æœ‰ç»“ç‚¹æ¥æ”¶ï¼Œä»¥æ¶ˆé™¤éšè—ç«™å½±å“</p><p>å‘é€ç«¯å¯ä»¥å‘é€æ•°æ®å¸§ï¼Œå…¶ä»–ç»“ç‚¹æ¨è¿Ÿå‘é€</p><p>ï¼ˆ2ï¼‰å¦‚æœç›‘å¬åˆ°ä¿¡é“å¿™ï¼Œåˆ™é€‰å–éšæœºå›é€€å€¼</p><p>â€‹       å½“ä¿¡é“ç©ºé—²æ—¶ï¼Œè®¡æ—¶å™¨å€’è®¡æ—¶;       å½“è®¡æ—¶å™¨è¶…æ—¶æ—¶ï¼Œå‘é€å¸§</p><p>ï¼ˆ3ï¼‰å¦‚æœæ²¡æœ‰æ”¶åˆ°ACKï¼Œåˆ™å¢åŠ éšæœºé€€é¿é—´éš”æ—¶é—´ï¼Œé‡å¤ï¼ˆ2ï¼‰</p><p>802.11æ¥æ”¶ç«¯ï¼š</p><p>å¦‚æœæ­£ç¡®æ¥æ”¶å¸§ï¼Œåˆ™åœ¨å»¶è¿ŸçŸ­å¸§é—´é—´éš”SIFSåï¼Œå‘å‘é€ç«¯å‘é€ACKï¼ˆç”±äºå­˜åœ¨éšè—ç«™é—®é¢˜ï¼‰</p><h3 id="ARP">ARP</h3><p><strong>MAC(LAN,or physical or ethernet) address and ARP</strong></p><p>48 MAC address in <strong>NIC</strong> ROM</p><p>MAC flat address <strong>portable</strong> (IP hierarchical not portable)</p><p>åœ°å€è§£æåè®®ï¼Œå³ARPï¼ˆAddress Resolution Protocolï¼‰ï¼Œæ˜¯æ ¹æ®<a href="https://baike.baidu.com/item/IP%E5%9C%B0%E5%9D%80">IPåœ°å€</a>è·å–<a href="https://baike.baidu.com/item/%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80/2129">ç‰©ç†åœ°å€</a>çš„ä¸€ä¸ª<a href="https://baike.baidu.com/item/TCP%2FIP%E5%8D%8F%E8%AE%AE">TCP/IPåè®®</a>ã€‚<a href="https://baike.baidu.com/item/%E4%B8%BB%E6%9C%BA/455151">ä¸»æœº</a>å‘é€ä¿¡æ¯æ—¶å°†åŒ…å«ç›®æ ‡IPåœ°å€çš„ARPè¯·æ±‚å¹¿æ’­åˆ°<strong>å±€åŸŸç½‘</strong>ç»œä¸Šçš„æ‰€æœ‰ä¸»æœºï¼Œå¹¶æ¥æ”¶è¿”å›æ¶ˆæ¯ï¼Œä»¥æ­¤ç¡®å®šç›®æ ‡çš„ç‰©ç†åœ°å€.  <strong>PLUG and PLAY</strong></p><p>802.11 all use CSMA/CA</p><h3 id="LAN">LAN</h3><img src="C:\Users\Stan\AppData\Roaming\Typora\typora-user-images\image-20211222203321725.png" alt="image-20211222203321725" style="zoom:67%;"><h3 id="switch">switch</h3><h4 id="self-learning-plug-and-play">self learning plug and play</h4><p>frame forwarding, storing ; donâ€™t need to be configured</p><h3 id="VLAN">VLAN</h3><p>å»ºç«‹<strong>é€»è¾‘</strong>ä¸Šç‹¬ç«‹çš„è™šæ‹Ÿç½‘ç»œï¼šäºæ˜¯äº¤æ¢æœºå¯ä»¥å¾ˆæ–¹ä¾¿å®ç°<strong>è™šæ‹Ÿå±€åŸŸç½‘</strong><br><strong>å°†è¿åœ¨Switchä¸Šçš„ç«™ç‚¹æ›´å…·è‡ªå·±çš„å–œå¥½åˆ’åˆ†é€»è¾‘ç»„</strong>ï¼šä¸”ä¸ç‰©ç†ä½ç½®æ— å…³<br><strong>VLANéš”ç¦»å¹¿æ’­åŸŸ</strong> ï¼šäºæ˜¯ä¹Ÿå¯ä»¥å¯¹ç½‘ç»œå®‰å…¨éš”ç¦»ã€æ§åˆ¶å¹¿æ’­é£æš´</p><p>ä¸€èˆ¬æ¥ç»ˆç«¯è®¾å¤‡ä½¿ç”¨access port éœ€è¦å¤šVLANé€ä¼ çš„ä½¿ç”¨trunk port</p><h3 id="MPLS">MPLS</h3><p>æ˜¯ä¸€ç§åœ¨å¼€æ”¾çš„é€šä¿¡ç½‘ä¸Šåˆ©ç”¨æ ‡ç­¾å¼•å¯¼æ•°æ®é«˜é€Ÿã€é«˜æ•ˆä¼ è¾“çš„æ–°æŠ€æœ¯ã€‚å¤šåè®®çš„å«ä¹‰æ˜¯æŒ‡<em>MPLS</em>ä¸ä½†å¯ä»¥æ”¯æŒå¤šç§ç½‘ç»œå±‚å±‚é¢ä¸Šçš„å</p><p>goal to fast lookup and borrow ideas from VC</p><h3 id="security-management">security management</h3><p>FIrewall</p><p>stateless pkt filter, application gateways</p><p>stateful contains stateless filter, which is the most flexible but cost more.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-ç¯å›åœ°å€ï¼ˆ127-0-0-1ï¼‰çš„è¯·æ±‚æµç¨‹&quot;&gt;&lt;strong&gt;1. ç¯å›åœ°å€ï¼ˆ127.0.0.1ï¼‰çš„è¯·æ±‚æµç¨‹&lt;/strong&gt;&lt;/h2&gt;
&lt;h4 id=&quot;1-åè®®æ ˆçš„å¤„ç†&quot;&gt;&lt;strong&gt;(1) åè®®æ ˆçš„å¤„ç†&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;s</summary>
      
    
    
    
    
    <category term="è®¡ç®—æœºç½‘ç»œ" scheme="https://stan370.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>ç¾å‰§ç¡…è°·çš„middle-out algorithm å‹ç¼©ç®—æ³•</title>
    <link href="https://stan370.github.io/2025/02/06/shannon/"/>
    <id>https://stan370.github.io/2025/02/06/shannon/</id>
    <published>2025-02-06T08:23:06.000Z</published>
    <updated>2025-03-19T12:12:05.249Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å½“ä»Šæ•°æ®é©±åŠ¨ä¸äº’è”ç½‘é«˜é€Ÿå‘å±•çš„æ—¶ä»£ï¼Œæ¦‚ç‡è®ºã€æ•°ç†ç»Ÿè®¡ä»¥åŠä¿¡æ¯è®ºæ„æˆäº†ç†è§£å’Œåº”å¯¹ä¸ç¡®å®šæ€§ã€ä¼˜åŒ–æ•°æ®ä¼ è¾“ä»¥åŠå®ç°é«˜æ•ˆå‹ç¼©ç®—æ³•çš„æ•°å­¦åŸºç¡€ã€‚è¿™ä¸‰å¤§é¢†åŸŸä¸ä»…ä¸ºé‡‘èé£é™©ç®¡ç†ã€ä¸´åºŠè¯•éªŒè®¾è®¡ã€æœºå™¨å­¦ä¹ ç­‰æä¾›äº†ç†è®ºæ”¯æŒï¼ŒåŒæ—¶ä¹Ÿå¥ å®šäº†ç°ä»£é€šä¿¡ä¸æ•°æ®å‹ç¼©æŠ€æœ¯çš„åŸºçŸ³ã€‚</p><p>æœ€è¿‘åœ¨è§‚çœ‹ç¾å‰§ Silicon Valley æ—¶ï¼Œæˆ‘æ·±æœ‰æ„Ÿè§¦ï¼šå‰§ä¸­å±•ç¤ºçš„æŠ€æœ¯â€”â€”ä¾‹å¦‚ Pied Piper å›¢é˜Ÿæ‰€ç ”ç©¶çš„å‹ç¼©ç®—æ³•ï¼Œè™½ç„¶æˆå‰§åŒ–å¤„ç†ï¼Œä½†å®é™…ä¸Šåæ˜ äº†ç°å®ä¸–ç•Œä¸­ä¿¡æ¯ç†è®ºçš„ç²¾é«“ï¼Œæ¯”å¦‚é¦™å†œæé™ï¼ˆShannon Limitï¼Œä¹Ÿç§°ä¸ºä¿¡æ¯ç†µæé™ï¼‰ã€‚è¿™ä½¿æˆ‘è”æƒ³åˆ°è‡ªå·±æ›¾ç»ç ”ç©¶è¿‡çš„ä¿¡æ¯è®ºç›¸å…³å†…å®¹ï¼Œå°¤å…¶æ˜¯è‡ªä¿¡æ¯é‡ã€æ— æŸå‹ç¼©ä»¥åŠå¸¦å™ªä¿¡é“ä¸­çš„é€šä¿¡æé™ç­‰é—®é¢˜ã€‚<br>So, ç¾å‰§ç¡…è°·ä¸­çš„The middle-out algorithm å‹ç¼©ç®—æ³•çœŸèƒ½å®ç°å—ï¼Ÿæˆ‘ä»¬æˆ–è®¸éœ€è¦ä¸€äº›èƒŒæ™¯çŸ¥è¯†</p><h3 id="æ¦‚ç‡è®º">æ¦‚ç‡è®º</h3><p>æ¦‚ç‡è®ºæ˜¯ç ”ç©¶éšæœºç°è±¡è§„å¾‹çš„æ•°å­¦åˆ†æ”¯ï¼Œä¸»è¦æ¶‰åŠ<strong>æ¦‚ç‡</strong>ã€<strong>éšæœºå˜é‡</strong>ã€<strong>æ¦‚ç‡åˆ†å¸ƒ</strong>ç­‰åŸºæœ¬æ¦‚å¿µã€‚å®ƒå¸®åŠ©æˆ‘ä»¬é‡åŒ–éšæœºäº‹ä»¶å‘ç”Ÿçš„å¯èƒ½æ€§ã€‚ä¾‹å¦‚ï¼Œæ­£æ€åˆ†å¸ƒã€æ³Šæ¾åˆ†å¸ƒå’ŒæŒ‡æ•°åˆ†å¸ƒç­‰æ¨¡å‹è¢«å¹¿æ³›ç”¨äºæè¿°ç°å®ä¸–ç•Œä¸­çš„ä¸ç¡®å®šç°è±¡ã€‚æœ€åˆæºäº17ä¸–çºªçš„èµŒåšé—®é¢˜ï¼Œå¸•æ–¯å¡å’Œè´¹é©¬ç­‰äººçš„å·¥ä½œä¸ºè¿™ä¸€å­¦ç§‘å¥ å®šäº†åŸºç¡€ã€‚</p><h3 id="æ•°ç†ç»Ÿè®¡">æ•°ç†ç»Ÿè®¡</h3><p>æ•°ç†ç»Ÿè®¡åˆ™æ˜¯åº”ç”¨æ¦‚ç‡è®ºæ¥æ”¶é›†ã€åˆ†æã€è§£é‡Šæ•°æ®ï¼Œå¹¶è¿›è¡Œæ¨æ–­å’Œå†³ç­–çš„å­¦ç§‘ã€‚å®ƒåŒ…å«äº†æŠ½æ ·ç†è®ºã€å‚æ•°ä¼°è®¡ã€å‡è®¾æ£€éªŒã€å›å½’åˆ†æç­‰æ–¹æ³•ï¼Œå¸®åŠ©æˆ‘ä»¬ä»æ•°æ®ä¸­æå–ä¿¡æ¯ï¼Œå¹¶å¯¹æ€»ä½“æƒ…å†µè¿›è¡Œç§‘å­¦æ¨æ–­ã€‚é«˜æ–¯ã€è´¹èˆå°”ç­‰äººåœ¨19ä¸–çºªæœ«åˆ°20ä¸–çºªåˆçš„å·¥ä½œï¼Œä½¿å¾—æ•°ç†ç»Ÿè®¡é€æ­¥å½¢æˆäº†å®Œæ•´çš„ç†è®ºä½“ç³»ã€‚<br>ç»Ÿè®¡æ–¹æ³•ï¼ˆä¾‹å¦‚å‡è®¾æ£€éªŒã€å›å½’åˆ†æã€æŠ½æ ·æŠ€æœ¯ï¼‰ä½¿æˆ‘ä»¬èƒ½å¤Ÿä»å¤§é‡æ•°æ®ä¸­æå–æœ‰ä»·å€¼çš„ä¿¡æ¯ï¼Œæ”¯æ’‘ç§‘å­¦å†³ç­–ä¸å®éªŒè®¾è®¡ã€‚</p><h3 id="ä¿¡æ¯è®º">ä¿¡æ¯è®º</h3><p>ä¿¡æ¯è®ºæ˜¯20ä¸–çºªä¸­å¶ç”±é¦™å†œåˆ›ç«‹çš„å­¦ç§‘ï¼Œä¸»è¦ç ”ç©¶ä¿¡æ¯çš„é‡åŒ–ã€å­˜å‚¨å’Œä¼ è¾“ã€‚å…¶æ ¸å¿ƒæ¦‚å¿µåŒ…æ‹¬<strong>ç†µ</strong>ï¼ˆè¡¡é‡ä¸ç¡®å®šæ€§ï¼‰ã€<strong>è‡ªä¿¡æ¯é‡</strong>ï¼ˆè¡¡é‡å•ä¸ªäº‹ä»¶æ‰€æºå¸¦çš„ä¿¡æ¯å¤§å°ï¼‰ä»¥åŠ<strong>äº’ä¿¡æ¯</strong>ï¼ˆè¡¡é‡ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„ä¿¡æ¯å…±äº«ï¼‰ã€‚é¦™å†œæå‡ºçš„é¦™å†œæé™ï¼ˆShannon Limitï¼‰æ­ç¤ºäº†åœ¨å¸¦å™ªä¿¡é“ä¸­å®ç°æ— è¯¯å·®é€šä¿¡çš„ç†è®ºä¸Šé™ï¼Œè¿™ä¸€ç†è®ºä¸ä»…å¯¹é€šä¿¡å·¥ç¨‹äº§ç”Ÿæ·±è¿œå½±å“ï¼Œä¹Ÿä¸ºæ•°æ®å‹ç¼©ã€å¯†ç å­¦ã€æœºå™¨å­¦ä¹ ç­‰é¢†åŸŸæä¾›äº†ç†è®ºä¾æ®ã€‚</p><h2 id="æ¦‚ç‡è®ºã€æ•°ç†ç»Ÿè®¡ä¸ä¿¡æ¯è®ºä¹‹é—´çš„è”ç³»">æ¦‚ç‡è®ºã€æ•°ç†ç»Ÿè®¡ä¸ä¿¡æ¯è®ºä¹‹é—´çš„è”ç³»</h2><ol><li><p><strong>ç†è®ºåŸºç¡€</strong><br>æ¦‚ç‡è®ºä¸ºæ•°ç†ç»Ÿè®¡æä¾›äº†åšå®çš„ç†è®ºåŸºç¡€ã€‚ç»Ÿè®¡å­¦ä¸­çš„è®¸å¤šæ–¹æ³•ï¼Œä¾‹å¦‚å‡è®¾æ£€éªŒã€å‚æ•°ä¼°è®¡å’Œå›å½’åˆ†æï¼Œéƒ½ä¾èµ–äºæ¦‚ç‡æ¨¡å‹ã€‚æ²¡æœ‰æ¦‚ç‡è®ºçš„ä¸¥è°¨å®šä¹‰å’Œè®¡ç®—æ–¹æ³•ï¼Œç»Ÿè®¡æ¨æ–­å°±æ— ä»è°ˆèµ·ã€‚</p></li><li><p><strong>ä¿¡æ¯è®ºçš„ä¾æ‰˜</strong><br>ä¿¡æ¯è®ºä¸­çš„ç†µã€äº’ä¿¡æ¯ç­‰æ¦‚å¿µåŒæ ·æ˜¯å»ºç«‹åœ¨æ¦‚ç‡åˆ†å¸ƒçš„åŸºç¡€ä¸Šã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç¦»æ•£éšæœºå˜é‡ (X) çš„ç†µå®šä¹‰ä¸º<br><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.663ex;" xmlns="http://www.w3.org/2000/svg" width="27.873ex" height="2.36ex" role="img" focusable="false" viewBox="0 -750 12319.7 1043.1"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path></g><g data-mml-node="mo" transform="translate(888,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1277,0)"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g><g data-mml-node="mo" transform="translate(2129,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(2795.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mo" transform="translate(3851.6,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="munder" transform="translate(4796.2,0)"><g data-mml-node="mo"><path data-c="2211" d="M61 748Q64 750 489 750H913L954 640Q965 609 976 579T993 533T999 516H979L959 517Q936 579 886 621T777 682Q724 700 655 705T436 710H319Q183 710 183 709Q186 706 348 484T511 259Q517 250 513 244L490 216Q466 188 420 134T330 27L149 -187Q149 -188 362 -188Q388 -188 436 -188T506 -189Q679 -189 778 -162T936 -43Q946 -27 959 6H999L913 -249L489 -250Q65 -250 62 -248Q56 -246 56 -239Q56 -234 118 -161Q186 -81 245 -11L428 206Q428 207 242 462L57 717L56 728Q56 744 61 748Z"></path></g><g data-mml-node="TeXAtom" transform="translate(1089,-285.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g></g></g><g data-mml-node="mi" transform="translate(6506.4,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g><g data-mml-node="mo" transform="translate(7257.4,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(7646.4,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(8218.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mi" transform="translate(8774,0)"><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(278,0)"></path><path data-c="67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z" transform="translate(778,0)"></path></g><g data-mml-node="mo" transform="translate(10052,0)"><path data-c="2061" d=""></path></g><g data-mml-node="mi" transform="translate(10218.7,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g><g data-mml-node="mo" transform="translate(10969.7,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(11358.7,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(11930.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container><br>è¿™ä¸ä»…è¡¡é‡äº† (X) çš„ä¸ç¡®å®šæ€§ï¼Œä¹Ÿæ˜¯æ— æŸå‹ç¼©ç†è®ºçš„ç†è®ºä¸‹ç•Œã€‚æœ€å¤§ç†µåŸç†åœ¨ç»Ÿè®¡å»ºæ¨¡å’Œæ¨¡å‹é€‰æ‹©ä¸­ä¹Ÿæœ‰å¹¿æ³›åº”ç”¨ï¼Œå®ƒä¸»å¼ åœ¨æ»¡è¶³å·²çŸ¥æ¡ä»¶ä¸‹ï¼Œé€‰æ‹©ç†µæœ€å¤§çš„åˆ†å¸ƒä»¥é¿å…å¼•å…¥ä¸å¿…è¦çš„å‡è®¾ã€‚<br>å¸¦å™ªä¿¡é“é€šä¿¡ï¼šé¦™å†œæé™æ­ç¤ºäº†åœ¨ç»™å®šå¸¦å®½å’Œä¿¡å™ªæ¯”ä¸‹ï¼Œä¿¡é“çš„æœ€å¤§ä¿¡æ¯ä¼ è¾“é€Ÿç‡ã€‚è®¾è®¡é«˜æ•ˆçš„ä¿¡é“ç¼–ç ï¼ˆå¦‚ LDPC ç ï¼‰å¯ä»¥å¸®åŠ©ç³»ç»Ÿæ¥è¿‘è¿™ä¸€æé™ï¼Œä»è€Œåœ¨5Gã€å«æ˜Ÿé€šä¿¡ç­‰é¢†åŸŸå®ç°æ— è¯¯å·®ä¼ è¾“ï¼ˆShannon, 1948ï¼‰ã€‚</p></li><li><p><strong>å®é™…åº”ç”¨ä¸­çš„èåˆ</strong></p><ul><li><strong>æ•°æ®å‹ç¼©ä¸é€šä¿¡</strong>ï¼šåœ¨æ•°æ®å‹ç¼©ä¸­ï¼Œæˆ‘ä»¬è¿½æ±‚å°½å¯èƒ½æ¥è¿‘ä¿¡æ¯ç†µä¸‹ç•Œçš„ç¼–ç æ•ˆç‡ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæ— æŸå‹ç¼©çš„å¹³å‡ç é•¿åº”æ¥è¿‘æºä¿¡æ¯ç†µã€‚è€Œåœ¨å¸¦å™ªä¿¡é“é€šä¿¡ä¸­ï¼Œé¦™å†œæé™ä¸ºè®¾è®¡ä¿¡é“ç¼–ç æä¾›äº†ç†è®ºä¸Šé™ï¼ŒæŒ‡å¯¼æˆ‘ä»¬åœ¨æœ‰é™å¸¦å®½å’Œä¿¡å™ªæ¯”ä¸‹å®ç°å°½å¯èƒ½é«˜çš„ä¼ è¾“é€Ÿç‡ã€‚<br><strong>æ•°æ®å‹ç¼©</strong>èƒ½å¤Ÿå®ç°æ˜¯å› ä¸ºå¤šæ•°ç°å®ä¸–ç•Œçš„æ•°æ®éƒ½æœ‰<a href="https://zh.wikipedia.org/w/index.php?title=%E7%BB%9F%E8%AE%A1%E5%86%97%E4%BD%99&amp;action=edit&amp;redlink=1"><strong>ç»Ÿè®¡å†—ä½™</strong></a>ã€‚ä¾‹å¦‚ï¼Œå­—æ¯â€œeâ€åœ¨è‹±è¯­ä¸­æ¯”å­—æ¯â€œzâ€æ›´åŠ å¸¸ç”¨ï¼Œå­—æ¯â€œqâ€åé¢æ˜¯â€œzâ€çš„å¯èƒ½æ€§éå¸¸å°ã€‚<a href="https://zh.wikipedia.org/wiki/%E9%9D%9E%E7%A0%B4%E5%A3%9E%E6%80%A7%E8%B3%87%E6%96%99%E5%A3%93%E7%B8%AE"><strong>æ— æŸæ•°æ®å‹ç¼©</strong></a>é€šå¸¸åˆ©ç”¨äº†ç»Ÿè®¡å†—ä½™ï¼Œè¿™æ ·å°±èƒ½æ›´åŠ ç®€ç»ƒåœ°ã€ä½†ä»ç„¶æ˜¯å®Œæ•´åœ°è¡¨ç¤ºå‘é€æ–¹çš„æ•°æ®ã€‚<strong>çœŸæ­£éšæœºçš„æ•°æ®æ˜¯ä¸å¯èƒ½é€šè¿‡å‹ç¼©æ¥å‡å°æ–‡ä»¶å¤§å°çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ•°æ®æ²¡æœ‰å¯é¢„æµ‹çš„æ¨¡å¼æˆ–é‡å¤æ€§,æ¯ä¸ªæ•°æ®ç‚¹éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚</strong></li></ul></li></ol><h2 id="æ•°æ®å‹ç¼©">æ•°æ®å‹ç¼©</h2><p><strong>1. æœ‰æŸå‹ç¼©ï¼ˆLossy Compressionï¼‰:</strong></p><p>æœ‰æŸå‹ç¼©æ˜¯ä¸€ç§æ–¹æ³•ï¼Œå…¶ä¸­ä¸€äº›æ•°æ®è¢«æ•…æ„ä¸¢å¤±ï¼Œä»¥å‡å°æ–‡ä»¶çš„å¤§å°ã€‚è¿™ç§æ–¹æ³•é€šå¸¸ç”¨äºå›¾åƒã€éŸ³é¢‘å’Œè§†é¢‘æ•°æ®ï¼Œå…¶ä¸­ä¸€äº›ä¿¡æ¯æŸå¤±åäººçš„æ„ŸçŸ¥ä¸æ˜“å¯Ÿè§‰ã€‚</p><p><strong>åŸç†ï¼š</strong></p><ul><li><strong>å»é™¤å†—ä½™ä¿¡æ¯ï¼š</strong> æœ‰æŸå‹ç¼©ç®—æ³•æ£€æµ‹å¹¶åˆ é™¤ä¸å¤ªé‡è¦çš„æ•°æ®ï¼Œå¦‚éŸ³é¢‘ä¸­çš„é«˜é¢‘å™ªéŸ³æˆ–å›¾åƒä¸­çš„å¾®å°ç»†èŠ‚ã€‚</li><li><strong>é‡åŒ–ï¼š</strong> åœ¨éŸ³é¢‘å’Œè§†é¢‘å‹ç¼©ä¸­ï¼Œæ•°å€¼å¯ä»¥è¢«é‡åŒ–ä¸ºè¾ƒä½çš„ç²¾åº¦ï¼Œä»è€Œå‡å°æ•°æ®é‡ã€‚</li><li><strong>å­é‡‡æ ·å’Œè‰²åº¦æŠ½æ ·ï¼š</strong> åœ¨å›¾åƒå’Œè§†é¢‘å‹ç¼©ä¸­ï¼Œå¯ä»¥å‡å°åƒç´ æ•°é‡æˆ–é¢œè‰²ä¿¡æ¯çš„ç²¾åº¦ã€‚</li><li><strong>ç¦»æ•£ä½™å¼¦å˜æ¢ï¼ˆDCTï¼‰ï¼š</strong> åœ¨å›¾åƒå’ŒéŸ³é¢‘å‹ç¼©ä¸­ï¼ŒDCT å¯å°†æ•°æ®è½¬æ¢ä¸ºé¢‘åŸŸè¡¨ç¤ºï¼Œä»¥å‡å°‘é«˜é¢‘æˆåˆ†ã€‚</li></ul><p><strong>2. æ— æŸå‹ç¼©ï¼ˆLossless Compressionï¼‰:</strong></p><p>æ— æŸå‹ç¼©æ˜¯ä¸€ç§æ–¹æ³•ï¼Œå…¶ä¸­å‹ç¼©åçš„æ•°æ®å¯ä»¥å®Œå…¨è¿˜åŸä¸ºåŸå§‹æ•°æ®ï¼Œä¸ä¼šä¸¢å¤±ä»»ä½•ä¿¡æ¯ã€‚è¿™ç§æ–¹æ³•é€‚ç”¨äºéœ€è¦ç»´æŠ¤æ•°æ®å®Œæ•´æ€§çš„æƒ…å†µï¼Œå¦‚æ–‡æ¡£ã€æ•°æ®åº“å’Œç¨‹åºæ–‡ä»¶ã€‚</p><p><strong>åŸç†ï¼š</strong></p><ul><li><strong>é‡å¤æ•°æ®åˆ é™¤ï¼š</strong> æ— æŸå‹ç¼©ç®—æ³•é€šå¸¸æ£€æµ‹å’Œåˆ é™¤æ•°æ®ä¸­çš„é‡å¤å†…å®¹ï¼Œä¾‹å¦‚ç›¸é‚»çš„ç›¸åŒå­—ç¬¦æˆ–å­—ç¬¦ä¸²ã€‚</li><li><strong>å­—å…¸ç¼–ç ï¼š</strong> è¯¥æ–¹æ³•ä½¿ç”¨å­—å…¸æˆ–å­—å…¸è¡¨ï¼Œå°†å¸¸è§çš„å­—ç¬¦ä¸²å­˜å‚¨ä¸ºå­—å…¸æ¡ç›®ï¼Œç„¶åç”¨è¾ƒçŸ­çš„å¼•ç”¨æ›¿æ¢åŸå§‹æ•°æ®ã€‚</li><li><strong>éœå¤«æ›¼ç¼–ç ï¼š</strong> éœå¤«æ›¼ç¼–ç æ˜¯ä¸€ç§å˜é•¿ç¼–ç æŠ€æœ¯ï¼Œå°†å¸¸è§å­—ç¬¦æ˜ å°„åˆ°è¾ƒçŸ­çš„ç¼–ç ï¼Œä¸å¸¸è§å­—ç¬¦æ˜ å°„åˆ°è¾ƒé•¿çš„ç¼–ç ã€‚</li><li><strong>ç®—æœ¯ç¼–ç ï¼š</strong> ç®—æœ¯ç¼–ç ä½¿ç”¨æ¦‚ç‡æ¨¡å‹æ¥å°†å­—ç¬¦åºåˆ—è½¬æ¢ä¸ºä¸€ä¸ªå¤§çš„æ•°å­—ï¼Œä»¥å‡å°æ•°æ®çš„å¤§å°ã€‚<br>å‹ç¼©ç®—æ³•çš„åŸºæœ¬æµç¨‹<br>ç›®å‰æˆç†Ÿçš„æ— æŸå‹ç¼©ç®—æ³•ä¸€èˆ¬åˆ†ä¸ºä¸¤å¤§æ­¥éª¤ï¼š</li></ul><ol><li><strong>å»ºæ¨¡</strong>ï¼šåˆ©ç”¨ç»Ÿè®¡æ¨¡å‹ï¼ˆå¦‚æ¦‚ç‡åˆ†å¸ƒã€å­—å…¸æ„å»ºã€ä¸Šä¸‹æ–‡æ¨¡å‹ï¼‰å¯¹æ•°æ®è¿›è¡Œå»ºæ¨¡ã€‚</li><li><strong>ç¼–ç </strong>ï¼šåˆ©ç”¨ç†µç¼–ç ï¼ˆå¦‚ Huffman ç¼–ç ã€ç®—æœ¯ç¼–ç æˆ–ç°ä»£çš„ä¸Šä¸‹æ–‡è‡ªé€‚åº”äºŒè¿›åˆ¶ç®—æœ¯ç¼–ç ï¼‰å®ç°æ•°æ®å‹ç¼©ã€‚</li></ol><p><strong>middle-out çš„æ¦‚å¿µè§£æ</strong><br>â€œMiddle-outâ€è¿™ä¸€å‘½åæš—ç¤ºäº†ç®—æ³•åœ¨æ•°æ®å¤„ç†è¿‡ç¨‹ä¸­å¯èƒ½é‡‡å–äº†ä¸€ç§ä¸åŒäºä¼ ç»Ÿè‡ªå·¦è‡³å³æˆ–è€…è‡ªå³è‡³å·¦çš„ç­–ç•¥ï¼Œè€Œæ˜¯ä»æ•°æ®çš„â€œä¸­é—´â€å¼€å§‹å¤„ç†ï¼Œç„¶åå‘ä¸¤ç«¯æ‰©å±•ã€‚å¯èƒ½çš„å‡è®¾åŒ…æ‹¬ï¼š</p><ul><li><strong>æ•°æ®åˆ†å‰²ä¸å±€éƒ¨ç»Ÿè®¡</strong>ï¼šå¦‚æœæ•°æ®åœ¨ä¸­é—´éƒ¨åˆ†å…·æœ‰æ›´æ˜æ˜¾çš„å†—ä½™æˆ–ç»Ÿè®¡è§„å¾‹ï¼Œå…ˆå¯¹ä¸­é—´éƒ¨åˆ†è¿›è¡Œå‹ç¼©å†å‘å¤–æ‰©å±•ï¼Œå¯èƒ½åœ¨æŸäº›ç‰¹å®šæ•°æ®ç»“æ„ä¸­å–å¾—æ›´å¥½çš„å±€éƒ¨å‹ç¼©æ•ˆæœã€‚</li><li><strong>å¹¶è¡Œå¤„ç†</strong>ï¼šä»æ•°æ®ä¸­å¿ƒå‘ä¸¤ç«¯åˆ†å‰²å¯èƒ½åˆ©äºå¹¶è¡Œå¤„ç†ï¼Œåœ¨å¤šæ ¸ç³»ç»Ÿä¸Šæé«˜å‹ç¼©é€Ÿåº¦ï¼Œä½†è¿™ä¸»è¦é’ˆå¯¹é€Ÿåº¦ä¼˜åŒ–è€Œéå‹ç¼©æ¯”çš„æ ¹æœ¬æå‡ã€‚</li><li><strong>åŠ¨æ€å­—å…¸æ›´æ–°</strong>ï¼šä¸€ç§è®¾æƒ³æ˜¯ç®—æ³•åœ¨â€œä¸­é—´â€æ„å»ºæ ¸å¿ƒå­—å…¸æˆ–æ¨¡å‹ï¼Œç„¶åå°†è¯¥å­—å…¸æ‰©å±•åˆ°æ•´ä¸ªæ•°æ®ä¸­ï¼Œåˆ©ç”¨å…¨å±€ä¸å±€éƒ¨ä¿¡æ¯çš„ç»“åˆæ¥æå‡å‹ç¼©æ•ˆç‡ã€‚ä½†è¿™ç§æ–¹æ³•æœ¬è´¨ä¸Šä»å—é™äºæ•°æ®çš„ç»Ÿè®¡ç‰¹æ€§å’Œä¿¡æ¯ç†µã€‚<br>ä½†æ˜¯</li><li><strong>æ•°æ®ä¾èµ–æ€§</strong>ï¼šå¤§å¤šæ•°æ•°æ®æ–‡ä»¶çš„å†—ä½™åˆ†å¸ƒå¹¶éåœ¨ä¸­é—´éƒ¨åˆ†é›†ä¸­ï¼Œè€Œæ˜¯ä¸æ•°æ®ç»“æ„ã€æ–‡ä»¶æ ¼å¼å¯†åˆ‡ç›¸å…³ã€‚é’ˆå¯¹æŸä¸€ç±»æ•°æ®è¿›è¡Œâ€œä¸­é—´ä¼˜å…ˆâ€çš„å¤„ç†å¯èƒ½é€‚ç”¨äºæŸäº›ç‰¹å®šåœºæ™¯ï¼Œä½†éš¾ä»¥æ™®é€‚ã€‚</li><li><strong>ç®—æ³•å¤æ‚åº¦</strong>ï¼šè‹¥éœ€è¦åœ¨ä¸­é—´å…ˆæ„å»ºå…¨å±€ç»Ÿè®¡æ¨¡å‹ï¼Œå†å‘ä¸¤ä¾§æ‰©å±•ï¼Œç®—æ³•è®¾è®¡å’Œå®ç°ä¸Šçš„å¤æ‚æ€§ä¼šå¤§å¹…å¢åŠ ï¼Œè€Œä¸”å®é™…æ”¶ç›Šå¯èƒ½ä¸æ˜æ˜¾ã€‚<br>æ— æŸæ•°æ®å‹ç¼©çš„å‹ç¼©ç‡ä¸è¶³ä»¥å¤„ç†åºå¤§ä½“ç§¯çš„éŸ³è§†é¢‘æ•°æ®ï¼Œä½†å¦‚æœå…è®¸ä¸€å®šç¨‹åº¦çš„<a href="https://zh.wikipedia.org/w/index.php?title=%E4%BF%9D%E7%9C%9F%E5%BA%A6&amp;action=edit&amp;redlink=1">ä¿çœŸåº¦</a>æŸå¤±ï¼Œé‚£ä¹ˆè¿˜å¯ä»¥å®ç°è¿›ä¸€æ­¥çš„å‹ç¼©ã€‚<br>åœ¨æ— æŸå‹ç¼©ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å°†æ•°æ®ç¼–ç ä¸ºå°½å¯èƒ½çŸ­çš„æ¯”ç‰¹ä¸²ã€‚æ ¹æ®é¦™å†œçš„ç¬¬ä¸€å®šç†ï¼Œä¸€ä¸ªç¬¦å·åºåˆ—çš„æœ€ä¼˜ç¼–ç é•¿åº¦ä¸‹ç•Œæ­£æ˜¯å…¶ä¿¡æ¯ç†µ  <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.663ex;" xmlns="http://www.w3.org/2000/svg" width="45.341ex" height="2.36ex" role="img" focusable="false" viewBox="0 -750 20040.8 1043.1"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path></g><g data-mml-node="mo" transform="translate(888,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1277,0)"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g><g data-mml-node="mo" transform="translate(2129,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(2795.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="munder" transform="translate(3851.6,0)"><g data-mml-node="mo"><path data-c="2211" d="M61 748Q64 750 489 750H913L954 640Q965 609 976 579T993 533T999 516H979L959 517Q936 579 886 621T777 682Q724 700 655 705T436 710H319Q183 710 183 709Q186 706 348 484T511 259Q517 250 513 244L490 216Q466 188 420 134T330 27L149 -187Q149 -188 362 -188Q388 -188 436 -188T506 -189Q679 -189 778 -162T936 -43Q946 -27 959 6H999L913 -249L489 -250Q65 -250 62 -248Q56 -246 56 -239Q56 -234 118 -161Q186 -81 245 -11L428 206Q428 207 242 462L57 717L56 728Q56 744 61 748Z"></path></g><g data-mml-node="TeXAtom" transform="translate(1089,-285.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g></g></g><g data-mml-node="mi" transform="translate(5561.7,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g><g data-mml-node="mo" transform="translate(6312.7,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(6701.7,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(7273.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(7884.9,0)"><path data-c="22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z"></path></g><g data-mml-node="mi" transform="translate(8385.1,0)"><path data-c="1D43C" d="M43 1Q26 1 26 10Q26 12 29 24Q34 43 39 45Q42 46 54 46H60Q120 46 136 53Q137 53 138 54Q143 56 149 77T198 273Q210 318 216 344Q286 624 286 626Q284 630 284 631Q274 637 213 637H193Q184 643 189 662Q193 677 195 680T209 683H213Q285 681 359 681Q481 681 487 683H497Q504 676 504 672T501 655T494 639Q491 637 471 637Q440 637 407 634Q393 631 388 623Q381 609 337 432Q326 385 315 341Q245 65 245 59Q245 52 255 50T307 46H339Q345 38 345 37T342 19Q338 6 332 0H316Q279 2 179 2Q143 2 113 2T65 2T43 1Z"></path></g><g data-mml-node="mo" transform="translate(8889.1,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(9278.1,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(9850.1,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(10516.9,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mo" transform="translate(11572.7,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="munder" transform="translate(12517.4,0)"><g data-mml-node="mo"><path data-c="2211" d="M61 748Q64 750 489 750H913L954 640Q965 609 976 579T993 533T999 516H979L959 517Q936 579 886 621T777 682Q724 700 655 705T436 710H319Q183 710 183 709Q186 706 348 484T511 259Q517 250 513 244L490 216Q466 188 420 134T330 27L149 -187Q149 -188 362 -188Q388 -188 436 -188T506 -189Q679 -189 778 -162T936 -43Q946 -27 959 6H999L913 -249L489 -250Q65 -250 62 -248Q56 -246 56 -239Q56 -234 118 -161Q186 -81 245 -11L428 206Q428 207 242 462L57 717L56 728Q56 744 61 748Z"></path></g><g data-mml-node="TeXAtom" transform="translate(1089,-285.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g></g></g><g data-mml-node="mi" transform="translate(14227.5,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g><g data-mml-node="mo" transform="translate(14978.5,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(15367.5,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(15939.5,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mi" transform="translate(16495.2,0)"><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(278,0)"></path><path data-c="67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z" transform="translate(778,0)"></path></g><g data-mml-node="mo" transform="translate(17773.2,0)"><path data-c="2061" d=""></path></g><g data-mml-node="mi" transform="translate(17939.8,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g><g data-mml-node="mo" transform="translate(18690.8,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(19079.8,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(19651.8,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container><br>ç„¶è€Œï¼Œç»å¸¸æœ‰ä¸€äº›æ–‡ä»¶ä¸èƒ½è¢«æœ‰æŸæ•°æ®å‹ç¼©å‹ç¼©ï¼Œå®é™…ä¸Šå¯¹äºä¸å«å¯ä»¥è¾¨åˆ«æ ·å¼çš„æ•°æ®ä»»ä½•å‹ç¼©ç®—æ³•éƒ½ä¸èƒ½å‹ç¼©ã€‚å¦å¤–ï¼Œè¯•å›¾å‹ç¼©å·²ç»ç»è¿‡å‹ç¼©çš„æ•°æ®é€šå¸¸å¾—åˆ°çš„ç»“æœå®é™…ä¸Šæ˜¯å¢åŠ æ•°æ®ã€‚</li></ul><p>å®é™…ä¸Šï¼Œæœ‰æŸæ•°æ®å‹ç¼©ä¹Ÿä¼šæœ€ç»ˆè¾¾åˆ°ä¸èƒ½å·¥ä½œçš„åœ°æ­¥ã€‚ä¾‹å¦‚ä¸€ä¸ªæç«¯çš„ä¾‹å­ï¼šå‹ç¼©ç®—æ³•æ¯æ¬¡å»æ‰æ–‡ä»¶æœ€åä¸€ä¸ªå­—èŠ‚ï¼Œé‚£ä¹ˆç»è¿‡è¿™ä¸ªç®—æ³•ä¸æ–­çš„å‹ç¼©ç›´è‡³æ–‡ä»¶å˜ç©ºï¼Œå‹ç¼©ç®—æ³•å°†ä¸èƒ½ç»§ç»­å·¥ä½œã€‚</p><p>ç”±äºå¯ä»¥å¸®åŠ©å‡å°‘å¦‚<a href="https://zh.wikipedia.org/wiki/%E7%A1%AC%E7%9B%98">ç¡¬ç›˜</a>ç©ºé—´ä¸è¿æ¥<a href="https://zh.wikipedia.org/wiki/%E5%B8%A6%E5%AE%BD">å¸¦å®½</a>è¿™æ ·çš„æ˜‚è´µèµ„æºçš„æ¶ˆè€—ï¼Œæ‰€ä»¥å‹ç¼©éå¸¸é‡è¦ï¼Œç„¶è€Œå‹ç¼©éœ€è¦æ¶ˆè€—ä¿¡æ¯å¤„ç†èµ„æºï¼Œè¿™ä¹Ÿå¯èƒ½æ˜¯è´¹ç”¨æ˜‚è´µçš„ã€‚æ‰€ä»¥æ•°æ®å‹ç¼©æœºåˆ¶çš„è®¾è®¡éœ€è¦åœ¨å‹ç¼©èƒ½åŠ›ã€å¤±çœŸåº¦ã€æ‰€éœ€è®¡ç®—èµ„æºä»¥åŠå…¶å®ƒéœ€è¦è€ƒè™‘çš„ä¸åŒå› ç´ ä¹‹é—´è¿›è¡ŒæŠ˜è¡·ã€‚</p><p><strong>å¯¹äºä»»ä½•å½¢å¼çš„é€šä¿¡æ¥è¯´ï¼Œåªæœ‰å½“<a href="https://zh.wikipedia.org/wiki/%E4%BF%A1%E6%81%AF">ä¿¡æ¯</a>çš„<a href="https://zh.wikipedia.org/w/index.php?title=%E5%8F%91%E9%80%81%E6%96%B9&amp;action=edit&amp;redlink=1">å‘é€æ–¹</a>å’Œæ¥å—æ–¹éƒ½èƒ½å¤Ÿç†è§£ç¼–ç æœºåˆ¶çš„æ—¶å€™å‹ç¼©æ•°æ®é€šä¿¡æ‰èƒ½å¤Ÿå·¥ä½œ</strong>ã€‚ä¾‹å¦‚ï¼Œåªæœ‰å½“æ¥å—æ–¹çŸ¥é“è¿™ç¯‡æ–‡ç« éœ€è¦ç”¨æ±‰è¯­å­—ç¬¦è§£é‡Šçš„æ—¶å€™è¿™ç¯‡æ–‡ç« æ‰æœ‰æ„ä¹‰ã€‚åŒæ ·ï¼Œåªæœ‰å½“æ¥å—æ–¹çŸ¥é“ç¼–ç æ–¹æ³•çš„æ—¶å€™ä»–æ‰èƒ½å¤Ÿç†è§£å‹ç¼©æ•°æ®ã€‚</p><p>è®¡ç®—è¡¨ç¤ºâ€œhello worldâ€è¿™ä¸ªå­—ç¬¦ä¸²æ‰€éœ€çš„ä¿¡æ¯ç†µï¼Œæˆ‘ä»¬éœ€è¦åˆ†æå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦çš„æ¦‚ç‡åˆ†å¸ƒ,  å°†è‹±æ–‡å­—æ¯åŠç¬¦å·çœ‹ä½œä¿¡æ¯çš„åŸºæœ¬å•ä½, é‚£ä¹ˆè¿™ä¸ªå­—ç¬¦ä¸²ä¸­å‡ºç°äº†â€™hâ€™,â€™eâ€™,â€™lâ€™,â€™oâ€™,â€™ â€˜,â€™wâ€™,â€™râ€™,â€™dâ€™,8ä¸ªå­—ç¬¦å…¶å‡ºç°é¢‘ç‡</p><p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="87.093ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 38494.9 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path></g><g data-mml-node="mo" transform="translate(888,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1277,0)"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g><g data-mml-node="mo" transform="translate(2129,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(2795.8,0)"><path data-c="2248" d="M55 319Q55 360 72 393T114 444T163 472T205 482Q207 482 213 482T223 483Q262 483 296 468T393 413L443 381Q502 346 553 346Q609 346 649 375T694 454Q694 465 698 474T708 483Q722 483 722 452Q722 386 675 338T555 289Q514 289 468 310T388 357T308 404T224 426Q164 426 125 393T83 318Q81 289 69 289Q55 289 55 319ZM55 85Q55 126 72 159T114 210T163 238T205 248Q207 248 213 248T223 249Q262 249 296 234T393 179L443 147Q502 112 553 112Q609 112 649 141T694 220Q694 249 708 249T722 217Q722 153 675 104T555 55Q514 55 468 76T388 123T308 170T224 192Q164 192 125 159T83 84Q80 55 69 55Q55 55 55 85Z"></path></g><g data-mml-node="mo" transform="translate(3851.6,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mo" transform="translate(4629.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mo" transform="translate(5018.6,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(5796.6,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(500,0)"></path><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z" transform="translate(778,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(1278,0)"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(1778,0)"></path></g><g data-mml-node="mo" transform="translate(8296.8,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></g><g data-mml-node="mn" transform="translate(9297,0)"><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></g><g data-mml-node="mo" transform="translate(10019.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(11019.4,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(500,0)"></path><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z" transform="translate(778,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(1278,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(1778,0)"></path></g><g data-mml-node="mo" transform="translate(13519.7,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(14519.9,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(500,0)"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(778,0)"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(1278,0)"></path><path data-c="37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z" transform="translate(1778,0)"></path></g><g data-mml-node="mo" transform="translate(16797.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(17464.7,0)"><path data-c="2248" d="M55 319Q55 360 72 393T114 444T163 472T205 482Q207 482 213 482T223 483Q262 483 296 468T393 413L443 381Q502 346 553 346Q609 346 649 375T694 454Q694 465 698 474T708 483Q722 483 722 452Q722 386 675 338T555 289Q514 289 468 310T388 357T308 404T224 426Q164 426 125 393T83 318Q81 289 69 289Q55 289 55 319ZM55 85Q55 126 72 159T114 210T163 238T205 248Q207 248 213 248T223 249Q262 249 296 234T393 179L443 147Q502 112 553 112Q609 112 649 141T694 220Q694 249 708 249T722 217Q722 153 675 104T555 55Q514 55 468 76T388 123T308 170T224 192Q164 192 125 159T83 84Q80 55 69 55Q55 55 55 85Z"></path></g><g data-mml-node="mo" transform="translate(18520.4,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mo" transform="translate(19298.4,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mo" transform="translate(19687.4,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(20465.4,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(500,0)"></path><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(778,0)"></path><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(1278,0)"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(1778,0)"></path></g><g data-mml-node="mo" transform="translate(22965.7,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(23965.9,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(500,0)"></path><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z" transform="translate(778,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(1278,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(1778,0)"></path></g><g data-mml-node="mo" transform="translate(26466.1,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(27466.3,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(500,0)"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(778,0)"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(1278,0)"></path><path data-c="37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z" transform="translate(1778,0)"></path></g><g data-mml-node="mo" transform="translate(29744.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(30411.1,0)"><path data-c="2248" d="M55 319Q55 360 72 393T114 444T163 472T205 482Q207 482 213 482T223 483Q262 483 296 468T393 413L443 381Q502 346 553 346Q609 346 649 375T694 454Q694 465 698 474T708 483Q722 483 722 452Q722 386 675 338T555 289Q514 289 468 310T388 357T308 404T224 426Q164 426 125 393T83 318Q81 289 69 289Q55 289 55 319ZM55 85Q55 126 72 159T114 210T163 238T205 248Q207 248 213 248T223 249Q262 249 296 234T393 179L443 147Q502 112 553 112Q609 112 649 141T694 220Q694 249 708 249T722 217Q722 153 675 104T555 55Q514 55 468 76T388 123T308 170T224 192Q164 192 125 159T83 84Q80 55 69 55Q55 55 55 85Z"></path></g><g data-mml-node="mn" transform="translate(31466.9,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(500,0)"></path><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(778,0)"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(1278,0)"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(1778,0)"></path></g><g data-mml-node="mtext" transform="translate(33744.9,0)"><path data-c="A0" d=""></path></g><g data-mml-node="mtext" transform="translate(33994.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">æ¯”</text><text data-variant="normal" transform="translate(1000,0) scale(1,-1)" font-size="884px" font-family="serif">ç‰¹</text><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z" transform="translate(2000,0)"></path><text data-variant="normal" transform="translate(2500,0) scale(1,-1)" font-size="884px" font-family="serif">å­—</text><text data-variant="normal" transform="translate(3500,0) scale(1,-1)" font-size="884px" font-family="serif">ç¬¦</text></g></g></g></svg></mjx-container></p><p>å­—ç¬¦ä¸²é•¿åº¦ä¸º 11 ä¸ªå­—ç¬¦ï¼Œå› æ­¤æ€»ä¿¡æ¯ç†µä¸ºï¼š</p><p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="45.985ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 20325.6 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mtext"><path data-c="74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(389,0)"></path><path data-c="74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z" transform="translate(889,0)"></path><path data-c="61" d="M137 305T115 305T78 320T63 359Q63 394 97 421T218 448Q291 448 336 416T396 340Q401 326 401 309T402 194V124Q402 76 407 58T428 40Q443 40 448 56T453 109V145H493V106Q492 66 490 59Q481 29 455 12T400 -6T353 12T329 54V58L327 55Q325 52 322 49T314 40T302 29T287 17T269 6T247 -2T221 -8T190 -11Q130 -11 82 20T34 107Q34 128 41 147T68 188T116 225T194 253T304 268H318V290Q318 324 312 340Q290 411 215 411Q197 411 181 410T156 406T148 403Q170 388 170 359Q170 334 154 320ZM126 106Q126 75 150 51T209 26Q247 26 276 49T315 109Q317 116 318 175Q318 233 317 233Q309 233 296 232T251 223T193 203T147 166T126 106Z" transform="translate(1278,0)"></path><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z" transform="translate(1778,0)"></path></g></g><g data-mml-node="mo" transform="translate(2333.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(3389.6,0)"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path></g><g data-mml-node="mo" transform="translate(4277.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(4666.6,0)"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g><g data-mml-node="mo" transform="translate(5518.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(6129.8,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></g><g data-mml-node="mn" transform="translate(7130,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(500,0)"></path></g><g data-mml-node="mo" transform="translate(8407.8,0)"><path data-c="2248" d="M55 319Q55 360 72 393T114 444T163 472T205 482Q207 482 213 482T223 483Q262 483 296 468T393 413L443 381Q502 346 553 346Q609 346 649 375T694 454Q694 465 698 474T708 483Q722 483 722 452Q722 386 675 338T555 289Q514 289 468 310T388 357T308 404T224 426Q164 426 125 393T83 318Q81 289 69 289Q55 289 55 319ZM55 85Q55 126 72 159T114 210T163 238T205 248Q207 248 213 248T223 249Q262 249 296 234T393 179L443 147Q502 112 553 112Q609 112 649 141T694 220Q694 249 708 249T722 217Q722 153 675 104T555 55Q514 55 468 76T388 123T308 170T224 192Q164 192 125 159T83 84Q80 55 69 55Q55 55 55 85Z"></path></g><g data-mml-node="mn" transform="translate(9463.6,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(500,0)"></path><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(778,0)"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(1278,0)"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(1778,0)"></path></g><g data-mml-node="mo" transform="translate(11963.8,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></g><g data-mml-node="mn" transform="translate(12964,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(500,0)"></path></g><g data-mml-node="mo" transform="translate(14241.8,0)"><path data-c="2248" d="M55 319Q55 360 72 393T114 444T163 472T205 482Q207 482 213 482T223 483Q262 483 296 468T393 413L443 381Q502 346 553 346Q609 346 649 375T694 454Q694 465 698 474T708 483Q722 483 722 452Q722 386 675 338T555 289Q514 289 468 310T388 357T308 404T224 426Q164 426 125 393T83 318Q81 289 69 289Q55 289 55 319ZM55 85Q55 126 72 159T114 210T163 238T205 248Q207 248 213 248T223 249Q262 249 296 234T393 179L443 147Q502 112 553 112Q609 112 649 141T694 220Q694 249 708 249T722 217Q722 153 675 104T555 55Q514 55 468 76T388 123T308 170T224 192Q164 192 125 159T83 84Q80 55 69 55Q55 55 55 85Z"></path></g><g data-mml-node="mn" transform="translate(15297.6,0)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(500,0)"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(1000,0)"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(1278,0)"></path><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z" transform="translate(1778,0)"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(2278,0)"></path></g><g data-mml-node="mtext" transform="translate(18075.6,0)"><path data-c="A0" d=""></path></g><g data-mml-node="mtext" transform="translate(18325.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">æ¯”</text><text data-variant="normal" transform="translate(1000,0) scale(1,-1)" font-size="884px" font-family="serif">ç‰¹</text></g></g></g></svg></mjx-container></p><h3 id="é€šä¿¡åŒæ–¹è¾¾æˆå…±è¯†"><strong>é€šä¿¡åŒæ–¹è¾¾æˆå…±è¯†</strong></h3><p>ä¸ºäº†è¡¨ç¤ºâ€œhello worldâ€è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œé€šä¿¡åŒæ–¹éœ€è¦ï¼š</p><ol><li><p><strong>å­—ç¬¦é›†å…±è¯†</strong>ï¼šåŒæ–¹éœ€çº¦å®šä½¿ç”¨çš„å­—ç¬¦é›†ï¼ˆå¦‚ ASCII æˆ– Unicodeï¼‰ã€‚</p></li><li><p><strong>ç¼–ç æ–¹å¼å…±è¯†</strong>ï¼šåŒæ–¹éœ€çº¦å®šç¼–ç æ–¹å¼ï¼ˆå¦‚ UTF-8ã€éœå¤«æ›¼ç¼–ç ï¼‰ã€‚</p></li><li><p><strong>ä¿¡æ¯ç†µå…±è¯†</strong>ï¼šåŒæ–¹éœ€ç†è§£å­—ç¬¦ä¸²çš„ç†µå€¼ï¼ˆçº¦ 2.842 æ¯”ç‰¹/å­—ç¬¦ï¼‰ï¼Œä»¥ç¡®å®šæœ€å°ä¼ è¾“èµ„æºéœ€æ±‚ã€‚</p><ul><li><strong>ç»Ÿè®¡æ¨æ–­ä¸æœºå™¨å­¦ä¹ </strong>ï¼šç°ä»£æœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆä¾‹å¦‚è´å¶æ–¯ç½‘ç»œã€æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨ï¼‰éƒ½æ·±å—æ¦‚ç‡è®ºå’Œç»Ÿè®¡å­¦çš„å¯å‘ï¼Œè€Œäº¤å‰éªŒè¯ã€A/B æµ‹è¯•ç­‰ç»Ÿè®¡æ–¹æ³•åˆ™ä¿è¯äº†è¿™äº›æ¨¡å‹åœ¨å®é™…åº”ç”¨ä¸­çš„é²æ£’æ€§å’Œå‡†ç¡®æ€§ã€‚</li></ul></li></ol><h2 id="å‘å±•å†ç¨‹">å‘å±•å†ç¨‹</h2><ul><li><strong>æ¦‚ç‡è®º</strong>ï¼šæœ€æ—©èµ·æºäº17ä¸–çºªçš„èµŒåšé—®é¢˜ï¼Œç”±å¸•æ–¯å¡ã€è´¹é©¬ç­‰äººæå‡ºåˆæ­¥ç†è®ºï¼Œéšåéšç€æ•°å­¦çš„å‘å±•ä¸æ–­å®Œå–„ã€‚</li><li><strong>æ•°ç†ç»Ÿè®¡</strong>ï¼šåœ¨19ä¸–çºªæœ«åˆ°20ä¸–çºªåˆï¼Œé«˜æ–¯ã€è´¹èˆå°”ç­‰äººçš„å·¥ä½œä½¿ç»Ÿè®¡å­¦é€æ­¥å½¢æˆä½“ç³»ï¼Œåº”ç”¨èŒƒå›´ä¹Ÿä»å†œä¸šè¯•éªŒæ‰©å±•åˆ°åŒ»å­¦ã€å·¥ç¨‹ç­‰å¤šä¸ªé¢†åŸŸã€‚</li><li><strong>ä¿¡æ¯è®º</strong>ï¼šç”±é¦™å†œåœ¨1948å¹´æå‡ºï¼Œå…¶åŸå§‹ç›®æ ‡æ˜¯è§£å†³é€šä¿¡é¢†åŸŸä¸­ä¿¡æ¯ä¼ è¾“çš„æ•ˆç‡é—®é¢˜ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œä¿¡æ¯è®ºçš„åº”ç”¨èŒƒå›´ä¸æ–­æ‰©å¤§ï¼Œå¦‚ä»Šå·²æ·±å…¥åˆ°æ•°æ®å‹ç¼©ã€å¯†ç å­¦ã€æœºå™¨å­¦ä¹ ã€ç¥ç»ç§‘å­¦ç­‰ä¼—å¤šé¢†åŸŸã€‚</li></ul><p>å¦å¤–ï¼Œ<strong>éšæœºè¿‡ç¨‹ä¸æ—¶é—´åºåˆ—åˆ†æ</strong>ä¸­çš„é©¬å°”å¯å¤«é“¾ã€å¸ƒæœ—è¿åŠ¨ç­‰ç†è®ºåœ¨é‡‘èç»Ÿè®¡ä¸­çš„åº”ç”¨ä¹Ÿæ—¥ç›Šå¹¿æ³›ï¼Œå®ƒä»¬å¸®åŠ©æˆ‘ä»¬å»ºæ¨¡å’Œé¢„æµ‹è‚¡å¸‚æ³¢åŠ¨ã€æ±‡ç‡å˜åŒ–ç­‰åŠ¨æ€ç³»ç»Ÿçš„è¡Œä¸ºã€‚</p><h2 id="åº”ç”¨æ¡ˆä¾‹ï¼šä»ç†è®ºåˆ°å®è·µ">åº”ç”¨æ¡ˆä¾‹ï¼šä»ç†è®ºåˆ°å®è·µ</h2><h3 id="é‡‘èä¸é£é™©ç®¡ç†">é‡‘èä¸é£é™©ç®¡ç†</h3><p>ç°å®ä¸–ç•Œå……æ»¡äº†éšæœºç°è±¡ï¼Œä¾‹å¦‚è‚¡å¸‚æ³¢åŠ¨ã€æ°”å€™å˜åŒ–å’Œç–¾ç—…ä¼ æ’­ã€‚æ¦‚ç‡è®ºä¸ºæˆ‘ä»¬æä¾›äº†ä¸€å¥—ç³»ç»Ÿçš„æ–¹æ³•å»é‡åŒ–å’Œæè¿°è¿™äº›ä¸ç¡®å®šæ€§ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿå¯¹æœªæ¥è¿›è¡Œé¢„æµ‹å¹¶åšå‡ºå†³ç­–ã€‚é€šè¿‡æ¦‚ç‡æ¨¡å‹å’Œç»Ÿè®¡æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è¯„ä¼°æ½œåœ¨é£é™©ã€‚ä¾‹å¦‚ï¼Œåœ¨é‡‘èé¢†åŸŸï¼Œé‡‘èæœºæ„åˆ©ç”¨VaRï¼ˆé£é™©ä»·å€¼ï¼‰æ¨¡å‹å¯¹èµ„äº§ç»„åˆè¿›è¡Œé£é™©ç®¡ç†ï¼Œä»è€Œåˆ¶å®šæ›´ä¸ºç¨³å¥çš„æŠ•èµ„ç­–ç•¥ã€‚<br>é‡‘èå¸‚åœºå……æ»¡éšæœºæ³¢åŠ¨ã€‚åˆ©ç”¨æ¦‚ç‡åˆ†å¸ƒï¼ˆå¦‚æ­£æ€åˆ†å¸ƒã€tåˆ†å¸ƒï¼‰å’Œ Monte Carlo æ¨¡æ‹Ÿï¼Œé‡‘èå·¥ç¨‹å¸ˆå¯ä»¥å¯¹èµ„äº§æ”¶ç›Šè¿›è¡Œå»ºæ¨¡ï¼Œè¯„ä¼°æŠ•èµ„ç»„åˆçš„é£é™©ã€‚ä¾‹å¦‚ï¼Œ2008å¹´é‡‘èå±æœºæœŸé—´ï¼Œå°¾éƒ¨é£é™©çš„ä½ä¼°ä¿ƒä½¿ç ”ç©¶è€…é‡æ–°å®¡è§†å’Œæ”¹è¿›é£é™©æ¨¡å‹ï¼ˆEmbrechts et al., 2001ï¼‰ã€‚</p><h3 id="åŒ»å­¦ä¸ç”Ÿç‰©ç»Ÿè®¡">åŒ»å­¦ä¸ç”Ÿç‰©ç»Ÿè®¡</h3><p>åœ¨æ–°è¯ç ”å‘è¿‡ç¨‹ä¸­ï¼Œä¸´åºŠè¯•éªŒå¿…é¡»è®¾è®¡å¾—ç§‘å­¦ä¸¥è°¨ã€‚ç»Ÿè®¡æ–¹æ³•å¦‚ t æ£€éªŒã€å¡æ–¹æ£€éªŒä»¥åŠæŠ½æ ·æ–¹æ³•ç¡®ä¿äº†è¯•éªŒç»“æœçš„å¯é æ€§ï¼Œå¹¶å¸®åŠ©ç ”ç©¶è€…åœ¨æœ‰é™æ ·æœ¬ä¸­æå–ä¿¡æ¯ã€‚FDA å®¡æŸ¥æŠ¥å‘Šä¸­æ˜ç¡®æŒ‡å‡ºï¼Œç»Ÿè®¡æ•ˆèƒ½ï¼ˆpowerï¼‰å¸¸è¢«è®¾ç½®ä¸ºè‡³å°‘80%ä»¥ç¡®ä¿è¯•éªŒçš„æœ‰æ•ˆæ€§ï¼ˆFriedman et al., 2010ï¼‰ã€‚</p><h3 id="æœºå™¨å­¦ä¹ ä¸äººå·¥æ™ºèƒ½">æœºå™¨å­¦ä¹ ä¸äººå·¥æ™ºèƒ½</h3><p>ç°ä»£æœºå™¨å­¦ä¹ ç®—æ³•å¹¿æ³›åº”ç”¨äºå›¾åƒè¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰é¢†åŸŸã€‚åŸºäºæ¦‚ç‡å›¾æ¨¡å‹ã€æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨çš„ç†è®ºæ”¯æŒï¼Œç»“åˆäº¤å‰éªŒè¯å’Œ A/B æµ‹è¯•ç­‰ç»Ÿè®¡æ–¹æ³•ï¼Œæ·±åº¦å­¦ä¹ æ¨¡å‹åœ¨ ImageNet æŒ‘æˆ˜èµ›ä¸­å–å¾—äº†95%ä»¥ä¸Šçš„è¯†åˆ«å‡†ç¡®ç‡ï¼ˆGoodfellow et al., 2016ï¼‰ã€‚</p><h3 id="ä¿¡æ¯è®ºåœ¨æ•°æ®å‹ç¼©ä¸é€šä¿¡ä¸­çš„åº”ç”¨">ä¿¡æ¯è®ºåœ¨æ•°æ®å‹ç¼©ä¸é€šä¿¡ä¸­çš„åº”ç”¨</h3><ul><li><strong>æ— æŸå‹ç¼©</strong>ï¼šæ— æŸå‹ç¼©ç®—æ³•ï¼ˆå¦‚ Huffman ç¼–ç ã€ç®—æœ¯ç¼–ç ï¼‰åˆ©ç”¨è‡ªä¿¡æ¯é‡å’Œç†µçš„ç†è®ºè®¾è®¡ï¼ŒåŠ›å›¾å°†æ•°æ®å‹ç¼©åˆ°æ¥è¿‘å…¶ç†è®ºä¸‹ç•Œã€‚å‰§ä¸­ Pied Piper çš„å‹ç¼©ç®—æ³•è™½ç„¶ç»è¿‡æˆå‰§åŒ–å¤„ç†ï¼Œä½†å®é™…ä¸Šåæ˜ äº†çœŸå®ä¸–ç•Œä¸­å¯¹å‹ç¼©ç®—æ³•æ•ˆç‡è¿½æ±‚çš„çƒ­æƒ…å’ŒæŠ€æœ¯æŒ‘æˆ˜ã€‚</li><li><strong>å¸¦å™ªä¿¡é“é€šä¿¡</strong>ï¼šé¦™å†œæé™æ­ç¤ºäº†åœ¨ç»™å®šå¸¦å®½å’Œä¿¡å™ªæ¯”ä¸‹ï¼Œä¿¡é“çš„æœ€å¤§ä¿¡æ¯ä¼ è¾“é€Ÿç‡ã€‚è®¾è®¡é«˜æ•ˆçš„ä¿¡é“ç¼–ç ï¼ˆå¦‚ LDPC ç ï¼‰å¯ä»¥å¸®åŠ©ç³»ç»Ÿæ¥è¿‘è¿™ä¸€æé™ï¼Œä»è€Œåœ¨5Gã€å«æ˜Ÿé€šä¿¡ç­‰é¢†åŸŸå®ç°æ— è¯¯å·®ä¼ è¾“ï¼ˆShannon, 1948ï¼‰ã€‚</li></ul><p>æ¦‚ç‡è®ºã€æ•°ç†ç»Ÿè®¡ä¸ä¿¡æ¯è®ºä¸ä»…ä¸ºæˆ‘ä»¬æä¾›äº†æè¿°éšæœºç°è±¡å’Œä¿¡æ¯ä¼ è¾“çš„ç†è®ºåŸºç¡€ï¼Œæ›´åœ¨é‡‘èã€åŒ»å­¦ã€æœºå™¨å­¦ä¹ ä»¥åŠé€šä¿¡ç­‰å¤šä¸ªé¢†åŸŸä¸­å¾—åˆ°äº†å¹¿æ³›åº”ç”¨ã€‚é€šè¿‡å¯¹è‡ªä¿¡æ¯é‡ã€ç†µä»¥åŠé¦™å†œæé™ç­‰æ ¸å¿ƒæ¦‚å¿µçš„å­¦ä¹ ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½å¤Ÿç†è§£æ•°æ®çš„å†…åœ¨ç»“æ„ï¼Œè¿˜èƒ½è®¾è®¡å‡ºé«˜æ•ˆçš„æ•°æ®å‹ç¼©ç®—æ³•å’ŒæŠ—å™ªé€šä¿¡ç³»ç»Ÿã€‚æ­£å¦‚ç¾å‰§ <em>Silicon Valley</em> ä¸­å¯¹æŠ€æœ¯çš„æˆå‰§åŒ–æ¼”ç»æ‰€å±•ç¤ºçš„é‚£æ ·ï¼Œä½œä¸ºå¹´è½»çš„ SDE å’Œåˆ›ä¸šè€…ï¼Œæ·±å…¥æŒæ¡è¿™äº›å­¦ç§‘çš„åŸç†ï¼Œå°†ä¸ºæœªæ¥çš„åˆ›æ–°ä¸æŠ€æœ¯å‘å±•æä¾›æ— é™å¯èƒ½ã€‚<br>So, ç¾å‰§ç¡…è°·ä¸­çš„The middle-out algorithm å‹ç¼©ç®—æ³•çœŸèƒ½å®ç°å—ï¼Ÿ<br>æ–‡ä»¶èƒ½å‹ç¼©çš„ç¨‹åº¦å—ä¿¡æ¯é‡çš„é™åˆ¶ï¼ŒåŸºæœ¬ä¸Šä¸å¤ªå¯èƒ½å‡ºç°ä¸€ä¸ªæ— æŸå‹ç¼©ç®—æ³•è¶…è¿‡é¦™å†œæé™ï¼Œè€Œä¸”middleoutä¹‹åç›¸å½“äºä½¿ç”¨åˆ†æ²»æ³•ä»–ä»¬å¯èƒ½ä¼šç»§ç»­å°†ä¸¤åŠåˆ†æˆä¸€åŠ</p><p>äº‹å®ä¸ŠDropboxæ­£åœ¨ç ”ç©¶ä¸€ç§å®é™…ä¸”ç›¸å½“é©å‘½æ€§çš„ä¸­é—´å‹ç¼©ç®—æ³•ã€‚ <a href="https://blogs.dropbox.com/tech/2016/07/lepton-image-compression-saving-22-losslessly-from-images-images-at-15mbs/">https://blogs.dropbox.com/tech/2016/07/lepton-image-compression-saving-22-losslessly-from-images-images-at-15mbs/</a></p><h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2><ul><li>Embrechts, P., KlÃ¼ppelberg, C., &amp; Mikosch, T. (2001). <em>Modelling Extremal Events for Insurance and Finance</em>. Springer.</li><li>Friedman, L. M., Furberg, C., DeMets, D. L., Reboussin, D. M., &amp; Granger, C. B. (2010). <em>Fundamentals of Clinical Trials</em>. Springer.</li><li>Goodfellow, I., Bengio, Y., &amp; Courville, A. (2016). <em>Deep Learning</em>. MIT Press.</li><li>Shannon, C. E. (1948). <em>A Mathematical Theory of Communication</em>. Bell System Technical Journal, 27(3), 379â€“423.</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åœ¨å½“ä»Šæ•°æ®é©±åŠ¨ä¸äº’è”ç½‘é«˜é€Ÿå‘å±•çš„æ—¶ä»£ï¼Œæ¦‚ç‡è®ºã€æ•°ç†ç»Ÿè®¡ä»¥åŠä¿¡æ¯è®ºæ„æˆäº†ç†è§£å’Œåº”å¯¹ä¸ç¡®å®šæ€§ã€ä¼˜åŒ–æ•°æ®ä¼ è¾“ä»¥åŠå®ç°é«˜æ•ˆå‹ç¼©ç®—æ³•çš„æ•°å­¦åŸºç¡€ã€‚è¿™ä¸‰å¤§é¢†åŸŸä¸ä»…ä¸ºé‡‘èé£é™©ç®¡ç†ã€ä¸´åºŠè¯•éªŒè®¾è®¡ã€æœºå™¨å­¦ä¹ ç­‰æä¾›äº†ç†è®ºæ”¯æŒï¼ŒåŒæ—¶ä¹Ÿå¥ å®šäº†ç°ä»£é€šä¿¡ä¸æ•°æ®å‹ç¼©æŠ€æœ¯çš„åŸºçŸ³ã€‚&lt;/p&gt;
&lt;p&gt;æœ€è¿‘åœ¨è§‚çœ‹ç¾</summary>
      
    
    
    
    <category term="éšè°ˆ" scheme="https://stan370.github.io/categories/%E9%9A%8F%E8%B0%88/"/>
    
    
    <category term="æ¦‚ç‡è®º" scheme="https://stan370.github.io/tags/%E6%A6%82%E7%8E%87%E8%AE%BA/"/>
    
    <category term="ä¿¡æ¯è®º" scheme="https://stan370.github.io/tags/%E4%BF%A1%E6%81%AF%E8%AE%BA/"/>
    
    <category term="ç®—æ³•" scheme="https://stan370.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>WebAPPæ€ä¹ˆä¿å­˜çŠ¶æ€ï¼Ÿ Tokenè®¾è®¡ä¸é€‰å‹</title>
    <link href="https://stan370.github.io/2025/01/07/Token/"/>
    <id>https://stan370.github.io/2025/01/07/Token/</id>
    <published>2025-01-07T11:43:33.000Z</published>
    <updated>2025-03-19T12:12:05.248Z</updated>
    
    <content type="html"><![CDATA[<h3 id="è®¤è¯ç³»ç»Ÿçš„è®¾è®¡ä¸é€‰å‹ï¼šJWTåˆ°é•¿çŸ­ç”Ÿå‘½å‘¨æœŸçš„Tokenç®¡ç†">è®¤è¯ç³»ç»Ÿçš„è®¾è®¡ä¸é€‰å‹ï¼šJWTåˆ°é•¿çŸ­ç”Ÿå‘½å‘¨æœŸçš„Tokenç®¡ç†</h3><p>å¤§çº¦åœ¨ 2010 å¹´ï¼Œå¤§å¤šæ•°WebæœåŠ¡å™¨éƒ½ä½¿ç”¨sessionæ¥å­˜å‚¨çŠ¶æ€ä¿¡æ¯ï¼Œç”¨æˆ·å°†æ‰§è¡Œç”¨æˆ·/å¯†ç ç™»å½•ï¼Œåç«¯å°†ä¸ºè¯¥session IDåˆ›å»ºSessionIDã€‚ äººä»¬å¼€å§‹ç¢ç£¨ä¸€ä¸ªæ–°ç‚¹å­ï¼šç”¨ ä»¤ç‰Œ (token) è¿›è¡Œèº«ä»½è®¤è¯ã€‚JWT (JSON Web Token) ä¸€æˆ˜æˆåï¼Œæˆä¸ºè¿™ä¸ªæ—¶ä»£çš„å® å„¿ï¼åœ¨æ­¤ä¹‹å‰ï¼Œæ¯æ¬¡ç”¨æˆ·è®¿é—®ç³»ç»Ÿï¼ŒæœåŠ¡å™¨éƒ½å¾—å»æ•°æ®åº“æŸ¥ä¸€æŸ¥ï¼šâ€œå˜¿ï¼Œè¿™å“¥ä»¬å„¿è¿˜ç®—æ˜¯ç™»å½•çŠ¶æ€å—ï¼Ÿâ€ è¿™ä¸ä»…æ‹–æ…¢äº†ç³»ç»Ÿï¼Œè¿˜è®©åˆ†å¸ƒå¼èº«ä»½è®¤è¯å˜å¾—å¼‚å¸¸éº»çƒ¦ã€‚</p><p>è€Œ JWT çš„å‡ºç°ï¼Œå½»åº•æ”¹å˜äº†æ¸¸æˆè§„åˆ™ã€‚<br>ğŸ‘‰ æœåŠ¡å™¨ä¸éœ€è¦æŸ¥è¯¢æ•°æ®åº“ï¼Œåªéœ€éªŒè¯ JWT çš„ç­¾å å°±èƒ½çŸ¥é“ç”¨æˆ·æ˜¯å¦ç™»å½•ã€‚<br>è¿™ä¸ä»…æå‡äº†æ€§èƒ½ï¼Œè¿˜è®©é‚£äº›é…·ç‚«çš„åˆ†å¸ƒå¼è®¤è¯ç³»ç»Ÿæˆä¸ºå¯èƒ½ã€‚è€Œåˆ†å¸ƒå¼è®¤è¯ç³»ç»Ÿä¹‹æ‰€ä»¥å˜å¾—é‡è¦ï¼Œæ˜¯å› ä¸ºé‚£æ—¶å€™å…¨ä¸–ç•Œéƒ½é™·å…¥äº†å¾®æœåŠ¡ï¼ˆMicroserviceï¼‰**çš„çƒ­æ½®ã€‚</p><p>ä¸è¿‡ï¼Œä»¤ç‰Œä¹Ÿæœ‰ä¸ªé—®é¢˜ï¼šå”¯ä¸€é‡è¦çš„æ˜¯ä»¤ç‰Œæœ¬èº«ã€‚æ²¡æœ‰æ•°æ®åº“æ¥ç¡®è®¤ä¼šè¯çš„æœ‰æ•ˆæ€§ï¼Œè¿™æ„å‘³ç€å¦‚æœæœ‰äººå·äº†ä½ çš„ä»¤ç‰Œï¼Œä»–ä»¬å°±å¯ä»¥åœ¨ä»¤ç‰Œæœ‰æ•ˆæœŸå†…å‡è£…æˆä½ ã€‚å› æ­¤ï¼Œä»¤ç‰Œçš„ç”Ÿå‘½å‘¨æœŸåº”è¯¥å¾ˆçŸ­ã€‚ä»¥å‰ä¼šè¯å¯ä»¥æŒç»­å‡ ä¸ªå°æ—¶ï¼Œè€Œä»¤ç‰Œçš„ç”Ÿå‘½å‘¨æœŸå¯èƒ½åªæœ‰å‡ åˆ†é’Ÿã€‚</p><p>çŸ­å‘½ä»¤ç‰Œçš„çƒ¦æ¼ï¼šç”¨æˆ·å¾—åå¤ç™»å½•<br>ä½†å¦‚æœä»¤ç‰Œçš„ç”Ÿå‘½å‘¨æœŸå¤ªçŸ­ï¼Œç”¨æˆ·å°±ä¼šè§‰å¾—å¾ˆçƒ¦ï¼Œå› ä¸ºä»–ä»¬éœ€è¦ä¸€æ¬¡åˆä¸€æ¬¡åœ°ç™»å½•ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œä»¤ç‰Œå¯èƒ½åœ¨ä»–ä»¬æ­£ç”¨ç€åº”ç”¨çš„æ—¶å€™çªç„¶â€œæ­»æ‰â€ã€‚äºæ˜¯ï¼Œ**åˆ·æ–°ä»¤ç‰Œï¼ˆRefresh Tokenï¼‰**åº”è¿è€Œç”Ÿã€‚<br>æœ‰äº†åˆ·æ–°ä»¤ç‰Œï¼Œä½ å¯ä»¥åœ¨ä»¤ç‰Œå¿«è¦è¿‡æœŸçš„æ—¶å€™ï¼Œå·å·å‘ä¸ªè¯·æ±‚å»ç»­å‘½ã€‚æ¯ä¸ªåˆ·æ–°ä»¤ç‰Œåªèƒ½ç”¨ä¸€æ¬¡ï¼Œè€Œä¸”å½“ä½ ç”¨å®ƒçš„æ—¶å€™ï¼Œä½ è¿˜ä¼šå¾—åˆ°ä¸€ä¸ªæ–°çš„åˆ·æ–°ä»¤ç‰Œã€‚è¿™æ ·ä¸€æ¥ï¼Œå¦‚æœæœ‰äººè¯•å›¾é‡å¤ä½¿ç”¨åŒä¸€ä¸ªåˆ·æ–°ä»¤ç‰Œï¼Œæˆ‘ä»¬å°±çŸ¥é“å‡ºäº‹äº†ï¼Œç„¶åå¯ä»¥æŠŠæ‰€æœ‰è·Ÿè¿™ä¸ªè¢«ç›—ä»¤ç‰Œç›¸å…³çš„åˆ·æ–°ä»¤ç‰Œéƒ½åºŸæ‰ã€‚æœ€ç»ˆï¼Œæ‰€æœ‰ä½¿ç”¨è¯¥è´¦å·çš„ç”¨æˆ·éƒ½ä¼šè¢«å¼ºåˆ¶ç™»å‡ºã€‚</p><p>å·¥ç¨‹å¸ˆçš„æ°¸æ’é¥­ç¢—ï¼šè‡ªå·±åˆ¶é€ é—®é¢˜ï¼Œå†è§£å†³é—®é¢˜ï¼<br>ç°åœ¨ä½ æ˜ç™½ä¸ºä»€ä¹ˆå·¥ç¨‹å¸ˆçš„å·¥ä½œæ°¸è¿œå¹²ä¸å®Œäº†å§ï¼Ÿå› ä¸ºæˆ‘ä»¬æ€»æ˜¯å…ˆå‘æ˜ä¸€äº›æ–°é—®é¢˜ï¼Œç„¶åå†å‘æ˜ä¸€äº›è§£å†³æ–¹æ¡ˆï¼Œè€Œè¿™äº›è§£å†³æ–¹æ¡ˆåˆä¼šå¸¦æ¥æ›´å¤šçš„é—®é¢˜ï¼ğŸ˜„</p><p>åœ¨ç°ä»£çš„è®¤è¯ä¸æˆæƒæœºåˆ¶ä¸­ï¼Œ<strong>Token</strong>æ‰®æ¼”ç€å…³é”®è§’è‰²ï¼Œç”¨äºæ ‡è¯†å’ŒéªŒè¯ç”¨æˆ·çš„èº«ä»½ã€‚</p><p>Tokenæ˜¯ä¸€ä¸ªä»¤ç‰Œï¼Œå®¢æˆ·ç«¯è®¿é—®æœåŠ¡å™¨æ—¶ï¼ŒéªŒè¯é€šè¿‡åæœåŠ¡ç«¯ä¼šä¸ºå…¶ç­¾å‘ä¸€å¼ ä»¤ç‰Œï¼Œä¹‹åå®¢æˆ·ç«¯å°±å¯ä»¥æºå¸¦ä»¤ç‰Œè®¿é—®æœåŠ¡å™¨ï¼ŒæœåŠ¡ç«¯åªéœ€è¦éªŒè¯ä»¤ç‰Œçš„æœ‰æ•ˆæ€§å³å¯ã€‚ä¸€å¥è¯æ¦‚æ‹¬ï¼›<strong>è®¿é—®èµ„æºæ¥å£ï¼ˆAPIï¼‰æ—¶æ‰€éœ€è¦çš„èµ„æºå‡­è¯</strong><br>JWTï¼ˆJSON Web Tokenï¼‰å¸¸å¸¸æ˜¯ä¸€ä¸ªçƒ­é—¨é€‰æ‹©ã€‚ä¸‹é¢æˆ‘å°†ä»è®¾è®¡åŸåˆ™ã€ä¼˜åŠ¿ä¸åŠ£åŠ¿ã€ä»¥åŠå®é™…åº”ç”¨åœºæ™¯ç­‰è§’åº¦è¯¦ç»†è¯´æ˜ JWT çš„è®¾è®¡ä¸é€‰å‹é—®é¢˜ã€‚JWT çš„æ ‡å‡†ç»“æ„ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p><p>Headerï¼ˆå¤´éƒ¨ï¼‰ï¼šé€šå¸¸åŒ…å«ä»¤ç‰Œçš„ç±»å‹ï¼ˆé€šå¸¸ä¸º JWTï¼‰ä»¥åŠæ‰€ä½¿ç”¨çš„ç­¾åç®—æ³•ï¼ˆå¦‚ HMAC SHA256 æˆ– RSAï¼‰ã€‚<br>Payloadï¼ˆè½½è·ï¼‰ï¼šåŒ…å«å£°æ˜ï¼ˆClaimsï¼‰ï¼Œå¦‚æ³¨å†Œå£°æ˜ï¼ˆå¦‚ issã€subã€audã€expã€nbfã€iat å’Œ jtiï¼‰ä»¥åŠè‡ªå®šä¹‰æ•°æ®ã€‚<br>Signatureï¼ˆç­¾åï¼‰ï¼šé€šè¿‡å¯¹ Header å’Œ Payload è¿›è¡Œç¼–ç åï¼Œä½¿ç”¨æŒ‡å®šçš„ç®—æ³•å’Œå¯†é’¥ï¼ˆæˆ–ç§é’¥ï¼‰è¿›è¡Œç­¾åï¼Œç¡®ä¿æ•°æ®æœªè¢«ç¯¡æ”¹ã€‚</p><p>ç„¶è€Œï¼Œå¦‚ä½•è®¾è®¡Tokenï¼Œå°¤å…¶æ˜¯åœ¨é€‰æ‹©ä½¿ç”¨<strong>Access Token</strong>å’Œ<strong>Refresh Token</strong>çš„ç»„åˆï¼ˆç®€ç§°AT&amp;RTæ–¹æ¡ˆï¼‰è¿˜æ˜¯å•Tokenæ–¹æ¡ˆæ—¶ï¼Œå¾€å¾€éœ€è¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚å’Œå®‰å…¨æ€§åšæƒè¡¡ã€‚æœ¬æ–‡å°†ä»åŸç†ã€åœºæ™¯å’Œå®‰å…¨æ€§ä¸‰ä¸ªè§’åº¦å…¥æ‰‹ï¼Œæ·±å…¥æ¢è®¨Tokenè®¾è®¡ä¸­çš„æŠ‰æ‹©ã€‚</p><hr><h4 id="Access-Token-ä¸-Refresh-Token-çš„è§’è‰²åˆ†å·¥"><strong>Access Token ä¸ Refresh Token çš„è§’è‰²åˆ†å·¥</strong></h4><p>Access Token å’Œ Refresh Token çš„è®¾è®¡ç†å¿µæºäº OAuth 2.0 åè®®ï¼Œè€Œ OAuth 2.0 æ˜¯ç”± Internet Engineering Task Force (IETF) åœ¨ 2012å¹´ æ­£å¼å‘å¸ƒçš„ï¼ˆRFC 6749ï¼‰ã€‚è™½ç„¶ OAuth 2.0 æ˜¯è¿™ä¸€è®¾è®¡çš„ä¸»è¦æ¨åŠ¨è€…ï¼Œä½†å®ƒçš„çµæ„Ÿå¯ä»¥è¿½æº¯åˆ°æ—©æœŸçš„èº«ä»½éªŒè¯å’Œæˆæƒæœºåˆ¶ã€‚Access Tokenï¼ˆç®€ç§°ATï¼‰å’Œ Refresh Tokenï¼ˆç®€ç§°RTï¼‰çš„è®¾è®¡ï¼ŒèƒŒåçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†<strong>æˆæƒ</strong>ä¸<strong>èµ„æºè®¿é—®</strong>çš„è¡Œä¸ºåˆ†ç¦»ã€‚</p><ol><li><p><strong>Access Token</strong>ï¼šç”¨äºå¿«é€Ÿè®¿é—®å—ä¿æŠ¤çš„èµ„æºã€‚å®ƒé€šå¸¸æœ‰è¾ƒçŸ­çš„æœ‰æ•ˆæœŸï¼Œç›´æ¥æºå¸¦ç”¨æˆ·æˆæƒä¿¡æ¯ï¼ˆå¦‚æƒé™ã€èº«ä»½ç­‰ï¼‰ï¼Œåœ¨APIè¯·æ±‚ä¸­ä¼ é€’ç»™æœåŠ¡å™¨è¿›è¡ŒéªŒè¯ã€‚</p><ul><li><strong>ç‰¹ç‚¹</strong>ï¼šçŸ­æ—¶æœ‰æ•ˆã€é«˜é¢‘ä½¿ç”¨ã€‚</li><li><strong>é£é™©</strong>ï¼šä¸€æ—¦è¢«çªƒå–ï¼Œå¯èƒ½å¯¼è‡´çŸ­æœŸå†…èµ„æºè¢«æ¶æ„è®¿é—®ã€‚</li></ul></li><li><p><strong>Refresh Token</strong>ï¼šç”¨äºåˆ·æ–°Access Tokençš„æœ‰æ•ˆæœŸã€‚å®ƒé€šå¸¸åªåœ¨è®¤è¯æœåŠ¡å™¨ï¼ˆAuthorization Serverï¼‰å’Œå®¢æˆ·ç«¯ä¹‹é—´äº¤äº’ï¼Œä¸ä¼šç›´æ¥å‚ä¸èµ„æºè®¿é—®ã€‚</p><ul><li><strong>ç‰¹ç‚¹</strong>ï¼šé•¿æ—¶æœ‰æ•ˆã€ä½é¢‘ä½¿ç”¨ã€‚</li><li><strong>é£é™©</strong>ï¼šè¢«çªƒå–åå¯èƒ½å…è®¸æ¶æ„ç”¨æˆ·é•¿æœŸç»­ç­¾Access Tokenã€‚</li></ul></li></ol><p>é€šè¿‡å°†ä¸¤è€…åˆ†å·¥ï¼ŒAT&amp;RTæ–¹æ¡ˆå°†<strong>è·å–æˆæƒ</strong>è¿™ä¸€é«˜å±ã€ä½é¢‘çš„æ“ä½œä¸<strong>è·å–èµ„æº</strong>è¿™ä¸€ä½å±ã€é«˜é¢‘çš„æ“ä½œåˆ†ç¦»å¼€ï¼Œä»è€Œé™ä½å®‰å…¨é£é™©ã€‚</p><hr><h4 id="AT-RT-ä¸å•Tokenæ–¹æ¡ˆçš„æ ¸å¿ƒåŒºåˆ«"><strong>AT&amp;RT ä¸å•Tokenæ–¹æ¡ˆçš„æ ¸å¿ƒåŒºåˆ«</strong></h4><p>AT&amp;RTæ–¹æ¡ˆä¸å•Tokenæ–¹æ¡ˆçš„åŒºåˆ«ï¼Œå¯ä»¥æ€»ç»“ä¸ºä¸€ä¸ªæ ¸å¿ƒç†å¿µï¼š<strong>æ§åˆ¶é£é™©çš„æš´éœ²é¢</strong>ã€‚</p><ol><li><p><strong>å•Tokenæ–¹æ¡ˆ</strong>ï¼š</p><ul><li>å•TokenåŒæ—¶æ‰¿æ‹…æˆæƒå’Œèµ„æºè®¿é—®åŠŸèƒ½ã€‚</li><li>ä¸€æ—¦æ³„æ¼ï¼Œæ¶æ„ç”¨æˆ·å¯ä»¥ç›´æ¥è®¿é—®èµ„æºï¼Œä¸”å¯èƒ½é•¿æ—¶é—´æœ‰æ•ˆã€‚</li><li>é€‚ç”¨åœºæ™¯ï¼šå°å‹åº”ç”¨ã€å†…ç½‘æœåŠ¡ã€å¯¹å®‰å…¨æ€§è¦æ±‚è¾ƒä½çš„ç³»ç»Ÿã€‚</li></ul></li><li><p><strong>AT&amp;RTæ–¹æ¡ˆ</strong>ï¼š</p><ul><li>å°†æˆæƒåŠŸèƒ½å‰¥ç¦»åˆ°Refresh Tokenï¼ŒAccess Tokenåˆ™ä¸“æ³¨äºèµ„æºè®¿é—®ã€‚</li><li><strong>å¥½å¤„</strong>ï¼š<ul><li>å¦‚æœAccess Tokenæ³„æ¼ï¼Œç”±äºå…¶çŸ­æ—¶æ•ˆæ€§ï¼Œæ”»å‡»è€…åªèƒ½åœ¨æœ‰é™æ—¶é—´å†…ä½¿ç”¨ã€‚</li><li>å³ä½¿Refresh Tokenæ³„æ¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»¤ç‰Œè½®æ¢æœºåˆ¶ï¼ˆToken Rotationï¼‰é™ä½é£é™©ã€‚</li></ul></li><li>é€‚ç”¨åœºæ™¯ï¼šå®‰å…¨æ•æ„Ÿã€ç”¨æˆ·è®¿é—®é¢‘ç¹çš„åœºæ™¯ï¼Œå¦‚é“¶è¡Œã€ç¤¾äº¤åª’ä½“ã€äº‘æœåŠ¡ç­‰ã€‚</li></ul></li></ol><hr><h4 id="è®¾è®¡Tokenæ—¶éœ€è¦è€ƒè™‘çš„å…³é”®é—®é¢˜"><strong>è®¾è®¡Tokenæ—¶éœ€è¦è€ƒè™‘çš„å…³é”®é—®é¢˜</strong></h4><p>åœ¨å®é™…ç³»ç»Ÿä¸­ï¼Œé€‰æ‹©å•Tokenè¿˜æ˜¯AT&amp;RTæ–¹æ¡ˆï¼Œå–å†³äºä»¥ä¸‹å‡ ä¸ªå› ç´ ï¼š</p><ol><li><p><strong>å®‰å…¨æ€§éœ€æ±‚</strong>ï¼š</p><ul><li>å¦‚æœç³»ç»Ÿä¸­æ¶‰åŠæ•æ„Ÿæ•°æ®æˆ–å­˜åœ¨è¾ƒé«˜çš„Tokenæ³„éœ²é£é™©ï¼ˆå¦‚å…¬ç½‘ç¯å¢ƒã€å¤šç»ˆç«¯æ¥å…¥ï¼‰ï¼Œæ¨èä½¿ç”¨AT&amp;RTæ–¹æ¡ˆã€‚</li><li>å•Tokenæ–¹æ¡ˆé€‚ç”¨äºé£é™©è¾ƒä½çš„åœºæ™¯ï¼Œå¦‚å¼€å‘æµ‹è¯•ç¯å¢ƒæˆ–ä¸æ¶‰åŠå…³é”®æ•°æ®çš„å†…éƒ¨æœåŠ¡ã€‚</li></ul></li><li><p><strong>ä½¿ç”¨é¢‘ç‡</strong>ï¼š</p><ul><li>é«˜é¢‘è®¿é—®çš„APIæ›´å€¾å‘äºAT&amp;RTæ–¹æ¡ˆï¼Œå› ä¸ºAccess Tokençš„çŸ­æ—¶æ•ˆæ€§å¯ä»¥æœ‰æ•ˆå‡å°‘æ½œåœ¨æ”»å‡»çª—å£ã€‚</li><li>å¦‚æœè®¿é—®é¢‘ç‡è¾ƒä½ï¼Œå•Tokenæ–¹æ¡ˆå¯èƒ½æ›´ç®€æ´é«˜æ•ˆã€‚</li></ul></li><li><p><strong>å¤æ‚åº¦ä¸æˆæœ¬</strong>ï¼š</p><ul><li>AT&amp;RTæ–¹æ¡ˆéœ€è¦ç»´æŠ¤å¤šç§ä»¤ç‰ŒçŠ¶æ€ï¼ˆå¦‚å¤±æ•ˆã€åˆ·æ–°ã€è½®æ¢ï¼‰ï¼Œå®ç°å¤æ‚åº¦è¾ƒé«˜ã€‚</li><li>å•Tokenæ–¹æ¡ˆå®ç°ç®€å•ï¼Œé€‚åˆä¸­å°å‹å›¢é˜Ÿæˆ–åˆåˆ›é¡¹ç›®ã€‚</li></ul></li><li><p><strong>Tokenæœ‰æ•ˆæœŸ</strong>ï¼š</p><ul><li>Access Tokené€šå¸¸è®¾ç½®ä¸ºå‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶çš„æœ‰æ•ˆæœŸï¼Œé™ä½æ³„æ¼é£é™©ã€‚</li><li>Refresh Tokençš„æœ‰æ•ˆæœŸåˆ™æ›´é•¿ï¼Œé€šå¸¸ä¸ºæ•°å¤©åˆ°æ•°æœˆã€‚</li></ul></li></ol><hr><h4 id="AT-RTæ–¹æ¡ˆçš„å®‰å…¨æœºåˆ¶"><strong>AT&amp;RTæ–¹æ¡ˆçš„å®‰å…¨æœºåˆ¶</strong></h4><p>ä¸ºäº†è¿›ä¸€æ­¥æé«˜å®‰å…¨æ€§ï¼ŒAT&amp;RTæ–¹æ¡ˆé€šå¸¸é…åˆä»¥ä¸‹æŠ€æœ¯ï¼š</p><ol><li><p><strong>ä»¤ç‰Œè½®æ¢ï¼ˆToken Rotationï¼‰</strong>ï¼š</p><ul><li>æ¯æ¬¡ä½¿ç”¨Refresh Tokenæ—¶ï¼Œè¿”å›æ–°çš„Refresh Tokenå¹¶ä½¿æ—§çš„å¤±æ•ˆã€‚</li><li>å³ä½¿Refresh Tokenè¢«çªƒå–ï¼Œä¹Ÿåªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œé™ä½æ”»å‡»é£é™©ã€‚</li></ul></li><li><p><strong>çŸ­æœŸæœ‰æ•ˆAccess Token</strong>ï¼š</p><ul><li>å°†Access Tokenæœ‰æ•ˆæœŸæ§åˆ¶åœ¨è¾ƒçŸ­æ—¶é—´å†…ï¼ˆå¦‚5åˆ†é’Ÿï¼‰ã€‚</li><li>å³ä¾¿è¢«çªƒå–ï¼Œæ”»å‡»çª—å£ä¹Ÿæä¸ºæœ‰é™ã€‚</li></ul></li><li><p><strong>è®¾å¤‡ç»‘å®šä¸IPé™åˆ¶</strong>ï¼š</p><ul><li>å°†Refresh Tokenç»‘å®šåˆ°ç‰¹å®šè®¾å¤‡æˆ–IPï¼Œé˜²æ­¢è·¨è®¾å¤‡æ»¥ç”¨ã€‚</li></ul></li><li><p><strong>å®‰å…¨å­˜å‚¨</strong>ï¼š</p><ul><li>å®¢æˆ·ç«¯åº”å¦¥å–„å­˜å‚¨Refresh Tokenï¼ˆå¦‚ä½¿ç”¨Secure Storageæˆ–HttpOnly Cookieï¼‰ã€‚</li></ul></li></ol><hr><h4 id="å®è·µä¸­çš„é€‰å‹å»ºè®®"><strong>å®è·µä¸­çš„é€‰å‹å»ºè®®</strong></h4><table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>æ¨èæ–¹æ¡ˆ</strong></th><th><strong>åŸå› </strong></th></tr></thead><tbody><tr><td>å†…ç½‘å¾®æœåŠ¡é€šä¿¡</td><td>å•Tokenæ–¹æ¡ˆ</td><td>å®‰å…¨é£é™©è¾ƒä½ï¼Œå®ç°ç®€å•ï¼Œä¸”å†…éƒ¨ç¯å¢ƒå¯¹Tokenæ³„æ¼å®¹å¿åº¦é«˜ã€‚</td></tr><tr><td>ç§»åŠ¨ç«¯åº”ç”¨ï¼ˆç”µå•†ã€ç¤¾äº¤åª’ä½“ç­‰ï¼‰</td><td>AT&amp;RTæ–¹æ¡ˆ</td><td>éœ€è¦æ”¯æŒå¤šç»ˆç«¯ã€é¢‘ç¹è®¿é—®èµ„æºä¸”å¯¹å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜ã€‚</td></tr><tr><td>ä½é¢‘åå°ç®¡ç†ç³»ç»Ÿ</td><td>å•Tokenæ–¹æ¡ˆ</td><td>åå°ç³»ç»Ÿæ“ä½œé¢‘ç‡ä½ï¼Œå¯é€šè¿‡ä¸¥æ ¼æ§åˆ¶ç”¨æˆ·è¡Œä¸ºé™ä½é£é™©ã€‚</td></tr><tr><td>é«˜æ•æ„Ÿæ€§ä¸šåŠ¡ï¼ˆé“¶è¡Œã€é‡‘èç­‰ï¼‰</td><td>AT&amp;RTæ–¹æ¡ˆ+Tokenè½®æ¢</td><td>æ¶‰åŠæ•æ„Ÿæ•°æ®ï¼Œéœ€æœ€å¤§é™åº¦å‡å°‘Tokenæ³„æ¼åçš„æ”»å‡»å¯èƒ½æ€§ã€‚</td></tr></tbody></table><hr><h2 id="æ€»ç»“"><strong>æ€»ç»“</strong></h2><p>AT&amp;RTæ–¹æ¡ˆçš„æ ¸å¿ƒåœ¨äºç”¨åŒTokenæœºåˆ¶åˆ†éš”é«˜é¢‘å’Œé«˜å±æ“ä½œï¼Œä»è€Œé™ä½é£é™©çš„æš´éœ²é¢ã€‚è€Œå•Tokenæ–¹æ¡ˆåˆ™ä»¥ç®€æ´æ€§å–èƒœï¼Œé€‚åˆå¯¹å®‰å…¨æ€§è¦æ±‚è¾ƒä½çš„åœºæ™¯ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¼€å‘è€…éœ€è¦æ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹ã€ç”¨æˆ·è¡Œä¸ºæ¨¡å¼ä»¥åŠç³»ç»Ÿå¤æ‚åº¦ï¼Œé€‰æ‹©æœ€åˆé€‚çš„æ–¹æ¡ˆã€‚</p><p><strong>Tokenè®¾è®¡æ²¡æœ‰â€œé“¶å¼¹â€ï¼Œä½†å¯¹é£é™©çš„æ­£ç¡®ç†è§£ï¼Œæ‰æ˜¯é«˜æ•ˆä¸å®‰å…¨å¹¶è¡Œçš„åŸºçŸ³ã€‚</strong></p><h2 id="èƒŒæ™¯çŸ¥è¯†">èƒŒæ™¯çŸ¥è¯†</h2><p>åœ¨èº«ä»½éªŒè¯å’Œæˆæƒé¢†åŸŸï¼Œâ€œæœ‰çŠ¶æ€â€ï¼ˆstatefulï¼‰å’Œ"æ— çŠ¶æ€"ï¼ˆstatelessï¼‰é€šå¸¸ç”¨æ¥æè¿°ç³»ç»Ÿå¤„ç†ç”¨æˆ·è®¤è¯ä¿¡æ¯çš„æ–¹å¼ã€‚</p><p>æœ‰çŠ¶æ€ï¼ˆStatefulï¼‰ï¼š</p><p>æœ‰çŠ¶æ€çš„è®¤è¯ç³»ç»Ÿåœ¨æœåŠ¡å™¨ç«¯ä¼šç»´æŠ¤ç”¨æˆ·çš„ä¼šè¯çŠ¶æ€ä¿¡æ¯ã€‚è¿™æ„å‘³ç€æœåŠ¡å™¨ç«¯ä¼šå­˜å‚¨å…³äºç”¨æˆ·è®¤è¯çŠ¶æ€çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€ä¼šè¯ä¿¡æ¯ã€æƒé™ç­‰ã€‚<br>åœ¨æœ‰çŠ¶æ€çš„è®¤è¯ç³»ç»Ÿä¸­ï¼ŒæœåŠ¡å™¨ç«¯åœ¨å¤„ç†ç”¨æˆ·è¯·æ±‚æ—¶ï¼Œä¼šæ ¹æ®å­˜å‚¨çš„ä¼šè¯çŠ¶æ€æ¥éªŒè¯ç”¨æˆ·çš„èº«ä»½å’Œæƒé™ï¼Œé€šå¸¸ä¼šä½¿ç”¨ä¼šè¯æ ‡è¯†ï¼ˆå¦‚ Session IDï¼‰æ¥è¯†åˆ«ç”¨æˆ·çš„ä¼šè¯çŠ¶æ€ã€‚<br>å…¸å‹çš„ä¾‹å­åŒ…æ‹¬ä¼ ç»Ÿçš„åŸºäºä¼šè¯çš„è®¤è¯æ–¹å¼ï¼Œç”¨æˆ·åœ¨ç™»å½•åä¼šè·å¾—ä¸€ä¸ªä¼šè¯æ ‡è¯†ï¼ˆSession IDï¼‰ï¼ŒæœåŠ¡å™¨ç«¯ä¼šåœ¨ä¼šè¯ç®¡ç†ä¸­ä¿æŒç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Œå¹¶åœ¨åç»­è¯·æ±‚ä¸­ä½¿ç”¨è¯¥ä¼šè¯æ ‡è¯†æ¥éªŒè¯ç”¨æˆ·çš„èº«ä»½ã€‚</p><p>ä½¿ç”¨æœ‰çŠ¶æ€ä»¤ç‰Œï¼ˆStateful Tokenï¼‰åœ¨ç‰¹å®šåœºæ™¯ä¸­å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦æœåŠ¡å™¨ç«¯ç®¡ç†ä¼šè¯çŠ¶æ€å’Œå³æ—¶æ§åˆ¶ä¼šè¯ç”Ÿå‘½å‘¨æœŸçš„æƒ…å†µä¸‹ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›é€‚åˆä½¿ç”¨æœ‰çŠ¶æ€ä»¤ç‰Œçš„åœºæ™¯ï¼š</p><h3 id="1-é«˜åº¦å®‰å…¨æ€§è¦æ±‚çš„åº”ç”¨">1. <strong>é«˜åº¦å®‰å…¨æ€§è¦æ±‚çš„åº”ç”¨</strong></h3><ul><li><strong>å³æ—¶ä¼šè¯æ’¤é”€</strong>ï¼šåœ¨é«˜å®‰å…¨æ€§åº”ç”¨ä¸­ï¼Œä¾‹å¦‚é‡‘èæœåŠ¡ã€åœ¨çº¿æ”¯ä»˜å’ŒåŒ»ç–—ç³»ç»Ÿï¼Œå¯èƒ½éœ€è¦ç«‹å³æ’¤é”€æŸäº›ä¼šè¯ã€‚æœåŠ¡å™¨ç«¯å­˜å‚¨ä¼šè¯çŠ¶æ€ï¼Œå¯ä»¥åœ¨éœ€è¦æ—¶ç«‹å³æ— æ•ˆåŒ–ä»¤ç‰Œã€‚</li><li><strong>æ•æ„Ÿæ“ä½œ</strong>ï¼šå¯¹äºæ¶‰åŠæ•æ„Ÿæ•°æ®å’Œæ“ä½œçš„ç³»ç»Ÿï¼ŒæœåŠ¡å™¨ç«¯ç®¡ç†å¯ä»¥æä¾›é¢å¤–çš„æ§åˆ¶å’Œå®¡è®¡èƒ½åŠ›ã€‚</li></ul><h3 id="2-å•ä¸€æœåŠ¡å™¨æˆ–å…±äº«å­˜å‚¨çš„ç³»ç»Ÿ">2. <strong>å•ä¸€æœåŠ¡å™¨æˆ–å…±äº«å­˜å‚¨çš„ç³»ç»Ÿ</strong></h3><ul><li><strong>é›†ä¸­å¼ä¼šè¯ç®¡ç†</strong>ï¼šåœ¨å•æœåŠ¡å™¨åº”ç”¨æˆ–ä½¿ç”¨é›†ä¸­å¼å…±äº«å­˜å‚¨çš„ç¯å¢ƒä¸­ï¼ŒæœåŠ¡å™¨ç«¯å­˜å‚¨å’Œç®¡ç†ä¼šè¯çŠ¶æ€è¾ƒä¸ºç®€å•å’Œé«˜æ•ˆã€‚</li><li><strong>å°è§„æ¨¡ç³»ç»Ÿ</strong>ï¼šå¯¹äºå°è§„æ¨¡ç³»ç»Ÿæˆ–è´Ÿè½½è¾ƒä½çš„ç³»ç»Ÿï¼Œç®¡ç†ä¼šè¯çŠ¶æ€çš„å¼€é”€ç›¸å¯¹è¾ƒä½ã€‚</li></ul><h3 id="3-éœ€è¦å¤æ‚çš„ä¼šè¯æ§åˆ¶-éœ€é•¿æ—¶é—´ä¼šè¯ç®¡ç†çš„åº”ç”¨">3. <strong>éœ€è¦å¤æ‚çš„ä¼šè¯æ§åˆ¶,éœ€é•¿æ—¶é—´ä¼šè¯ç®¡ç†çš„åº”ç”¨</strong></h3><ul><li><strong>ç»†ç²’åº¦æƒé™æ§åˆ¶</strong>ï¼šæœåŠ¡å™¨ç«¯å¯ä»¥æ ¹æ®ç”¨æˆ·ä¼šè¯çŠ¶æ€è¿›è¡Œç»†ç²’åº¦çš„æƒé™æ§åˆ¶ï¼Œä¾‹å¦‚ä¸´æ—¶æå‡æƒé™ã€åŸºäºæ´»åŠ¨æ—¶é—´æ®µçš„æƒé™æ§åˆ¶ç­‰ã€‚</li><li><strong>åŠ¨æ€ä¼šè¯å±æ€§</strong>ï¼šåœ¨ä¼šè¯æœŸé—´å¯èƒ½éœ€è¦åŠ¨æ€è°ƒæ•´ç”¨æˆ·çš„ä¼šè¯å±æ€§ï¼ˆå¦‚è§’è‰²ã€æƒé™ç­‰ï¼‰ï¼ŒæœåŠ¡å™¨ç«¯ç®¡ç†æ›´åŠ çµæ´»ã€‚</li><li><strong>é•¿æœŸä¼šè¯</strong>ï¼šåœ¨éœ€è¦é•¿æ—¶é—´ä¿æŒç”¨æˆ·ä¼šè¯çš„åº”ç”¨ä¸­ï¼Œä¾‹å¦‚ä¼ä¸šå†…éƒ¨åº”ç”¨æˆ–éœ€è¦é¢‘ç¹äº¤äº’çš„åº”ç”¨ï¼ŒæœåŠ¡å™¨ç«¯å¯ä»¥æ›´å¥½åœ°ç®¡ç†å’Œç»´æŠ¤ä¼šè¯çŠ¶æ€ã€‚</li><li><strong>ä¼šè¯æ¢å¤</strong>ï¼šæ”¯æŒä¼šè¯æ¢å¤ï¼Œç”¨æˆ·å¯ä»¥åœ¨ä¸åŒè®¾å¤‡å’Œä¼šè¯ä¸­æ— ç¼åˆ‡æ¢ã€‚</li></ul><h3 id="4-ä¸¥æ ¼çš„ä¼šè¯ä¸€è‡´æ€§éœ€æ±‚-ä¸éœ€è¦è·¨åŸŸ">4. <strong>ä¸¥æ ¼çš„ä¼šè¯ä¸€è‡´æ€§éœ€æ±‚,ä¸éœ€è¦è·¨åŸŸ</strong></h3><ul><li><strong>å¼ºä¸€è‡´æ€§</strong>ï¼šéœ€è¦ç¡®ä¿ä¼šè¯çŠ¶æ€çš„ä¸€è‡´æ€§ï¼Œå¦‚ç”µå•†è´­ç‰©è½¦ã€å¤šäººåä½œå·¥å…·ç­‰ï¼ŒæœåŠ¡å™¨ç«¯å¯ä»¥æ›´å¥½åœ°ä¿è¯ä¸€è‡´æ€§å’Œæ•°æ®åŒæ­¥ã€‚</li><li><strong>å†…éƒ¨ç³»ç»Ÿ</strong>ï¼šä¸»è¦ç”¨äºå†…éƒ¨ç³»ç»Ÿï¼Œä¸éœ€è¦è·¨åŸŸã€è·¨å¹³å°è®¿é—®ï¼Œè¿™ç±»ç³»ç»Ÿæ›´é€‚åˆä½¿ç”¨æœ‰çŠ¶æ€ä»¤ç‰Œã€‚</li></ul><p>æ— çŠ¶æ€ï¼ˆStatelessï¼‰ï¼š</p><p>æ— çŠ¶æ€çš„è®¤è¯ç³»ç»Ÿä¸ä¼šåœ¨æœåŠ¡å™¨ç«¯ç»´æŠ¤ç”¨æˆ·çš„ä¼šè¯çŠ¶æ€ä¿¡æ¯ã€‚æ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼ŒæœåŠ¡å™¨ä¸ä¼šå­˜å‚¨ä»»ä½•å…³äºç”¨æˆ·çš„ä¼šè¯çŠ¶æ€ã€‚<br>åœ¨æ— çŠ¶æ€çš„è®¤è¯ç³»ç»Ÿä¸­ï¼ŒæœåŠ¡å™¨ç«¯ä¸éœ€è¦å­˜å‚¨ä»»ä½•ä¼šè¯çŠ¶æ€ï¼Œæ‰€æœ‰çš„è®¤è¯ä¿¡æ¯éƒ½è¢«åŒ…å«åœ¨æ¯ä¸ªè¯·æ±‚ä¸­ï¼Œé€šå¸¸æ˜¯åœ¨è¯·æ±‚çš„å¤´éƒ¨ï¼ˆHeaderï¼‰æˆ–å‚æ•°ä¸­ã€‚<br>å…¸å‹çš„ä¾‹å­åŒ…æ‹¬åŸºäºä»¤ç‰Œï¼ˆTokenï¼‰çš„è®¤è¯æ–¹å¼ï¼Œæ¯”å¦‚ JSON Web Tokenï¼ˆJWTï¼‰ã€‚åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œç”¨æˆ·åœ¨ç™»å½•åä¼šè·å¾—ä¸€ä¸ªä»¤ç‰Œï¼ˆTokenï¼‰ï¼ŒæœåŠ¡å™¨ç«¯ä¼šä½¿ç”¨ä»¤ç‰Œä¸­çš„ä¿¡æ¯æ¥éªŒè¯ç”¨æˆ·çš„èº«ä»½å’Œæƒé™ï¼Œè€Œä¸éœ€è¦å­˜å‚¨ä»»ä½•ä¼šè¯çŠ¶æ€ã€‚</p><p>å³ä½¿ä½¿ç”¨ JWT è¿›è¡Œç”¨æˆ·è®¤è¯ï¼Œåç«¯æ•°æ®åº“ä»ç„¶éœ€è¦å­˜å‚¨ç”¨æˆ·çš„è´¦æˆ·å’Œå¯†ç ä¿¡æ¯ã€‚è¿™æ˜¯å› ä¸ºï¼š</p><ul><li><strong>ç”¨æˆ·æ³¨å†Œå’Œç™»å½•</strong>ï¼šåœ¨ç”¨æˆ·æ³¨å†Œæ—¶ï¼Œéœ€è¦å­˜å‚¨ä»–ä»¬çš„è´¦æˆ·ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·åã€é‚®ç®±ï¼‰å’Œå¯†ç ï¼ˆé€šå¸¸æ˜¯ç»è¿‡å“ˆå¸Œå¤„ç†çš„å¯†ç ï¼‰ã€‚</li><li><strong>èº«ä»½éªŒè¯</strong>ï¼šåœ¨ç”¨æˆ·ç™»å½•æ—¶ï¼Œåç«¯éœ€è¦éªŒè¯ç”¨æˆ·è¾“å…¥çš„å¯†ç æ˜¯å¦æ­£ç¡®ï¼Œè¿™éœ€è¦ä¸æ•°æ®åº“ä¸­å­˜å‚¨çš„å¯†ç è¿›è¡Œæ¯”å¯¹ã€‚</li></ul><p>JWT æ˜¯åœ¨ç”¨æˆ·æˆåŠŸç™»å½•åç”Ÿæˆçš„ä»¤ç‰Œï¼Œé€šå¸¸åŒ…å«ç”¨æˆ·çš„èº«ä»½ä¿¡æ¯å’Œæƒé™ä¿¡æ¯ã€‚å…¶ç”Ÿæˆå’Œä½¿ç”¨è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li><strong>ç”¨æˆ·ç™»å½•</strong>ï¼šç”¨æˆ·æäº¤ç”¨æˆ·åå’Œå¯†ç ã€‚</li><li><strong>èº«ä»½éªŒè¯</strong>ï¼šæœåŠ¡å™¨éªŒè¯ç”¨æˆ·åå’Œå¯†ç ã€‚å¦‚æœéªŒè¯æˆåŠŸï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ª JWTï¼ŒåŒ…å«ç”¨æˆ·çš„èº«ä»½ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·IDï¼‰å’Œå…¶ä»–å¿…è¦çš„å£°æ˜ï¼ˆclaimsï¼‰ã€‚</li><li><strong>è¿”å› JWT</strong>ï¼šæœåŠ¡å™¨å°†ç”Ÿæˆçš„ JWT è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li><li><strong>åç»­è¯·æ±‚</strong>ï¼šå®¢æˆ·ç«¯åœ¨åç»­è¯·æ±‚ä¸­æºå¸¦ JWTï¼ŒæœåŠ¡å™¨é€šè¿‡éªŒè¯ JWT çš„ç­¾åå’Œæœ‰æ•ˆæœŸæ¥ç¡®è®¤ç”¨æˆ·èº«ä»½ã€‚</li></ul><p>JWT åœ¨ç”¨æˆ·è®¤è¯å’Œæˆæƒæ–¹é¢å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><ul><li><p><strong>æ— çŠ¶æ€æ€§</strong>ï¼šæœåŠ¡å™¨ä¸éœ€è¦å­˜å‚¨ç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½å¯ä»¥é€šè¿‡éªŒè¯ JWT æ¥ç¡®è®¤ç”¨æˆ·èº«ä»½ã€‚</p></li><li><p><strong>æ‰©å±•æ€§</strong>ï¼šé€‚ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿå’Œå¾®æœåŠ¡æ¶æ„ï¼Œå› ä¸ºä»¤ç‰Œæ˜¯è‡ªåŒ…å«çš„ï¼Œä¸éœ€è¦å…±äº«ä¼šè¯çŠ¶æ€ã€‚</p></li><li><p><strong>å®‰å…¨æ€§</strong>ï¼šé€šè¿‡åŠ å¯†å’Œç­¾åï¼Œç¡®ä¿ä»¤ç‰Œçš„å®Œæ•´æ€§å’Œå¯ä¿¡åº¦ã€‚<br><strong>Cookie-Based Session</strong>ï¼š</p></li><li><p><strong>ä¼˜ç‚¹</strong>ï¼šç®€å•ã€å®‰å…¨æ€§é«˜ï¼ˆæœåŠ¡å™¨ç«¯å­˜å‚¨ï¼‰ã€‚</p></li><li><p><strong>ç¼ºç‚¹</strong>ï¼šæ‰©å±•æ€§å·®ï¼ŒæœåŠ¡å™¨å‹åŠ›å¤§ã€‚</p></li></ul><p><strong>Token-Based Authentication</strong>ï¼š</p><ul><li><strong>ä¼˜ç‚¹</strong>ï¼šæ— çŠ¶æ€ã€æ‰©å±•æ€§å¥½ã€‚</li><li><strong>ç¼ºç‚¹</strong>ï¼šå®¢æˆ·ç«¯å­˜å‚¨å®‰å…¨æ€§è¾ƒå·®ã€‚</li></ul><p><strong>JWT</strong>ï¼š</p><ul><li><strong>ä¼˜ç‚¹</strong>ï¼šæ— çŠ¶æ€ã€è‡ªåŒ…å«ã€é€‚åˆåˆ†å¸ƒå¼ç³»ç»Ÿã€‚</li><li><strong>ç¼ºç‚¹</strong>ï¼šå®‰å…¨æ€§ä¾èµ–äºå®¢æˆ·ç«¯å­˜å‚¨å’Œä»¤ç‰Œç­¾åã€‚</li></ul><p><strong>Cookie-Based Session</strong>ï¼šé€‚ç”¨äºç®€å•çš„ Web åº”ç”¨ï¼Œç‰¹åˆ«æ˜¯å•æœåŠ¡å™¨æˆ–å°è§„æ¨¡åº”ç”¨ã€‚</p><p><strong>Token-Based Authentication</strong>ï¼šé€‚ç”¨äºéœ€è¦è·¨å¤šä¸ªå®¢æˆ·ç«¯ï¼ˆå¦‚ç§»åŠ¨ç«¯ã€å•é¡µåº”ç”¨ï¼‰çš„åº”ç”¨ã€‚</p><p><strong>JWT</strong>ï¼šé€‚ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿå’Œå¾®æœåŠ¡æ¶æ„ï¼Œæä¾›æ›´é«˜çš„æ‰©å±•æ€§å’Œçµæ´»æ€§ã€‚</p><p>å¦‚æœæ˜¯åœ¨ä¸€ä¸ªåªæœ‰å¸å·è·Ÿå¯†ç çš„ä¸–ç•Œä¸Šï¼Œæˆ‘å°±å¿…é¡»è¦æŠŠæˆ‘çš„ Google å¸å·å’Œå¯†ç å‘Šè¯‰ç»™è¿™ç¬¬ä¸‰æ–¹æœåŠ¡è¡Œäº‹å†æœåŠ¡ï¼Œå®ƒæ‰æœ‰åŠæ³•å–å¾—è¿™äº›èµ„è®¯ã€‚ä½†å¦‚æœæˆ‘æŠŠå¸å·å¯†ç å‘Šè¯‰äº†ç¬¬ä¸‰æ–¹ï¼Œå®ƒå¯èƒ½å°±å¯ä»¥åœ¨æš—åœ°é‡Œçªƒå–è¡Œäº‹å†ä»¥å¤–çš„èµ„è®¯ï¼Œåƒæ˜¯åœ¨ Gmail é‡Œçš„æœºå¯†èµ„è®¯ã€‚è¿™æ—¶å€™å°±å‡ºç°äº†ä½¿ç”¨ <strong>Access Token æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„åè®®ï¼ŒOAuth 2.0ã€‚</strong></p><p>åœ¨ OAuth 2.0 ä¸­ï¼Œä½¿ç”¨çŸ­æœŸçš„ Access Token æœ‰å‡ ä¸ªä¸»è¦çš„ä¼˜åŠ¿å’ŒåŸå› ï¼š</p><ol><li><strong>å®‰å…¨æ€§ï¼š</strong> çŸ­æœŸçš„ Access Token æœ‰æ•ˆæœŸè¾ƒçŸ­ï¼Œå¦‚æœè¢«ç›—æˆ–æ³„éœ²ï¼Œæ”»å‡»è€…å¯åˆ©ç”¨çš„æ—¶é—´çª—å£è¾ƒå°ï¼Œå‡å°‘äº†è¢«æ»¥ç”¨çš„é£é™©ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œé•¿æœŸæœ‰æ•ˆçš„ Token æ›´å®¹æ˜“æˆä¸ºæ”»å‡»è€…çš„æ”»å‡»ç›®æ ‡ã€‚</li><li>å¯æ§åˆ¶èµ„æºçš„è®¿é—®æƒé™ï¼ˆæœ€å°æƒé™åŸåˆ™</li><li><strong>å¼ºåˆ¶åˆ·æ–°ï¼š</strong> é€šè¿‡è®¾å®šè¾ƒçŸ­çš„æœ‰æ•ˆæœŸï¼Œå¼ºåˆ¶å®¢æˆ·ç«¯å®šæœŸåˆ·æ–° Access Tokenã€‚è¿™æœ‰åŠ©äºä¿æŒä»¤ç‰Œçš„æœ‰æ•ˆæ€§å’Œå®‰å…¨æ€§ï¼Œå¹¶ä¸”å¯ä»¥ä¿ƒä½¿å®¢æˆ·ç«¯ä¸è®¤è¯æœåŠ¡å™¨äº¤äº’ï¼Œæ›´æ–°å¹¶é‡æ–°æˆæƒè®¿é—®æƒé™ã€‚</li><li><strong>å¯æ’¤é”€æ€§:</strong>Â æ‚¨å¯ä»¥éšæ—¶æ’¤é”€ç¬¬ä¸‰æ–¹æœåŠ¡çš„è®¿é—®æƒé™ã€‚</li></ol><p>ä½†åŒæ—¶ä¹Ÿè¦æƒè¡¡å®‰å…¨æ€§å’Œæ•ˆç‡ã€‚ Access Tokenåº”è¯¥ç»´æŒåœ¨è¾ƒçŸ­æœ‰æ•ˆæœŸï¼Œ<strong>è¿‡é•¿ä¸å®‰å…¨ï¼Œè¿‡çŸ­ä¹Ÿä¼šå½±å“ç”¨æˆ·ä½“éªŒ</strong>ï¼Œå› ä¸ºé¢‘ç¹å»åˆ·æ–°å¸¦æ¥æ²¡æœ‰å¿…è¦çš„ç½‘ç»œè¯·æ±‚ã€‚å¯ä»¥å‚è€ƒæˆ‘ä»¬å¸¸å¸¸åœ¨æŸäº›ç½‘ç«™åœæ­¢æ“ä½œä¸€æ®µæ—¶é—´ä¹‹åå°±ä¼šæ‰çº¿ï¼Œè¿™ä¸ªæ—¶é—´æ˜¯Refresh Tokençš„æœ‰æ•ˆæœŸï¼ŒAccess Tokenä¸åº”é•¿è¿‡è¿™ä¸ªæ—¶é—´ã€‚</p><p>Refresh Tokençš„æœ‰æ•ˆæœŸå°±æ˜¯å…è®¸ç”¨æˆ·åœ¨å¤šä¹…æ—¶é—´å†…ä¸ç”¨é‡æ–°ç™»å½•çš„æ—¶é—´ï¼Œå¯ä»¥å¾ˆé•¿ï¼Œè§†ä¸šåŠ¡è€Œå®šã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨æŸäº›APPçš„æ—¶å€™ï¼Œå³ä½¿ä¸€ä¸ªæœˆæ²¡æœ‰å¼€è¿‡ä¹Ÿæ˜¯ç™»å½•çŠ¶æ€çš„ï¼Œè¿™6yå°±æ˜¯Refresh Tokenå†³å®šçš„ã€‚æˆæƒæœåŠ¡åœ¨æ¥åˆ°Refresh Tokençš„æ—¶å€™è¿˜è¦è¿›ä¸€æ­¥åšå®¢æˆ·ç«¯çš„éªŒè¯ï¼Œå°½å¯èƒ½æ’é™¤ç›—ç”¨çš„æƒ…å†µã€‚</p><p>A refresh token can help you balance security with usability. Since refresh tokens are typically longer-lived, you can use themÂ <strong>to request new access tokens after the shorter-lived access tokens expire</strong>.</p><p><strong>Itâ€™s a common practice for some JWT frameworks or authentication systems to use a combination of JWT access tokens and opaque refresh tokens. This hybrid approach aims to leverage the advantages of both token types while mitigating their respective drawbacks.</strong></p><p><strong>é€šè¿‡å¼•å…¥ refresh tokenï¼Œç³»ç»Ÿè®¾è®¡è€…å®ç°äº†ä¸€ç§æ··åˆæ¨¡å‹ï¼šä¿æŒäº†å¤§éƒ¨åˆ†è¯·æ±‚çš„æ— çŠ¶æ€æ€§ï¼ˆé€šè¿‡ JWTï¼‰ï¼ŒåŒæ—¶é€šè¿‡ refresh token å®ç°å¿…è¦çš„æœ‰çŠ¶æ€ç®¡ç†ï¼ˆå¦‚ token çš„æ›´æ–°å’Œæ’¤é”€ï¼‰ã€‚è¿™ç§æ–¹æ³•æœ‰æ•ˆåœ°åœ¨ç”¨æˆ·ä½“éªŒã€å®‰å…¨æ€§å’Œç³»ç»Ÿæ€§èƒ½ä¹‹é—´å–å¾—äº†å¹³è¡¡ã€‚<br>ä½ çš„æ€»ç»“ç¡®å®å¾ˆå¥½åœ°è§£é‡Šäº†ä¸ºä»€ä¹ˆåœ¨ç°ä»£æ¶æ„ä¸­ï¼Œå°½ç®¡è¿½æ±‚æ— çŠ¶æ€ï¼ˆstatelessï¼‰</strong>ï¼Œä½†è¿˜æ˜¯éœ€è¦ä¸€äº›æœ‰çŠ¶æ€ï¼ˆstatefulï¼‰å…ƒç´ æ¥è§£å†³å®é™…é—®é¢˜ã€‚è¿™æ ·çš„è®¾è®¡æ—¢ä¿æŒäº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¼˜åŠ¿ï¼Œåˆæä¾›äº†å¿…è¦çš„å®‰å…¨æ§åˆ¶å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–ã€‚</p><p>æ‰€æœ‰tokenåº”è¯¥ä¿ç®¡åœ¨privateçš„åœ°æ–¹ï¼Œä¹Ÿå°±æ˜¯åªèƒ½å®¢æˆ·ç«¯è‡ªå·±ä½¿ç”¨ï¼Œæ‰€æœ‰tokenéƒ½åº”è¯¥åœ¨<a href="https://link.juejin.cn/?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E5%2582%25B3%25E8%25BC%25B8%25E5%25B1%25A4%25E5%25AE%2589%25E5%2585%25A8%25E6%2580%25A7%25E5%258D%2594%25E5%25AE%259A%23TLS_1.3">TLS</a>ä¿¡é“ä¸‹å‘é€ï¼ˆæ¯”å¦‚HTTPSï¼‰ã€‚</p><p>In an SSO/Auth system, the token you design should store information essential for secure and efficient authentication and authorization. Hereâ€™s a breakdown of the key information that should be included in your token:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">v.Set("scope", "iauth_token")</span><br><span class="line">  v.Set("response_type", "code")</span><br><span class="line">  v.Set("client_id", testService.ServiceID)</span><br><span class="line">  v.Set("state", uuid.NewString())</span><br><span class="line">  v.Set("redirect_uri", "https://test.hotstar.com:9999/callback")</span><br><span class="line">  tokenClaims := &amp;iauth.TokenClaims{}</span><br><span class="line">    parser := jwt.Parser{}</span><br><span class="line">    _, _, err = parser.ParseUnverified(result.AccessToken, tokenClaims)</span><br><span class="line">    assert.Nil(t, err)</span><br><span class="line">    assert.Equal(t, tokenClaims.SubjectID, testUserId)</span><br><span class="line">    assert.Equal(t, tokenClaims.ExpiresAt, int64(result.ExpiresAt))</span><br><span class="line">    assert.Equal(t, tokenClaims.ExpiresAt-12*3600-2, tokenClaims.IssuedAt) //we set 2 second offset in issueAt</span><br><span class="line">    assert.True(t, tokenClaims.IssuedAt == tokenClaims.NotBefore)</span><br><span class="line">    assert.NotNil(t, tokenClaims.Id)</span><br></pre></td></tr></table></figure><p><strong>Essential Information:</strong></p><ul><li><strong>User Identifier (UID):</strong>Â A unique identifier for the user, typically a numerical ID. This is crucial for identifying the user associated with the token.</li><li><strong>Issuer (iss):</strong>Â Identifies the system that issued the token. This helps verify the tokenâ€™s origin and prevent forgery.</li><li><strong>Audience (aud):</strong>Â Specifies the intended recipient or service for the token. This ensures the token is used only by the intended service.</li><li><strong>Expiration Time (exp):</strong>Â A timestamp indicating when the token expires. This limits the tokenâ€™s validity and reduces the risk of unauthorized access if compromised.</li><li><strong>Issued At Time (iat):</strong>Â A timestamp indicating when the token was issued. This helps track token age and detect potential issues.</li><li><strong>Token Type (typ):</strong>Â Specifies the type of token being used (e.g., JWT, opaque token). This helps the receiving service correctly handle the token.</li></ul><p><strong>Optional but Recommended Information:</strong></p><ul><li><strong>Scope (scp):</strong>Â Defines the permissions granted to the token holder. This allows for fine-grained control over what resources the user can access.</li><li><strong>Nonce (jti):</strong>Â A unique identifier for the token, preventing replay attacks where a stolen token is used multiple times.</li><li><strong>Session ID:</strong>Â A unique identifier for the userâ€™s session. This allows for session management and revocation.</li><li><strong>User Roles/Groups:</strong>Â Information about the userâ€™s roles or groups within the system. This can be used for authorization decisions.</li><li><strong>Refresh Token ID:</strong>Â If using a refresh token strategy, this identifies the associated refresh token for seamless token renewal.</li></ul><p><strong>Considerations:</strong></p><ul><li><strong>Security:</strong>Â Prioritize security by using strong encryption algorithms and proper key management for token generation and validation.</li><li><strong>Performance:</strong>Â Balance the amount of information stored in the token with performance considerations. Larger tokens can impact performance.</li><li><strong>Privacy:</strong>Â Only include necessary information to minimize the risk of exposing sensitive user data.</li><li><strong>Token Format:</strong>Â Choose a suitable token format like JWT (JSON Web Token) for its standardized structure and ease of parsing.</li></ul><p><strong>å‚è€ƒæ–‡çŒ®ä¸æ•°æ®æ¥æº</strong>ï¼š</p><ul><li><a href="https://tools.ietf.org/html/rfc7519">RFC 7519 - JSON Web Token (JWT)</a></li><li><a href="https://auth0.com/blog/jwt-best-practices/">JWT Best Practices</a></li><li><a href="https://cheatsheetseries.owasp.org/cheatsheets/JSON_Web_Token_for_Java.html">OWASP JWT Cheat Sheet</a></li><li><a href="https://pages.nist.gov/800-63-3/">NIST Guidelines on Authentication</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;è®¤è¯ç³»ç»Ÿçš„è®¾è®¡ä¸é€‰å‹ï¼šJWTåˆ°é•¿çŸ­ç”Ÿå‘½å‘¨æœŸçš„Tokenç®¡ç†&quot;&gt;è®¤è¯ç³»ç»Ÿçš„è®¾è®¡ä¸é€‰å‹ï¼šJWTåˆ°é•¿çŸ­ç”Ÿå‘½å‘¨æœŸçš„Tokenç®¡ç†&lt;/h3&gt;
&lt;p&gt;å¤§çº¦åœ¨ 2010 å¹´ï¼Œå¤§å¤šæ•°WebæœåŠ¡å™¨éƒ½ä½¿ç”¨sessionæ¥å­˜å‚¨çŠ¶æ€ä¿¡æ¯ï¼Œç”¨æˆ·å°†æ‰§è¡Œç”¨æˆ·/å¯†ç ç™»å½•ï¼Œåç«¯å°†ä¸ºè¯¥session</summary>
      
    
    
    
    <category term="è®¡ç®—æœºå·¥ç¨‹" scheme="https://stan370.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%B7%A5%E7%A8%8B/"/>
    
    
    <category term="è®¡ç®—æœºåŸºç¡€" scheme="https://stan370.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    <category term="åˆ†å¸ƒå¼ç³»ç»Ÿ" scheme="https://stan370.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="ç½‘ç»œå®‰å…¨" scheme="https://stan370.github.io/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>ç½‘ç»œå®‰å…¨å®è·µ</title>
    <link href="https://stan370.github.io/2025/01/06/security/"/>
    <id>https://stan370.github.io/2025/01/06/security/</id>
    <published>2025-01-06T14:43:32.000Z</published>
    <updated>2025-04-02T04:40:06.232Z</updated>
    
    <content type="html"><![CDATA[<h1>Web Security</h1><p>åœ¨å¹¿é˜”çš„äº’è”ç½‘é¢†åŸŸï¼Œä¿¡æ¯æºæºä¸æ–­ï¼Œäº¤æ˜“ç¬æ¯ä¸‡å˜ï¼Œä¸€åœºæ— å£°çš„æˆ˜æ–—æ­£åœ¨ä¸Šæ¼”ã€‚ç½‘ç»œå¨èƒæ½œä¼åœ¨é˜´å½±ä¸­ï¼Œè¯•å›¾åˆ©ç”¨æ¼æ´å¹¶ç ´åæˆ‘ä»¬å»ºé€ çš„æ•°å­—å ¡å’ã€‚è¿™å°±æ˜¯ç½‘ç»œå®‰å…¨çš„é¢†åŸŸï¼Œä¸€ä¸ªåŠ¨æ€ä¸”ä¸æ–­å‘å±•çš„é¢†åŸŸï¼Œå®ƒæ˜¯ç”¨æˆ·ä¸æ¸—é€åˆ°ç½‘ç»œä¸–ç•Œçš„æ— æ•°é£é™©ä¹‹é—´çš„å®ˆæŠ¤è€…ã€‚</p><p>Consider this: Beyond the visible web lies an untamed and uncharted area akin to the Wild West, where data bandits and cyber outlaws reign supreme. These neâ€™er-do-wells constantly innovate their nefarious methods to breach firewalls, hijack sessions, and steal sensitive data. Web security is the marshal that stands in their way, brandishing the latest cryptographic shields and a sharp strategy to enforce the law of the land.</p><p>**å¯¹ç§°åŠ å¯† (DES, 3DES, AES)ï¼š<strong>å¦‚æœè¦åŠ å¯†ä¸€ä¸²æ¶ˆæ¯ï¼Œå¾ˆè‡ªç„¶çš„æƒ³æ³•æ˜¯ï¼ŒåŠ å¯†å’Œè§£å¯†ç”¨çš„åŒä¸€ä¸ªå¯†ç ã€‚å¦‚åŒç°å®ç”Ÿæ´»ä¸­ï¼Œä¸€æŠŠé’¥åŒ™æ—¢å¯ä»¥é”ä¸Šä¸€æŠŠé”ï¼Œä¹Ÿå¯ä»¥æ‰“å¼€ä¸€æŠŠé”ï¼Œè¿™å°±æ˜¯å¯†ç å­¦ä¸­çš„å¯¹ç§°åŠ å¯† (Symmetric Encryption)ï¼šåŠ å¯†å’Œè§£å¯†ç”¨çš„æ˜¯åŒä¸€ä¸²å¯†é’¥ (Secret Key)ã€‚å®é™…åº”ç”¨ä¸­çš„<a href="https://www.zhihu.com/search?q=%E6%95%B0%E6%8D%AE%E5%8A%A0%E5%AF%86&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A%22465894109%22%7D">æ•°æ®åŠ å¯†</a>ï¼Œé€šå¸¸éƒ½æ˜¯ä½¿ç”¨çš„å¯¹ç§°åŠ å¯†ï¼Œå› ä¸º<a href="https://www.zhihu.com/search?q=%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A%22465894109%22%7D">**å¯¹ç§°åŠ å¯†ç®—æ³•</a>å¾ˆå¤šå¯¹ç¡¬ä»¶ç‰¹åˆ«å‹å¥½ï¼Œæ‰€ä»¥åœ¨ç¡¬ä»¶åŠ å¯†æ¨¡å—ä¸Šè¿è¡Œæ•ˆç‡éå¸¸é«˜</strong>ã€‚</p><p><strong>éå¯¹ç§°åŠ å¯† (RSA), éå¯¹ç§°åŠ å¯†æ˜¯ä¸ºäº†è§£å†³å¯¹ç§°åŠ å¯†æ— æ³•è§£å†³çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œæ€ä¹ˆæ‰èƒ½ä¿è¯ä½¿ç”¨å¯†é’¥çš„äººæ˜¯å¯ä¿¡çš„å‘¢ï¼Ÿ</strong></p><p>å…¬é’¥åŠ å¯†ç§é’¥è§£ï¼Œç§é’¥ç­¾åå…¬é’¥éªŒã€‚</p><ol><li><p><strong>å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†</strong>ï¼š</p><p>è¿™æ˜¯éå¯¹ç§°åŠ å¯†çš„åŸºæœ¬åº”ç”¨åœºæ™¯ã€‚å½“Aæƒ³å‘Bå‘é€åŠ å¯†ä¿¡æ¯æ—¶ï¼ŒAä½¿ç”¨Bçš„å…¬é’¥å¯¹ä¿¡æ¯è¿›è¡ŒåŠ å¯†ã€‚ç”±äºå…¬é’¥å¯ä»¥å…¬å¼€ï¼ŒAæ— éœ€æ‹…å¿ƒå…¬é’¥çš„å®‰å…¨æ€§ã€‚Bæ”¶åˆ°åŠ å¯†ä¿¡æ¯åï¼Œä½¿ç”¨è‡ªå·±çš„ç§é’¥è¿›è¡Œè§£å¯†ï¼Œå› ä¸ºåªæœ‰BæŒæœ‰å¯¹åº”çš„ç§é’¥ï¼Œæ‰€ä»¥åªæœ‰Bèƒ½å¤Ÿè§£å¯†å¹¶è¯»å–ä¿¡æ¯å†…å®¹ã€‚è¿™ä¸€è¿‡ç¨‹ç¡®ä¿äº†ä¿¡æ¯çš„æœºå¯†æ€§ã€‚</p></li><li><p><strong>ç§é’¥ç­¾åï¼Œå…¬é’¥éªŒè¯</strong>ï¼š</p><p>æ•°å­—ç­¾åæŠ€æœ¯ç”¨äºéªŒè¯ä¿¡æ¯çš„å®Œæ•´æ€§å’Œå‘é€æ–¹çš„èº«ä»½ã€‚å½“Aå‘é€ä¿¡æ¯ç»™Bæ—¶ï¼ŒAä½¿ç”¨è‡ªå·±çš„ç§é’¥å¯¹ä¿¡æ¯çš„æ‘˜è¦è¿›è¡ŒåŠ å¯†ï¼Œç”Ÿæˆæ•°å­—ç­¾åã€‚Bæ”¶åˆ°ä¿¡æ¯å’Œç­¾ååï¼Œä½¿ç”¨Açš„å…¬é’¥å¯¹ç­¾åè¿›è¡Œè§£å¯†ï¼ŒéªŒè¯ç­¾åçš„æ­£ç¡®æ€§ã€‚å¦‚æœéªŒè¯é€šè¿‡ï¼ŒBå¯ä»¥ç¡®ä¿¡ä¿¡æ¯æ²¡æœ‰è¢«ç¯¡æ”¹ï¼Œä¸”ç¡®å®æ¥è‡ªæŒæœ‰å¯¹åº”ç§é’¥çš„Aï¼Œå¢å¼ºäº†ä¿¡æ¯çš„å®Œæ•´æ€§å’Œä¸å¯æŠµèµ–æ€§ã€‚</p></li></ol><p>æ¶ˆæ¯è®¤è¯ç ç³»ç»Ÿç”±ä¸‰ç§ç®—æ³•ç»„æˆï¼š</p><ul><li><p>å¯†é’¥ç”Ÿæˆç®—æ³•ä»å¯†é’¥ç©ºé—´ä¸­å‡åŒ€éšæœºåœ°é€‰æ‹©ä¸€ä¸ªå¯†é’¥ã€‚</p></li><li><p>ç­¾åç®—æ³•æ ¹æ®å¯†é’¥å’Œæ¶ˆæ¯æœ‰æ•ˆåœ°è¿”å›æ ‡ç­¾ã€‚</p></li><li><p>éªŒè¯ç®—æ³•åœ¨ç»™å®šç›¸åŒå¯†é’¥å’Œæ ‡ç­¾çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é«˜æ•ˆåœ°éªŒè¯æ¶ˆæ¯çš„çœŸå®æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æ¶ˆæ¯å’Œæ ‡ç­¾æœªè¢«ç¯¡æ”¹æˆ–ä¼ªé€ æ—¶ï¼Œè¿”å›<em>æ¥å—ï¼Œå¦åˆ™è¿”å›æ‹’ç»</em></p><p>ã€‚</p></li></ul><p>å®‰å…¨çš„æ¶ˆæ¯è®¤è¯ä»£ç å¿…é¡»èƒ½å¤ŸæŠµå¾¡æ”»å‡»è€…<a href="https://en.wikipedia.org/wiki/Digital_signature_forgery">ä¼ªé€ ä»»æ„ã€é€‰å®šæˆ–æ‰€æœ‰æ¶ˆæ¯çš„æ ‡ç­¾çš„</a>ä¼å›¾ï¼ŒåŒ…æ‹¬åœ¨<a href="https://en.wikipedia.org/wiki/Digital_signature_forgery">å·²çŸ¥æ¶ˆæ¯</a>æˆ–<a href="https://en.wikipedia.org/wiki/Digital_signature_forgery">é€‰å®šæ¶ˆæ¯</a>çš„æƒ…å†µä¸‹ã€‚åœ¨ä¸çŸ¥é“å¯†é’¥çš„æƒ…å†µä¸‹ï¼Œè®¡ç®—ç»™å®šæ¶ˆ</p><h3 id="MITM">MITM</h3><p>ä»¥ä¸‹æ˜¯MITMæ”»å‡»çš„ä¸€äº›å¸¸è§å½¢å¼ï¼š</p><ol><li><strong>çªƒå¬ï¼ˆEavesdroppingï¼‰ï¼š</strong><br>ä¸­é—´äººé€šè¿‡ç›‘å¬ç½‘ç»œé€šä¿¡ï¼Œè·å–ä¼ è¾“çš„æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·åã€å¯†ç ç­‰ã€‚</li><li><strong>æ•°æ®ç¯¡æ”¹ï¼ˆData Modificationï¼‰ï¼š</strong><br>ä¸­é—´äººå¯ä»¥ä¿®æ”¹ä¼ è¾“çš„æ•°æ®ï¼Œå¯¼è‡´æ¥æ”¶æ–¹æ”¶åˆ°è¢«ç¯¡æ”¹è¿‡çš„ä¿¡æ¯ï¼Œå¯èƒ½ä¼šå¯¹ç³»ç»Ÿäº§ç”Ÿè´Ÿé¢å½±å“ã€‚</li><li><strong>æ¬ºéª—ï¼ˆSpoofingï¼‰ï¼š</strong><br>æ”»å‡»è€…å¯ä»¥ä¼ªè£…æˆåˆæ³•çš„é€šä¿¡æ–¹ï¼Œä½¿å¾—é€šä¿¡çš„ä¸¤ç«¯éƒ½è®¤ä¸ºä»–ä»¬æ­£åœ¨ä¸åˆæ³•çš„å¯¹æ–¹é€šä¿¡ã€‚</li><li><strong>ä¸­ç»§æ”»å‡»ï¼ˆRelay Attackï¼‰ï¼š</strong><br>æ”»å‡»è€…åœ¨é€šä¿¡çš„ä¸¤ç«¯ä¹‹é—´ä¼ é€’ä¿¡æ¯ï¼Œä»¥æ¨¡æ‹Ÿä¸¤è€…ç›´æ¥é€šä¿¡ï¼ŒåŒæ—¶è®°å½•æˆ–ä¿®æ”¹ä¿¡æ¯ã€‚</li><li><strong>SSL Strippingï¼š</strong><br>ä¸­é—´äººå¯èƒ½è¯•å›¾é™çº§åŠ å¯†é€šä¿¡ï¼Œå°†åŠ å¯†è¿æ¥è½¬æ¢ä¸ºéåŠ å¯†è¿æ¥ï¼Œä»¥ä¾¿æ›´å®¹æ˜“åœ°çªƒå¬æ•æ„Ÿä¿¡æ¯ã€‚</li></ol><p>MITMæ”»å‡»å¯ä»¥åœ¨å„ç§é€šä¿¡åè®®ä¸­å‘ç”Ÿï¼ŒåŒ…æ‹¬HTTPã€HTTPSã€SMTPç­‰ã€‚é˜²èŒƒMITMæ”»å‡»çš„æ–¹æ³•åŒ…æ‹¬ä½¿ç”¨åŠ å¯†é€šä¿¡ï¼ˆå¦‚HTTPSï¼‰ã€æ•°å­—ç­¾åã€ä½¿ç”¨å®‰å…¨çš„è®¤è¯æœºåˆ¶ç­‰ã€‚ä½¿ç”¨å…¬å…±Wi-Fiç½‘ç»œæ—¶ï¼Œç‰¹åˆ«éœ€è¦æ³¨æ„MITMæ”»å‡»ï¼Œå› ä¸ºè¿™æ ·çš„ç½‘ç»œæ›´å®¹æ˜“å—åˆ°æ”»å‡»è€…çš„çªƒå¬ã€‚</p><p>HackeråŠ«æŒuser DNSè§£æåˆ°é»‘å®¢çš„æœåŠ¡å™¨ä¹‹åï¼Œå¦‚æœé»‘å®¢æœåŠ¡å™¨ä¸Šæ²¡æœ‰åˆæ³•ç­¾å‘çš„SSLè¯ä¹¦ï¼Œæµè§ˆå™¨ä¼šæç¤ºè¿™ä¸ªDNSæŒ‡å‘çš„æœåŠ¡å™¨ä¸å¯ä¿¡ä»»ï¼Œç„¶åå¼¹å‡ºè­¦å‘Šç”»é¢é˜»æ­¢ä½ è®¿é—®ï¼Œæ‰€ä»¥è¦<strong>åŠ«æŒDNS+åˆæ³•è¯ä¹¦</strong>ä¸¤ä¸ªé—®é¢˜åŒæ—¶è§£å†³æ‰ç®—å®Œç¾çš„ä¸­é—´äººæ”»å‡»ã€‚ç”¨æˆ·ç”µè„‘ä¸Šçš„è¯ä¹¦å¤§éƒ¨åˆ†ç”±æ“ä½œç³»ç»Ÿé¢å‘ï¼Œå¯ä»¥ç¦»çº¿ä¿¡ä»»é“¾</p><p><strong>å•ç‹¬è¯´DHåå•†ç®—æ³•ä¸èƒ½é˜²æ­¢ä¸­é—´äººæ²¡æœ‰æ„ä¹‰ã€‚å› ä¸ºå¯†é’¥åå•†ç®—æ³•è¦è§£å†³çš„æ˜¯åœ¨ä¸å¯é é“¾è·¯ä¸Šå®‰å…¨åœ°åå•†å¯†é’¥ã€‚è€Œé€šä¿¡åŒæ–¹èº«ä»½è®¤è¯åˆæ˜¯å¦å¤–ä¸€ä¸ªä½“ç³»çš„ä¸œè¥¿ã€‚</strong></p><p>åœ¨ MITM æ”»å‡»ä¸­ï¼Œæ”»å‡»è€…æ‹¦æˆªå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ï¼Œå†’å……åŒæ–¹æ‹¦æˆªæˆ–æ›´æ”¹å®ƒä»¬ä¹‹é—´äº¤æ¢çš„æ•°æ®ã€‚<br>è™½ç„¶ HTTPS å¯¹ä¼ è¾“ä¸­çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä½†æ”»å‡»è€…å¯èƒ½ä¼šæ’å…¥å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ï¼Œæ‹¦æˆªåŠ å¯†æµé‡å¹¶ä½¿ç”¨å„ç§æŠ€æœ¯å¯¹å…¶è¿›è¡Œè§£å¯†ï¼Œä¾‹å¦‚è·å–å—æŸçš„ SSL/TLS è¯ä¹¦æˆ–åˆ©ç”¨ SSL/TLS åè®®æœ¬èº«çš„æ¼æ´ã€‚</p><p>MITM:</p><ol><li>æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€å…¬é’¥ã€‚</li><li>æ”»å‡»è€…æˆªè·å…¬é’¥ï¼Œä¿ç•™åœ¨è‡ªå·±æ‰‹ä¸Šã€‚</li><li>ç„¶åæ”»å‡»è€…è‡ªå·±ç”Ÿæˆä¸€ä¸ªã€ä¼ªé€ çš„ã€‘å…¬é’¥ï¼Œå‘ç»™å®¢æˆ·ç«¯ã€‚</li><li>å®¢æˆ·ç«¯æ”¶åˆ°ä¼ªé€ çš„å…¬é’¥åï¼Œç”ŸæˆåŠ å¯†hashå€¼å‘ç»™æœåŠ¡å™¨ã€‚</li><li>æ”»å‡»è€…è·å¾—åŠ å¯†hashå€¼ï¼Œç”¨è‡ªå·±çš„ç§é’¥è§£å¯†è·å¾—çœŸç§˜é’¥ã€‚</li><li>åŒæ—¶ç”Ÿæˆå‡çš„åŠ å¯†hashå€¼ï¼Œå‘ç»™æœåŠ¡å™¨ã€‚</li><li>æœåŠ¡å™¨ç”¨ç§é’¥è§£å¯†è·å¾—å‡ç§˜é’¥ã€‚</li><li>æœåŠ¡å™¨ç”¨åŠ ç§˜é’¥åŠ å¯†ä¼ è¾“ä¿¡æ¯</li></ol><p>å¯ä»¥çœ‹å‡ºæˆ‘ä»¬è¿™é‡Œæ•°æ®æ˜¯æ˜æ–‡ä¼ è¾“çš„ï¼Œå­˜åœ¨çªƒå¬é£é™©ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸ºäº†é˜è¿°æ•°å­—ç­¾åæœºåˆ¶æ˜¯å¦‚ä½•è¿è½¬çš„ï¼Œæ•…æ„å°†ä¿è¯ä¿¡æ¯æœºå¯†æ€§çš„æœºåˆ¶çœç•¥äº†ã€‚</p><p>å¦‚æœæƒ³è¦ä¿è¯æ•°æ®çš„æœºå¯†æ€§ï¼Œæˆ‘ä»¬å¸¸è§çš„åšæ³•æ˜¯ï¼Œé€šä¿¡åŒæ–¹é€šè¿‡éå¯¹ç§°åŠ å¯†å®‰å…¨äº¤æ¢å¯¹ç§°åŠ å¯†çš„å¯†é’¥ï¼Œåç»­é€šä¿¡è¿‡ç¨‹çš„æ•°æ®éƒ½ä½¿ç”¨å¯¹ç§°åŠ å¯†ä¿è¯æ•°æ®æœºå¯†æ€§ã€‚</p><p>å¹¶ä¸”ã€Œç­¾åã€çš„ä½œç”¨æœ¬èº«ä¹Ÿä¸æ˜¯ç”¨æ¥ä¿è¯æ•°æ®çš„æœºå¯†æ€§ï¼Œè€Œæ˜¯ç”¨äºéªŒè¯æ•°æ®æ¥æºçš„é˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹çš„ï¼Œä¹Ÿå°±æ˜¯ç¡®è®¤å‘é€è€…çš„èº«ä»½ã€‚æ¥å—è€… Alice æ”¶åˆ°åï¼Œå–ä¸‹æ•°å­—ç­¾åï¼ŒåŒæ—¶ç”¨ Bob çš„å…¬é’¥è§£å¯†ï¼Œå¾—åˆ°ã€Œæ‘˜è¦1ã€ï¼Œ<strong>è¯æ˜ç¡®å®æ˜¯ Bob å‘çš„</strong>ã€‚</p><p>å†å¯¹é‚®ä»¶å†…å®¹ä½¿ç”¨ç›¸åŒçš„æ•£åˆ—å‡½æ•°è®¡ç®—ã€Œæ‘˜è¦2ã€ï¼Œä¸ä¸Šé¢å¾—åˆ°çš„ã€Œæ‘˜è¦1ã€è¿›è¡Œå¯¹æ¯”ï¼Œ<strong>ä¸¤è€…ä¸€è‡´å°±è¯´æ˜ä¿¡æ¯æœªè¢«ç¯¡æ”¹ã€‚</strong></p><h2 id="HTTPS">HTTPS</h2><p>ä¸»è¦ä¸‰ä¸ªä½œç”¨ï¼š1. åŠ å¯†é€šä¿¡ 2.è®¤è¯æœåŠ¡å™¨çš„èº«ä»½ï¼Œé˜²æ­¢mitm çªƒå¬ 3. é˜²æ­¢ç¯¡æ”¹ï¼Œintegrity</p><p>HTTPSï¼ˆHypertext Transfer Protocol Secureï¼‰ä½¿ç”¨äº†æ··åˆåŠ å¯†æœºåˆ¶ï¼ŒåŒ…æ‹¬éå¯¹ç§°åŠ å¯†å’Œå¯¹ç§°åŠ å¯†ï¼Œä»¥ç¡®ä¿å®‰å…¨çš„æ•°æ®ä¼ è¾“ã€‚ssl3.0 1998</p><p><strong>TLSï¼ˆä¼ è¾“å±‚åŠ å¯†åè®®ï¼‰ 1.2 å‡çº§æˆ TLS 1.3ï¼ŒTLS 1.3 å¤§å¹…åº¦ç®€åŒ–äº†æ¡æ‰‹çš„æ­¥éª¤ï¼Œå®Œæˆ TLS æ¡æ‰‹åªè¦ 1 RTTï¼Œè€Œä¸”å®‰å…¨æ€§æ›´é«˜ã€‚åœ¨ TLS 1.2 çš„æ¡æ‰‹ä¸­ï¼Œä¸€èˆ¬æ˜¯éœ€è¦ 4 æ¬¡æ¡æ‰‹ï¼Œå…ˆè¦é€šè¿‡ Client Hello ï¼ˆç¬¬ 1 æ¬¡æ¡æ‰‹ï¼‰å’Œ Server Helloï¼ˆç¬¬ 2 æ¬¡æ¡æ‰‹ï¼‰ æ¶ˆæ¯</strong>åå•†<strong>å‡ºåç»­ä½¿ç”¨çš„åŠ å¯†ç®—æ³•ï¼Œå†äº’ç›¸äº¤æ¢å…¬é’¥ï¼ˆç¬¬ 3 å’Œ ç¬¬ 4 æ¬¡æ¡æ‰‹ï¼‰</strong></p><ol><li><strong>å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚</strong>ï¼š<ul><li>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘èµ· HTTPS è¯·æ±‚ã€‚</li></ul></li><li><strong>æœåŠ¡å™¨å“åº”å¹¶å‘é€è¯ä¹¦</strong>ï¼š<ul><li>æœåŠ¡å™¨å“åº”è¯·æ±‚å¹¶å‘é€ SSL/TLS è¯ä¹¦ã€‚è¯ä¹¦ä¸­åŒ…å«æœåŠ¡å™¨çš„å…¬é’¥ï¼Œè¯¥å…¬é’¥ç”±å—ä¿¡ä»»çš„è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ç­¾åã€‚</li></ul></li><li><strong>å®¢æˆ·ç«¯éªŒè¯è¯ä¹¦</strong>ï¼š<ul><li>å®¢æˆ·ç«¯éªŒè¯æœåŠ¡å™¨çš„è¯ä¹¦ï¼Œç¡®ä¿è¯ä¹¦ç”±å—ä¿¡ä»»çš„ CA ç­¾å‘ï¼Œè¯ä¹¦æœªè¿‡æœŸï¼Œä¸”è¯ä¹¦ä¸­çš„åŸŸåä¸è¯·æ±‚çš„åŸŸååŒ¹é…ã€‚</li><li><strong>éªŒè¯è¯ä¹¦é“¾</strong>ï¼šå®¢æˆ·ç«¯é€šè¿‡éªŒè¯è¯ä¹¦é“¾æ¥ç¡®è®¤è¯ä¹¦æ˜¯å¦ç”±å—ä¿¡ä»»çš„ CA ç­¾å‘ã€‚è¯ä¹¦é“¾ç”±æœåŠ¡å™¨è¯ä¹¦ã€ä¸­é—´è¯ä¹¦ï¼ˆå¦‚æœæœ‰ï¼‰ã€æ ¹è¯ä¹¦ç»„æˆã€‚</li><li><strong>æ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæœŸ</strong>ï¼šå®¢æˆ·ç«¯æ£€æŸ¥è¯ä¹¦çš„æœ‰æ•ˆæœŸï¼Œç¡®ä¿å½“å‰æ—¥æœŸåœ¨è¯ä¹¦çš„æœ‰æ•ˆæœŸå†…ã€‚</li><li><strong>éªŒè¯è¯ä¹¦çš„åŸŸå</strong>ï¼šå®¢æˆ·ç«¯éªŒè¯è¯ä¹¦ä¸­çš„åŸŸåæ˜¯å¦ä¸è¯·æ±‚çš„åŸŸååŒ¹é…ã€‚</li><li><strong>æ£€æŸ¥è¯ä¹¦åŠé”€çŠ¶æ€</strong>ï¼šå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡åœ¨çº¿è¯ä¹¦çŠ¶æ€åè®®ï¼ˆOCSPï¼‰æˆ–è¯ä¹¦åŠé”€åˆ—è¡¨ï¼ˆCRLï¼‰æ¥æ£€æŸ¥è¯ä¹¦æ˜¯å¦è¢«åŠé”€ã€‚</li></ul></li><li><strong>åå•† SSL/TLS ç‰ˆæœ¬å’ŒåŠ å¯†ç®—æ³•</strong>ï¼š<ul><li>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åå•†é€‰æ‹©åŒæ–¹éƒ½æ”¯æŒçš„ SSL/TLS ç‰ˆæœ¬å’ŒåŠ å¯†ç®—æ³•å¥—ä»¶ï¼ˆcipher suiteï¼‰ã€‚è¿™äº›ç®—æ³•å¥—ä»¶å®šä¹‰äº†å…·ä½“ä½¿ç”¨çš„å¯¹ç§°åŠ å¯†ç®—æ³•ã€éå¯¹ç§°åŠ å¯†ç®—æ³•ã€å“ˆå¸Œç®—æ³•ç­‰ã€‚</li></ul></li><li><strong>å¯†é’¥äº¤æ¢å’Œä¼šè¯å¯†é’¥ç”Ÿæˆ</strong>ï¼š<ul><li><strong>Ephemeral Diffie-Hellmanï¼ˆDHEï¼‰æˆ– Ephemeral Elliptic Curve Diffie-Hellmanï¼ˆECDHEï¼‰</strong>ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä½¿ç”¨ä¸´æ—¶çš„ Diffie-Hellman æˆ–æ¤­åœ†æ›²çº¿ Diffie-Hellman å‚æ•°ç”Ÿæˆä¸€ä¸ªå…±äº«çš„é¢„ä¸»å¯†é’¥ï¼ˆpre-master secretï¼‰ã€‚è¿™æ¶‰åŠä½¿ç”¨æœåŠ¡å™¨çš„ä¸´æ—¶å…¬é’¥ï¼ˆé€šå¸¸æ˜¯æœåŠ¡å™¨åŸºäº ECC ç”Ÿæˆçš„ï¼‰å’Œå®¢æˆ·ç«¯ç”Ÿæˆçš„ä¸´æ—¶å…¬é’¥ã€‚</li><li><strong>RSA</strong>ï¼šå¦‚æœä½¿ç”¨ RSA å¯†é’¥äº¤æ¢ï¼Œå®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ªéšæœºçš„é¢„ä¸»å¯†é’¥ï¼Œå¹¶ä½¿ç”¨æœåŠ¡å™¨è¯ä¹¦ä¸­çš„å…¬é’¥å¯¹å…¶è¿›è¡ŒåŠ å¯†ï¼Œç„¶åå‘é€ç»™æœåŠ¡å™¨ã€‚æœåŠ¡å™¨ä½¿ç”¨å…¶ç§é’¥è§£å¯†é¢„ä¸»å¯†é’¥ã€‚</li></ul></li><li><strong>ç”Ÿæˆä¼šè¯å¯†é’¥</strong>ï¼š<ul><li>åŒæ–¹ä½¿ç”¨å…±äº«çš„é¢„ä¸»å¯†é’¥ç”Ÿæˆä¼šè¯å¯†é’¥ã€‚ä¼šè¯å¯†é’¥ç”¨äºå¯¹é€šä¿¡æ•°æ®è¿›è¡Œå¯¹ç§°åŠ å¯†ã€‚</li></ul></li><li><strong>æ•°æ®åŠ å¯†</strong>ï¼š<ul><li>ä½¿ç”¨åå•†å¥½çš„å¯¹ç§°åŠ å¯†ç®—æ³•ï¼ˆå¦‚ AESã€ChaCha20 ç­‰ï¼‰ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä½¿ç”¨ä¼šè¯å¯†é’¥å¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ã€‚</li></ul></li><li><strong>å®Œæ•´æ€§éªŒè¯</strong>ï¼š<ul><li>ä½¿ç”¨æ¶ˆæ¯è®¤è¯ç ï¼ˆMACï¼‰æˆ–å“ˆå¸Œå‡½æ•°ï¼ˆå¦‚ SHA-256ï¼‰æ¥éªŒè¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œç¡®ä¿æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æœªè¢«ç¯¡æ”¹ã€‚<br>è¯ä¹¦éªŒè¯çš„æŠ€æœ¯<br>æµè§ˆå™¨éªŒè¯è¯ä¹¦: æµè§ˆå™¨éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§ï¼ŒåŒ…æ‹¬ï¼š<br>è¯ä¹¦é¢å‘æœºæ„: æµè§ˆå™¨æ£€æŸ¥è¯ä¹¦æ˜¯å¦ç”±ä¸€ä¸ªå—ä¿¡ä»»çš„è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰é¢å‘ã€‚<br>è¯ä¹¦æœ‰æ•ˆæœŸ: æµè§ˆå™¨æ£€æŸ¥è¯ä¹¦æ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…ã€‚<br>è¯ä¹¦ä¸åŸŸååŒ¹é…: æµè§ˆå™¨æ£€æŸ¥è¯ä¹¦æ˜¯å¦ä¸ç½‘ç«™çš„åŸŸååŒ¹é…ã€‚<br>è¯ä¹¦ç­¾å: æµè§ˆå™¨æ£€æŸ¥è¯ä¹¦çš„ç­¾åæ˜¯å¦æ­£ç¡®ã€‚<br>æµè§ˆå™¨æ£€æŸ¥è¯ä¹¦é“¾: æµè§ˆå™¨æ£€æŸ¥è¯ä¹¦é“¾ï¼Œç¡®ä¿è¯ä¹¦æ˜¯ç”±ä¸€ä¸ªå—ä¿¡ä»»çš„ CA é¢å‘çš„ã€‚<br>æµè§ˆå™¨éªŒè¯è¯ä¹¦çš„å…¬é’¥: æµè§ˆå™¨éªŒè¯è¯ä¹¦çš„å…¬é’¥ï¼Œç¡®ä¿å®ƒä¸æœåŠ¡å™¨çš„å…¬é’¥åŒ¹é…ã€‚</li></ul></li></ol><p>è¯ä¹¦éªŒè¯ä½¿ç”¨äº†ä»¥ä¸‹æŠ€æœ¯ï¼š</p><p>X.509: X.509 æ˜¯ä¸€ç§è¯ä¹¦æ ¼å¼ï¼Œç”¨äºå­˜å‚¨è¯ä¹¦ä¿¡æ¯ã€‚<br>SSL/TLS: SSL/TLS æ˜¯ä¸€ç§åŠ å¯†åè®®ï¼Œç”¨äºå»ºç«‹å®‰å…¨è¿æ¥ã€‚<br>å…¬é’¥åŠ å¯†: å…¬é’¥åŠ å¯†æ˜¯ä¸€ç§åŠ å¯†ç®—æ³•ï¼Œç”¨äºåŠ å¯†æ•°æ®ã€‚<br>æ•°å­—ç­¾å: æ•°å­—ç­¾åæ˜¯ä¸€ç§åŠ å¯†ç®—æ³•ï¼Œç”¨äºéªŒè¯è¯ä¹¦çš„åˆæ³•æ€§ã€‚<br>è¯ä¹¦éªŒè¯çš„å·¥å…·</p><p>è¯ä¹¦éªŒè¯å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å·¥å…·ï¼š</p><p>æµè§ˆå™¨: æµè§ˆå™¨å†…ç½®äº†è¯ä¹¦éªŒè¯åŠŸèƒ½ã€‚<br>openssl: openssl æ˜¯ä¸€ç§å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºéªŒè¯è¯ä¹¦ã€‚<br>certutil: certutil æ˜¯ä¸€ç§å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºéªŒè¯è¯ä¹¦ã€‚<br><strong>å®‰å…¨å¤–å£³åè®®</strong>(Â SSHÂ **)**æ˜¯ä¸€ç§<a href="https://en.wikipedia.org/wiki/Cryptography">åŠ å¯†</a>Â <a href="https://en.wikipedia.org/wiki/Network_protocol">ç½‘ç»œåè®®</a>ï¼Œç”¨äºåœ¨ä¸å®‰å…¨çš„ç½‘ç»œä¸Šå®‰å…¨åœ°è¿è¡Œ<a href="https://en.wikipedia.org/wiki/Network_service">ç½‘ç»œæœåŠ¡ã€‚</a><a href="https://en.wikipedia.org/wiki/Secure_Shell#cite_note-rfc4251-1">[1]</a>å…¶æœ€è‘—åçš„åº”ç”¨æ˜¯ remoteÂ <a href="https://en.wikipedia.org/wiki/Login">login</a>Â andÂ <a href="https://en.wikipedia.org/wiki/Command-line_interface">command-line</a>Â execution.</p><p>SSH åº”ç”¨ç¨‹åºåŸºäº<a href="https://en.wikipedia.org/wiki/Client%E2%80%93server_model">å®¢æˆ·ç«¯-æœåŠ¡å™¨</a>æ¶æ„ï¼Œå°†<a href="https://en.wikipedia.org/wiki/SSH_client">SSH å®¢æˆ·ç«¯</a>å®ä¾‹ä¸<a href="https://en.wikipedia.org/wiki/SSH_server">SSH æœåŠ¡å™¨</a>è¿æ¥ã€‚<a href="https://en.wikipedia.org/wiki/Secure_Shell#cite_note-rfc4252-2">[2]</a>Â SSH ä½œä¸ºåˆ†å±‚åè®®å¥—ä»¶è¿è¡Œï¼ŒåŒ…å«ä¸‰ä¸ªä¸»è¦åˆ†å±‚ç»„ä»¶ï¼š<em>ä¼ è¾“å±‚</em>æä¾›æœåŠ¡å™¨èº«ä»½éªŒè¯ã€æœºå¯†æ€§å’Œå®Œæ•´æ€§ï¼›ç”¨æˆ·<em>è®¤è¯åè®®</em>å‘æœåŠ¡å™¨éªŒè¯ç”¨æˆ·ï¼›è¿æ¥<em>åè®®</em>å°†åŠ å¯†éš§é“å¤ç”¨ä¸ºå¤šä¸ªé€»è¾‘é€šä¿¡é€šé“ã€‚<a href="https://en.wikipedia.org/wiki/Secure_Shell#cite_note-rfc4251-1">[1]</a></p><p><a href="https://en.wikipedia.org/wiki/Unix-like">SSH æ˜¯åœ¨ç±» Unix</a>æ“ä½œç³»ç»Ÿä¸Šè®¾è®¡çš„ï¼Œä½œä¸º<a href="https://en.wikipedia.org/wiki/Telnet">Telnet</a>å’Œ<a href="https://en.wikipedia.org/wiki/Computer_security">ä¸å®‰å…¨çš„</a>è¿œç¨‹<a href="https://en.wikipedia.org/wiki/Unix_shell">Unix shell</a>åè®®çš„æ›¿ä»£å“</p><h3 id="Across-the-Wall">Across the Wall</h3><p>12.15é—®é¢˜ï¼šrouterè®¾ç½®ä¸ºipv6 è§£ææ—¶é—´é•¿ infraå»ºè®¾æ²¡è·Ÿä¸Šï¼Œæ”¾å¼ƒã€‚ æƒ³å®Œå…¨ä¿è¯å®‰å…¨æ€§å’Œå›½å†…è®¿é—®é€Ÿç‡ï¼šåˆ·openwrtï¼Œsmartdnså®ç°å›½å†…å›½å¤– dns åˆ†æµï¼Œéœ€è¦å¦ä¸€å°è½¯è·¯ç”±ã€‚ æŠ˜è¡·æ–¹æ¡ˆï¼šå…¨å±€ä»£ç†ï¼Ÿ</p><p>ä»£ç†æ¨¡å¼ï¼š HTTP/socksç³»ç»Ÿä»£ç† ï¼ˆå¼€å‘è€…å†³å®š å¤§éƒ¨åˆ†åªä½¿ç”¨browserï¼‰ï¼Œ TUN tapä»£ç†ï¼Œ çœŸVPN</p><p>TUNï¼š æ‰‹æœºä»£ç†ï¼Œè½¯è·¯ç”±çš„æ¨¡å¼</p><p>TUNè™šæ‹Ÿç½‘å¡åªèƒ½è¯´éå¸¸æ¥è¿‘ VPNè¿˜ä¸æ˜¯çœŸæ­£çš„VPN å› ä¸ºæˆ‘ä»¬ç”¨çš„ss vmess trojanç­‰ä¸»æµçš„ç¿»å¢™åè®® éƒ½æ— æ³•<strong>å°è£…ç½‘ç»œå±‚çš„æ•°æ®åŒ…</strong> æœ€ç›´è§‚çš„æ„Ÿå—å°±æ˜¯pingå‘½ä»¤è¿™ä¸ªç½‘ç»œå±‚çš„å·¥å…· å½“æˆ‘ä»¬ä½¿ç”¨clashçš„tunæ¨¡å¼pingè°·æ­Œçš„è¯ ä¼šè¿”å›ä¸€ä¸ªå‡çš„å»¶è¿Ÿ è¿™ä¸ªä¸€æ¯«ç§’çš„å»¶è¿Ÿæ˜¯ç›´æ¥ä»è™šæ‹Ÿç½‘å¡è¿”å›çš„ å¹¶ä¸” å¦‚æœä½¿ç”¨ä¸‹èŠ‚è¦è®²çš„fakeIPæ¨¡å¼çš„è¯ è¿˜ä¼šç›´æ¥è¿”å›ä¸€ä¸ªå‡çš„IP å› ä¸ºss vmessç­‰åè®®æ— æ³•ä»£ç†ç½‘ç»œå±‚çš„icmpåè®® è€Œpingå°±æ˜¯icmpåè®®çš„å·¥å…· çœŸæ­£çš„VPNå¯ä»¥ä»£ç†ç½‘ç»œå±‚ æ‰€ä»¥æˆ‘ä½¿ç”¨çœŸæ­£çš„VPN wireguardæ˜¯å¯ä»¥pingé€šè°·æ­Œçš„ å¯ä»¥çœ‹åˆ°å»¶è¿Ÿæ˜¯çœŸå®çš„</p><p>ç›®å‰æ¥è®² tunæ¨¡å¼æ˜¯æ¯”è¾ƒå®Œç¾çš„å®¢æˆ·ç«¯ä»£ç†æ–¹å¼ æ—¢èƒ½å®ç°åœ¨ç½‘ç»œå±‚æ¥ç®¡ç³»ç»Ÿæ‰€æœ‰æµé‡ åˆèƒ½åœ¨æ­¤åŸºç¡€ä¸Šå®ç°åˆ†æµ ç¾ä¸­ä¸è¶³çš„åœ°æ–¹å°±æ˜¯ä½¿ç”¨pingå‘½ä»¤ æ¥æµ‹è¯•ç½‘ç»œå»¶è¿Ÿçš„æ—¶å€™å°±ä¸å¤ªæ–¹ä¾¿äº† å¦‚æœä½ å¹³æ—¶åªæ˜¯ç”¨æ¥æµè§ˆç½‘é¡µçš„è¯ ç¬¬ä¸€ç§ç³»ç»Ÿä»£ç†çš„æ–¹å¼ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹© è‡³äºçœŸVPNçš„è¯ å¹¶ä¸æ¨èç”¨æ¥ç§‘å­¦ä¸Šç½‘ æ›´é€‚åˆæœ‰å†…ç½‘ç©¿é€éœ€æ±‚çš„ç”¨æˆ·</p><p>VPNåè®®å’ŒNATåè®®éƒ½æ˜¯é€šè¿‡é‡æ–°æ„å»ºä¸€ä¸ªIPé¦–éƒ¨æ¥å®ç°çš„ï¼Œä½†ä»–ä»¬çš„å®ç°åˆæœ‰<strong>åŒºåˆ«</strong>ï¼ŒVPNæ˜¯å°†å†…éƒ¨IPæ•°æ®æŠ¥åŠ å¯†åæ‰“åŒ…æˆå¤–éƒ¨IPæ•°æ®æŠ¥çš„æ•°æ®éƒ¨åˆ†ï¼Œå®ƒçš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†æ•°æ®çš„ä¿å¯†æ€§ï¼Œè€ŒNATæ˜¯çº¯è¿›è¡Œåœ°å€è½¬æ¢ï¼Œå®ƒçš„ç›®çš„æ˜¯ä¸ºäº†è§£å†³æœ¬åœ°ç¼–å€çš„å†…éƒ¨ç½‘ç»œä¸å¤–ç½‘é€šä¿¡çš„é—®é¢˜ã€‚</p><p><strong>VPNçš„å®ç°ä¸»è¦ä½¿ç”¨äº†ä¸¤ç§åŸºæœ¬æŠ€æœ¯ï¼šéš§é“ä¼ è¾“ å’Œ åŠ å¯†æŠ€æœ¯</strong></p><p><strong>VPN</strong> é€šå¸¸å¤„äºç½‘ç»œå±‚ï¼ˆç¬¬ä¸‰å±‚ï¼‰æˆ–æ•°æ®é“¾è·¯å±‚ï¼ˆç¬¬äºŒå±‚ï¼‰ï¼š</p><ul><li><strong>IPå±‚çš„VPN</strong>ï¼Œå¦‚IPsecæˆ–L2TPï¼Œé€šå¸¸å·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œå®ƒä»¬é€šè¿‡åˆ›å»ºè™šæ‹Ÿçš„ç§æœ‰ç½‘ç»œæ¥è·¯ç”±IPæ•°æ®åŒ…ã€‚</li><li><strong>æ•°æ®é“¾è·¯å±‚çš„VPN</strong>ï¼Œå¦‚PPTPï¼Œå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼Œé€šå¸¸ç”¨äºç‚¹å¯¹ç‚¹é€šä¿¡ã€‚</li></ul><p>Virtual Private Network è¯‘ä¸ºè™šæ‹Ÿä¸“ç”¨ç½‘ç»œæˆ–è€…è™šæ‹Ÿç§æœ‰ç½‘ç»œ ä»€ä¹ˆç½‘ç»œæ˜¯ç§æœ‰ç½‘ç»œ ä½ å®¶é‡Œçš„å±€åŸŸç½‘å°±æ˜¯ä½ çš„ç§æœ‰ç½‘ç»œ æˆ‘ä»¬æ— æ³•ç›´æ¥å’Œä½ æ²¡æœ‰å…¬ç½‘ipçš„ç”µè„‘è¿›è¡Œé€šä¿¡ é™¤éåˆ°ä½ å®¶é‡Œè¿ä¸Šä½ å®¶çš„è·¯ç”±å™¨ é‚£æˆ‘ä»¬å°±èƒ½åœ¨åŒä¸€ä¸ªç§æœ‰ç½‘ç»œé‡Œ é‚£ä»€ä¹ˆæ˜¯è™šæ‹Ÿ é¡¾åæ€ä¹‰ è™šæ‹Ÿçš„æ„æ€å°±æ˜¯è™šæ‹Ÿ å°±æ˜¯ç‰©ç†ä¸å­˜åœ¨ è™šæ‹Ÿç§æœ‰ç½‘ç»œçš„æ„æ€å°±æ˜¯æˆ‘ä¸éœ€è¦ç‰©ç†çš„è·‘åˆ°ä½ å®¶é‡Œå» ç‰©ç†çš„è¿æ¥ä¸Šä½ å®¶çš„è·¯ç”±å™¨ å°±å¯ä»¥å®ç°ä¸ä½ æ²¡æœ‰å…¬ç½‘IPçš„ç”µè„‘è¿›è¡Œé€šä¿¡ è€Œè¦å®ç°è¿™ä¸ªåŠŸèƒ½çš„è¯ å°±å¿…é¡»è¦èƒ½å¤Ÿå°è£…ç½‘ç»œå±‚çš„æ•°æ®åŒ… åªæœ‰èƒ½å¤Ÿå°è£…ç½‘ç»œå±‚çš„æ•°æ®åŒ… æ‰èƒ½å®ç°å¼‚åœ°ç»„ç½‘ æ‰èƒ½å®ç°å†…ç½‘ç©¿é€ æ‰èƒ½å®ç°è™šæ‹Ÿçš„å’Œä½ åœ¨åŒä¸€å†…ç½‘é‡Œ æ‰èƒ½ç§°ä¹‹ä¸ºVPN</p><p>VPNæ˜¯ä¸€ç§æŠ€æœ¯ è€Œä¸æ˜¯æŸä¸ªå…·ä½“çš„åè®® VPNæœ‰å¾ˆå¤šæŠ€æœ¯å®ç° PPTP VPN IPSEC VPN OPENVPN WIREGUARDç­‰ç­‰ å…·ä½“å®ç°ç»†èŠ‚éƒ½ä¸å¤ªä¸€æ ·</p><p>ä½†æœ‰ä¸€ä¸ªæ˜¯å¿…é¡»è¦æ”¯æŒçš„ å°±æ˜¯<strong>å°è£…ç½‘ç»œå±‚ å¦‚æœssåè®®ä¹Ÿèƒ½å¤Ÿå°è£…ç½‘ç»œå±‚ å®ç°å¼‚åœ°ç»„ç½‘ é‚£ä¹Ÿèƒ½ç§°ä¹‹ä¸ºVPN</strong></p><p>å½“ç„¶ æˆ‘è¿™é‡Œå¹¶ä¸æ˜¯è¯´VPNå°±æ›´é«˜çº§ ç›¸åçš„ å¯¹äºç§‘å­¦ä¸Šç½‘æ¥è®² å®ƒå¯æ˜¯ä¸€ç‚¹éƒ½ä¸é«˜çº§ å› ä¸ºVPNå¹¶ä¸æ˜¯ä¸ºç¿»å¢™è€Œç”Ÿçš„ åªæ˜¯å› ä¸ºå®ƒèƒ½å¯¹æ•°æ®è¿›è¡ŒåŠ å¯† é¡ºä¾¿å®ç°äº†ç¿»å¢™åŠŸèƒ½ ç›¸è¾ƒäº<strong>ssè¿™ç§ä¸“é—¨ä¸ºç¿»å¢™è€Œç”Ÿ å°†æµé‡ç‰¹å¾éšè—</strong>çš„åè®® VPNçš„æµé‡æ¸…æ™°æ˜äº†çš„å†™ç€å®ƒå°±æ˜¯VPNçš„æµé‡ è€Œä¸”VPNåˆ†æµå¾ˆä¸æ–¹ä¾¿ æ‰€ä»¥ç”¨æ¥ç§‘å­¦ä¸Šç½‘å¹¶ä¸åˆé€‚ è¿™é‡Œå°±ä¸å†æ·±å…¥äº† ä»¥åæœ‰æœºä¼šå‡ºå†…ç½‘ç©¿é€çš„æ•™ç¨‹å†æ¥è¯¦ç»†ä»‹ç»</p><p><img src="https://prod-files-secure.s3.us-west-2.amazonaws.com/ea503cf6-9325-47ab-9fb3-3e33e40583ef/4ea5941a-a013-41e5-b7ef-33fae9328bc2/Untitled.png" alt="Untitled"></p><ol><li>Clash çš„ DNSå’Œä»£ç†ä¸¤ä¸ªæ¨¡å—æ˜¯ç‹¬ç«‹çš„. æ—¥å¸¸ç»ˆç«¯PCä½¿ç”¨ Clash for Windows å¼€å¯Systerm Proxy( HTTPS/SOCKS5ä»£ç†) å¹¶ä¸éœ€è¦ DNS enable: true, TUN æ¨¡å¼ æ˜¯è™šæ‹Ÿäº†ç½‘å¡, æ¥ç®¡ä¸€åˆ‡æµé‡. OpenClash å®ç°è™šæ‹Ÿç½‘å…³ç”¨çš„æ˜¯ TUN æ¨¡å¼, è€Œ Fake-IP /Redir-Host çš„TUNæ¨¡å¼ã€æ¸¸æˆæ¨¡å¼ æ˜¯(TAP æ¨¡å¼ å¾ˆç»•å£ è€ŒÂ <a href="https://docs.cfw.lbyczf.com/contents/tap.html#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">TAP æ¨¡å¼æ›´æ¨èä½¿ç”¨ Redir-Host æ¨¡å¼</a></li><li><a href="https://www.v2ex.com/t/939660">OpenClash çš„ç»•è¿‡å¤§é™†IP ä¸»è¦ç”±ä¸¤ä¸ªæ¨¡å—ç»„æˆ</a>Â . ä½¿ç”¨ä¸€ä»½å›½å†…ç«™ç‚¹åŸŸåè¡¨ 2wå¤šæ¡ï¼Œæ·»åŠ è‡³ Dnsmasq ä¸­ï¼Œåœ¨è¿™ä¸ªåŸŸåè¡¨ä¸­çš„ å°†ä¼šä½¿ç”¨ é»˜è®¤114.114.114.114 æ¥è¿›è¡Œè§£æä¸ºçœŸå®çš„ IP ï¼Œåœ¨ iptables ä¸­æ·»åŠ ä¸­å›½å¤§é™† IP æ®µï¼ˆ ipset ï¼›ç›´æ¥ç»•è¿‡çš„è§„åˆ™å¹¶ä¸ä½¿ç”¨ Clash æ ¸å¿ƒçš„ DNS è§£æ.Â <a href="https://songchenwen.com/tproxy-split-by-dns">ç”±æ­¤è§£å†³äº†Â <em>æ‰€æœ‰æµé‡éƒ½ç» Clash æ ¸å¿ƒè½¬å‘ï¼Œæ€§èƒ½æŸè€—è¿‡å¤§</em>Â çš„é—®é¢˜</a></li><li>æ’ä»¶è®¾ç½®-DNSè®¾ç½®ä¸­ *æœ¬åœ° DNS åŠ«æŒ ä½¿ç”¨é˜²ç«å¢™è½¬å‘ æ‰èƒ½æœ‰é»‘ç™½åå•ä¸èµ°ä»£ç†çš„å±€åŸŸç½‘IP/MAC é€‰é¡¹.Â <em>æˆ‘ä¸æ¸…æ¥šä¸ºä½•Redir-Host æ¨¡å¼ ä¸¤ç§è½¬å‘éƒ½èƒ½é€‰é»‘ç™½åå•. Fake-IP æ¨¡å¼åªåœ¨ä½¿ç”¨é˜²ç«å¢™è½¬å‘æ‰èƒ½é€‰æ‹©é»‘ç™½åå•</em>. issueåŒºæœ‰ä¸¤ç§æ–¹æ³•Â <a href="https://github.com/vernesong/OpenClash/issues/2506">[Feature] fakeIPæ¨¡å¼ä¸‹è®¿é—®æ§åˆ¶ä¹Ÿæœ‰â€œä¸èµ°ä»£ç†çš„å±€åŸŸç½‘è®¾å¤‡ IPâ€Â #2506</a>Â <a href="https://github.com/vernesong/OpenClash/issues/3319">[Feature] Fake-IPæ¨¡å¼ä¸‹å¯¹äºMAC/IPé»‘ç™½åå•ã€ç»•è¿‡å¤§é™†IPï¼Œå¯å¦æä¾›æ›´å¤šé€‰é¡¹ï¼ŸÂ #3319</a>Â ä¹Ÿæœ‰å›å¤è¯´ ç»•è¿‡ä¸­å›½å¤§é™† IP çš„å®ç°æ˜¯é  Dnsmasq å…ˆ DNS åˆ†æµåˆ¤æ–­å®ç°çš„, é€‰æ‹©ä½¿ç”¨é˜²ç«å¢™è½¬å‘ä¼šä½¿æ­¤åŠŸèƒ½å¤±æ•ˆ</li><li>ä¸Šæ¸¸ Clash å®˜æ–¹å·²å¼ƒç”¨ Redir-HostÂ <a href="https://lancellc.gitbook.io/clash/clash-config-file/dns#enhanced-mode">(redir-host mode no longer available from Premium 2023.02.16)</a>Â Clash.Meta è¿˜åœ¨ä½¿ç”¨ä¸¤è€…; Clash for Windows ä¸æ¢æ ¸æƒ…å†µä¸‹ éµå¾ªä¸Šæ¸¸ Clash é»˜è®¤TUN Mode æ˜¯Fake IP Mode ; ä¸¤è€…çš„åŒºåˆ«åªæ˜¯ Fake-IP-filter: - â€˜+.*â€™ ç»•è¿‡æ‰€æœ‰åŸŸå å°±å˜æˆ Redir-Host Mode</li><li>Fake-IP æ¨¡å¼ ç”¨å‡IPæ˜ å°„æ˜¯ä¸ºäº†ä½¿ç”¨ Rule åŸŸåè§„åˆ™, éœ€è¦ä»£ç†åŸŸåçš„è§£æå‡ä¼ é€’çœŸå®åŸŸååˆ°ä»£ç†æœåŠ¡å™¨ä¸Š æ‰€ä»¥å¹¶æ— å¿…è¦è·å¾—æ— æ±¡æŸ“DNSçš„è§£æ IP. Clash.Meta çš„å—…æ¢åŠŸèƒ½æ˜¯ä¸ºäº†æŠŠ Redir-Host æ¨¡å¼çš„ â€œçœŸå®IPâ€ å˜å›åŸŸå. (å®ç°CDNä¼˜åŒ– è§£é”Netflix ç­‰. æ‰€ä»¥ Fake-IP æ¨¡å¼åªéœ€è¦é…ç½® nameserver å¹¶æ— å¿…è¦é…ç½® fallback ä»¥åŠ fallback filter ; é…ç½®nameserver ä»…ä¸ºäº†ç›´è¿å’Œfakeip filter å†…çš„å›½å†…åŠ é€Ÿ.</li></ol><h3 id="WARPåŸç†">WARPåŸç†</h3><p>WARPæ˜¯CloudFlareæä¾›çš„ä¸€é¡¹åŸºäºWireGuardçš„ç½‘ç»œæµé‡å®‰å…¨åŠåŠ é€ŸæœåŠ¡ï¼Œèƒ½å¤Ÿè®©ä½ é€šè¿‡è¿æ¥åˆ°CloudFlareçš„è¾¹ç¼˜èŠ‚ç‚¹å®ç°éšç§ä¿æŠ¤åŠé“¾è·¯ä¼˜åŒ–ã€‚WireGuard æ˜¯ç”± Jason Donenfeld ç­‰äººç”¨ C è¯­è¨€ç¼–å†™çš„ä¸€ä¸ªå¼€æº VPN åè®®ï¼Œè¢«è§†ä¸ºä¸‹ä¸€ä»£ VPN åè®®ï¼Œæ—¨åœ¨è§£å†³è®¸å¤šå›°æ‰° IPSec/IKEv2ã€OpenVPN æˆ– L2TP ç­‰å…¶ä»–WireGuard å°±æ˜¯é‡‡ç”¨ UDP è½¬å‘æµé‡çš„ VPN å·¥å…·ã€‚ä»–æœ€å¤§çš„ä¼˜ç‚¹ä¹Ÿå°±æ˜¯æœ€å¤§çš„ç¼ºç‚¹ï¼Œé‡‡ç”¨ UDP è½¬å‘æµé‡ç¡®å®æ˜¯èƒ½å¤Ÿæœ‰æ•ˆçš„å¹²æ‰°å¢™çš„å°é”ï¼Œä½†æ˜¯å…¶ç¨³å®šæ€§å®åœ¨æ˜¯ä¸æ•¢æ­ç»´ã€‚</p><p>å…¶è¿æ¥å…¥å£ä¸ºåŒæ ˆï¼ˆIPv4/IPv6å‡å¯ï¼‰ï¼Œä¸”è¿æ¥åèƒ½å¤Ÿè·å–åˆ°ç”±CFæä¾›åŸºäºNATçš„IPv4å’ŒIPv6åœ°å€ï¼Œå› æ­¤æˆ‘ä»¬çš„å•æ ˆæœåŠ¡å™¨å¯ä»¥å°è¯•è¿æ¥åˆ°WARPæ¥è·å–é¢å¤–çš„ç½‘ç»œè¿é€šæ€§æ”¯æŒã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è®©ä»…å…·æœ‰IPv6çš„æœåŠ¡å™¨è®¿é—®IPv4ï¼Œä¹Ÿèƒ½è®©ä»…å…·æœ‰IPv4çš„æœåŠ¡å™¨è·å¾—IPv6çš„è®¿é—®èƒ½åŠ›ã€‚</p><ul><li>ä¸ºä»…IPv6æœåŠ¡å™¨æ·»åŠ IPv4</li></ul><p>åŸç†å¦‚å›¾ï¼ŒIPv4çš„æµé‡å‡è¢«WARPç½‘å¡æ¥ç®¡ï¼Œå®ç°äº†è®©IPv4çš„æµé‡é€šè¿‡WARPè®¿é—®å¤–éƒ¨ç½‘ç»œã€‚</p><ul><li>ä¸ºä»…IPv4æœåŠ¡å™¨æ·»åŠ IPv6</li></ul><p>åŸç†å¦‚å›¾ï¼ŒIPv6çš„æµé‡å‡è¢«WARPç½‘å¡æ¥ç®¡ï¼Œå®ç°äº†è®©IPv6çš„æµé‡é€šè¿‡WARPè®¿é—®å¤–éƒ¨ç½‘ç»œã€‚</p><ul><li>åŒæ ˆæœåŠ¡å™¨ç½®æ¢ç½‘ç»œ</li></ul><p>æœ‰æ—¶æˆ‘ä»¬çš„æœåŠ¡å™¨æœ¬èº«å°±æ˜¯åŒæ ˆçš„ï¼Œä½†æ˜¯ç”±äºç§ç§åŸå› æˆ‘ä»¬å¯èƒ½å¹¶ä¸æƒ³ä½¿ç”¨å…¶ä¸­çš„æŸä¸€ç§ç½‘ç»œï¼Œè¿™æ—¶ä¹Ÿå¯ä»¥é€šè¿‡WARPæ¥ç®¡å…¶ä¸­çš„ä¸€éƒ¨åˆ†ç½‘ç»œè¿æ¥éšè—è‡ªå·±çš„IPåœ°å€ã€‚è‡³äºè¿™æ ·åšçš„ç›®çš„ï¼Œæœ€å¤§çš„æ„ä¹‰æ˜¯å‡å°‘ä¸€äº›æ»¥ç”¨ä¸¥é‡æœºæˆ¿å‡ºç°éªŒè¯ç çš„æ¦‚ç‡ï¼›åŒæ—¶éƒ¨åˆ†å†…å®¹æä¾›å•†å°†WARPçš„è½åœ°IPè§†ä¸ºçœŸå®ç”¨æˆ·çš„åŸç”ŸIPå¯¹å¾…ï¼Œèƒ½å¤Ÿè§£é™¤ä¸€äº›åŸºäºIPè¯†åˆ«çš„å°é”ã€‚</p><p>WARPæ˜¯å»ºç«‹åœ¨Cloudflare 1.1.1.1çš„å…è´¹DNSæœåŠ¡å™¨ä¸Šã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼ŒWarpæœ¬è´¨ä¸Šå°±æ˜¯ä¸€æ¬¾VPNæœåŠ¡ï¼ŒWarpä½¿ç”¨æ¥è‡ª1.1.1.1çš„DNSæœåŠ¡å™¨ï¼Œå¹¶å¯¹å®ƒä»¬ä¹‹é—´çš„æ‰€æœ‰æµé‡è¿›è¡ŒåŠ å¯†ã€‚</p><p>é€šå¸¸ï¼Œå½“ä½ è®¿é—®<a href="http://baidu.com/">http://Baidu.com</a>æ—¶ï¼ŒURLä¼šè¢«ç¿»è¯‘æˆç½‘ç«™æ‰€åœ¨æœåŠ¡å™¨çš„IPåœ°å€ï¼Œç”±ISPçš„DNSæœåŠ¡å™¨æ‰˜ç®¡ã€‚å½“ä½ ä½¿ç”¨Warpæ—¶ï¼ŒWarpå°†æ‰‹æœºä¸Šçš„DNSæœåŠ¡å™¨å›ºå®šä¸º1.1.1.1ã€‚å› æ­¤ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½è½¬åˆ°Cloudflareçš„å®‰å…¨æœåŠ¡å™¨ã€‚</p><p>Warpåœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªé¢å¤–çš„æµç¨‹ï¼Œä½¿å¾—è®¾å¤‡å’ŒCloudflareæœåŠ¡å™¨ä¹‹é—´çš„æ‰€æœ‰æµé‡éƒ½æ˜¯åŠ å¯†æµé‡ã€‚<strong>ä½†Warpæ˜¯åŸºäºWireGuardéš§é“çš„UDPåè®®ï¼Œä¸­å›½å¤§é™†ç»å¤§éƒ¨åˆ†è¿è¥å•†éƒ½ä¼šå¯¹è¿™ç±»æµé‡è¿›è¡Œæƒ©ç½šå¼ã€é™é€Ÿå¼çš„é™åˆ¶ç­–ç•¥ï¼Œå¯¼è‡´Warpåœ¨å¤§é™†ä½¿ç”¨ä¸Šçªå‘å¾ˆé«˜ï¼Œä½†å‡é€Ÿå¾ˆä½ã€‚(åªèƒ½ç”¨äºfailover</strong> ğŸ˜… å†åŠ ä¸ŠCloudflareçš„è®¸å¤šIPè¢«å›½å†…Blockï¼Œä½¿å¾—Warpåœ¨å¤§é™†æ¥è¿‘ä¸€ä¸ªä¸å¯ç”¨çš„çŠ¶æ€ã€‚</p><p>Clashæ˜¯ä¸€ä¸ªå¼€æºçš„å¤šåè®®ä»£ç†å·¥å…·ï¼Œå¯ä»¥ç”¨äºå®ç°ç½‘ç»œæµé‡çš„ä»£ç†å’Œè½¬å‘ã€‚å®ƒæ”¯æŒå¤šç§ä»£ç†åè®®ï¼ˆå¦‚Shadowsocksã€VMessã€Trojanã€Socks5ç­‰ï¼‰å’Œè·¯ç”±è§„åˆ™ï¼Œèƒ½å¤Ÿå®ç°çµæ´»çš„ç½‘ç»œæµé‡æ§åˆ¶å’Œä»£ç†åŠŸèƒ½ã€‚</p><p>å½“ä½¿ç”¨ clash ä½œä¸ºç³»ç»Ÿä»£ç†æˆ–è€…ç›´æ¥å°†æµè§ˆå™¨çš„ä»£ç†è®¾ç½®ä¸º clash æ—¶, è¯·æ±‚ä¼šäº¤ç»™ clash æ¥å¤„ç†, åŒ…æ‹¬ dns è§£æ, å½“ç„¶ clash æ‹¿åˆ°è¯·æ±‚ä¹‹å, å¹¶ä¸ä¼šå…ˆ dns è§£æ ip, å®ƒä¼šå…ˆæ ¹æ®è§„åˆ™ä¸€æ¡ä¸€æ¡åŒ¹é…, å¦‚æœæœ‰å‘½ä¸­è§„åˆ™, åˆ™æ ¹æ®ç›¸åº”çš„è§„åˆ™å»å¤„ç†.</p><p>è¿™é‡Œè¦æ³¨æ„ä¸€ä¸‹Â <code>IP-CIDR</code>, å¦‚æœåé¢æ²¡æœ‰Â <code>no-resolve</code>, åˆ™éœ€è¦ dns è§£æ ip, è§£æåˆ° ip (å¯èƒ½è¢«æ±¡æŸ“)åå†æ ¹æ®æ­¤æ¡è¿›è¡Œå¯¹æ¯”, å¦‚æœæ²¡å‘½ä¸­åˆ™è¿›è¡Œä¸‹ä¸€æ¡è§„åˆ™. å¦‚æœå‘½ä¸­äº†, èµ°ä»£ç†, åˆ™ä¸ç®¡å®ƒæœ‰æ²¡æœ‰è¢«æ±¡æŸ“, è¯·æ±‚éƒ½ä¼šè½¬å‘åˆ°èŠ‚ç‚¹æœåŠ¡å™¨; å¦‚æœèµ°ç›´è¿, åˆ™å¯èƒ½ä¼šè¢«æ±¡æŸ“å½±å“. å½“ç„¶åŠ ä¸ŠÂ <code>no-resolve</code>Â ä¹‹å, å°±ä¼šè®© clash ä¸è¿›è¡Œ dns è§£æ, æ‰€ä»¥æ­¤æ¡Â <code>IP-CIDR</code>Â çš„ç›´æ¥ pass æ‰, å¯ä»¥è¿™ä¹ˆè¯´, åªæœ‰å½“æµè§ˆå™¨ç›´æ¥å¯¹ ip åœ°å€å‘èµ·è¯·æ±‚çš„æ—¶å€™,Â <code>IP-CIDR</code>Â æ‰ä¼šæœ‰æ•ˆæœ.</p><p>æ¥ä¸‹æ¥å†è®¨è®ºä¸‹æ‰‹æœºä¸Šçš„ qx / surge ç­‰å·¥å…·, æˆ–è€… clash å¼€å¯äº† enhanced mode å, dns è§£æè¿™ä¸€å—å‘ç”Ÿçš„å˜åŒ–.</p><p>ç”±äºè¯·æ±‚å¹¶ä¸æ˜¯ç›´æ¥äº¤ç»™ä»£ç†å»å¤„ç†, æ‰€ä»¥æµè§ˆå™¨éœ€è¦å…ˆæ„å»º dns æŸ¥è¯¢è¯·æ±‚, è¯·æ±‚æ¥åˆ°äº† qx æˆ–è€…è½¯è·¯ç”±ä¸Šé¢çš„ clash (é€æ˜ä»£ç†)å, è¢«å®ƒåŠ«æŒ, å®ƒæœ‰ä¸¤ç§å¤„ç†æ–¹å¼, redir-host å’Œ fake-ip, å‰è€…å·²ç»è¢«é—å¼ƒ, å› ä¸ºå‰è€…æ˜¯è¦å»è·å– dns è§£æçš„, dns è§£æå¯èƒ½ä¼šè§£æåˆ°æ±¡æŸ“çš„ ip, å¹¶ä¸”å¤§å¤šæ—¶å€™å¹¶ä¸éœ€è¦å®ƒè¿›è¡Œ dns è§£æ. æ‰€ä»¥ fake-ip æ˜¯ä¸»æµ, fake-ip ç›´æ¥è¿”å›ä¸€æ¡å‡çš„ ip, å¹¶ä¸”å¯¹ ip å’ŒåŸŸåè¿›è¡Œäº†æ˜ å°„å…³ç³»ç¼“å­˜, è¿™æ ·æµè§ˆå™¨æ‹¿åˆ°å‡çš„ ip åè¿›è¡Œ tcp è¿æ¥, è¯·æ±‚å†æ¬¡åˆ°è¾¾ qx / clash, è¢«æˆªè·å, æ‰¾åˆ°å¯¹åº”çš„åŸŸå, æ¥ä¸‹æ¥å°±æ˜¯é’ˆå¯¹åŸŸåçš„è§„åˆ™åŒ¹é….</p><p><strong>trojan</strong>æ˜¯è¿‘äº›å¹´å…´èµ·çš„ç½‘ç»œå·¥å…·ï¼Œé¡¹ç›®å®˜ç½‘Â <a href="https://github.com/trojan-gfw%E3%80%82%E4%B8%8E**%E5%BC%BA%E8%B0%83%E5%8A%A0%E5%AF%86**%E5%92%8C%E6%B7%B7%E6%B7%86%E7%9A%84SS/SSR%E7%AD%89%E5%B7%A5%E5%85%B7%E4%B8%8D%E5%90%8C%EF%BC%8Ctrojan%E5%B0%86%E9%80%9A%E4%BF%A1%E6%B5%81%E9%87%8F%E4%BC%AA%E8%A3%85%E6%88%90%E4%BA%92%E8%81%94%E7%BD%91%E4%B8%8A%E6%9C%80%E5%B8%B8%E8%A7%81%E7%9A%84https%E6%B5%81%E9%87%8F%EF%BC%8C%E4%BB%8E%E8%80%8C%E6%9C%89%E6%95%88%E9%98%B2%E6%AD%A2%E6%B5%81%E9%87%8F%E8%A2%AB%E6%A3%80%E6%B5%8B%E5%92%8C%E5%B9%B2%E6%89%B0%E3%80%82%E5%9C%A8%E6%95%8F%E6%84%9F%E6%97%B6%E6%9C%9F%EF%BC%8C%E5%9F%BA%E6%9C%AC%E4%B8%8A%E5%8F%AA%E6%9C%89**trojan%E5%92%8C">https://github.com/trojan-gfwã€‚ä¸**å¼ºè°ƒåŠ å¯†**å’Œæ··æ·†çš„SS/SSRç­‰å·¥å…·ä¸åŒï¼Œtrojanå°†é€šä¿¡æµé‡ä¼ªè£…æˆäº’è”ç½‘ä¸Šæœ€å¸¸è§çš„httpsæµé‡ï¼Œä»è€Œæœ‰æ•ˆé˜²æ­¢æµé‡è¢«æ£€æµ‹å’Œå¹²æ‰°ã€‚åœ¨æ•æ„Ÿæ—¶æœŸï¼ŒåŸºæœ¬ä¸Šåªæœ‰**trojanå’Œ</a>Â <a href="https://itlanyan.com/v2ray-traffic-mask/">v2rayä¼ªè£…</a>Â èƒ½æä¾›ç¨³å¦‚ç‹—çš„ä½“éªŒ**ã€‚</p><p>æƒ³è¦é•¿æœŸç¨³å®šé«˜æ•ˆçš„ç§‘å­¦ä¸Šç½‘ï¼Œsocks5 ç±»å‹çš„ä»£ç†åŸºæœ¬æ˜¯å¿…é¡»è¦æŒæ¡çš„ã€‚Clash æ”¯æŒçš„ä»£ç†ç±»å‹æœ‰Â <code>ss</code>ã€<code>vmess</code>ã€<code>socks5</code>ã€<code>http</code>Â å’ŒÂ <code>snell</code></p><p><strong>SOCKS</strong>æ˜¯ä¸€ç§<a href="https://en.wikipedia.org/wiki/Internet">Internet</a>Â <a href="https://en.wikipedia.org/wiki/Protocol_(computing)">åè®®</a>ï¼Œå®ƒé€šè¿‡<a href="https://en.wikipedia.org/wiki/Proxy_server">ä»£ç†æœåŠ¡å™¨åœ¨</a><a href="https://en.wikipedia.org/wiki/Client_(computing)">å®¢æˆ·ç«¯</a>å’Œ<a href="https://en.wikipedia.org/wiki/Server_(computing)">æœåŠ¡å™¨</a>ä¹‹é—´äº¤æ¢<a href="https://en.wikipedia.org/wiki/Packet_(information_technology)">ç½‘ç»œæ•°æ®åŒ…</a>ã€‚<strong>SOCKS5</strong>å¯é€‰æ‹©æä¾›<a href="https://en.wikipedia.org/wiki/Authentication">èº«ä»½éªŒè¯</a>ï¼Œå› æ­¤åªæœ‰æˆæƒç”¨æˆ·æ‰èƒ½è®¿é—®æœåŠ¡å™¨ã€‚å®é™…ä¸Šï¼ŒSOCKS æœåŠ¡å™¨å°† TCP è¿æ¥ä»£ç†åˆ°ä»»æ„ IP åœ°å€ï¼Œå¹¶æä¾›ä¸€ç§è½¬å‘ UDP æ•°æ®åŒ…çš„æ–¹æ³•ã€‚</p><p>SOCKS æ‰§è¡Œåœ¨<a href="https://en.wikipedia.org/wiki/OSI_model">OSI æ¨¡å‹</a>çš„ç¬¬ 5 å±‚ï¼ˆ<a href="https://en.wikipedia.org/wiki/Session_layer">ä¼šè¯å±‚ï¼Œ</a><a href="https://en.wikipedia.org/wiki/Presentation_layer">è¡¨ç¤ºå±‚</a>å’Œ<a href="https://en.wikipedia.org/wiki/Transport_layer">ä¼ è¾“å±‚</a>ä¹‹é—´çš„ä¸­é—´å±‚ï¼‰ã€‚SOCKS æœåŠ¡å™¨æ¥å— TCP ç«¯å£ 1080 ä¸Šçš„ä¼ å…¥å®¢æˆ·ç«¯è¿æ¥ï¼Œå¦‚<a href="https://en.wikipedia.org/wiki/RFC_(identifier)">RFC</a>Â Â <a href="https://datatracker.ietf.org/doc/html/rfc1928">1928</a>ä¸­æ‰€å®šä¹‰ã€‚</p><p>SOCKSä½¿ç”¨<a href="https://zh.wikipedia.org/w/index.php?title=%E6%8F%A1%E6%89%8B%E5%8D%8F%E8%AE%AE&amp;action=edit&amp;redlink=1">æ¡æ‰‹åè®®</a>æ¥é€šçŸ¥ä»£ç†è½¯ä»¶å…¶å®¢æˆ·ç«¯è¯•å›¾è¿›è¡Œçš„SOCKSè¿æ¥ï¼Œç„¶åå°½å¯èƒ½é€æ˜åœ°è¿›è¡Œæ“ä½œï¼Œè€Œå¸¸è§„ä»£ç†å¯èƒ½ä¼šè§£é‡Šå’Œé‡å†™æŠ¥å¤´ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨å¦ä¸€ç§åº•å±‚åè®®ï¼Œä¾‹å¦‚<a href="https://zh.wikipedia.org/wiki/%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE">FTP</a>ï¼›ç„¶è€Œï¼ŒHTTPä»£ç†åªæ˜¯å°†HTTPè¯·æ±‚è½¬å‘åˆ°æ‰€éœ€çš„HTTPæœåŠ¡å™¨ï¼‰ã€‚è™½ç„¶HTTPä»£ç†æœ‰ä¸åŒçš„ä½¿ç”¨æ¨¡å¼ï¼Œ<a href="https://zh.wikipedia.org/wiki/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE">HTTP CONNECT</a>æ–¹æ³•å…è®¸è½¬å‘TCPè¿æ¥ï¼›ç„¶è€Œï¼ŒSOCKSä»£ç†è¿˜å¯ä»¥è½¬å‘<a href="https://zh.wikipedia.org/wiki/%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AE">UDP</a>æµé‡ï¼ˆä»…SOCKS5ï¼‰ï¼Œè€ŒHTTPä»£ç†ä¸èƒ½ã€‚HTTPä»£ç†é€šå¸¸æ›´äº†è§£HTTPåè®®ï¼Œæ‰§è¡Œæ›´é«˜å±‚æ¬¡çš„è¿‡æ»¤ï¼ˆè™½ç„¶é€šå¸¸åªç”¨äºGETå’ŒPOSTæ–¹æ³•ï¼Œè€Œä¸ç”¨äºCONNECTæ–¹æ³•ï¼‰ã€‚</p><p><strong>socks5</strong> ç±»å‹çš„ä»£ç†æœåŠ¡å™¨åœ¨ç½‘ç»œå±‚çº§ä¸Šæ˜¯å·¥ä½œäºåº”ç”¨å±‚çš„<strong>ä¼šè¯å±‚</strong>ï¼Œå¾ˆå¤šæµé‡éƒ½æ— æ³•ä»£ç†ï¼Œå› ä»å³ä¾¿æ˜¯å¼€äº†æ‰€è°“çš„å…¨å±€ï¼Œä¹Ÿä¸èƒ½ç»™æ¸¸æˆåŠ é€Ÿï¼Œæ¯•ç«Ÿæ¸¸æˆçš„ç½‘ç»œä¼ è¾“ä¸€èˆ¬éƒ½æ˜¯è·‘åœ¨ä¼ è¾“å±‚çš„ã€‚<strong>åƒ Ping å’Œ Trace è¿™äº› ICMP å‘½ä»¤è‡ªç„¶ä¹Ÿæ˜¯æ— æ³•é€šè¿‡ä»£ç†çš„</strong>ã€‚ï¼ˆå½“ç„¶ä¹Ÿæœ‰æ–¹æ³•å¯ä»¥ç”¨è½¯ä»¶å¼ºåˆ¶æ¥ç®¡è™šæ‹Ÿç½‘å¡è¾¾åˆ°çœŸå…¨å±€çš„ç›®çš„ï¼Œæ¯”å¦‚ SSTAPï¼Œtun2socks ç­‰ç­‰ï¼‰</p><p>å¦‚æœå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¯ä»¥ç‹¬ç«‹å‘åŒ…ï¼Œä½†æ˜¯å¶å°”å‘ç”Ÿå»¶è¿Ÿå¯ä»¥å®¹å¿ï¼ˆæ¯”å¦‚ï¼šåœ¨çº¿çš„çº¸ç‰Œæ¸¸æˆï¼Œè®¸å¤šMMOç±»çš„æ¸¸æˆï¼‰ï¼Œé‚£ä¹ˆå¯è€ƒè™‘ä½¿ç”¨TCPé•¿è¿æ¥å¦‚æœå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¯ä»¥ç‹¬ç«‹å‘åŒ…ï¼Œè€Œä¸”æ— æ³•å¿å—å»¶è¿Ÿï¼ˆæ¯”å¦‚ï¼šå¤§å¤šæ•°çš„å¤šäººåŠ¨ä½œç±»æ¸¸æˆï¼Œä¸€äº›MMOç±»æ¸¸æˆï¼‰ï¼Œé‚£ä¹ˆè€ƒè™‘ä½¿ç”¨UDPåŠ é€Ÿå™¨åŸç† åŠ é€Ÿå™¨çš„åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯UDPä»£ç†</p><p><strong>ä¸»è¦éš¾åœ¨ä¸¤ç‚¹ï¼Œå…¶ä¸€æ˜¯æ€ä¹ˆå¤„ç†æ¸¸æˆå®¢æˆ·ç«¯åˆ°åŠ é€Ÿå™¨æœåŠ¡å™¨ä¹‹é—´çš„UDPè¿æ¥ï¼Œå…¶äºŒæ˜¯æ€ä¹ˆè®©æ¸¸æˆå®¢æˆ·ç«¯å»è¿æ¥è¿™ä¸ªåŠ é€Ÿå™¨ï¼ˆä¸€èˆ¬æ¸¸æˆå®¢æˆ·ç«¯æ˜¯æ²¡æœ‰è®¾ç½®ä»£ç†æœåŠ¡å™¨çš„åŠŸèƒ½çš„ï¼‰</strong></p><p>å¤„ç†UDPæœ‰ä¸¤ç§æ€è·¯ï¼Œä¸€ç§æ˜¯åè®®å¥—å¨ƒï¼Œå°†æ¸¸æˆçš„UDPåŒ…å¤–é¢å¥—ä¸€å±‚TCPï¼ˆUDP over TCP ï¼‰ï¼Œåˆ°äº†ç›®çš„åœ°å†æŠŠTCPè§£åŒ…æˆUDPï¼Œæœ€ååœ¨å‘é€åˆ°æ¸¸æˆæœåŠ¡å™¨ï¼Œè¿”å›çš„æ•°æ®åŒ…ä¹ŸåšåŒæ ·å¤„ç†ï¼›å¦å¤–ä¸€ç§æ˜¯ä¼ªé€ TCPï¼ˆFakeTCPï¼‰ï¼Œå¯¹UDPæ•°æ®åŒ…åŠ ä¸Šä¼ªé€ çš„TCPåŒ…å¤´ï¼Œè®©å…¶çœ‹èµ·æ¥åƒæ˜¯TCPåè®®ï¼Œæ¬ºéª—è¿è¥å•†ã€‚</p><p>ä¸»åŠ¨æ£€æµ‹<br>HTTPæ‰€æœ‰æ²¡æœ‰æ­£ç¡®ç»“æ„å’Œå¯†ç çš„è¿æ¥éƒ½å°†è¢«é‡å®šå‘åˆ°é¢„è®¾ç«¯ç‚¹,å› æ­¤,å¦‚æœå¯ç–‘æ¢é’ˆè¿æ¥(æˆ–è€…åªæ˜¯æ‚¨çš„ç²‰ä¸è¿æ¥åˆ°æ‚¨çš„åšå®¢XD),æœ¨é©¬æœåŠ¡å™¨çš„è¡Œä¸ºä¸è¯¥ç«¯ç‚¹å®Œå…¨ç›¸åŒ(é»˜è®¤æƒ…å†µä¸‹)ã€‚<br>è¢«åŠ¨æ£€æµ‹<br>å› ä¸ºæµé‡å—åˆ°ä¿æŠ¤TLS(ç”¨æˆ·æœ‰è´£ä»»ä½¿ç”¨æœ‰æ•ˆçš„è¯ä¹¦),æ‰€ä»¥å¦‚æœä½ æ­£åœ¨è®¿é—®ä¸€ä¸ªHTTPç«™ç‚¹,æµé‡çœ‹èµ·æ¥<br>æ˜¯ä¸€æ ·çš„(æ¡æ‰‹åHTTPSåªæœ‰ä¸€ä¸ª);å¦‚æœæ‚¨æ²¡æœ‰è®¿é—®æŸä¸ªç«™ç‚¹,é‚£ä¹ˆæµé‡çœ‹èµ·æ¥ä¸â€œä¿æŒæ´»åŠ¨çŠ¶æ€â€æˆ–â€œä¿æŒæ´»åŠ¨çŠ¶æ€â€œç›¸åŒã€‚å› æ­¤,æœ¨é©¬è¿˜å¯ä»¥ç»•è¿‡ISPé™åˆ¶ã€‚RTT TLS HTTP HTTPS WebSocket QoS</p><p><strong>å¸¸è§ç«¯å£æ‰«ææŠ€æœ¯</strong></p><p><strong>3.3.2.1. å…¨æ‰«æ</strong></p><p>æ‰«æä¸»æœºå°è¯•ä½¿ç”¨ä¸‰æ¬¡æ¡æ‰‹ä¸ç›®æ ‡ä¸»æœºçš„æŸä¸ªç«¯å£å»ºç«‹æ­£è§„çš„è¿æ¥ï¼Œè‹¥æˆåŠŸå»ºç«‹è¿æ¥ï¼Œåˆ™ç«¯å£å¤„äºå¼€æ”¾çŠ¶æ€ï¼Œåä¹‹å¤„äºå…³é—­çŠ¶æ€ã€‚</p><p>å…¨æ‰«æå®ç°ç®€å•ï¼Œä¸”ä»¥è¾ƒä½çš„æƒé™å°±å¯ä»¥è¿›è¡Œè¯¥æ“ä½œã€‚ä½†æ˜¯åœ¨æµé‡æ—¥å¿—ä¸­ä¼šæœ‰å¤§é‡æ˜æ˜¾çš„è®°å½•ã€‚</p><p><strong>3.3.2.2. åŠæ‰«æ</strong></p><p>åŠæ‰«æä¹Ÿç§°SYNæ‰«æï¼Œåœ¨åŠæ‰«æä¸­ï¼Œä»…å‘é€SYNæ•°æ®æ®µï¼Œå¦‚æœåº”ç­”ä¸ºRSTï¼Œåˆ™ç«¯å£å¤„äºå…³é—­çŠ¶æ€ï¼Œè‹¥åº”ç­”ä¸ºSYN/ACKï¼Œåˆ™ç«¯å£å¤„äºç›‘å¬çŠ¶æ€ã€‚ä¸è¿‡è¿™ç§æ–¹å¼éœ€è¦è¾ƒé«˜çš„æƒé™ï¼Œè€Œä¸”ç°åœ¨çš„å¤§éƒ¨åˆ†é˜²ç«å¢™å·²ç»å¼€å§‹å¯¹è¿™ç§æ‰«ææ–¹å¼åšå¤„ç†ã€‚</p><p><strong>3.3.2.3. FINæ‰«æ</strong></p><p>FINæ‰«ææ˜¯å‘ç›®æ ‡å‘é€ä¸€ä¸ªFINæ•°æ®åŒ…ï¼Œå¦‚æœæ˜¯å¼€æ”¾çš„ç«¯å£ï¼Œä¼šè¿”å›RSTæ•°æ®åŒ…ï¼Œå…³é—­çš„ç«¯å£åˆ™ä¸ä¼šè¿”å›æ•°æ®åŒ…ï¼Œå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥åˆ¤æ–­ç«¯å£æ˜¯å¦æ‰“å¼€ã€‚</p><p>è¿™ç§æ–¹å¼å¹¶ä¸åœ¨TCPä¸‰æ¬¡æ¡æ‰‹çš„çŠ¶æ€ä¸­ï¼Œæ‰€ä»¥ä¸ä¼šè¢«è®°å½•ï¼Œç›¸å¯¹SYNæ‰«æè¦æ›´éšè”½ä¸€äº›ã€‚</p><h3 id="HTTPSåŠ å¯†">HTTPSåŠ å¯†</h3><p>æ˜¯çš„ï¼ŒHTTPSï¼ˆHypertext Transfer Protocol Secureï¼‰ä½¿ç”¨äº†æ··åˆåŠ å¯†æœºåˆ¶ï¼ŒåŒ…æ‹¬éå¯¹ç§°åŠ å¯†å’Œå¯¹ç§°åŠ å¯†ï¼Œä»¥ç¡®ä¿å®‰å…¨çš„æ•°æ®ä¼ è¾“ã€‚</p><p><strong>TLS 1.2 å‡çº§æˆ TLS 1.3ï¼ŒTLS 1.3 å¤§å¹…åº¦ç®€åŒ–äº†æ¡æ‰‹çš„æ­¥éª¤ï¼Œå®Œæˆ TLS æ¡æ‰‹åªè¦ 1 RTTï¼Œè€Œä¸”å®‰å…¨æ€§æ›´é«˜ã€‚åœ¨ TLS 1.2 çš„æ¡æ‰‹ä¸­ï¼Œä¸€èˆ¬æ˜¯éœ€è¦ 4 æ¬¡æ¡æ‰‹ï¼Œå…ˆè¦é€šè¿‡ Client Hello ï¼ˆç¬¬ 1 æ¬¡æ¡æ‰‹ï¼‰å’Œ Server Helloï¼ˆç¬¬ 2 æ¬¡æ¡æ‰‹ï¼‰ æ¶ˆæ¯</strong>åå•†<strong>å‡ºåç»­ä½¿ç”¨çš„åŠ å¯†ç®—æ³•ï¼Œå†äº’ç›¸äº¤æ¢å…¬é’¥ï¼ˆç¬¬ 3 å’Œ ç¬¬ 4 æ¬¡æ¡æ‰‹ï¼‰</strong></p><p>SSLæ¡æ‰‹çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>SSLæˆ–TLSå®¢æˆ·ç«¯å…ˆå‘æœåŠ¡ç«¯å‘é€ä¸€ä¸ªåŠ å¯†é€šä¿¡è¯·æ±‚ï¼Œå«åšClientHelloè¯·æ±‚ã€‚è¯¥è¯·æ±‚åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š<ul><li>å®¢æˆ·ç«¯æ”¯æŒçš„SSLæˆ–è€…TLSç‰ˆæœ¬</li><li>å®¢æˆ·ç«¯ç”Ÿæˆçš„éšæœºæ•°ï¼Œç”¨äºç”Ÿæˆåç»­é€šä¿¡çš„éšæœºå­—ç¬¦ä¸²ï¼ˆâ€œå¯¹è¯å¯†é’¥â€ï¼‰</li><li>å®¢æˆ·ç«¯æ”¯æŒçš„åŠ å¯†ç®—æ³•</li></ul></li><li>SSLæˆ–TLSæœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚åï¼Œå‘å®¢æˆ·ç«¯å‘å‡ºå“åº”ï¼Œå«åšServerHelloã€‚è¯¥å“åº”åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š<ul><li>æœåŠ¡ç«¯ä»å®¢æˆ·ç«¯æä¾›çš„SSLæˆ–TLSåˆ—è¡¨ä¸­é€‰æ‹©çš„ç‰ˆæœ¬</li><li>Sesstion ID å’Œ å¦å¤–ç”Ÿæˆçš„éšæœºæ•°</li><li>æœåŠ¡ç«¯çš„æ•°å­—è¯ä¹¦ï¼ˆå¦‚æœæœåŠ¡ç«¯éœ€è¦ç”¨äºå®¢æˆ·ç«¯èº«ä»½éªŒè¯çš„æ•°å­—è¯ä¹¦ï¼Œåˆ™æœåŠ¡ç«¯å‘é€ä¸€ä¸ªå®¢æˆ·ç«¯è¯ä¹¦è¯·æ±‚ï¼Œå…¶ä¸­åŒ…å«å—æ”¯æŒçš„è¯ä¹¦ç±»å‹åˆ—è¡¨å’Œå¯æ¥å—çš„è®¤è¯æœºæ„(CAs)çš„ä¸“æœ‰åç§°ã€‚ï¼‰</li><li>ç¡®è®¤ä½¿ç”¨çš„åŠ å¯†ç®—æ³•</li></ul></li><li>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯å“åº”åï¼Œé¦–å…ˆæ ¡éªŒæœåŠ¡ç«¯å‘æ¥çš„æ•°å­—è¯ä¹¦å†³å®šæ˜¯å¦ç»§ç»­é€šä¿¡ã€‚</li><li><strong>TLS ç¬¬ä¸‰æ¬¡æ¡æ‰‹</strong>    å®¢æˆ·ç«¯éªŒè¯å®Œè¯ä¹¦åï¼Œè®¤ä¸ºå¯ä¿¡åˆ™ç»§ç»­å¾€ä¸‹èµ°ã€‚ æ¥ç€ï¼Œå®¢æˆ·ç«¯å°±ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„<strong>éšæœºæ•° (<em>pre-master</em>)</strong>ï¼Œç”¨æœåŠ¡å™¨çš„ RSA å…¬é’¥åŠ å¯†è¯¥éšæœºæ•°ï¼Œé€šè¿‡ã€Œ<strong>Client Key Exchange</strong>ã€æ¶ˆæ¯ä¼ ç»™æœåŠ¡ç«¯ã€‚ æœåŠ¡ç«¯æ”¶åˆ°åï¼Œç”¨ RSA ç§é’¥è§£å¯†ï¼Œå¾—åˆ°å®¢æˆ·ç«¯å‘æ¥çš„éšæœºæ•° (pre-master)ã€‚ è‡³æ­¤ï¼Œ<strong>å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åŒæ–¹éƒ½å…±äº«äº†ä¸‰ä¸ªéšæœºæ•°ï¼Œåˆ†åˆ«æ˜¯ Client Randomã€Server Randomã€pre-master</strong>ã€‚ äºæ˜¯ï¼ŒåŒæ–¹æ ¹æ®å·²ç»å¾—åˆ°çš„ä¸‰ä¸ªéšæœºæ•°ï¼Œç”Ÿæˆ<strong>ä¼šè¯å¯†é’¥ï¼ˆMaster Secretï¼‰</strong>ï¼Œå®ƒæ˜¯å¯¹ç§°å¯†é’¥ï¼Œç”¨äºå¯¹åç»­çš„ HTTP è¯·æ±‚/å“åº”çš„æ•°æ®åŠ è§£å¯†ã€‚ ç”Ÿæˆå®Œã€Œä¼šè¯å¯†é’¥ã€åï¼Œç„¶åå®¢æˆ·ç«¯å‘ä¸€ä¸ªã€Œ<strong>Change Cipher Spec</strong>ã€ï¼Œå‘Šè¯‰æœåŠ¡ç«¯å¼€å§‹ä½¿ç”¨åŠ å¯†æ–¹å¼å‘é€æ¶ˆæ¯ã€‚</li><li>å¦‚æœæœåŠ¡ç«¯å‘é€äº†ä¸€ä¸ªå®¢æˆ·ç«¯è¯ä¹¦è¯·æ±‚ï¼Œå®¢æˆ·ç«¯å°†ä¼šå‘é€ä¸€ä¸ªç”¨å®¢æˆ·ç«¯ç§é’¥åŠ å¯†çš„éšæœºå­—ç¬¦ä¸²å’Œå®¢æˆ·ç«¯çš„æ•°å­—è¯ä¹¦ï¼Œæˆ–è€…æ²¡æœ‰æ•°å­—è¯ä¹¦çš„è­¦å‘Šã€‚åœ¨æŸäº›å¼ºåˆ¶å®¢æˆ·ç«¯è¯ä¹¦çš„å®ç°ä¸­ï¼Œå¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰æ•°å­—è¯ä¹¦ï¼Œåˆ™æ¡æ‰‹ä¼šå¤±è´¥.</li><li>æœåŠ¡ç«¯æ¥å—å¹¶éªŒè¯å®¢æˆ·ç«¯è¯ä¹¦</li><li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¸€æ¡å®Œæˆçš„æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯ä½¿ç”¨å¯†é’¥åŠ å¯†ï¼Œè¡¨ç¤ºæ¡æ‰‹çš„å®¢æˆ·ç«¯éƒ¨åˆ†å·²ç»å®Œæˆã€‚</li><li>æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€ä¸€æ¡å®Œæˆçš„æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯ä½¿ç”¨å¯†é’¥åŠ å¯†ï¼Œè¡¨ç¤ºæ¡æ‰‹çš„æœåŠ¡ç«¯éƒ¨åˆ†å·²ç»å®Œæˆ</li><li>åœ¨SSLæˆ–TLSä¼šè¯æœŸé—´ï¼ŒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç°åœ¨å¯ä»¥äº¤æ¢ä½¿ç”¨å…±äº«å¯†é’¥å¯¹ç§°åŠ å¯†çš„æ¶ˆæ¯</li></ol><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e8136f52-d35d-46c6-964e-ab05e6590e71/Untitled.png" alt="Untitled"></p><p>A rainbow table is a precomputed table of passwords and their hashes,</p><p><a href="https://en.wikipedia.org/wiki/Salt_(cryptography)">å½©è™¹è¡¨å¯¹åŒ…å«å¤§é‡ç›</a>çš„å•å‘å“ˆå¸Œæ— æ•ˆã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä½¿ç”¨ä»¥ä¸‹å‡½æ•°ç”Ÿæˆçš„å¯†ç å“ˆå¸Œï¼ˆå…¶ä¸­â€œÂ +Â â€æ˜¯<a href="https://en.wikipedia.org/wiki/Concatenation">ä¸²è”</a>è¿ç®—ç¬¦ï¼‰ï¼š</p><p><code>saltedhash(password) = hash(password + salt)</code></p><p>è¦ä¹ˆ</p><p><code>saltedhash(password) = hash(hash(password) + salt)</code></p><p>salt å€¼ä¸æ˜¯ç§˜å¯†çš„ï¼Œå¯ä»¥éšæœºç”Ÿæˆå¹¶ä¸å¯†ç å“ˆå¸Œä¸€èµ·å­˜å‚¨ã€‚å¤§ç›å€¼é€šè¿‡ç¡®ä¿æ¯ä¸ªç”¨æˆ·çš„å¯†ç è¢«å”¯ä¸€åœ°æ•£åˆ—æ¥é˜²æ­¢é¢„è®¡ç®—æ”»å‡»ï¼ŒåŒ…æ‹¬å½©è™¹è¡¨ã€‚è¿™æ„å‘³ç€å…·æœ‰ç›¸åŒå¯†ç çš„ä¸¤ä¸ªç”¨æˆ·å°†å…·æœ‰ä¸åŒçš„å¯†ç å“ˆå¸Œå€¼ï¼ˆå‡è®¾ä½¿ç”¨ä¸åŒçš„ç›ï¼‰ã€‚ä¸ºäº†æˆåŠŸï¼Œæ”»å‡»è€…éœ€è¦ä¸ºæ¯ä¸ªå¯èƒ½çš„ç›å€¼é¢„å…ˆè®¡ç®—è¡¨ã€‚salt å¿…é¡»è¶³å¤Ÿå¤§ï¼Œå¦åˆ™æ”»å‡»è€…å¯ä»¥ä¸ºæ¯ä¸ª salt å€¼åˆ¶ä½œä¸€ä¸ªè¡¨ã€‚å¯¹äºä½¿ç”¨ 12 ä½ç›çš„æ—§<a href="https://en.wikipedia.org/wiki/Crypt_(C)">Unix å¯†ç ï¼Œè¿™å°†éœ€è¦ 4096 ä¸ªè¡¨ï¼Œè¿™ä¼šæ˜¾ç€å¢åŠ æ”»å‡»è€…çš„æˆæœ¬ï¼Œä½†å¯¹äº TB ç¡¬ç›˜é©±åŠ¨å™¨æ¥è¯´å¹¶éä¸åˆ‡å®é™…ã€‚</a><a href="https://en.wikipedia.org/wiki/Crypt_(C)#SHA2-based_scheme">SHA2-crypt</a>å’Œ<a href="https://en.wikipedia.org/wiki/Crypt_(C)#Blowfish-based_scheme">bcrypt</a>æ–¹æ³•â€”â€”ç”¨äº<a href="https://en.wikipedia.org/wiki/Linux">Linux</a>ã€<a href="https://en.wikipedia.org/wiki/BSD">BSD</a>Â Unixes å’Œ<a href="https://en.wikipedia.org/wiki/Solaris_(operating_system)">Solaris</a>Â â€” æœ‰ 128 ä½çš„ç›ã€‚<a href="https://en.wikipedia.org/wiki/Rainbow_table#cite_note-alexander-4">[4]</a>è¿™äº›è¾ƒå¤§çš„ç›å€¼ä½¿å¾—é’ˆå¯¹è¿™äº›ç³»ç»Ÿçš„é¢„è®¡ç®—æ”»å‡»å¯¹äºå‡ ä¹ä»»ä½•é•¿åº¦çš„å¯†ç éƒ½ä¸å¯è¡Œã€‚å³ä½¿æ”»å‡»è€…å¯ä»¥æ¯ç§’ç”Ÿæˆä¸€ç™¾ä¸‡å¼ è¡¨ï¼Œä»–ä»¬ä»ç„¶éœ€è¦æ•°åäº¿å¹´æ‰èƒ½ä¸ºæ‰€æœ‰å¯èƒ½çš„ç›ç”Ÿæˆè¡¨ã€‚ Or by key  strengthening</p><p>Injectionâ€”     Could try to â€œsanitiseâ€ (clean/make safe) data input, but there is a better solution. â€¢ Do not create SQL (or similar statements) by adding together strings. â€¢ Can use special routines designed to produce these statements. â€¢ Languages designed for the web contain functions to help with this. â€¢ In Java, PreparedStatement is a class to do this.</p><h3 id="Socket">Socket</h3><p>HTTPæ˜¯æ„å»ºåœ¨TCPåè®®ä¹‹ä¸Šçš„ï¼Œè€ŒTCPå¯ä»¥ä½¿ç”¨Socketæ¥å®ç°ç½‘ç»œé€šä¿¡ã€‚åŸºäºè¿™ä¸€ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨Socketç¼–ç¨‹æ¥åˆ›å»ºHTTPå®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨ã€‚<strong>Socket APIæä¾›äº†å¯¹åº•å±‚ç½‘ç»œé€šä¿¡çš„è®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚Pythonã€Javaã€C++ç­‰ï¼‰çš„Socketåº“æ¥å®ç°HTTPå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨</strong>ã€‚Socket APi ä¹Ÿå¯ä»¥å®ç°UDPé€šä¿¡</p><p>å¯¹äºHTTPå®¢æˆ·ç«¯ï¼š</p><ul><li>å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨Socketå»ºç«‹ä¸æœåŠ¡å™¨çš„TCPè¿æ¥ã€‚</li><li>å®¢æˆ·ç«¯é€šè¿‡Socketå‘é€HTTPè¯·æ±‚ï¼ˆå¦‚GETã€POSTç­‰ï¼‰ç»™æœåŠ¡å™¨ã€‚</li><li>æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œé€šè¿‡Socketå‘é€HTTPå“åº”ç»™å®¢æˆ·ç«¯ã€‚</li><li>å®¢æˆ·ç«¯é€šè¿‡Socketæ¥æ”¶æœåŠ¡å™¨çš„å“åº”æ•°æ®ã€‚</li></ul><p>å¯¹äºHTTPæœåŠ¡å™¨ï¼š</p><ul><li>æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨Socketç›‘å¬æŒ‡å®šç«¯å£ï¼Œæ¥æ”¶å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚</li><li>æœåŠ¡å™¨æ¥æ”¶åˆ°è¿æ¥åï¼Œåˆ›å»ºSocketè¿æ¥åˆ°å®¢æˆ·ç«¯ã€‚</li><li>æœåŠ¡å™¨é€šè¿‡Socketæ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„HTTPè¯·æ±‚ã€‚</li><li>æœåŠ¡å™¨å¤„ç†è¯·æ±‚ï¼Œå¹¶é€šè¿‡Socketå‘é€HTTPå“åº”ç»™å®¢æˆ·ç«¯ã€‚</li></ul><p>åˆ†å±‚æ¨¡å‹ä¸­çš„ç²¾åæ€æƒ³ä¹‹ä¸€æ˜¯å°è£…ï¼ˆEncapsulationï¼‰ã€‚åœ¨ç½‘ç»œåè®®çš„åˆ†å±‚è®¾è®¡ä¸­ï¼Œå°è£…æŒ‡çš„æ˜¯<strong>æ¯ä¸€å±‚å‘ä¸Šä¸€å±‚æä¾›æœåŠ¡</strong>æ—¶ï¼Œå°†ä¸Šä¸€å±‚çš„æ•°æ®è¿›è¡Œå°è£…ï¼Œéšè—äº†åº•å±‚åè®®çš„å®ç°ç»†èŠ‚ï¼Œå½¢æˆä¸€ä¸ªé»‘ç›’å­ï¼Œ<strong>ä¸Šå±‚åè®®ä¸éœ€è¦äº†è§£ä¸‹å±‚åè®®çš„ä»»ä½•ç»†èŠ‚</strong>ã€‚å°è£…ä½¿å¾—åˆ†å±‚æ¨¡å‹ä¸­çš„æ¯ä¸€å±‚éƒ½åƒä¸€ä¸ªé»‘ç›’ï¼Œåªæš´éœ²å‡ºç›¸åº”çš„æ¥å£å’ŒåŠŸèƒ½ï¼Œè€Œéšè—äº†å†…éƒ¨å®ç°çš„ç»†èŠ‚ï¼Œè¿™æ ·æœ‰åˆ©äºæé«˜ç³»ç»Ÿçš„å¯é æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ï¼ŒåŒæ—¶ä¿ƒè¿›äº†åè®®çš„æ ‡å‡†åŒ–å’Œäº’æ“ä½œæ€§ã€‚</p><p>ä¸€ä¸ªæ˜¯ fread/fwrite è¯»å†™ï¼Œä¸€ä¸ªæ˜¯ recv å’Œ send è¯»å†™ï¼ˆåœ¨ Linux ä¸‹ä½ ç”¨ read å’Œ write çš„è¯ï¼Œæ–‡ä»¶å’Œ socket ä¸¤è€…éƒ½èƒ½è¯»å†™ï¼Œåªæ˜¯æ— æ³•ç›´æ¥è®¾ç½®ä¸€äº›ç‰¹æ®Šçš„ flagï¼‰</p><p>ä¸€èˆ¬çš„æ–‡ä»¶ä»¥åŠ socket å®¢æˆ·ç«¯è¯»å†™çš„éƒ½æ˜¯æ•°æ®ï¼Œè€Œ socket æœåŠ¡ç«¯ accept è¯»å‡ºæ¥çš„æ˜¯å¯ä»¥è¯»å†™çš„å®¢æˆ·ç«¯æ–‡ä»¶ã€‚</p><ol><li><strong>ç›‘å¬å¥—æ¥å­— (Listening Socket)</strong>ï¼šè¿™æ˜¯æœåŠ¡å™¨ç«¯çš„å¥—æ¥å­—ï¼Œé€šè¿‡è°ƒç”¨**<code>bind</code><strong>ã€</strong><code>listen</code><strong>å’Œ</strong><code>accept</code><strong>å‡½æ•°æ¥å»ºç«‹ã€‚ç›‘å¬å¥—æ¥å­—ç”¨äºç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼Œå½“å®¢æˆ·ç«¯è¯·æ±‚è¿æ¥æ—¶ï¼Œ</strong><code>accept</code>**å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å·²å®Œæˆè¿æ¥å¥—æ¥å­—ã€‚</li><li><strong>å·²å®Œæˆè¿æ¥å¥—æ¥å­— (Connected Socket)</strong>ï¼šè¿™æ˜¯æœåŠ¡å™¨ç«¯çš„å¥—æ¥å­—ï¼Œä¹Ÿæ˜¯å®¢æˆ·ç«¯çš„å¥—æ¥å­—ã€‚å®ƒä»¬é€šè¿‡**<code>connect</code><strong>å‡½æ•°ï¼ˆå®¢æˆ·ç«¯ï¼‰æˆ–</strong><code>accept</code><strong>å‡½æ•°ï¼ˆæœåŠ¡å™¨ç«¯ï¼‰å»ºç«‹è¿æ¥åï¼Œç”¨äºå®é™…çš„æ•°æ®ä¼ è¾“ã€‚è¿™äº›å¥—æ¥å­—å¯ä»¥é€šè¿‡</strong><code>read</code><strong>å’Œ</strong><code>write</code>**å‡½æ•°æ¥è¿›è¡Œæ•°æ®çš„è¯»å–å’Œå†™å…¥ã€‚</li></ol><p>æˆåŠŸè¿æ¥å»ºç«‹ä¹‹åï¼ŒåŒæ–¹å¼€å§‹é€šè¿‡ read å’Œ write å‡½æ•°æ¥è¯»å†™æ•°æ®ï¼Œå°±åƒå¾€ä¸€ä¸ªæ–‡ä»¶æµé‡Œé¢å†™ä¸œè¥¿ä¸€æ ·ã€‚</p><p>ä¸¥æ ¼æ¥è®²ï¼Œâ€œç½‘å…³â€æ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µï¼Œã€ä¸è¦ã€‘æŠŠå®ƒå½“æˆå…·ä½“çš„ç½‘ç»œè®¾å¤‡ã€‚å……å½“â€œç½‘å…³â€çš„ä¸œä¸œï¼Œå¯èƒ½æ˜¯ï¼šè·¯ç”±å™¨ or XXå±‚äº¤æ¢æœº or XXå±‚é˜²ç«å¢™ or ä»£ç†æœåŠ¡å™¨ â€¦</p><p>â€œç½‘å…³â€ä¹Ÿåˆ†ä¸åŒçš„å±‚æ¬¡ã€‚å¦‚æœä¸åŠ å®šè¯­ï¼Œé€šå¸¸æŒ‡çš„æ˜¯â€œ3å±‚ç½‘å…³â€ï¼ˆç½‘ç»œå±‚ç½‘å…³ï¼‰ã€‚åˆ—å‡ ç§æ¯”è¾ƒå¸¸è§çš„ï¼Œä¾›å‚è€ƒï¼š</p><p>è·¯ç”±å™¨å……å½“ç½‘å…³â€”â€”3å±‚ï¼ˆç½‘ç»œå±‚ï¼‰</p><p>3å±‚äº¤æ¢æœºå……å½“ç½‘å…³â€”â€”3å±‚ï¼ˆç½‘ç»œå±‚ï¼‰</p><p>4å±‚äº¤æ¢æœºå……å½“ç½‘å…³â€”â€”4å±‚ï¼ˆä¼ è¾“å±‚ï¼‰</p><p>åº”ç”¨å±‚é˜²ç«å¢™å……å½“ç½‘å…³â€”â€”7å±‚ï¼ˆåº”ç”¨å±‚ï¼‰</p><p>ä»£ç†æœåŠ¡å™¨å……å½“ç½‘å…³â€”â€”ï¼ˆå–å†³äºä»£ç†çš„å±‚æ¬¡ï¼Œå‚è§å‰ä¸€ä¸ªå°èŠ‚ï¼‰</p><p>â€œéš§é“åè®®â€å¯ä»¥åšåˆ°æ›´çµæ´»çš„åŒ…è£¹â€”â€”æ—¢å¯ä»¥å¯¹å±‚æ¬¡ç›¸éš”å¾ˆè¿œçš„åè®®è¿›è¡ŒåŒ…è£¹ï¼Œä¹Ÿå¯ä»¥å¯¹åŒä¸€å±‚çš„åè®®è¿›è¡ŒåŒ…è£¹ï¼Œç”šè‡³å¯ä»¥â€œå€’æŒ‚â€â€”â€”æ‰€è°“çš„â€œå€’æŒ‚â€å°±æ˜¯è®©ã€ä¸Šã€‘å±‚åè¿‡æ¥åŒ…è£¹ã€ä¸‹ã€‘å±‚ã€‚</p><p>ä¸¾ä¾‹ï¼š</p><p>ä¿ºæ›¾ç»å†™è¿‡ä¸€ç¯‡ã€Š<a href="https://program-think.blogspot.com/2019/04/Proxy-Tricks.html">å¦‚ä½•è®©ã€ä¸æ”¯æŒã€‘ä»£ç†çš„ç½‘ç»œè½¯ä»¶ï¼Œé€šè¿‡ä»£ç†è¿›è¡Œè”ç½‘ï¼ˆä¸åŒå¹³å°çš„ N ç§æ–¹æ³•ï¼‰</a>ã€‹ï¼Œå…¶ä¸­ä»‹ç»äº†â€œHTTP ä»£ç†â€çš„ä¸¤ç§æ¨¡å¼ï¼šâ€œè½¬å‘æ¨¡å¼ ï¼† éš§é“æ¨¡å¼â€ã€‚å¯¹äºâ€œHTTP ä»£ç†â€çš„éš§é“æ¨¡å¼ï¼Œå¯ä»¥å®ç°ã€TCP over HTTPã€‘ï¼ˆæŠŠ TCP åè®®æ‰“åŒ…åˆ° HTTP åè®®å†…éƒ¨ï¼‰</p><p>##<strong>Networkå±‚</strong></p><p>ç½‘ç»œå±‚çš„ä¸¤ç§äº¤æ¢æŠ€æœ¯ï¼šç”µè·¯äº¤æ¢ï¼ˆæœ‰è¿æ¥ï¼‰ VS åˆ†ç»„äº¤æ¢ï¼ˆæ— è¿æ¥ï¼‰ã€‚</p><p>IP/ARP æ˜¯æ ¹æ®IPåœ°å€è·å–MACåœ°å€çš„ä¸€ç§åè®®ã€‚/ICMP</p><ol><li><strong>IPåœ°å€ï¼š</strong> IPåè®®ä½¿ç”¨IPåœ°å€æ¥å”¯ä¸€æ ‡è¯†ç½‘ç»œä¸Šçš„æ¯ä¸ªè®¾å¤‡ã€‚IPv4å’ŒIPv6æ˜¯ä¸¤ä¸ªå¸¸è§çš„IPåœ°å€ç‰ˆæœ¬ã€‚IPv4ä½¿ç”¨32ä½åœ°å€ï¼Œè€ŒIPv6ä½¿ç”¨128ä½åœ°å€ï¼Œæä¾›äº†æ›´å¹¿æ³›çš„åœ°å€ç©ºé—´ä»¥åº”å¯¹äº’è”ç½‘çš„å¢é•¿éœ€æ±‚ã€‚</li><li><strong>é¢å‘æ— è¿æ¥ï¼š</strong> IPæ˜¯ä¸€ç§é¢å‘æ— è¿æ¥çš„åè®®ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªæ•°æ®åŒ…ï¼ˆæˆ–æ•°æ®æŠ¥ï¼‰éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸éœ€è¦åœ¨é€šä¿¡ä¹‹å‰å»ºç«‹è¿æ¥ã€‚æ¯ä¸ªæ•°æ®åŒ…ç‹¬ç«‹ä¼ è¾“ï¼Œå› æ­¤ä¸ä¼šç»´æŠ¤é€šä¿¡çŠ¶æ€ã€‚</li><li><strong>ä¸å¯é ä¼ è¾“ï¼š</strong> IPæä¾›äº†ä¸å¯é çš„ä¼ è¾“ï¼Œè¿™æ„å‘³ç€å®ƒä¸ä¿è¯æ•°æ®åŒ…çš„ä¼ è¾“é¡ºåºã€å¯é æ€§æˆ–äº¤ä»˜ã€‚æ•°æ®åŒ…å¯èƒ½ä¼šåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±ã€é‡å¤ã€å»¶è¿Ÿæˆ–ä¹±åºï¼Œå› æ­¤ä¸Šå±‚åè®®ï¼ˆå¦‚TCPï¼‰è´Ÿè´£å¤„ç†å¯é æ€§å’Œé¡ºåºé—®é¢˜ã€‚</li></ol><p><img src="https://prod-files-secure.s3.us-west-2.amazonaws.com/ea503cf6-9325-47ab-9fb3-3e33e40583ef/b91e7cce-3503-4dad-b95e-3b5a338d858a/Untitled.png" alt="Untitled"></p><p>æ ¹æ®RFC 791ï¼ŒIPåœ°å€æ˜¯ä¸€ä¸ª32ä½çš„äºŒè¿›åˆ¶æ•°å­—ï¼Œé€šå¸¸è¡¨ç¤ºä¸ºå››ä¸ªå…«ä½å­—èŠ‚çš„ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºæ³•ï¼Œ<a href="http://xn--xxx-eo8e.xxx.xxx.xxx">å¦‚xxx.xxx.xxx.xxx</a>ã€‚</p><ol><li><strong>Aç±»åœ°å€ï¼š</strong><ul><li>Aç±»åœ°å€çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æœ€é«˜ä½å§‹ç»ˆä¸º0ï¼Œè¿™è¡¨ç¤ºAç±»åœ°å€çš„èŒƒå›´æ˜¯1.0.0.0åˆ°126.0.0.0ã€‚</li><li>è¿™ç±»åœ°å€é€šå¸¸ç”¨äºå¤§å‹ç½‘ç»œï¼Œå› ä¸ºå…¶èŒƒå›´å…è®¸çº¦1670ä¸‡ä¸ªä¸»æœºåœ°å€ã€‚</li></ul></li><li><strong>Bç±»åœ°å€ï¼š</strong><ul><li>Bç±»åœ°å€çš„å‰ä¸¤ä¸ªå­—èŠ‚çš„æœ€é«˜ä¸¤ä½å§‹ç»ˆä¸º10ï¼Œè¿™è¡¨ç¤ºBç±»åœ°å€çš„èŒƒå›´æ˜¯128.0.0.0åˆ°191.255.0.0ã€‚</li><li>Bç±»åœ°å€é€šå¸¸ç”¨äºä¸­ç­‰è§„æ¨¡çš„ç½‘ç»œï¼Œå¯å®¹çº³çº¦6.5ä¸‡ä¸ªä¸»æœºåœ°å€ã€‚</li></ul></li><li><strong>Cç±»åœ°å€ï¼š</strong><ul><li>Cç±»åœ°å€çš„å‰ä¸‰ä¸ªå­—èŠ‚çš„æœ€é«˜ä¸‰ä½å§‹ç»ˆä¸º110ï¼Œè¿™è¡¨ç¤ºCç±»åœ°å€çš„èŒƒå›´æ˜¯192.0.0.0åˆ°223.255.255.0ã€‚</li><li>Cç±»åœ°å€é€šå¸¸ç”¨äºå°å‹ç½‘ç»œï¼Œæ¯ä¸ªCç±»ç½‘ç»œå¯ä»¥å®¹çº³çº¦254ä¸ªä¸»æœºåœ°å€ã€‚</li></ul></li></ol><p>åœ¨å®é™…ç½‘ç»œä¸­ï¼Œå·²ç»æœ‰è®¸å¤šå…¶ä»–IPåœ°å€åˆ†é…æ–¹æ¡ˆå’Œè§„åˆ™ï¼ŒåŒ…æ‹¬å­ç½‘æ©ç ã€æ— ç±»åŸŸé—´è·¯ç”±ï¼ˆCIDRï¼‰ç­‰ï¼Œè¿™äº›ä½¿å¾—IPåœ°å€çš„åˆ†é…æ›´åŠ çµæ´»å’Œé«˜æ•ˆã€‚æ‰€ä»¥ï¼Œä¸å†ä¸¥æ ¼ä½¿ç”¨Aã€Bã€Cç±»åœ°å€æ¥åˆ’åˆ†ç½‘ç»œè§„æ¨¡ã€‚</p><p>VLSM(<a href="https://baike.baidu.com/item/%E5%8F%AF%E5%8F%98%E9%95%BF%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81/9163142">å¯å˜é•¿å­ç½‘æ©ç </a>) æ˜¯ä¸ºäº†æœ‰æ•ˆçš„ä½¿ç”¨<a href="https://baike.baidu.com/item/%E6%97%A0%E7%B1%BB%E5%88%AB%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1/15758573">æ— ç±»åˆ«åŸŸé—´è·¯ç”±</a>ï¼ˆCIDRï¼‰å’Œè·¯ç”±æ±‡èš(route summary)æ¥æ§åˆ¶<a href="https://baike.baidu.com/item/%E8%B7%AF%E7%94%B1%E8%A1%A8/2707408">è·¯ç”±è¡¨</a>çš„å¤§å°ï¼Œå®ƒæ˜¯ç½‘ç»œç®¡ç†å‘˜å¸¸ç”¨çš„IPå¯»å€æŠ€æœ¯</p><p>CIDRæ— ç±»ç½‘ç»œæ˜¯ä¸€ç§ç›¸å¯¹äºæœ‰ç±»ç½‘ç»œçš„ç½‘ç»œï¼Œæ— ç±»ç½‘ç»œIPåœ°å€çš„æ©ç æ˜¯å˜é•¿çš„ã€‚<br>åœ¨æœ‰ç±»ç½‘ç»œçš„åŸºç¡€ä¸Šï¼Œæ‹¿å‡ºä¸€éƒ¨åˆ†ä¸»æœºIDä½œä¸ºå­ç½‘IDã€‚<br>ä¾‹å¦‚ï¼š<br>IPåœ°å€ä¸º192.168.250.44 å­ç½‘æ©ç ä¸èƒ½æ˜¯å°äº24ä½ã€‚<br>å› ä¸ºè¿™æ˜¯ä¸€ä¸ªCç±»åœ°å€ï¼ˆå‰3Bytesæ˜¯ç½‘ç»œå·ï¼‰ï¼Œå­ç½‘æ©ç åªèƒ½å¤§äº24ä½ã€‚<br>è€Œæ©ç 255.255.248.0ï¼ˆ21ä½ï¼‰æ˜¯ä¸ç¬¦åˆè§„å®šçš„ã€‚<br>Â·<br>å¦‚æœä¸€ä¸ªç½‘ç»œä¸­çš„ä¸»æœºæœ‰100å°ï¼Œ<br>é‚£ä¹ˆï¼Œå¯ä»¥ç”¨å­ç½‘æ©ç /25æ¥åˆ’åˆ†è¿™ä¸ªCç±»ç½‘ç»œï¼ˆâ€œ192.168.250.0/24â€ï¼‰ï¼š<br>åˆ’åˆ†æˆ192.168.250.0/25 å’Œ192.168.250.128/25ä¸¤ä¸ªå­ç½‘ã€‚<br>â€”ä¸»æœº192.168.250.44/25 å±äºå­ç½‘192.168.250.0/25ã€‚</p><p>**è·¯ç”±å™¨ç”¨äºä¸åŒç½‘ç»œä¹‹é—´çš„é€šä¿¡ï¼Œè¿›è¡Œè·¨ç½‘ç»œçš„è·¯ç”±å†³ç­–ï¼Œè€Œäº¤æ¢æœºç”¨äºå†…éƒ¨ç½‘ç»œçš„å±€åŸŸç½‘ç»œé€šä¿¡ï¼Œå°†æ•°æ®å¸§ä»ä¸€ä¸ªæ¥å£è½¬å‘åˆ°å¦ä¸€ä¸ªæ¥å£ã€‚**åœ¨è®¸å¤šç½‘ç»œä¸­ï¼Œè·¯ç”±å™¨å’Œäº¤æ¢æœºé€šå¸¸æ˜¯ä¸€èµ·ä½¿ç”¨çš„ï¼Œä»¥å®ç°å†…éƒ¨é€šä¿¡å’Œä¸å¤–éƒ¨ç½‘ç»œçš„è¿æ¥ã€‚</p><p><strong>è·¯ç”±å™¨ï¼ˆRouterï¼‰</strong>ï¼š</p><ol><li><strong>ç½‘ç»œå±‚è®¾å¤‡ï¼š</strong> è·¯ç”±å™¨ä½äºOSIæ¨¡å‹çš„ç½‘ç»œå±‚ï¼Œè´Ÿè´£åœ¨ä¸åŒç½‘ç»œä¹‹é—´è¿›è¡Œæ•°æ®åŒ…çš„è½¬å‘å’Œè·¯ç”±é€‰æ‹©ã€‚</li><li><strong>è·¨ç½‘ç»œé€šä¿¡ï¼š</strong> è·¯ç”±å™¨ç”¨äºå°†æ•°æ®åŒ…ä»ä¸€ä¸ªç½‘ç»œä¼ é€åˆ°å¦ä¸€ä¸ªç½‘ç»œï¼Œé€šå¸¸åœ¨ä¸åŒIPå­ç½‘ä¹‹é—´æ‰§è¡Œè·¯ç”±æ“ä½œã€‚</li><li><strong>å†³ç­–åŸºäºIPåœ°å€ï¼š</strong> è·¯ç”±å™¨çš„è·¯ç”±å†³ç­–æ˜¯åŸºäºç›®æ ‡IPåœ°å€è¿›è¡Œçš„ï¼Œå®ƒæŸ¥æ‰¾è·¯ç”±è¡¨ä»¥ç¡®å®šæ•°æ®åŒ…åº”è¯¥è¢«è½¬å‘åˆ°å“ªä¸ªæ¥å£æˆ–ä¸‹ä¸€ä¸ªè·¯ç”±å™¨ã€‚</li><li><strong>ç½‘ç»œåˆ†å‰²å’Œéš”ç¦»ï¼š</strong> è·¯ç”±å™¨å¯ä»¥åˆ†éš”ä¸åŒçš„ç½‘ç»œï¼Œæä¾›ç½‘ç»œéš”ç¦»å’Œå®‰å…¨æ€§ã€‚</li><li><strong>ç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰ï¼š</strong> ä¸€äº›è·¯ç”±å™¨æ”¯æŒNATï¼Œå…è®¸å¤šä¸ªè®¾å¤‡å…±äº«ä¸€ä¸ªå…¬å…±IPåœ°å€ã€‚</li></ol><p><strong>äº¤æ¢æœºï¼ˆSwitchï¼‰</strong>ï¼š</p><ol><li><strong>æ•°æ®é“¾è·¯å±‚è®¾å¤‡ï¼š</strong> äº¤æ¢æœºä½äºOSIæ¨¡å‹çš„æ•°æ®é“¾è·¯å±‚ï¼Œä¸»è¦ç”¨äºåœ¨å±€åŸŸç½‘ç»œï¼ˆLANï¼‰å†…çš„è®¾å¤‡ä¹‹é—´è¿›è¡Œæ•°æ®å¸§çš„äº¤æ¢ã€‚</li><li><strong>å†…éƒ¨å±€åŸŸç½‘ç»œé€šä¿¡ï¼š</strong> äº¤æ¢æœºç”¨äºåœ¨åŒä¸€ç½‘ç»œå†…çš„è®¾å¤‡ä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œé€šå¸¸åœ¨ç›¸åŒIPå­ç½‘å†…å·¥ä½œã€‚</li><li><strong>å†³ç­–åŸºäºMACåœ°å€ï¼š</strong> äº¤æ¢æœºçš„å†³ç­–æ˜¯åŸºäºç›®æ ‡è®¾å¤‡çš„MACåœ°å€è¿›è¡Œçš„ï¼Œå®ƒä½¿ç”¨MACåœ°å€è¡¨æ¥ç¡®å®šæ•°æ®å¸§åº”è¯¥è¢«å‘é€åˆ°å“ªä¸ªæ¥å£ã€‚</li><li><strong>é«˜æ€§èƒ½ï¼š</strong> äº¤æ¢æœºé€šå¸¸æä¾›é«˜æ€§èƒ½çš„æ•°æ®äº¤æ¢ï¼Œå› ä¸ºå®ƒä»¬åœ¨ç¡¬ä»¶çº§åˆ«è¿›è¡Œæ“ä½œï¼Œä¸éœ€è¦è¿›è¡Œå¤æ‚çš„è·¯ç”±é€‰æ‹©ã€‚</li><li><strong>æ— çŠ¶æ€ï¼š</strong> äº¤æ¢æœºé€šå¸¸æ˜¯æ— çŠ¶æ€è®¾å¤‡ï¼Œä¸å­˜å‚¨å…³äºé€šä¿¡çš„å†å²ä¿¡æ¯ï¼Œè€Œè·¯ç”±å™¨å¯èƒ½ä¼šç»´æŠ¤è·¯ç”±è¡¨å’ŒçŠ¶æ€ä¿¡æ¯ã€‚</li></ol><h3 id="çˆ¬">çˆ¬</h3><p><a href="https://websec.readthedocs.io/zh/latest/info/site.html">https://websec.readthedocs.io/zh/latest/info/site.html</a></p><p>robots.txt ä¹Ÿä¸æ˜¯å¼ºåˆ¶çš„è§„èŒƒï¼Œè€Œæ˜¯ä¸€ç§å†…å®¹ç½‘ç«™å’Œæœç´¢å¼•æ“ä¹‹é—´åšå¼ˆçš„äº§ç‰©ã€‚å¯¹äºä¸€ä¸ªæœç´¢å¼•æ“æ¥è¯´ï¼Œéµå®ˆæˆ–è€…ä¸éµå®ˆåªå…³ä¹ä½ ä½œä¸ºä¸€ä¸ªæœç´¢å¼•æ“çš„å£°èª‰ï¼Œå¤§å¤šæ•°æ—¶å€™è¿˜æ˜¯éµå®ˆçš„ï¼Œæ¯”å¦‚è¯´ç™¾åº¦ä¸Šè‡³ä»Šä¸èƒ½æœç´¢æ·˜å®å®è´ï¼Œå› ä¸ºæ·˜å®ä¸»åŠ¨å±è”½äº†ç™¾åº¦ã€‚å†…å®¹ç«™ç‚¹ä¹Ÿä¸æ˜¯å•¥<a href="https://www.zhihu.com/search?q=%E7%99%BD%E6%9C%88%E5%85%89&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2081752804%7D">ç™½æœˆå…‰</a>ï¼Œæ— éä¹Ÿæ˜¯æƒ³è¦<strong>æœç´¢å¼•æ“å¸¦æ¥çš„æµé‡ï¼Œä½†æ˜¯åˆä¸æƒ³çˆ¬è™«å ç”¨æœåŠ¡å™¨èµ„æº</strong>ã€‚</p><p><a href="http://zhihu.com">zhihu.com</a>/robots.txt</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">User-agent: Googlebot</span><br><span class="line">Disallow: /appview/</span><br><span class="line">Disallow: /login</span><br><span class="line">Disallow: /logout</span><br><span class="line">Disallow: /resetpassword</span><br><span class="line">Disallow: /terms</span><br><span class="line">Disallow: /search</span><br><span class="line">Allow: /search-special</span><br><span class="line">Disallow: /notifications</span><br><span class="line">Disallow: /settings</span><br><span class="line">Disallow: /inbox</span><br><span class="line">Disallow: /admin_inbox</span><br><span class="line">Disallow: /*?guide*</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ•°æ®æå–ï¼š</p><ol><li><strong>è¯·æ±‚å‘é€ä¸å“åº”è·å–</strong>ï¼šçˆ¬è™«ç¨‹åºé€šè¿‡å‘é€ HTTP/HTTPS è¯·æ±‚è·å–ç½‘é¡µå†…å®¹ï¼Œé€šå¸¸ä½¿ç”¨åº“æˆ–æ¡†æ¶ï¼ˆå¦‚Pythonçš„requestsã€Scrapyç­‰ï¼‰æ¥å‘é€è¯·æ±‚ï¼Œå¹¶æ¥æ”¶å¹¶è§£æç½‘é¡µæœåŠ¡å™¨è¿”å›çš„å“åº”ã€‚</li><li><strong>ç½‘é¡µè§£æä¸DOMæ“ä½œ</strong>ï¼šçˆ¬è™«éœ€è¦è§£æ HTML æˆ– XML æ ¼å¼çš„ç½‘é¡µå†…å®¹ä»¥æå–æ‰€éœ€çš„ä¿¡æ¯ã€‚é€šå¸¸ä½¿ç”¨è§£æå™¨ï¼ˆå¦‚Beautiful Soupã€lxmlç­‰ï¼‰æ¥è§£æç½‘é¡µç»“æ„ï¼Œå¹¶ä½¿ç”¨ XPath æˆ– CSS é€‰æ‹©å™¨ç­‰æŠ€æœ¯å®šä½å’Œæå–æ‰€éœ€çš„æ•°æ®ã€‚</li><li><strong>åŠ¨æ€ç½‘é¡µæŠ“å–</strong>ï¼šé’ˆå¯¹ä½¿ç”¨ JavaScript åŠ¨æ€åŠ è½½å†…å®¹çš„ç½‘é¡µï¼Œçˆ¬è™«éœ€è¦æ¨¡æ‹Ÿæµè§ˆå™¨è¡Œä¸ºï¼Œå¦‚ä½¿ç”¨æ— å¤´æµè§ˆå™¨ï¼ˆHeadless Browserï¼‰æˆ–ç±»ä¼¼å·¥å…·ï¼ˆå¦‚Seleniumï¼‰æ¥æ¸²æŸ“ JavaScriptï¼Œå¹¶è·å–åŠ¨æ€ç”Ÿæˆçš„å†…å®¹ã€‚ <strong>æ¨¡æ‹Ÿæµè§ˆå™¨è¡Œä¸º</strong>ï¼šå¯¹äºéœ€è¦å¤„ç†åŠ¨æ€å†…å®¹æˆ–ä½¿ç”¨ JavaScript æ¸²æŸ“çš„ç½‘é¡µï¼Œæ¨¡æ‹Ÿæµè§ˆå™¨è¡Œä¸ºæ›´æœ‰ä¼˜åŠ¿ï¼Œç”šè‡³å¯èƒ½éœ€è¦å¤„ç† WebSocket è¿æ¥ã€‚</li><li>å¹¶å‘ åˆ†å¸ƒå¼ï¼š ipä»£ç†æ± </li><li></li></ol><p>åçˆ¬è™«æŠ€æœ¯ï¼š</p><ol><li><strong>åŠ¨æ€å†…å®¹ç”Ÿæˆ</strong>ï¼šç½‘ç«™ä½¿ç”¨åŠ¨æ€ç”Ÿæˆå†…å®¹æˆ–è€… Ajax è¯·æ±‚ï¼Œè¿™ä½¿å¾—çˆ¬è™«éš¾ä»¥æ•è·å®Œæ•´çš„é¡µé¢æ•°æ®ã€‚</li><li><strong>ç½‘ç«™ç»“æ„å˜åŒ–</strong>ï¼šç»å¸¸æ›´æ”¹ç½‘ç«™çš„é¡µé¢ç»“æ„ã€URLæ ¼å¼æˆ–æ•°æ®çš„ä½ç½®ï¼Œä½¿å¾—çˆ¬è™«éš¾ä»¥è·å–æŒç»­å‡†ç¡®çš„æ•°æ®ã€‚</li><li><strong>ä½¿ç”¨ç™»å½•éªŒè¯</strong>ï¼šé™åˆ¶å¯¹éœ€è¦ç”¨æˆ·ç™»å½•çš„å†…å®¹çš„è®¿é—®ï¼Œè¦æ±‚çˆ¬è™«æ¨¡æ‹Ÿç™»å½•è¡Œä¸ºæ‰èƒ½è·å–æ•°æ®ã€‚</li><li><strong>robots.txt æ–‡ä»¶</strong>ï¼šç”¨äºå‘æœç´¢å¼•æ“çˆ¬è™«æä¾›æŒ‡å¯¼ï¼Œå‘ŠçŸ¥å“ªäº›é¡µé¢å¯ä»¥è¢«ç´¢å¼•ï¼Œå“ªäº›é¡µé¢ä¸åº”è¯¥è¢«ç´¢å¼•ã€‚</li><li><strong>IP é»‘åå•</strong>ï¼šé˜»æ­¢æ¥è‡ªç‰¹å®šIPåœ°å€çš„è¯·æ±‚ï¼Œè¿™äº›IPåœ°å€å¯èƒ½æ˜¯å·²çŸ¥çš„æ¶æ„çˆ¬è™«ã€‚</li><li><strong>ç”¨æˆ·ä»£ç†æ£€æµ‹</strong>ï¼šè¯†åˆ«è¯·æ±‚ä¸­çš„ç”¨æˆ·ä»£ç†ï¼ˆUser-Agentï¼‰ï¼Œå¹¶é˜»æ­¢æˆ–é™åˆ¶æ¥è‡ªçˆ¬è™«çš„è¯·æ±‚ã€‚</li><li><strong>éªŒè¯ç </strong>ï¼šé€šè¿‡å‘ç”¨æˆ·å±•ç¤ºéªŒè¯ç ï¼Œè¦æ±‚ç”¨æˆ·è¿›è¡ŒéªŒè¯ä»¥ç¡®è®¤å…¶èº«ä»½ï¼Œä»è€Œé˜»æ­¢è‡ªåŠ¨åŒ–çˆ¬è™«ã€‚</li><li><strong>é¢‘ç‡é™åˆ¶</strong>ï¼šé™åˆ¶å¯¹ç½‘ç«™çš„è®¿é—®é¢‘ç‡ï¼Œä¾‹å¦‚é™åˆ¶æŸä¸ªIPåœ°å€æˆ–ç”¨æˆ·åœ¨ç‰¹å®šæ—¶é—´æ®µå†…çš„è¯·æ±‚æ¬¡æ•°ã€‚</li><li><strong>JavaScript åŠ è½½</strong>ï¼šæŸäº›çˆ¬è™«ä¸æ”¯æŒJavaScriptï¼Œç½‘ç«™å¯ä»¥åˆ©ç”¨JavaScriptåŠ¨æ€åŠ è½½å†…å®¹ï¼Œä½¿å¾—çˆ¬è™«éš¾ä»¥è·å–å®Œæ•´çš„é¡µé¢å†…å®¹ã€‚</li></ol><p>Service worker æœ¬è´¨ä¸Šå……å½“ Web åº”ç”¨ç¨‹åºã€æµè§ˆå™¨ä¸ç½‘ç»œï¼ˆå¯ç”¨æ—¶ï¼‰ä¹‹é—´çš„ä»£ç†æœåŠ¡å™¨ã€‚è¿™ä¸ª API æ—¨åœ¨åˆ›å»ºæœ‰æ•ˆçš„ç¦»çº¿ä½“éªŒï¼Œå®ƒä¼šæ‹¦æˆªç½‘ç»œè¯·æ±‚å¹¶æ ¹æ®ç½‘ç»œæ˜¯å¦å¯ç”¨æ¥é‡‡å–é€‚å½“çš„åŠ¨ä½œã€æ›´æ–°æ¥è‡ªæœåŠ¡å™¨çš„çš„èµ„æºã€‚å®ƒè¿˜æä¾›å…¥å£ä»¥æ¨é€é€šçŸ¥å’Œè®¿é—®åå°åŒæ­¥ APIã€‚</p><p>Service workers ä¹Ÿå¯ä»¥ç”¨æ¥åšè¿™äº›äº‹æƒ…ï¼š</p><ul><li>åå°æ•°æ®åŒæ­¥</li><li>å“åº”æ¥è‡ªå…¶ä»–æºçš„èµ„æºè¯·æ±‚</li><li>é›†ä¸­æ¥æ”¶è®¡ç®—æˆæœ¬é«˜çš„æ•°æ®æ›´æ–°ï¼Œæ¯”å¦‚åœ°ç†ä½ç½®å’Œé™€èºä»ªä¿¡æ¯ï¼Œè¿™æ ·å¤šä¸ªé¡µé¢å°±å¯ä»¥åˆ©ç”¨åŒä¸€ç»„æ•°æ®</li><li>åœ¨å®¢æˆ·ç«¯è¿›è¡Œ CoffeeScriptã€LESSã€CJS/AMD ç­‰æ¨¡å—ç¼–è¯‘å’Œä¾èµ–ç®¡ç†ï¼ˆç”¨äºå¼€å‘ç›®çš„ï¼‰</li><li>åå°æœåŠ¡é’©å­</li><li>è‡ªå®šä¹‰æ¨¡æ¿ç”¨äºç‰¹å®š URL æ¨¡å¼</li><li>æ€§èƒ½å¢å¼ºï¼Œæ¯”å¦‚é¢„å–ç”¨æˆ·å¯èƒ½éœ€è¦çš„èµ„æºï¼Œæ¯”å¦‚ç›¸å†Œä¸­çš„åé¢æ•°å¼ å›¾ç‰‡</li></ul><p>æœªæ¥ service worker èƒ½å¤Ÿç”¨æ¥åšæ›´å¤šä½¿ web å¹³å°æ¥è¿‘åŸç”Ÿåº”ç”¨çš„äº‹ã€‚å€¼å¾—å…³æ³¨çš„æ˜¯ï¼Œå…¶ä»–æ ‡å‡†ä¹Ÿèƒ½å¹¶ä¸”å°†ä¼šä½¿ç”¨ service workerï¼Œä¾‹å¦‚ï¼š</p><ul><li><a href="https://github.com/slightlyoff/BackgroundSync">åå°åŒæ­¥</a>ï¼šå¯åŠ¨ä¸€ä¸ª service worker å³ä½¿æ²¡æœ‰ç”¨æˆ·è®¿é—®ç‰¹å®šç«™ç‚¹ï¼Œä¹Ÿå¯ä»¥æ›´æ–°ç¼“å­˜</li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Push_API">å“åº”æ¨é€</a>ï¼šå¯åŠ¨ä¸€ä¸ª service worker å‘ç”¨æˆ·å‘é€ä¸€æ¡ä¿¡æ¯é€šçŸ¥æ–°çš„å†…å®¹å¯ç”¨</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Web Security&lt;/h1&gt;
&lt;p&gt;åœ¨å¹¿é˜”çš„äº’è”ç½‘é¢†åŸŸï¼Œä¿¡æ¯æºæºä¸æ–­ï¼Œäº¤æ˜“ç¬æ¯ä¸‡å˜ï¼Œä¸€åœºæ— å£°çš„æˆ˜æ–—æ­£åœ¨ä¸Šæ¼”ã€‚ç½‘ç»œå¨èƒæ½œä¼åœ¨é˜´å½±ä¸­ï¼Œè¯•å›¾åˆ©ç”¨æ¼æ´å¹¶ç ´åæˆ‘ä»¬å»ºé€ çš„æ•°å­—å ¡å’ã€‚è¿™å°±æ˜¯ç½‘ç»œå®‰å…¨çš„é¢†åŸŸï¼Œä¸€ä¸ªåŠ¨æ€ä¸”ä¸æ–­å‘å±•çš„é¢†åŸŸï¼Œå®ƒæ˜¯ç”¨æˆ·ä¸æ¸—é€åˆ°ç½‘ç»œä¸–ç•Œçš„æ— æ•°é£é™©ä¹‹é—´çš„å®ˆæŠ¤è€…ã€‚&lt;</summary>
      
    
    
    
    
    <category term="ç½‘ç»œå®‰å…¨" scheme="https://stan370.github.io/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>ä½ çš„ç½‘ç»œä½ åšä¸»ï¼Ÿâ€”â€” æµ…è°ˆå®½å¸¦é™åˆ¶ä¸Šä¼ ã€TR069 ä¸ PCDN é‚£äº›äº‹</title>
    <link href="https://stan370.github.io/2024/12/02/surveillance/"/>
    <id>https://stan370.github.io/2024/12/02/surveillance/</id>
    <published>2024-12-02T12:08:39.000Z</published>
    <updated>2025-06-08T15:48:59.059Z</updated>
    
    <content type="html"><![CDATA[<p>å‰å‡ å¹´å—â€œæé€Ÿé™è´¹â€æ”¿ç­–å½±å“ï¼Œå›½å†…é«˜é€Ÿå®½å¸¦å‘å±•éå¸¸å¿«ã€‚ç„¶è€Œæ­¤ä¸€æ—¶å½¼ä¸€æ—¶ï¼Œâ€œäº’è”ç½‘ç»æµâ€è¿™ä¸ªè¯é¢˜è½å¹•ï¼Œè¿è¥å•†å¼€å§‹é‡æ–°åœˆåœ°ã€‚â€œæ‰“å‡» PCDN â€ä¼¼ä¹å°±æ˜¯å¹å“è¿è¥å•†åˆ©ç›Šè‡³ä¸Šçš„å·è§’ã€‚</p><p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œæ”¿ç­–æ‰§è¡Œåç»­éƒ½ä¼šæ‰©å¤§åŒ–ã€‚è¯´æ˜¯ç¦ PCDN ï¼Œç›®å‰å·²ç»æœ‰æ‰©å¤§åŒ–è¿¹è±¡ï¼Œæ¯”å¦‚é¡ºå¸¦è¢«å°ç¦çš„ PT å’Œ NAS æœåŠ¡ã€‚è¿™ä¸¤ä¸ªæœåŠ¡åŒæ ·å®¹æ˜“äº§ç”Ÿè¾ƒå¤§ç½‘ç»œæµé‡ï¼Œæ‰€ä»¥å®¹æ˜“è¢«è¯¯ä¼¤ã€‚ä¸è¿‡äº‹æƒ…è¿˜ä¸ä»…å¦‚æ­¤ã€‚ç½‘ç»œç›‘æ§ä¼šè¿›ä¸€æ­¥æ”¶ç´§ï¼Œè¿è¥å•†ä¼šå…¨é¢ç›‘æ§ç½‘ç»œæµé‡ï¼Œè¿™ç§ç›‘æ§æ˜¯å¦è¿›ä¸€æ­¥æ‰©å¤§åŒ–ä¸è¯¦ã€‚</p><p>æœ€è¿‘ï¼Œä¸å°‘ç½‘å‹åæ˜ ï¼Œå®¶é‡Œçš„å®½å¸¦ç½‘å…³ä¼¼ä¹å˜å¾—â€œä¸å¤ªå®‰åˆ†â€äº†ã€‚ä»¥ä¸­å›½ç§»åŠ¨ä¸ºä¾‹ï¼Œåå°è¿›ç¨‹é‡Œå¤šäº†å‡ ä¸ªä¸è®¤è¯†çš„åº”ç”¨ï¼Œæ¯”å¦‚ com.chinamobile.smartgateway.andlinkã€com.chinamobile.smartgateway.cmccdpiã€com.chinamobile.smartgateway.appcore å’Œ com.cmcc.wuyougatewayã€‚è¿™äº›åº”ç”¨æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä»¬åœ¨å¹²ä»€ä¹ˆï¼Ÿè¿è¥å•†ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿä»Šå¤©æˆ‘ä»¬å°±æ¥èŠèŠè¿™ä¸ªè¯é¢˜ã€‚<img src="https://cdn.jsdelivr.net/gh/Stan370/stan370.github.io@main/themes/hexo-theme-matery/source/medias/image.png" alt="alt text"><br>ä¸­å›½ç§»åŠ¨åœ¨ä¸ºç”¨æˆ·å®‰è£…å®½å¸¦æ—¶ï¼Œæ€»ä¼šå¥½å¿ƒåœ°â€œèµ é€â€ä¸€ä¸ªå…‰çŒ«(è°ƒåˆ¶è§£è°ƒå™¨)ã€‚è¿™çœ‹ä¼¼æ˜¯ä¸ªä¸é”™çš„ä¿ƒé”€æ‰‹æ®µï¼Œä½†é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™ä¸ªâ€œèµ å“â€ä¼šç»™ç”¨æˆ·å¸¦æ¥è®¸å¤šéº»çƒ¦ã€‚</p><p>èµ é€çš„â€œå…‰çŒ«â€å®‰è£…äº†è®¸å¤šä¸å¿…è¦çš„åŠŸèƒ½ã€‚å…‰çŒ«çš„æœ¬èŒå·¥ä½œæ˜¯è¿›è¡Œå…‰ç”µè½¬æ¢ï¼Œç„¶è€Œä¸­å›½ç§»åŠ¨çš„â€œå…‰çŒ«â€ä¸ä»…æ‰¿æ‹…ç€å…‰ç”µè½¬æ¢çš„ä»»åŠ¡ï¼Œè¿˜åŒæ—¶è¿›è¡Œæ‹¨å·ä¸Šç½‘ã€è·¯ç”±ã€åœ°å€è½¬æ¢(NAT)ã€ç«¯å£æ˜ å°„ã€æ–‡ä»¶æœåŠ¡å™¨(FTP)ç­‰ç­‰é¢å¤–çš„åŠŸèƒ½ã€‚è¿™äº›åŠŸèƒ½è®©æœ¬å°±å»‰ä»·è€Œç®—åŠ›ä½ä¸‹çš„å…‰çŒ«è¿è¡Œç¼“æ…¢ï¼Œä¸å ªé‡è´Ÿã€‚æœ€å¯æ°”çš„æ˜¯ï¼Œä¸­å›½ç§»åŠ¨ä¸ºäº†èŠ‚çº¦ç»´æŠ¤æˆæœ¬ï¼Œå°†å…‰çŒ«çš„ç»å¤§å¤šæ•°è®¾ç½®é¡¹é”å®šï¼Œé˜²æ­¢ç”¨æˆ·ä¿®æ”¹ã€‚</p><p>ç”¨æˆ·æƒ³è¦æ‹¿åˆ°å…‰çŒ«çš„æ§åˆ¶æƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œå°¤å…¶æ˜¯åœ¨å¯¹ç½‘ç»œæœ‰ä¸€å®šäº†è§£å’Œä¸ªæ€§åŒ–éœ€æ±‚çš„ç”¨æˆ·ç¾¤ä½“ä¸­ã€‚ç„¶è€Œï¼Œç”±äºè¿è¥å•†å‡ºäºç½‘ç»œç¨³å®šã€ä¸šåŠ¡å®‰å…¨å’Œç®¡ç†ä¾¿æ·ç­‰æ–¹é¢çš„è€ƒè™‘ï¼Œå¾€å¾€ä¼šå¯¹å…‰çŒ«è¿›è¡Œé™åˆ¶ï¼Œç”¨æˆ·å¾ˆéš¾å®Œå…¨æŒæ§è‡ªå·±çš„è®¾å¤‡ã€‚ä¸ºäº†é‡æ–°â€œæ‹¥æœ‰â€å…‰çŒ«ï¼Œæˆ‘å†³å®šå¤ºå›å¯¹å…‰çŒ«çš„æ§åˆ¶æƒã€‚</p><p><strong>â€œç¥ç§˜â€çš„åº”ç”¨ä»¬ï¼šåŠŸèƒ½ä¸äº‰è®®</strong></p><p>2019å¹´10æœˆ28æ—¥ï¼Œæœ‰äººåœ¨ Pastebin å…¬å¼€äº†ä¸€ä»½åä¸ºè·¯ç”±å™¨çš„æŸä¸ªé…ç½®æ–‡ä»¶ï¼Œ å…¶ä¸­å°±æœ‰ com.chinamobile.smartgateway.cmccdpi æ’ä»¶ã€‚</p><p>2022 å¹´8æœˆï¼Œå¤šä¸ªæŠ€æœ¯è®ºå›ï¼ˆå¦‚çŸ¥ä¹ã€è´´å§ã€æ©å±±æ— çº¿è®ºå›ç­‰ï¼‰å¼€å§‹æ¶Œç°ç”¨æˆ·å¯¹ä¸­å›½ç§»åŠ¨å®½å¸¦æœåŠ¡çš„æŠ•è¯‰å’ŒæŠ€æœ¯è®¨è®ºã€‚ä¸€äº›ç”¨æˆ·å°è¯•é€šè¿‡ç¬¬ä¸‰æ–¹æ‰‹æ®µè·å–è¶…çº§ç®¡ç†å‘˜æƒé™ï¼ˆå¦‚è§£å¯†å¯†ç ã€ç ´è§£å…‰çŒ«å›ºä»¶ï¼‰ã€‚å¦ä¸€äº›ç”¨æˆ·å¹²è„†è‡ªè´­è·¯ç”±å™¨ï¼Œå°è¯•å®Œå…¨ç»•è¿‡å…‰çŒ«çš„ç®¡ç†å¹²é¢„ã€‚<br>ç”¨æˆ·å‘ç°é€šè¿‡ 4in6 éš§é“æ¥å…¥çš„å®¶åº­ç½‘ç»œé€šå¸¸ä¼šå åŠ å¤šå±‚ NATï¼Œå¯¼è‡´ç«¯å£æ˜ å°„åŠŸèƒ½å—é™ï¼Œæ— æ³•é«˜æ•ˆå®ç°å…¬ç½‘é€šä¿¡ã€‚ç”¨æˆ·å‘ç°ç§»åŠ¨å®½å¸¦åœ¨ IPv6 ç½‘ç»œéƒ¨ç½²ä¸­å¼•å…¥äº† 4in6 éš§é“æŠ€æœ¯ï¼Œé€šè¿‡å°† IPv4 æµé‡å°è£…åˆ° IPv6 ä¸­ä¼ è¾“ã€‚åˆ é™¤ TR-069 æ˜¯å¦æœ‰æ•ˆï¼Ÿ<br>TR-069 åè®®æ˜¯å®½å¸¦è¿è¥å•†å¸¸ç”¨çš„è¿œç¨‹ç®¡ç†å·¥å…·ï¼Œä½†éƒ¨åˆ†ç”¨æˆ·æŒ‡å‡ºï¼Œå³ä½¿ç¦ç”¨è¯¥åè®®ï¼Œå…‰çŒ«ä¾ç„¶æ¥å—è¿œç¨‹æŒ‡ä»¤ï¼Œè¡¨æ˜å¯èƒ½å­˜åœ¨å…¶ä»–æœªçŸ¥è¿œç¨‹ç®¡ç†æœºåˆ¶ã€‚<br>è¶…çº§å¯†ç çš„å†ä¸‹å‘ï¼š<br>ç”¨æˆ·å¤šæ¬¡ä¿®æ”¹å…‰çŒ«ç®¡ç†å‘˜å¯†ç åï¼Œè¿è¥å•†ä¼šå‘¨æœŸæ€§åœ°é€šè¿‡è¿œç¨‹ä¸‹å‘éšæœºç”Ÿæˆçš„è¶…çº§å¯†ç è¦†ç›–åŸå¯†ç ï¼Œè¿™è®©ç”¨æˆ·æ„Ÿåˆ°éšç§å—ä¾µã€‚</p><p>2023å¹´4æœˆ23æ—¥ï¼Œè°·å­çŒ«å‘å¸ƒäº†åšæ–‡ï¼Œè¡¨ç¤ºç§»åŠ¨çš„å…‰çŒ«å«æœ‰ä¸€äº›ç‰¹æ®Šæ’ä»¶ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><p>com.cmcc.wuyougateway<br>com.chinamobile.smartgateway.andlink<br>com.chinamobile.smartgateway.cmccdpi<br>com.chinamobile.smartgateway.appcore<br>å®ƒä»¬ä¼¼ä¹è¢«ç§°ä¸ºã€Œè½¯æ¢é’ˆã€ï¼Œèƒ½å¤Ÿç”Ÿæˆç»™ç”¨æˆ·è§‚çœ‹çš„ã€Œå®¶åº­ç½‘ç»œä½¿ç”¨æ¦‚è§ˆã€ï¼Œå…¶ä¸­å«æœ‰ç¤¾äº¤ã€æ¸¸æˆã€è§†é¢‘ç­‰åº”ç”¨ç±»å‹çš„æµé‡å æ¯”ï¼Œ å¹¶ä¸”è¿˜æœ‰ã€Œç½‘ç»œå®‰å…¨é˜²æŠ¤æƒ…å†µã€ï¼Œèƒ½ä¸ºç”¨æˆ·æ£€æµ‹å®‰å…¨é£é™©ï¼Œæ¯”å¦‚ã€Œæ£€æµ‹ä¸è‰¯å†…å®¹ç½‘ç«™ã€ã€‚å½“ä½¿ç”¨æ¡¥æ¥ï¼Œé€šè¿‡è·¯ç”±å™¨ä¸Šç½‘åï¼Œ ä¸Šè¿°åŠŸèƒ½å°±ä¼šå¤±æ•ˆã€‚</p><p>æ‰€ä»¥ â€¦cmccdpi æ’ä»¶æœ€åçš„ dpiï¼Œåº”è¯¥å°±æ˜¯æŒ‡æ·±åº¦åŒ…æ£€æµ‹ï¼ˆDPIï¼‰ï¼Œæˆ–è®¸è¿˜æœ‰ DNS è¯·æ±‚è®°å½•ä¹‹ç±»çš„åŠŸèƒ½ã€‚æœ‰è¿™æ ·çš„åŠŸèƒ½ï¼Œ æ‰èƒ½èµ·åˆ°æä¾›ä¿¡æ¯ä»¥åŠä¿æŠ¤ç”¨æˆ·çš„ä½œç”¨ã€‚ä½†æ˜¯è¿™äº›æ•°æ®é™¤äº†å‘ˆç°ç»™ç”¨æˆ·ï¼Œæ˜¯å¦è¿˜åˆ†äº«ç»™ç¬¬ä¸‰æ–¹ï¼Œæš‚ä¸å¯çŸ¥ã€‚</p><p><strong>TR069ï¼šè¿è¥å•†çš„â€œè¿œç¨‹æ§åˆ¶â€</strong></p><p>è¿™äº›åº”ç”¨æ˜¯å¦‚ä½•è¢«å®‰è£…åˆ°ä½ çš„ç½‘å…³é‡Œçš„å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ TR069ã€‚</p><p>TR069 æ˜¯ä¸€ç§æ ‡å‡†åŒ–çš„è¿œç¨‹ç®¡ç†åè®®ï¼Œå…è®¸è¿è¥å•†è¿œç¨‹é…ç½®å’Œç®¡ç†ç”¨æˆ·å®¶ä¸­çš„ç½‘å…³è®¾å¤‡ã€‚é€šè¿‡ TR069ï¼Œè¿è¥å•†å¯ä»¥ä¸‹å‘é…ç½®ã€æ›´æ–°å›ºä»¶ã€è¯Šæ–­æ•…éšœï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å®‰è£…å’Œå¯åŠ¨åº”ç”¨ã€‚</p><p>TR069 çš„å­˜åœ¨ï¼Œè®©è¿è¥å•†å¯ä»¥æ›´é«˜æ•ˆåœ°ç®¡ç†å¤§è§„æ¨¡çš„ç½‘ç»œè®¾å¤‡ï¼ŒåŠæ—¶ä¿®å¤æ¼æ´ã€æ¨é€æ›´æ–°ï¼Œä¿éšœç½‘ç»œç¨³å®šè¿è¡Œã€‚ä½†åŒæ—¶ï¼Œä¹Ÿèµ‹äºˆäº†è¿è¥å•†æå¤§çš„æ§åˆ¶æƒï¼Œç”¨æˆ·åœ¨æŸç§ç¨‹åº¦ä¸Šå¤±å»äº†å¯¹è‡ªå·±ç½‘å…³çš„æŒæ§ã€‚</p><h1><strong>PCDN å¤§æ½®ä¸‹çš„è¿è¥å•†è€ƒé‡</strong></h1><p>è¿™ä¸€åˆ‡çš„èƒŒåï¼Œæ˜¯ PCNï¼ˆPeer Content Networkï¼Œå¯¹ç­‰å†…å®¹ç½‘ç»œï¼‰å’Œ CDNï¼ˆContent Delivery Networkï¼Œå†…å®¹åˆ†å‘ç½‘ç»œï¼‰æŠ€æœ¯çš„å‘å±•å’Œæ™®åŠã€‚</p><p>éšç€äº’è”ç½‘æµé‡çš„çˆ†ç‚¸å¼å¢é•¿ï¼Œä¼ ç»Ÿçš„ä¸­å¿ƒåŒ–å†…å®¹åˆ†å‘æ¨¡å¼å·²ç»éš¾ä»¥æ»¡è¶³éœ€æ±‚ã€‚ä¸­å›½å¤šåœ°äº’è”ç½‘æœåŠ¡æä¾›å•†ï¼ˆISPï¼‰å¯¹åŸºäºPCDNï¼ˆä¸ªäººäº‘åˆ†å¸ƒå¼ç½‘ç»œï¼‰çš„ç›¸å…³ä¸šåŠ¡é‡‡å–äº†ä¸¥å‰æªæ–½ï¼ŒåŒ…æ‹¬é™é€Ÿã€å°åœå®½å¸¦ã€ç”šè‡³è¦æ±‚ç”¨æˆ·ç­¾ç½²ä¿è¯ä¹¦æ¢å¤éƒ¨åˆ†ç½‘ç»œæœåŠ¡ã€‚è¿™ç§å¼ºåˆ¶æ€§æ”¿ç­–ä¸»è¦å‡ºäºä»¥ä¸‹å‡ ç‚¹è€ƒé‡ï¼š</p><p>ç½‘ç»œè´Ÿæ‹…ä¸æˆæœ¬é—®é¢˜ï¼šPCDNé€šè¿‡åˆ©ç”¨å®¶åº­å®½å¸¦çš„ä¸Šè¡Œå¸¦å®½åˆ†å‘å†…å®¹ï¼Œå¯èƒ½å¯¼è‡´ç½‘ç»œæ‹¥å µï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸Šè¡Œå¸¦å®½è¾ƒå°çš„å°åŒºç½‘ç»œä¸­ï¼Œè¿˜ä¼šåŠ å¤§è¿è¥å•†åœ¨éª¨å¹²ç½‘æ‰©å®¹å’Œè¿ç»´æ–¹é¢çš„æˆæœ¬â€‹<br>å•†ä¸šç«äº‰ä¸ç›‘ç®¡åˆè§„æ€§ï¼šè¿è¥å•†çš„æ ¸å¿ƒæ”¶å…¥æ¥æºä¹‹ä¸€æ˜¯æä¾›CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰æœåŠ¡ï¼Œè€ŒPCDNçš„å¹¿æ³›ä½¿ç”¨å¯èƒ½èš•é£Ÿè¿™ä¸€å¸‚åœºã€‚æ­¤å¤–ï¼Œæ ¹æ®ä¸­å›½å·¥ä¿¡éƒ¨çš„ç›¸å…³è§„å®šï¼Œæœªå–å¾—ç»è¥è®¸å¯è¯çš„ä¸ªäººæˆ–ä¼ä¸šä¸å¾—æä¾›CDNæœåŠ¡ï¼Œå› æ­¤ä¸ªäººé€šè¿‡PCDNè®¾å¤‡ç‰Ÿåˆ©è¢«è§†ä¸ºè¿æ³•<br>çŸ­è§†é¢‘åšä¸»â€œå½±è§†é£“é£â€å¼•å‘äº†ä¸€åœºå…³äºè§†é¢‘ç”»è´¨çš„çƒ­è®®ã€‚ä»–åœ¨å¾®åšä¸Šé€éœ²ï¼Œç”±äºå¤šç§åŸå› ï¼Œå…¶ä¸è§†é¢‘æ¸…æ™°åº¦ç›¸å…³çš„å†…å®¹è¢«è¦æ±‚åœ¨å…¨ç½‘ä¸‹æ¶ã€‚è¿™èµ·äº‹ä»¶è¿…é€Ÿå¸å¼•äº†å¤§é‡å…³æ³¨ï¼Œå¼•å‘äº†äººä»¬å¯¹è§†é¢‘å¹³å°ç”»è´¨å‹ç¼©ç­–ç•¥çš„è®¨è®ºã€‚</p><p>å½±è§†é£“é£æ­¤å‰å‘å¸ƒäº†ä¸€åˆ™ç§‘æ™®è§†é¢‘ã€Šæ¸…æ™°åº¦ä¸å¦‚4å¹´å‰ï¼è§†é¢‘å˜ç³Šæ˜¯ä½ çš„é”™è§‰å—ï¼Ÿã€‹ï¼ŒæŒ‡å‡ºä¸€äº›è§†é¢‘å¹³å°ä¸ºäº†é™ä½æµé‡æˆæœ¬ï¼Œé‡‡ç”¨é™ä½ç ç‡å’Œæ”¹å˜ç¼–ç æ ¼å¼ç­‰æªæ–½ã€‚è¿™ç§åŠ¨æ€è°ƒèŠ‚ç ç‡çš„åšæ³•åœ¨è§†é¢‘çƒ­é—¨æ—¶å°¤ä¸ºå¸¸è§ï¼Œç›®çš„æ˜¯èŠ‚çœå¸¦å®½ï¼Œä½†è¿™å¯èƒ½å¯¼è‡´ç”»è´¨ä¸‹é™</p><p>æ­¤å¤–ï¼ŒDPI æŠ€æœ¯åœ¨ PCN/CDN æ¶æ„ä¸­ä¹Ÿæ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚é€šè¿‡åˆ†æç½‘ç»œæµé‡ï¼Œè¿è¥å•†å¯ä»¥æ›´ç²¾å‡†åœ°è¿›è¡Œå†…å®¹è°ƒåº¦å’Œç¼“å­˜ï¼Œæå‡ PCN/CDN çš„æ•ˆç‡ã€‚åŒæ—¶ï¼ŒDPI ä¹Ÿå¯ä»¥ç”¨äºè¯†åˆ«å’Œè¿‡æ»¤éæ³•å†…å®¹ï¼Œä¿éšœç½‘ç»œå®‰å…¨ã€‚</p><h1><strong>å¦‚ä½•æ‘†è„±æ§åˆ¶</strong></h1><p>æ”¹å…‰çŒ«æ¡¥æ¥ï¼Œæœ€éº»çƒ¦çš„å°±æ˜¯è¶…å¯†çš„è·å–ã€‚<br>ä¸€äº›çœä»½æˆ–è€…è¿è¥å•†ï¼Œæ˜¯ç½‘ç»œä¸Šå¯æŸ¥çš„é€šç”¨å¸å·å¯†ç ã€‚è¿™å°±æ¯”è¾ƒå¥½åŠ<br>è¿˜æœ‰ä¸€äº›åœ°æ–¹ï¼Œè¶…å¯†æ˜¯è‡ªåŠ¨ä¸‹å‘çš„ï¼Œç”šè‡³ä¼šå®šæœŸè‡ªåŠ¨æ›´æ”¹ã€‚è¿™å°±å¾ˆéº»çƒ¦ã€‚<br>è€Œä¸”è¿è¥å•†éå¸¸ä¸æ—¶ä¿±è¿›ï¼Œå¾ˆå¤šç½‘ç»œä¸Šå®¹æ˜“è·å–çš„åŠæ³•ï¼Œä»–ä»¬éƒ½å·²ç»æƒ³åŠæ³•å±è”½æ‰äº†ã€‚å› æ­¤ï¼Œå³ä¾¿æ˜¯åŒè¿è¥å•†åŒå‹å·è®¾å¤‡ï¼Œæˆ–è®¸ç½‘ç»œä¸Šæ‰¾åˆ°çš„åŠæ³•ï¼Œä¹Ÿæœªå¿…èƒ½åœ¨ä½ çš„æ‰‹é‡ŒæˆåŠŸã€‚</p><p>æ€»å¾—æ¥è¯´å°±æ˜¯è·å–è¶…çº§å¯†ç ã€å¼€telnetã€æ”¹æ¡¥æ¥ã€æ”¹åœ°åŒºã€ç¦ç”¨TR069ã€‚æ³¨æ„ ç”¨æˆ·éœ€è¦å…·å¤‡ä¸€å®šçš„æŠ€æœ¯çŸ¥è¯†å’ŒæŠ€èƒ½ï¼Œæ‰èƒ½æ­£ç¡®åœ°é…ç½®å’Œç®¡ç†å…‰çŒ«ã€‚</p><p><strong>ç”¨æˆ·ï¼šçŸ¥æƒ…æƒä¸é€‰æ‹©æƒ</strong></p><p>ç„¶è€Œï¼Œåœ¨è¿è¥å•†è¿½æ±‚æ•ˆç‡å’Œå•†ä¸šåˆ©ç›Šçš„åŒæ—¶ï¼Œç”¨æˆ·çš„çŸ¥æƒ…æƒå’Œé€‰æ‹©æƒä¹Ÿåº”è¯¥å¾—åˆ°å°Šé‡ã€‚</p><p>è¿è¥å•†åº”è¯¥å‘ç”¨æˆ·æ¸…æ™°åœ°è¯´æ˜æ™ºèƒ½ç½‘å…³åº”ç”¨çš„åŠŸèƒ½ã€ä½œç”¨ä»¥åŠæ•°æ®ä½¿ç”¨æ–¹å¼ï¼Œè·å¾—ç”¨æˆ·çš„æ˜ç¡®æˆæƒã€‚ç”¨æˆ·åº”è¯¥æœ‰æƒé€‰æ‹©æ˜¯å¦å¯ç”¨è¿™äº›åŠŸèƒ½ï¼Œå¹¶æœ‰æƒå¸è½½æˆ–ç¦ç”¨ä¸éœ€è¦çš„åº”ç”¨ã€‚</p><p>æ­¤å¤–ï¼Œè¿è¥å•†ä¹Ÿåº”è¯¥åŠ å¼ºå®‰å…¨é˜²æŠ¤ï¼Œä¿æŠ¤ç”¨æˆ·æ•°æ®å®‰å…¨ï¼Œé˜²æ­¢éšç§æ³„éœ²ã€‚åªæœ‰åœ¨ç”¨æˆ·ä¿¡ä»»çš„åŸºç¡€ä¸Šï¼Œè¿è¥å•†çš„è¿™äº›ä¸¾æªæ‰èƒ½çœŸæ­£å‘æŒ¥ä½œç”¨ï¼Œå®ç°ç”¨æˆ·ã€è¿è¥å•†å’Œæ•´ä¸ªäº’è”ç½‘ç”Ÿæ€çš„å¤šèµ¢ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å‰å‡ å¹´å—â€œæé€Ÿé™è´¹â€æ”¿ç­–å½±å“ï¼Œå›½å†…é«˜é€Ÿå®½å¸¦å‘å±•éå¸¸å¿«ã€‚ç„¶è€Œæ­¤ä¸€æ—¶å½¼ä¸€æ—¶ï¼Œâ€œäº’è”ç½‘ç»æµâ€è¿™ä¸ªè¯é¢˜è½å¹•ï¼Œè¿è¥å•†å¼€å§‹é‡æ–°åœˆåœ°ã€‚â€œæ‰“å‡» PCDN â€ä¼¼ä¹å°±æ˜¯å¹å“è¿è¥å•†åˆ©ç›Šè‡³ä¸Šçš„å·è§’ã€‚&lt;/p&gt;
&lt;p&gt;æŒ‰ç…§æƒ¯ä¾‹ï¼Œæ”¿ç­–æ‰§è¡Œåç»­éƒ½ä¼šæ‰©å¤§åŒ–ã€‚è¯´æ˜¯ç¦ PCDN ï¼Œç›®å‰å·²ç»æœ‰æ‰©å¤§åŒ–è¿¹è±¡ï¼Œæ¯”å¦‚é¡ºå¸¦</summary>
      
    
    
    
    
    <category term="ç½‘ç»œå®‰å…¨" scheme="https://stan370.github.io/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>æ—¥æœ¬éº»å°†ï¼ˆæ—¥éº»ï¼‰ç­–ç•¥åˆ†æ</title>
    <link href="https://stan370.github.io/2024/11/07/Riichi/"/>
    <id>https://stan370.github.io/2024/11/07/Riichi/</id>
    <published>2024-11-07T06:41:43.000Z</published>
    <updated>2025-03-19T12:12:05.248Z</updated>
    
    <content type="html"><![CDATA[<h1>æ—¥æœ¬éº»å°†ï¼ˆæ—¥éº»ï¼‰ç­–ç•¥ä¸åŸºæœ¬è§„åˆ™</h1><h2 id="åŸºæœ¬è§„åˆ™">åŸºæœ¬è§„åˆ™</h2><p>æ—¥æœ¬éº»å°†æ˜¯ä¸€ç§å››äººæ¸¸æˆï¼Œä½¿ç”¨136å¼ ç‰Œã€‚æ¯ä½ç©å®¶å¼€å§‹æ—¶æœ‰13å¼ ç‰Œï¼Œç›®æ ‡æ˜¯é€šè¿‡æ‘¸ç‰Œå’Œæ‰“ç‰Œæ¥å®Œæˆä¸€ä¸ªæœ‰æ•ˆçš„å’Œç‰Œç»„åˆã€‚<br>æ—¥æœ¬éº»å°†ï¼ˆæ—¥éº»ï¼‰åœ¨è§„åˆ™å’Œç­–ç•¥ä¸Šä¸ä¸­å›½éº»å°†æœ‰ä¸€äº›å·®å¼‚ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸»è¦çš„æ—¥éº»ç­–ç•¥ï¼Œä»¥å¸®åŠ©ä½ åœ¨æ¸¸æˆä¸­åšå‡ºæ›´å¥½çš„åˆ¤æ–­ï¼š</p><ol><li>åŸºæœ¬ç­–ç•¥ï¼š<br>è¿½æ±‚é€Ÿåº¦ä¸æ•ˆç‡ï¼šæ—¥éº»ä¸­çš„ç›®æ ‡é€šå¸¸æ˜¯å°½å¿«å¬ç‰Œï¼ˆè¿›å…¥åªå·®ä¸€å¼ å°±èƒ½å’Œç‰Œçš„çŠ¶æ€ï¼‰ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®æ ‡ï¼Œä½ éœ€è¦æ ¹æ®å¬ç‰Œçš„é€Ÿåº¦è°ƒæ•´æ‰‹ç‰Œï¼Œå°½é‡å»åšæœ€æœ‰æ•ˆç‡çš„ç»„åˆï¼Œæ¯”å¦‚ä¸‰é¢å¬ã€ä¸¤é¢å¬ï¼Œé¿å…åšè¾¹å¼ å’ŒåµŒå¼ ç­‰è¾ƒéš¾æ‘¸åˆ°çš„å¬å£ã€‚<br>ä¼˜å…ˆä¸¤é¢æ­å­ï¼šä¸¤é¢æ­å­ï¼ˆä¾‹ï¼š34ç­‰å¯ä»¥å’Œ2æˆ–5å®Œæˆé¡ºå­ï¼‰åœ¨æ¸¸æˆä¸­æœ€ä¸ºå¸¸è§ï¼Œä¹Ÿæ˜¯æœ€å®¹æ˜“å½¢æˆæœ‰æ•ˆå¬ç‰Œå½¢æ€çš„ï¼Œå› æ­¤åœ¨æ•´ç†æ‰‹ç‰Œæ—¶ï¼Œä¼˜å…ˆä¿ç•™ä¸¤é¢æ­å­ï¼Œæé«˜å¬ç‰Œæ¦‚ç‡ã€‚</li><li>å½¹çš„æ„è¯†ï¼š<br>è¿½æ±‚åŸºæœ¬å½¹ï¼šåœ¨æ—¥éº»ä¸­ï¼Œè‡³å°‘è¦æœ‰ä¸€ä¸ªâ€œå½¹â€æ‰èƒ½èƒ¡ç‰Œï¼Œå› æ­¤ä½ åœ¨æ•´ç†æ‰‹ç‰Œæ—¶ï¼Œéœ€è¦å§‹ç»ˆè€ƒè™‘å¦‚ä½•è¾¾æˆè‡³å°‘ä¸€ä¸ªâ€œå½¹â€ã€‚å¸¸è§çš„åŸºæœ¬å½¹åŒ…æ‹¬ç«‹ç›´ï¼ˆãƒªãƒ¼ãƒï¼‰ã€æ–­å¹ºä¹ï¼ˆã‚¿ãƒ³ãƒ¤ã‚ªï¼‰ã€å¹³å’Œï¼ˆãƒ”ãƒ³ãƒ•ï¼‰ç­‰ã€‚ç«‹ç›´æ˜¯æœ€ç®€å•ä¸”æœ€ç¨³å®šçš„å½¹ä¹‹ä¸€ï¼Œåªè¦æ‰‹ç‰Œæ¥è¿‘å¬ç‰Œä¸”è¾¾åˆ°é—¨æ¸…ï¼ˆæ²¡æœ‰åƒã€ç¢°ã€æ ï¼‰ï¼Œå¯ä»¥é€‰æ‹©ç«‹ç›´æ¥å¢åŠ èƒœç‡ã€‚<br>åˆ©ç”¨å½¹ç‰Œï¼šå¦‚æœæ‰‹ä¸Šæœ‰è¾ƒå¤šçš„åœºé£ç‰Œã€é—¨é£ç‰Œæˆ–ä¸‰å…ƒç‰Œï¼ˆç™½ã€å‘ã€çº¢ä¸­ï¼‰ï¼Œå°½é‡ä¿ç•™ï¼Œå½¢æˆâ€œå½¹ç‰Œâ€ç»„åˆï¼ˆå½¹ç‰Œé›€å¤´ï¼‰ï¼Œè¿™æ˜¯ç¨³å®šå¾—åˆ†çš„æ‰‹æ®µã€‚</li><li>åˆ¤æ–­æ‰‹ç‰Œçš„ä»·å€¼ï¼š<br>è€ƒè™‘ç‚¹æ•°ï¼šåœ¨æ—¥éº»ä¸­ï¼Œä¸ä»…ä»…æ˜¯èƒ¡ç‰Œï¼Œç‚¹æ•°ï¼ˆå’Œç‰Œçš„ä»·å€¼ï¼‰ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ã€‚åœ¨å†³å®šæ˜¯å¦åƒã€ç¢°ã€æ æˆ–ç«‹ç›´æ—¶ï¼Œéœ€è¦æ ¹æ®å½“å‰æ‰‹ç‰Œçš„æƒ…å†µè¯„ä¼°ç‚¹æ•°ã€‚ä¾‹å¦‚ï¼Œåªæœ‰ç«‹ç›´+é—¨æ¸…å¹³å’Œå¯èƒ½å¾—ç‚¹è¾ƒä½ï¼Œå¦‚æœæœ‰æœºä¼šç»„åˆå‡ºé«˜åˆ†å½¹ï¼ˆå¦‚ä¸€æ°”é€šè´¯ã€æ··ä¸€è‰²ã€å¯¹å¯¹å’Œç­‰ï¼‰ï¼Œå¯ä»¥é€‚å½“æ”¾å¼ƒä¸€äº›è¾ƒå¿«çš„å¬ç‰Œè·¯çº¿ã€‚<br>è¿½æ±‚æ»¡è´¯åŠä»¥ä¸Šçš„å½¹ï¼šå½“èµ·æ‰‹è¾ƒå¥½æ—¶ï¼Œå¯ä»¥å°è¯•è¿½æ±‚å¤§å½¹ï¼ˆä¾‹å¦‚æ¸…ä¸€è‰²ã€æ··å…¨å¸¦å¹ºä¹ã€ä¸ƒå¯¹å­ç­‰ï¼‰ã€‚è¿™æ—¶ï¼Œéœ€è¦ç¨³ä½å¿ƒæ€ï¼Œä¸æ€¥äºç¢°ç‰Œæˆ–ç«‹ç›´ï¼Œå‡å°‘æš´éœ²æ‰‹ç‰Œçš„æœºä¼šï¼Œå¢åŠ éšè”½æ€§ã€‚</li><li>é˜²å®ˆç­–ç•¥ï¼š<br>å­¦ä¼šè§‚å¯Ÿèˆç‰Œï¼šè§‚å¯Ÿå¯¹æ‰‹çš„å‡ºç‰Œï¼Œå°¤å…¶æ˜¯åœ¨å¯¹æ‰‹ç«‹ç›´çš„æƒ…å†µä¸‹ï¼Œå°½é‡ä¸è¦è½»æ˜“æ‰“å‡ºä»–ä»¬å¯èƒ½éœ€è¦çš„ç‰Œã€‚ä¾‹å¦‚ï¼Œå¦‚æœå¯¹æ‰‹èˆå‡ºå­—ç‰Œï¼ˆç™½ã€å‘ã€ä¸­ç­‰ï¼‰ï¼Œé€šå¸¸è¡¨ç¤ºè¿™äº›å­—ç‰Œä¸åœ¨ä»–ä»¬çš„å¬ç‰Œæˆ–å½¹ç‰Œä¹‹ä¸­ï¼Œè¿™äº›å­—ç‰Œå¾€å¾€æ˜¯å®‰å…¨ç‰Œã€‚<br>ç‰Œæ²³åˆ¤æ–­ï¼šè§‚å¯Ÿå¯¹æ‰‹çš„èˆç‰Œåºåˆ—ï¼Œç‰¹åˆ«æ³¨æ„å…¶è¿ç»­æ‰“å‡ºçš„ç‰Œï¼Œå¯»æ‰¾å…¶å¯èƒ½å¬çš„ç‰Œçš„çº¿ç´¢ã€‚ä¾‹å¦‚ï¼Œå¯¹æ‰‹çªç„¶æ‰“å‡ºä¸€å¼ ç”Ÿå¼ ï¼ˆæ²¡äººæ‰“è¿‡çš„ç‰Œï¼‰ï¼Œå¯èƒ½è¡¨æ˜ä»–ä»¬å·²ç»å¬ç‰Œï¼Œå°¤å…¶æ˜¯å¯¹ä¸€å¼ ç‰Œçš„çŠ¹è±«ï¼Œå¾€å¾€èƒ½è¯´æ˜æ‰‹ç‰ŒçŠ¶æ€ã€‚</li><li>çµæ´»å˜é€šï¼š<br>æ ¹æ®åœºå†µè°ƒæ•´ç­–ç•¥ï¼šå¦‚æœä½ åœ¨æ¯”èµ›çš„å‰åŠæ®µå¾—åˆ†é¢†å…ˆï¼Œå¯ä»¥åå‘é˜²å®ˆï¼Œé¿å…æ‰“å‡ºå±é™©ç‰Œï¼Œæ”¾å¼ƒé«˜é£é™©é«˜å›æŠ¥çš„æ‰“æ³•ã€‚ç›¸åï¼Œå¦‚æœä½ çš„ç‚¹æ•°è¾ƒå°‘ç”šè‡³é¢ä¸´å±é™©ï¼Œéœ€è¦ç§¯æè¿½æ±‚é«˜åˆ†å’Œç‰Œï¼Œå°½é‡æ‰“ç ´å¯¹æ‰‹çš„èŠ‚å¥ã€‚<br>ç†Ÿæ‚‰æµå±€è§„åˆ™ï¼šäº†è§£æµå±€æ—¶å¬ç‰Œçš„å¥–åŠ±ï¼Œä»¥åŠå››å®¶ç«‹ç›´ã€å››å®¶ç¢°ã€ä¹ç§ä¹ç‰Œç­‰ç‰¹æ®Šæƒ…å†µï¼Œå¹¶åˆ©ç”¨è¿™äº›è§„åˆ™åœ¨ç‰¹å®šåœºåˆä¸­æ­¢å¯¹æ‰‹çš„æ”»åŠ¿æˆ–ä¸ºè‡ªå·±äº‰å–æ—¶é—´ã€‚</li></ol><h2 id="ç»éªŒä¹‹è°ˆ">ç»éªŒä¹‹è°ˆ</h2><p>ç»™æ—¥éº»æ–°æ‰‹çš„å»ºè®®</p><ol><li>ä¸œé£æˆ˜ï¼Œä»¥å’Œç‰Œç‡ä¸ºä¼˜å…ˆï¼›ä¸œå—æˆ˜(åŠåº„æˆ˜)ï¼Œä»¥åšå¤§ç‰Œä¸ºå‡†åˆ™ã€‚</li><li>åƒä¸‡ã€åƒä¸‡ä¸è¦éšä¾¿æ ç‰Œï¼Œå°¤å…¶æ˜¯å¤§æ˜æ ã€‚</li></ol><p>æ ç‰Œæœ€å¤§çš„æ„ä¹‰æ˜¯ç¿»æ‚¬èµç‰Œï¼Œæ¯ä¸ªäººçš„æ‰‹ç‰Œæœºç‡éƒ½æ˜¯å¹³ç­‰çš„ï¼Œåœ¨1vs3çš„æ¸¸æˆä¸­å®ç‰Œåœ¨æ•Œäººæ‰‹ä¸Šçš„æœºç‡é«˜è¾¾75%ã€åœ¨è‡ªå·±æ‰‹ä¸Šçš„æœºç‡ä»…æœ‰25%ï¼ŒæœŸæœ›å€¼æä½ã€‚</p><p>æ‰€ä»¥åŠ æ åŸºæœ¬ä¸Šä¹Ÿåªæœ‰ä¸€ä¸ªæƒ…å†µï¼ˆä½†æ¯”å¤§æ˜æ æ—¶æœºå¸¸è§å¾ˆå¤šï¼‰ï¼š<strong>ä½ çš„æ‰‹ç‰Œç‰Œå‹è¾ƒå¥½</strong>å¬ç‰Œï¼ˆæˆ–ä¸€å‘å¬å¥½ç‰Œï¼‰ï¼Œä¸”å…¶ä»–å®¶è¿˜æ²¡æœ‰å¨èƒæ€§ï¼ˆæ²¡æœ‰ç«‹ç›´æˆ–å¤šä¸ªå‰¯éœ²ï¼‰</p><p>å¦‚æœæ‰‹ç‰Œä¸­æ²¡æœ‰æ˜ç¡®çš„å½¹ï¼ˆä¾‹å¦‚æ²¡æœ‰æˆå¯¹çš„ä¸‰å…ƒç‰Œã€é£ç‰Œï¼‰ï¼Œæ ç‰Œå¯èƒ½åªèƒ½å¸¦æ¥é¢å¤–çš„æ åˆ†ï¼Œè€Œæ— æ³•å¤§å¹…æé«˜æ‰‹ç‰Œçš„å¾—ç‚¹ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä¸å…¶é€‰æ‹©æ ç‰Œï¼Œä¸å¦‚å°½é‡ä¿æŒæ‰‹ç‰Œçš„çµæ´»æ€§ï¼Œç­‰å¾…å½¢æˆæ›´é«˜å¾—ç‚¹çš„ç‰Œå‹ã€‚</p><ol start="3"><li>ç¡®å®šè‡ªå·±æœ‰å½¹ï¼Œæ‰è€ƒè™‘é¸£ç‰Œ(åƒã€ç¢°ã€å¤§æ˜æ )</li></ol><ul><li>å¼€å±€çš„å•å¼ <strong>è‡ªé£ã€åœºé£å’Œä¸‰å…ƒç‰Œ</strong>é€šå¸¸å¯ä»¥ä¿ç•™å‡ å·¡ï¼Œä»¥å¢åŠ å½¢æˆå½¹ç‰Œçš„æœºä¼šã€‚</li><li>è‹¥æ˜¯<strong>éè‡ªé£ã€éåœºé£çš„é£ç‰Œ</strong>ï¼Œæˆ–ç‰Œé¢ç»“æ„æ˜ç¡®è¿½æ±‚é€Ÿåº¦æ—¶ï¼Œå¯ä»¥æ—©äº›èˆå‡ºè¿™äº›ç‰Œï¼Œå¢åŠ æ‘¸ç‰Œæ•ˆç‡ã€‚</li><li>åœ¨<strong>é€Ÿæ”»</strong>ç­–ç•¥ä¸‹ï¼Œä¸ºå‡å°‘æ— ç”¨ç‰Œçš„é˜»ç¢ï¼Œé£ç‰Œå’Œä¸‰å…ƒç‰Œä¹Ÿå¯ä»¥åœ¨ç¡®å®šæ— ç”¨æ—¶æå‰èˆå‡ºã€‚</li></ul><p>4o</p><p>å¯ä»¥å…ˆè®°å¾—ã€Œä»€ä¹ˆæ—¶å€™ä¸è¯¥é¸£ç‰Œã€ï¼Œç­‰ä»¥ä¸Šå‡ è¯¾çš„èƒ½åŠ›éƒ½ç†Ÿæ‚‰ä¹‹åå†æ·±å…¥å­¦ä¹ ã€‚</p><p>æ—©å·¡ä¸é¸£ã€‚ç‰Œè¶Šçƒ‚è¶Šä¸è¯¥é¸£ã€‚ç‰Œè¶Šå°è¶Šä¸è¯¥é¸£ã€‚<br>åœ¨4å·¡å‰ï¼Œé™¤éä½ æœ‰ç¡®å®š3-4ç¿»ä»¥ä¸Šçš„å¤§ç‰Œï¼Œå¦åˆ™ä¸è¯¥é¸£ç‰Œã€‚å› ä¸ºè¶Šæ—©å·¡ç‰Œé€šå¸¸è¶Šçƒ‚ï¼Œè¿™æ—¶å€™è‡ªæ‘¸ç‰Œæˆä¸ºæœ‰æ•ˆè¿›å¼ ã€è®©å‘å¬æ•°å‰è¿›çš„æœºä¼šä¹Ÿå¾ˆé«˜ã€‚æ‘¸äº†å‡ æ‰‹ä¹‹åæ‰‹ç‰Œç¨å¾®å®šå‹ï¼Œå¯¹äºæ‰‹ç‰Œçš„æ‰“ç‚¹ä¸é€Ÿåº¦åˆ¤æ–­æ‰ä¼šæ›´åŠ åœ°å‡†ç¡®ã€‚</p><p>ç‰Œè¶Šçƒ‚æŒ‡çš„æ˜¯å‘å¬æ•°è¶Šå¤šçš„æ„æ€ã€‚åœ¨3å‘å¬ä»¥ä¸Šçš„æ‰‹ç‰Œï¼Œé™¤éè¿™ä¸ªé¸£ç‰Œèƒ½å¤§å¹…åº¦çš„åŠ é€Ÿæ‰‹ç‰Œçš„è¿›å±•ï¼Œå¦åˆ™åº”è¯¥å¿ä½ã€‚å› ä¸ºçƒ‚çš„ç‰Œé¸£ç‰Œä¹‹åä¹Ÿåªæ˜¯å˜å¾—æ²¡é‚£ä¹ˆçƒ‚ï¼Œå¾€å¾€é€Ÿåº¦ä¸Šè¿˜æ˜¯ä¼šè¾“ç»™ç‰Œå½¢è¾ƒå¥½çš„ç©å®¶ã€‚è‹¥ä¸ºäº†é€Ÿåº¦å»è¿‡åº¦é¸£ç‰Œï¼Œåœ¨å¯¹æ‰‹ç«‹ç›´å¯¹æ”»æ—¶é˜²å®ˆåŠ›ä¸è¶³å°±ç›¸å½“åƒäºã€‚</p><p>å¤§å¹…è½åæ—¶ä¸é¸£ã€‚</p><p>å› ä¸ºè½åæ—¶éœ€è¦é«˜å¾—ç‚¹æ¥é€†è½¬ï¼Œè€Œé¸£ç‰Œä¼šè®©æ‰‹ç‰Œåˆ†æ•°æ— æ³•å†æé«˜ã€‚æ‰€ä»¥é™¤éæ‰‹ç‰Œåˆ†æ•°è¶³å¤Ÿå¤§ï¼Œå¦åˆ™éƒ½è¯¥å¿ä½å»æ‹¼ç«‹ç›´ã€‚</p><p><strong>ã€Œè¯¥é¸£ç‰Œçš„æ—¶æœºã€</strong></p><p>ååŠåœº(ä¾‹å¦‚ä¸œé£åœºçš„3-4å±€ã€å—é£åœºçš„å—2-å—4)ï¼Œè‡ªå·±å¤§å¹…é¢†å…ˆï¼Œä¸”é¸£ç‰Œç¡®å®šæœ‰å½¹åˆèƒ½è®©æ‰‹ç‰Œå‘å¬æ•°å‰è¿›çš„æ—¶å€™ã€‚å°±æ˜¯é€Ÿæ”»ä¸ç»™åˆ«äººé€†è½¬æœºä¼šçš„æ¦‚å¿µï¼Œä¸è¿‡è¿˜æ˜¯è¦æ³¨æ„é¸£ç‰Œä¹‹åçš„æ‰‹ç‰Œç‰Œå½¢/å‘å¬æ•°ä¸èƒ½å¤ªå·®ã€‚æ¯•ç«Ÿé€Ÿæ”»æ€»å¾—ç¡®ä¿è‡ªå·±æœ‰ã€Œé€Ÿã€å¯¹å§</p><p>å€’æ•°ä¸‰å·¡ï¼Œå®‰å…¨ç‰Œè¶³å¤Ÿå¤šä¸”æœ‰å¬ç‰Œæœºä¼šæ—¶ã€‚</p><p>å› ä¸ºæµå±€æœ‰ä¸å¬ç½šç¬¦ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ç¡®ä¿¡ä¸ä¼šæ”¾é“³æ—¶ï¼Œé¸£ç‰Œè¿½æ±‚å½¢å¼å¬ç‰Œã€‚</p><p>åŸºæœ¬ä¸Šæ³¨æ„ä»¥ä¸Šä¸‰ç‚¹æœ‰å…³äºæŒ¯å¬çš„éƒ¨åˆ†ï¼Œæˆ‘åœ¨ç»†é¡¹è¯´æ˜ä¹‹åä¹Ÿä¼šæåŠå¹¶è§£é‡Šä¸€ä¸‹å…¶åŸç†</p><p>ä»¥ä¸‹åˆ†é¡¹è¯´æ˜ï¼š</p><ul><li>ä¸œé£æˆ˜ï¼Œä»¥å’Œç‰Œç‡ä¸ºä¼˜å…ˆï¼›ä¸œå—æˆ˜(åŠåº„æˆ˜)ï¼Œä»¥åšå¤§ç‰Œä¸ºå‡†åˆ™ã€‚</li></ul><h2 id="åŸºæœ¬ç­–ç•¥">åŸºæœ¬ç­–ç•¥</h2><ul><li>**å¬ç‰Œé€Ÿåº¦ï¼š**å°½å¿«å½¢æˆå¬ç‰Œï¼ˆå¬ç‰ŒæŒ‡ç¦»å’Œç‰Œåªå·®ä¸€å¼ ç‰Œçš„çŠ¶æ€ï¼‰ã€‚</li><li>**é˜²å®ˆæ„è¯†ï¼š**æ³¨æ„å…¶ä»–ç©å®¶çš„æ‰“ç‰Œï¼Œé¿å…æ”¾é“³ï¼ˆç»™å¯¹æ‰‹å’Œç‰Œï¼‰ã€‚</li><li>**å½¹ç§æ„è¯†ï¼š**äº†è§£å¹¶äº‰å–é«˜åˆ†å€¼çš„å½¹ç§ï¼ˆç‰¹å®šçš„å’Œç‰Œç»„åˆï¼‰ã€‚</li><li>**ç‰Œæ•ˆç‡ï¼š**ä¿æŒæ‰‹ç‰Œçš„çµæ´»æ€§ï¼Œé¿å…è¿‡æ—©å›ºå®šç‰Œå‹ã€‚</li></ul><h2 id="é‡è¦æ¦‚å¿µ">é‡è¦æ¦‚å¿µ</h2><ul><li>**ç«‹ç›´ï¼š**å®£å‘Šå¬ç‰Œå¹¶é”å®šæ‰‹ç‰Œï¼Œå¯ä»¥å¢åŠ å¾—åˆ†ã€‚</li><li>**å‰¯éœ²ï¼š**é€šè¿‡åƒã€ç¢°ã€æ æ¥å¿«é€Ÿå®Œæˆç‰Œå‹ï¼Œä½†ä¼šé™åˆ¶å¯èƒ½çš„å’Œç‰Œç»„åˆã€‚</li><li>**å®ç‰Œï¼š**ç‰¹å®šçš„å¢åŠ å¾—åˆ†çš„ç‰Œã€‚</li></ul><h2 id="è¿›é˜¶æŠ€å·§">è¿›é˜¶æŠ€å·§</h2><p>å¸¸ç”¨æ—¥éº»AIï¼š <a href="https://mjai.ekyu.moe/zh-cn.html%EF%BC%8C">https://mjai.ekyu.moe/zh-cn.htmlï¼Œ</a> <a href="https://github.com/Equim-chan/Mortal">https://github.com/Equim-chan/Mortal</a><br>ç‰Œæ•ˆç‡ï¼š<a href="https://euophrys.itch.io/mahjong-efficiency-trainer?fbclid=IwAR3w3WZnfmSrx4_Zi0kb38jSmWgSFRyZbAMeDQD9rZFFF4Asw1oz63n4gi0">https://euophrys.itch.io/mahjong-efficiency-trainer?fbclid=IwAR3w3WZnfmSrx4_Zi0kb38jSmWgSFRyZbAMeDQD9rZFFF4Asw1oz63n4gi0</a></p><ul><li>**è¯»ç‰Œï¼š**æ ¹æ®å…¶ä»–ç©å®¶çš„æ‰“ç‰Œæ¨æµ‹ä»–ä»¬çš„æ‰‹ç‰Œã€‚</li><li>**æ²³åº•è¯»ç‰Œï¼š**åˆ†æå·²ç»æ‰“å‡ºçš„ç‰Œæ¥åˆ¤æ–­å®‰å…¨ç‰Œã€‚</li><li>**åœºåŠ¿åˆ¤æ–­ï¼š**æ ¹æ®å½“å‰å±€åŠ¿å†³å®šæ˜¯å¦åº”è¯¥æ”»å‡»æˆ–é˜²å®ˆã€‚</li></ul><p>è®°ä½ï¼Œéº»å°†æ˜¯ä¸€ç§éœ€è¦é•¿æœŸç»ƒä¹ å’Œç»éªŒç§¯ç´¯çš„æ¸¸æˆã€‚æŒç»­å­¦ä¹ å’Œå®è·µæ˜¯æé«˜æŠ€èƒ½çš„å…³é”®ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;æ—¥æœ¬éº»å°†ï¼ˆæ—¥éº»ï¼‰ç­–ç•¥ä¸åŸºæœ¬è§„åˆ™&lt;/h1&gt;
&lt;h2 id=&quot;åŸºæœ¬è§„åˆ™&quot;&gt;åŸºæœ¬è§„åˆ™&lt;/h2&gt;
&lt;p&gt;æ—¥æœ¬éº»å°†æ˜¯ä¸€ç§å››äººæ¸¸æˆï¼Œä½¿ç”¨136å¼ ç‰Œã€‚æ¯ä½ç©å®¶å¼€å§‹æ—¶æœ‰13å¼ ç‰Œï¼Œç›®æ ‡æ˜¯é€šè¿‡æ‘¸ç‰Œå’Œæ‰“ç‰Œæ¥å®Œæˆä¸€ä¸ªæœ‰æ•ˆçš„å’Œç‰Œç»„åˆã€‚&lt;br&gt;
æ—¥æœ¬éº»å°†ï¼ˆæ—¥éº»ï¼‰åœ¨è§„åˆ™å’Œç­–ç•¥ä¸Šä¸ä¸­å›½éº»å°†æœ‰ä¸€äº›å·®å¼‚ã€‚ä»¥</summary>
      
    
    
    
    <category term="éšè°ˆ" scheme="https://stan370.github.io/categories/%E9%9A%8F%E8%B0%88/"/>
    
    
    <category term="æ¦‚ç‡è®º" scheme="https://stan370.github.io/tags/%E6%A6%82%E7%8E%87%E8%AE%BA/"/>
    
    <category term="ç»„åˆæ•°å­¦" scheme="https://stan370.github.io/tags/%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/"/>
    
    <category term="å†³ç­–ç†è®º" scheme="https://stan370.github.io/tags/%E5%86%B3%E7%AD%96%E7%90%86%E8%AE%BA/"/>
    
  </entry>
  
  <entry>
    <title>Coding philosophy</title>
    <link href="https://stan370.github.io/2024/10/10/notion/"/>
    <id>https://stan370.github.io/2024/10/10/notion/</id>
    <published>2024-10-10T04:49:46.000Z</published>
    <updated>2025-04-13T08:54:56.275Z</updated>
    
    <content type="html"><![CDATA[<h1>Coding philosophy</h1><p>æˆ‘ä»¬ç¼–å†™çš„æ¯ä¸€è¡Œä»£ç éƒ½è®²è¿°ä¸€ä¸ªæ•…äº‹ã€‚å®ƒåæ˜ äº†æˆ‘ä»¬çš„æ€ç»´è¿‡ç¨‹ã€è§£å†³é—®é¢˜çš„æ–¹æ³•ä»¥åŠæˆ‘ä»¬å¯¹æ‰‹å¤´ä»»åŠ¡çš„ç†è§£ã€‚ä½†é™¤äº†åŠŸèƒ½ä¹‹å¤–ï¼Œä»£ç è¿˜ä½“ç°äº†ä¸€ç§å“²å­¦â€”â€”æŒ‡å¯¼æˆ‘ä»¬çš„å†³ç­–å¹¶å¡‘é€ æˆ‘ä»¬åˆ›å»ºçš„è½¯ä»¶çš„ä¸€ç»„åŸåˆ™ã€‚This blog delves into the fascinating world of coding philosophies. Weâ€™ll explore the diverse approaches developers take, from prioritizing elegance and simplicity to embracing pragmatism and efficiency. Weâ€™ll discuss the trade-offs inherent in each philosophy and how they influence everything from code readability and maintainability to project timelines and team dynamics.</p><p>æ°´å¹³å·®çš„ç¨‹åºå‘˜å¾€å¾€å¯¹ä»£ç  â€œ<strong>ä¸è®²ç©¶</strong>â€ï¼Œè¿™å…¶å®æ˜¯å·¥ç¨‹ç´ å…»å·®çš„è¡¨ç°ã€‚</p><p>é‚£ä¸è®²ç©¶çš„ä»£ç æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿæ¯”å¦‚ï¼ŒåŒæ ·å«ä¹‰çš„å˜é‡ä½¿ç”¨ä¸åŒçš„åå­—ã€å¯¹å¶åŠŸèƒ½ï¼ˆå¦‚å¢åˆ æ”¹æŸ¥ï¼‰å‘½åä¸æˆä½“ç³»ã€ç›¸ä¼¼ä»£ç ä¸æ–­é‡å¤è€Œæ²¡æœ‰é‡ç”¨ã€åå¸¸é€»è¾‘æ²¡æœ‰ä»»ä½•æ³¨é‡Šã€å­æ¨¡å—é—´å¤´é‡è„šè½»ã€å¥½å¥½çš„å°è£…è¢«æ”¹å‡ºå‡ ä¸ªæ´ç­‰ç­‰ï¼ˆå…³äºå¦‚ä½•å‘½åå¯å‚è€ƒæˆ‘ä¹‹å‰çš„ä¸€ç¯‡<a href="https://www.qtmuniao.com/2021/12/12/how-to-write-code-scrutinize-names/">æ–‡ç« </a>ï¼‰</p><p><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ã€‚ç”Ÿå‘½å‘¨æœŸè¶Šé•¿çš„ä»£ç ï¼Œä¸€å®šè¦å†™çš„è¶Šå¹²å‡€ï¼›ä¸´æ—¶ä½¿ç”¨ä»£ç ï¼Œæ¯”å¦‚å°è„šæœ¬ï¼Œå°±å¯ä»¥ä¸è®²ç©¶ä¸€äº›ã€‚åè¿‡æ¥ï¼Œä¹Ÿæ­£æ˜¯å¹²å‡€çš„ä»£ç æ‰èƒ½æˆå°±è¶…é•¿çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><ul><li><p><strong>ä¸è¦è´¬ä½ä½ çš„å·¥ä½œ</strong></p><p>å› ä¸ºæ˜¯æ–°äººï¼Œæ–°æ‰‹ç¨‹åºå‘˜æ€»æ˜¯å€¾å‘äºè®¤ä¸ºä»–ä»¬çš„å·¥ä½œæ²¡é‚£ä¹ˆé‡è¦ã€‚åˆæˆ–è€…ä¹Ÿè®¸ä½ æ˜¯ä¸€ä¸ªæœ‰ç»éªŒçš„ç¨‹åºå‘˜ï¼Œä½†æ˜¯åœ¨ä¸€ä¸ªè®©ä½ æ„Ÿåˆ°ä¸é€‚åº”çš„æ–°é¢†åŸŸé‡Œå·¥ä½œã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œä¸€äº›æœ€å¥½çš„æƒ³æ³•æ­£æ˜¯æ¥è‡ªäºæ–°æ‰‹ç¨‹åºå‘˜ï¼Œä»–ä»¬èƒ½çœ‹åˆ°ç°æœ‰æŠ€æœ¯çš„å¯æ”¹è¿›ä¹‹å¤„ï¼Œè€Œé‚£äº›å·²ç»å½¢æˆå›ºæœ‰è§‚å¿µçš„äººå´çœ‹ä¸åˆ°ã€‚</p><p>æ— è®ºå¦‚ä½•ï¼Œä½ çš„å·¥ä½œéƒ½æ˜¯æœ‰ä»·å€¼çš„ã€‚åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œå¦‚æœä½ çš„æ–¹æ³•å¤±è´¥äº†ï¼Œç¤¾åŒºè‡³å°‘å¯ä»¥æ›´å¥½çš„äº†è§£ä¸ºä½•è¿™ç§æ–¹æ³•è¡Œä¸é€šã€‚ï¼ˆå¯¹ç¤¾åŒºçš„ä¸€ç‚¹è¯´æ˜ï¼šè¿™æ¡æ˜¯æˆ‘ä»¬è¦åšçš„ï¼Œè¦å¯¹æ–°äººå‹å¥½ä¸€äº›ã€‚ï¼‰</p></li><li><p><strong>ä¸ç”¨æ€»æ˜¯åœ¨å‹åŠ›ä¸‹å·¥ä½œ</strong></p><p>æ–°æŠ€æœ¯æ¯å¤©éƒ½ä¼šå‡ºç°ï¼Œè¿™å¯èƒ½ä¼šè®©ä½ è§‰å¾—å¦‚æœæ”¾æ…¢è„šæ­¥ï¼Œå°±ä¼šä¸è¿™ä¸ªä¸–ç•Œè„±èŠ‚ã€‚ç„¶è€Œå¹¶ä¸æ˜¯è¿™æ ·çš„ã€‚äº‹å®ä¸Šï¼Œå¦‚æœä½ èƒ½å¾ˆå¥½çš„ä¼‘æ¯ï¼Œä½ å°±èƒ½æ›´å¥½çš„å·¥ä½œã€‚ä½ çš„æ€è·¯å°†ä¿æŒæ¸…æ™°ï¼Œæˆ‘å‘ç°å½“æˆ‘ä¸å·¥ä½œæ—¶ï¼Œæˆ‘çš„æ½œæ„è¯†é‡Œä¼šå‡ºç°å¾ˆå¤šæ–°æƒ³æ³•ã€‚</p><p>é‚£äº›æ¯å¤©ä¸æ–­å‘å¸ƒçš„å†…å®¹å¤§éƒ¨åˆ†éƒ½æ˜¯ä¸€äº›ç°æœ‰æƒ³æ³•çš„ç¿»ç‰ˆã€‚çœŸæ­£é©å‘½æ€§çš„ä¸œè¥¿åªä¼šæ¯å‡ å¹´æ‰å‘ç”Ÿä¸€æ¬¡ã€‚å…³äºè¿™ä¸ªè¯é¢˜æœ‰ä¸€ä¸ªä¸é”™çš„åˆ†äº«å€¼å¾—ä¸€çœ‹ï¼š<a href="https://www.youtube.com/watch?v=f84n5oFoZBc">åŠåºŠé©±åŠ¨å¼€å‘</a></p></li></ul><h1>System design</h1><p>æŠ€æœ¯åˆ›æ–°ä¸ç”Ÿäº§å…³ç³»å˜é©è”ç³»èµ·æ¥ï¼Œå¹¶æ¢è®¨äº†è½¯ä»¶å’Œè¿ç»´æ¶æ„èƒŒåçš„ç»„ç»‡ç»“æ„ã€‚è¿™ç§è§‚ç‚¹å¯ä»¥ä¸ºæˆ‘ä»¬æ›´å¥½åœ°ç†è§£æŠ€æœ¯å˜é©çš„åŠ¨åŠ›æä¾›æ–°çš„è§†è§’ã€‚è®©æˆ‘ä»¬è¿›ä¸€æ­¥æ¢è®¨ä¸€ä¸‹è¿™äº›è§‚ç‚¹åŠå…¶èƒŒåçš„é€»è¾‘ã€‚</p><h3 id="æŠ€æœ¯åˆ›æ–°ä¸ç”Ÿäº§å…³ç³»çš„å˜é©">æŠ€æœ¯åˆ›æ–°ä¸ç”Ÿäº§å…³ç³»çš„å˜é©</h3><p><strong>å®¹å™¨å’Œå®¹å™¨ç¼–æ’çš„å…´èµ·ï¼š</strong></p><ul><li><strong>èƒŒæ™¯ï¼š</strong> ä¼ ç»Ÿçš„è™šæ‹Ÿæœºç®¡ç†æŠ€æœ¯åœ¨é¢å¯¹å¤§è§„æ¨¡æœåŠ¡å™¨æ—¶æ˜¾å¾—ç¬¨é‡å’Œä½æ•ˆã€‚</li><li><strong>éœ€æ±‚ï¼š</strong> Google ç­‰å¤§å‹äº’è”ç½‘å…¬å¸éœ€è¦ä¸€ç§æ›´é«˜æ•ˆçš„ç®¡ç†æ–¹å¼ï¼Œä»¥ä¾¿å°‘æ•°äººèƒ½å¤Ÿç®¡ç†æ•°åä¸‡å°æœåŠ¡å™¨ã€‚</li><li><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> Kubernetes çš„è¯ç”Ÿä½¿å¾—å®¹å™¨ç¼–æ’æˆä¸ºå¯èƒ½ï¼Œå¤§å¤§æé«˜äº†èµ„æºåˆ©ç”¨ç‡å’Œç®¡ç†æ•ˆç‡ã€‚</li></ul><p>è¿™ä¸€å˜åŒ–ä¸ä»…ä»…æ˜¯æŠ€æœ¯ä¸Šçš„åˆ›æ–°ï¼Œæ›´æ˜¯ç”Ÿäº§å…³ç³»çš„å˜é©ã€‚å®¹å™¨æŠ€æœ¯å’Œå®¹å™¨ç¼–æ’çš„å…´èµ·ï¼Œä½¿å¾—è¿ç»´å›¢é˜Ÿèƒ½å¤Ÿæ›´åŠ é«˜æ•ˆåœ°åä½œå’Œç®¡ç†åºå¤§çš„è®¡ç®—èµ„æºï¼Œå®ç°äº†çœŸæ­£çš„è‡ªåŠ¨åŒ–å’Œè§„æ¨¡åŒ–è¿ç»´ã€‚</p><h3 id="è½¯ä»¶æ¶æ„ä¸å›¢é˜Ÿç»„ç»‡æ¶æ„">è½¯ä»¶æ¶æ„ä¸å›¢é˜Ÿç»„ç»‡æ¶æ„</h3><p>è½¯ä»¶æ¶æ„åæ˜ å›¢é˜Ÿç»„ç»‡ï¼ˆåº·å¨å®šå¾‹ï¼‰ï¼š</p><p>ä½ æåˆ°äº†è½¯ä»¶æ¶æ„è®¾è®¡å—åˆ°å›¢é˜Ÿç»„ç»‡ç»“æ„çš„å½±å“ï¼Œè¿™æ­£æ˜¯åº·å¨å®šå¾‹çš„æ ¸å¿ƒæ€æƒ³ï¼š</p><p>â€œç»„ç»‡æ¶æ„å†³å®šäº†ç³»ç»Ÿæ¶æ„ã€‚â€ï¼ˆOrganizations which design systems are constrained to produce designs which are copies of the communication structures of these organizations.ï¼‰</p><p>è¿™ç§æ¶æ„çš„æœ€å¤§ä»·å€¼åœ¨äºï¼Œå®ƒä¸ä»…ä»…æ˜¯æŠ€æœ¯ä¸Šçš„è¿›æ­¥ï¼Œæ›´æ˜¯å¯¹å›¢é˜Ÿç»„ç»‡å½¢å¼çš„ä¸€ç§ä¼˜åŒ–ï¼Œä»è€Œæå‡äº†æ•´ä½“çš„è½¯ä»¶è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚</p><h3 id="å®å†…æ ¸ä¸å¾®å†…æ ¸çš„äº‰è®º">å®å†…æ ¸ä¸å¾®å†…æ ¸çš„äº‰è®º</h3><p><strong>æ“ä½œç³»ç»Ÿå†…æ ¸è®¾è®¡çš„é€‰æ‹©ï¼š</strong></p><ul><li><strong>å®å†…æ ¸ï¼š</strong> ç”±ä¸€ä¸ªåºå¤§çš„å·¥ç¨‹å›¢é˜Ÿå¼€å‘å’Œç»´æŠ¤ï¼ŒåŠŸèƒ½å®Œå¤‡ï¼Œä½†ç›¸å¯¹å¤æ‚ã€‚</li><li><strong>å¾®å†…æ ¸ï¼š</strong> ç”±äºèµ„æºæœ‰é™ï¼Œåªä¸“æ³¨äºæ ¸å¿ƒåŠŸèƒ½ï¼Œå…¶ä»–åŠŸèƒ½ç”±ç”¨æˆ·æ€è½¯ä»¶å®ç°ã€‚</li></ul><p>è¿™ç§é€‰æ‹©èƒŒåå®é™…ä¸Šæ˜¯ç»„ç»‡åä½œæ–¹å¼çš„ä¸åŒã€‚å¤§å‹å…¬å¸å¯ä»¥æŠ•å…¥å¤§é‡èµ„æºå¼€å‘å¤æ‚çš„å®å†…æ ¸ï¼Œè€Œå¼€æºé¡¹ç›®åˆ™æ›´å€¾å‘äºå¼€å‘å¾®å†…æ ¸ï¼Œé€šè¿‡ç¤¾åŒºåä½œæ¥å®ç°åŠŸèƒ½æ‰©å±•ã€‚</p><h3 id="å®ä¾‹åˆ†æ">å®ä¾‹åˆ†æ</h3><p><strong>IPVSã€cgroupsã€eBPF ç­‰æŠ€æœ¯ï¼š</strong></p><ul><li>è¿™äº›æŠ€æœ¯æœ€åˆåœ¨ç”¨æˆ·æ€å®ç°ï¼Œä½†éšç€æ€§èƒ½å’ŒåŠŸèƒ½éœ€æ±‚çš„å¢åŠ ï¼Œé€æ¸è¿›å…¥äº†å†…æ ¸æ€ã€‚</li><li>è¿™ç§è¿ç§»åæ˜ äº†å¯¹æ€§èƒ½ä¼˜åŒ–å’ŒåŠŸèƒ½éœ€æ±‚çš„ä¸æ–­è¿½æ±‚ï¼ŒåŒæ—¶ä¹Ÿå±•ç¤ºäº†æŠ€æœ¯å‘å±•è¿‡ç¨‹ä¸­ç»„ç»‡å’Œåä½œæ–¹å¼çš„æ¼”å˜ã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Coding philosophy&lt;/h1&gt;
&lt;p&gt;æˆ‘ä»¬ç¼–å†™çš„æ¯ä¸€è¡Œä»£ç éƒ½è®²è¿°ä¸€ä¸ªæ•…äº‹ã€‚å®ƒåæ˜ äº†æˆ‘ä»¬çš„æ€ç»´è¿‡ç¨‹ã€è§£å†³é—®é¢˜çš„æ–¹æ³•ä»¥åŠæˆ‘ä»¬å¯¹æ‰‹å¤´ä»»åŠ¡çš„ç†è§£ã€‚ä½†é™¤äº†åŠŸèƒ½ä¹‹å¤–ï¼Œä»£ç è¿˜ä½“ç°äº†ä¸€ç§å“²å­¦â€”â€”æŒ‡å¯¼æˆ‘ä»¬çš„å†³ç­–å¹¶å¡‘é€ æˆ‘ä»¬åˆ›å»ºçš„è½¯ä»¶çš„ä¸€ç»„åŸåˆ™ã€‚This blog delves </summary>
      
    
    
    
    <category term="æ„Ÿæƒ³" scheme="https://stan370.github.io/categories/%E6%84%9F%E6%83%B3/"/>
    
    
    <category term="personal growth" scheme="https://stan370.github.io/tags/personal-growth/"/>
    
  </entry>
  
  <entry>
    <title>é‡æ–°è®¤è¯†æ“ä½œç³»ç»Ÿ</title>
    <link href="https://stan370.github.io/2024/09/17/Linux0/"/>
    <id>https://stan370.github.io/2024/09/17/Linux0/</id>
    <published>2024-09-17T12:43:33.000Z</published>
    <updated>2025-03-19T12:12:05.247Z</updated>
    
    <content type="html"><![CDATA[<h1>æ“ä½œç³»ç»ŸOS</h1><p>åœ¨å­¦ä¹ æ“ä½œç³»ç»Ÿçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šæ¥è§¦åˆ°ä¼—å¤šå¤æ‚çš„æ¦‚å¿µï¼Œå¦‚å†…æ ¸ã€è¿›ç¨‹ç®¡ç†ã€å†…å­˜ç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿç­‰ã€‚ä¸ºäº†æ›´å¥½åœ°æŒæ¡è¿™äº›å†…å®¹ï¼Œå»ºè®®é‡‡å–å¾ªåºæ¸è¿›çš„å­¦ä¹ è·¯çº¿ï¼Œä»ç†è®ºåˆ°å®è·µã€ä»åŸºç¡€åˆ°è¿›é˜¶ï¼Œé€æ­¥æ·±å…¥ã€‚</p><p>å­¦ä¹ è·¯çº¿</p><ol><li>æ“ä½œç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µä¸å†å²<br>å­¦ä¹ æ“ä½œç³»ç»Ÿçš„åŸºç¡€çŸ¥è¯†ï¼Œäº†è§£å…¶æ ¸å¿ƒåŠŸèƒ½å’Œå‘å±•å†å²ã€‚<br>æ“ä½œç³»ç»Ÿçš„èµ·æºï¼ˆå¦‚ UNIX çš„å‘å±•ã€GNU é¡¹ç›®çš„å½±å“ï¼‰<br>ç°ä»£æ“ä½œç³»ç»Ÿçš„ç±»å‹åŠå…¶å…³ç³»ï¼ˆå¦‚ Linuxã€Windowsã€macOSï¼‰</li><li>æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒæŠ€æœ¯<br>æŒæ¡å†…æ ¸ã€è¿›ç¨‹ã€çº¿ç¨‹ã€å†…å­˜ç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿç­‰å…³é”®æ¦‚å¿µã€‚<br>å†…æ ¸çš„è®¾è®¡ä¸åŠŸèƒ½ï¼ˆç‰¹åˆ«æ˜¯ Linux å†…æ ¸çš„æ¶æ„ï¼‰<br>è¿›ç¨‹ä¸çº¿ç¨‹çš„ç®¡ç†ï¼ˆç†è§£ fork()ã€è¿›ç¨‹è°ƒåº¦ç­‰ï¼‰<br>å†…å­˜ç®¡ç†çš„æœºåˆ¶:MMU å’Œè™šæ‹Ÿå†…å­˜: æ·±å…¥ç†è§£ MMU å’Œè™šæ‹Ÿå†…å­˜çš„å·¥ä½œåŸç†ï¼Œä»¥åŠåˆ†é¡µæŠ€æœ¯å’Œåœ°å€ç¿»è¯‘æœºåˆ¶ã€‚<br>é¡µé¢ç½®æ¢ç®—æ³•: äº†è§£å¸¸ç”¨çš„é¡µé¢ç½®æ¢ç®—æ³•ï¼Œå¦‚ LRUã€FIFO å’Œ LFUã€‚<br>å†™æ—¶å¤åˆ¶ (COW): æŒæ¡ COW æŠ€æœ¯çš„æ¦‚å¿µå’Œåº”ç”¨ï¼Œä¾‹å¦‚åœ¨ fork() ä¸­çš„ä½¿ç”¨ã€‚<br>å­—èŠ‚åº (Endianness): äº†è§£å¤§ç«¯åºå’Œå°ç«¯åºçš„åŒºåˆ«ï¼Œä»¥åŠå®ƒä»¬åœ¨æ•°æ®å­˜å‚¨å’Œç½‘ç»œä¼ è¾“ä¸­çš„é‡è¦æ€§ã€‚<br>å†…å­˜æ³„æ¼: ç†è§£å†…å­˜æ³„æ¼çš„æ¦‚å¿µå’Œå±å®³ï¼Œå¹¶å­¦ä¹ å¦‚ä½•é¿å…å†…å­˜æ³„æ¼ã€‚<br>æ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„ä¸å®ç°ï¼ˆä»æ–‡ä»¶çš„å­˜å‚¨åˆ°ç³»ç»Ÿè°ƒç”¨ï¼‰</li><li>è¿›é˜¶ä¸“é¢˜ï¼šå¹¶å‘ä¸å¤šä»»åŠ¡å¤„ç†<br>ç†è§£å¹¶å‘ã€å¹¶è¡Œã€ä»¥åŠå¤šä»»åŠ¡å¤„ç†åœ¨æ“ä½œç³»ç»Ÿä¸­çš„åº”ç”¨ã€‚<br>æ¨èå­¦ä¹ å†…å®¹ï¼š<br>ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼ˆFATã€NTFSã€ext4ã€Btrfsï¼‰ã€ä½¿ç”¨çš„æ•°æ®ç»“æ„ï¼ˆç´¢å¼•èŠ‚ç‚¹ã€ç›®å½•æ¡ç›®ï¼‰ã€æ—¥å¿—è®°å½•ã€ç£ç›˜è°ƒåº¦ç®—æ³•ã€‚<br>è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ã€ä¿¡å·é‡ã€é”æœºåˆ¶<br>å¤šçº¿ç¨‹ç¼–ç¨‹ä¸å¹¶å‘æ§åˆ¶ï¼ˆå¦‚ pthread åº“çš„ä½¿ç”¨ï¼‰</li></ol><p>ç¬¬å››é˜¶æ®µï¼šç³»ç»Ÿç®¡ç†å’Œå·¥å…·<br>ç³»ç»Ÿç®¡ç†å·¥å…·: ç†Ÿæ‚‰å¸¸ç”¨çš„ Linux ç³»ç»Ÿç®¡ç†å·¥å…·ï¼Œå¦‚ systemdã€cronã€top/htopã€psã€journalctl å’Œ dmesgã€‚<br>æ–‡ä»¶ç®¡ç†å·¥å…·: æŒæ¡å¸¸ç”¨çš„ Linux æ–‡ä»¶ç®¡ç†å·¥å…·ï¼Œå¦‚ lsã€cpã€mvã€rmã€findã€grepã€tarã€gzipã€bzip2ã€chmod å’Œ chownã€‚<br>æ–‡æœ¬å¤„ç†å·¥å…·: å­¦ä¹ å¸¸ç”¨çš„ Linux æ–‡æœ¬å¤„ç†å·¥å…·ï¼Œå¦‚ vimã€nanoã€sedã€awkã€catã€less å’Œ moreã€‚<br>ç½‘ç»œå·¥å…·: ç†Ÿæ‚‰å¸¸ç”¨çš„ Linux ç½‘ç»œå·¥å…·ï¼Œå¦‚ ifconfig/ipã€pingã€tracerouteã€sshã€curlã€wgetã€netstatã€ssã€iptables å’Œ nftablesã€‚<br>ç¬¬äº”é˜¶æ®µï¼šé«˜çº§ä¸»é¢˜<br>DMA é›¶æ‹·è´: äº†è§£ DMA é›¶æ‹·è´æŠ€æœ¯åŠå…¶åœ¨æé«˜æ–‡ä»¶ä¼ è¾“æ€§èƒ½æ–¹é¢çš„ä½œç”¨ã€‚<br>ç©ºåˆ†å¤ç”¨å’Œæ—¶åˆ†å¤ç”¨: ç†è§£ç©ºåˆ†å¤ç”¨å’Œæ—¶åˆ†å¤ç”¨çš„æ¦‚å¿µåŠå…¶åœ¨æ“ä½œç³»ç»Ÿä¸­çš„åº”ç”¨ã€‚<br>å¤šçº¿ç¨‹/å¤šè¿›ç¨‹: å­¦ä¹ å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹çš„æ¦‚å¿µï¼Œä»¥åŠå®ƒä»¬åœ¨è§£å†³é˜»å¡é—®é¢˜å’Œæé«˜ç¨‹åºå¹¶å‘æ€§æ–¹é¢çš„åº”ç”¨ã€‚<br>åç¨‹: äº†è§£åç¨‹çš„æ¦‚å¿µå’Œä¼˜åŠ¿ï¼Œä»¥åŠå®ƒä»¬ä¸çº¿ç¨‹çš„åŒºåˆ«</p><p><strong>å®è·µä¸ºä¸»: å­¦ä¹  Linux æœ€é‡è¦çš„æ˜¯å®è·µï¼Œå»ºè®®ä½ åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­å¤šåŠ¨æ‰‹æ“ä½œï¼Œä¾‹å¦‚åœ¨è™šæ‹Ÿæœºæˆ–äº‘æœåŠ¡å™¨ä¸Šå®‰è£… Linux ç³»ç»Ÿ or å®ç°ä¸€ä¸ªå¤šçº¿ç¨‹ç¨‹åºï¼Œç†è§£çº¿ç¨‹è°ƒåº¦ä¸åŒæ­¥å¹¶å°è¯•ä½¿ç”¨å„ç§å‘½ä»¤å’Œå·¥å…·ã€‚</strong></p><h2 id="ç¡¬ä»¶åŸºç¡€">ç¡¬ä»¶åŸºç¡€</h2><p><img src="https://pic.leetcode-cn.com/1642125846-FXGHTw-20210216234120.png" alt="structure"><br>åœ°å€ç©ºé—´ï¼ˆaddress spaceï¼‰è¡¨ç¤ºä»»ä½•ä¸€ä¸ªè®¡ç®—æœºå®ä½“æ‰€å ç”¨çš„å†…å­˜å¤§å°</p><p><strong>ç¨‹åºå±€éƒ¨æ€§åŸç†</strong>ï¼šæ˜¯æŒ‡ç¨‹åºåœ¨æ‰§è¡Œæ—¶å‘ˆç°å‡ºå±€éƒ¨æ€§è§„å¾‹ï¼Œå³åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œæ•´ä¸ªç¨‹åºçš„æ‰§è¡Œä»…é™äºç¨‹åºä¸­çš„æŸä¸€éƒ¨åˆ†ã€‚ç›¸åº”åœ°ï¼Œæ‰§è¡Œæ‰€è®¿é—®çš„å­˜å‚¨ç©ºé—´ä¹Ÿå±€é™äºæŸä¸ªå†…å­˜åŒºåŸŸï¼Œå…·ä½“æ¥è¯´ï¼Œå±€éƒ¨æ€§é€šå¸¸æœ‰ä¸¤ç§å½¢å¼ï¼šæ—¶é—´å±€éƒ¨æ€§å’Œç©ºé—´å±€éƒ¨æ€§ã€‚</p><p>**æ—¶é—´å±€éƒ¨æ€§ï¼š**è¢«å¼•ç”¨è¿‡ä¸€æ¬¡çš„å­˜å‚¨å™¨ä½ç½®åœ¨æœªæ¥ä¼šè¢«å¤šæ¬¡å¼•ç”¨ï¼ˆé€šå¸¸åœ¨å¾ªç¯ä¸­ï¼‰ã€‚</p><p>**ç©ºé—´å±€éƒ¨æ€§ï¼š**å¦‚æœä¸€ä¸ªå­˜å‚¨å™¨çš„ä½ç½®è¢«å¼•ç”¨ï¼Œé‚£ä¹ˆå°†æ¥ä»–é™„è¿‘çš„ä½ç½®ä¹Ÿä¼šè¢«å¼•ç”¨ã€‚</p><p><strong>å­˜å‚¨å™¨æŠ½è±¡</strong></p><p>åœ¨<a href="https://baike.baidu.com/item/%E8%AE%A1%E7%AE%97%E6%9C%BA">è®¡ç®—æœº</a>ä¸­ï¼Œæ¯ä¸ªè®¾å¤‡ä»¥åŠè¿›ç¨‹éƒ½è¢«åˆ†é…äº†ä¸€ä¸ª<strong>åœ°å€ç©ºé—´</strong>ã€‚å¤„ç†å™¨çš„åœ°å€ç©ºé—´ç”±å…¶<a href="https://baike.baidu.com/item/%E5%9C%B0%E5%9D%80%E6%80%BB%E7%BA%BF">åœ°å€æ€»çº¿</a>ä»¥åŠ<a href="https://baike.baidu.com/item/%E5%AF%84%E5%AD%98%E5%99%A8">å¯„å­˜å™¨</a>å†³å®šã€‚åœ°å€ç©ºé—´å¯ä»¥åˆ†ä¸ºFlatâ€”â€”è¡¨ç¤ºèµ·å§‹ç©ºé—´ä½ç½®ä¸º0ï¼›æˆ–è€…Segmentedâ€”â€”è¡¨ç¤ºç©ºé—´ä½ç½®ç”±<a href="https://baike.baidu.com/item/%E5%81%8F%E7%A7%BB%E9%87%8F">åç§»é‡</a>å†³å®šã€‚åœ¨ä¸€äº›ç³»ç»Ÿä¸­ï¼Œå¯ä»¥è¿›è¡Œåœ°å€ç©ºé—´çš„ç±»å‹è½¬æ¢ã€‚è‡³äºIPåœ°å€ç©ºé—´ï¼ŒIPV4åè®®å¹¶æ²¡æœ‰é¢„è§åˆ°IPåœ°å€çš„éœ€æ±‚é‡å¦‚æ­¤ä¹‹å¤§ï¼Œ32ä½çš„åœ°å€ç©ºé—´å·²ç»æ— æ³•æ»¡è¶³éœ€æ±‚äº†ã€‚å› æ­¤ï¼Œå¼€å‘äº†<a href="https://baike.baidu.com/item/IPV6%E5%8D%8F%E8%AE%AE">IPV6åè®®</a>ï¼Œæ”¯æŒ128ä½çš„åœ°å€ç©ºé—´ [1] ã€‚</p><p><strong>æš´éœ²é—®é¢˜</strong></p><p>æŠŠç‰©ç†åœ°å€æš´éœ²ç»™è¿›ç¨‹ä¼šå¸¦æ¥ä¸‹é¢å‡ ä¸ªä¸¥é‡é—®é¢˜ã€‚ç¬¬ä¸€ï¼Œå¦‚æœ<a href="https://baike.baidu.com/item/%E7%94%A8%E6%88%B7%E7%A8%8B%E5%BA%8F">ç”¨æˆ·ç¨‹åº</a>å¯ä»¥å¯»å€å†…å­˜çš„æ¯ä¸ª<a href="https://baike.baidu.com/item/%E5%AD%97%E8%8A%82">å­—èŠ‚</a>ï¼Œå®ƒä»¬å°±å¯ä»¥å¾ˆå®¹æ˜“åœ°ï¼ˆæ•…æ„åœ°æˆ–å¶ç„¶åœ°ï¼‰ç ´åæ“ä½œç³»ç»Ÿï¼Œä»è€Œä½¿ç³»ç»Ÿæ…¢æ…¢åœ°åœæ­¢è¿è¡Œã€‚å³ä½¿åœ¨åªæœ‰ä¸€ä¸ªç”¨æˆ·è¿›ç¨‹è¿è¡Œçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªé—®é¢˜ä¹Ÿæ˜¯å­˜åœ¨çš„ã€‚ç¬¬äºŒï¼Œä½¿ç”¨è¿™ç§æ¨¡å‹ï¼Œæƒ³è¦åŒæ—¶ï¼ˆå¦‚æœåªæœ‰ä¸€ä¸ªCPUå°±è½®æµæ‰§è¡Œï¼‰è¿è¡Œå¤šä¸ªç¨‹åºæ˜¯å¾ˆå›°éš¾çš„ã€‚åœ¨<a href="https://baike.baidu.com/item/%E4%B8%AA%E4%BA%BA%E8%AE%A1%E7%AE%97%E6%9C%BA">ä¸ªäººè®¡ç®—æœº</a>ä¸Šï¼ŒåŒæ—¶æ‰“å¼€å‡ ä¸ªç¨‹åºæ˜¯å¾ˆå¸¸è§çš„ï¼ˆä¸€ä¸ªæ–‡å­—å¤„ç†å™¨ï¼Œä¸€ä¸ªé‚®ä»¶ç¨‹åºï¼Œä¸€ä¸ª<a href="https://baike.baidu.com/item/%E7%BD%91%E7%BB%9C%E6%B5%8F%E8%A7%88%E5%99%A8/12509222">ç½‘ç»œæµè§ˆå™¨</a>ï¼Œå…¶ä¸­ä¸€ä¸ªå½“å‰æ­£åœ¨å·¥ä½œï¼Œå…¶ä½™çš„åœ¨æŒ‰ä¸‹é¼ æ ‡çš„æ—¶å€™æ‰ä¼šè¢«æ¿€æ´»ï¼‰ã€‚åœ¨ç³»ç»Ÿä¸­æ²¡æœ‰å¯¹<a href="https://baike.baidu.com/item/%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98">ç‰©ç†å†…å­˜</a>çš„æŠ½è±¡çš„æƒ…å†µä¸‹ï¼Œå¾ˆéš¾åšåˆ°ä¸Šè¿°æƒ…æ™¯ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å…¶ä»–åŠæ³•ã€‚</p><p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œç°ä»£æ“ä½œç³»ç»Ÿä½¿ç”¨è™šæ‹Ÿå†…å­˜æŠ€æœ¯ï¼Œå°†ç‰©ç†åœ°å€ç©ºé—´æŠ½è±¡æˆè™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œå¹¶é€šè¿‡<strong>å†…å­˜ç®¡ç†å•å…ƒï¼ˆMMUï¼‰<strong>æ¥å®ç°åœ°å€è½¬æ¢ï¼Œä½¿å¾—æ¯ä¸ªè¿›ç¨‹åªèƒ½è®¿é—®è‡ªå·±çš„</strong>è™šæ‹Ÿåœ°å€ç©ºé—´</strong>ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§ã€éš”ç¦»æ€§å’Œç¨³å®šæ€§ã€‚</p><h2 id="MMUç®¡ç†">MMUç®¡ç†</h2><h3 id="Data-fetching">Data fetching</h3><p>OSä½¿ç”¨å†…å­˜ä»ç£ç›˜ä¸­å–æ•°æ®çš„è¿‡ç¨‹é€šå¸¸ç§°ä¸ºâ€œæ•°æ®åŠ è½½â€æˆ–â€œé¡µé¢è°ƒåº¦â€ï¼Œæ¶‰åŠæ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶çš„åä½œï¼Œä»¥ä¸‹æ˜¯è¿™ä¸€è¿‡ç¨‹çš„è¯¦ç»†è§£é‡Šï¼š</p><ol><li><strong>CPUä¸å†…å­˜çš„å…³ç³»</strong></li></ol><p><strong>CPU</strong>ï¼š<strong>ä¸­å¤®å¤„ç†å™¨ï¼ˆCPUï¼‰æ— æ³•ç›´æ¥ä»ç£ç›˜è¯»å–æ•°æ®ï¼Œæ‰€æœ‰è¦æ‰§è¡Œçš„æŒ‡ä»¤å’Œæ•°æ®éƒ½å¿…é¡»å…ˆåŠ è½½åˆ°å†…å­˜ï¼ˆRAMï¼‰ä¸­ã€‚</strong></p><ol start="2"><li><strong>ç£ç›˜ä¸å†…å­˜ä¹‹é—´çš„æ•°æ®äº¤æ¢æœºåˆ¶</strong></li></ol><p><strong>åˆ†é¡µæœºåˆ¶ï¼ˆPagingï¼‰</strong>ï¼šç°ä»£æ“ä½œç³»ç»Ÿé€šå¸¸é‡‡ç”¨è™šæ‹Ÿå†…å­˜ç®¡ç†ï¼Œå…¶ä¸­åŒ…å«åˆ†é¡µæœºåˆ¶ã€‚å½“æŸä¸ªç¨‹åºéœ€è¦è®¿é—®çš„æ•°æ®ä¸åœ¨å†…å­˜ä¸­æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†æ‰€éœ€çš„æ•°æ®ä»ç£ç›˜åŠ è½½åˆ°å†…å­˜ã€‚</p><ol start="3"><li><strong>æ•°æ®ä»ç£ç›˜åŠ è½½åˆ°å†…å­˜çš„è¿‡ç¨‹</strong></li></ol><p>3.1 <strong>è™šæ‹Ÿå†…å­˜ä¸é¡µè¡¨</strong></p><p><strong>è™šæ‹Ÿå†…å­˜</strong>ï¼šæ“ä½œç³»ç»Ÿå°†æ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€ä¸ªè™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œè¿™äº›è™šæ‹Ÿåœ°å€å¹¶ä¸ç›´æ¥å¯¹åº”ç‰©ç†å†…å­˜ï¼Œè€Œæ˜¯é€šè¿‡é¡µè¡¨ï¼ˆPage Tableï¼‰è¿›è¡Œæ˜ å°„ã€‚</p><p><strong>é¡µè¡¨</strong>ï¼šé¡µè¡¨è®°å½•äº†è™šæ‹Ÿåœ°å€ä¸ç‰©ç†å†…å­˜åœ°å€ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚å½“CPUéœ€è¦è®¿é—®ä¸€ä¸ªå†…å­˜åœ°å€æ—¶ï¼Œå®ƒé¦–å…ˆæ£€æŸ¥é¡µè¡¨ä»¥æ‰¾åˆ°å¯¹åº”çš„ç‰©ç†å†…å­˜åœ°å€ã€‚</p><p>3.2 <strong>é¡µé”™è¯¯ï¼ˆPage Faultï¼‰</strong></p><p><strong>é¡µé”™è¯¯</strong>ï¼šå¦‚æœç¨‹åºè®¿é—®çš„å†…å­˜åœ°å€åœ¨å½“å‰çš„é¡µè¡¨æ˜ å°„ä¸­æœªæ‰¾åˆ°ï¼ˆå³ä¸åœ¨å†…å­˜ä¸­ï¼‰ï¼Œåˆ™å‘ç”Ÿé¡µé”™è¯¯ã€‚é¡µé”™è¯¯å¹¶éé”™è¯¯ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>æç¤º</strong>æ“ä½œç³»ç»Ÿéœ€è¦ä»ç£ç›˜ä¸­åŠ è½½æ•°æ®çš„ä¿¡å·ã€‚</p><p><strong>å¤„ç†é¡µé”™è¯¯</strong>ï¼šå½“é¡µé”™è¯¯å‘ç”Ÿæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šæš‚åœå½“å‰è¿›ç¨‹ï¼Œå¹¶å°†ç›¸åº”çš„æ•°æ®é¡µä»ç£ç›˜åŠ è½½åˆ°å†…å­˜ï¼Œç„¶åæ›´æ–°é¡µè¡¨ä»¥åæ˜ æ–°çš„æ˜ å°„å…³ç³»ã€‚</p><p>3.3 <strong>ç£ç›˜I/Oæ“ä½œ</strong></p><p><strong>I/Oè¯·æ±‚</strong>ï¼šæ“ä½œç³»ç»Ÿå‘ç£ç›˜å‘å‡ºI/Oè¯·æ±‚ä»¥è¯»å–ç‰¹å®šçš„æ•°æ®å—ã€‚</p><p><strong>æ•°æ®è¯»å–</strong>ï¼šç£ç›˜æ§åˆ¶å™¨è´Ÿè´£å°†æ‰€éœ€çš„æ•°æ®ä»ç£ç›˜è¯»å–åˆ°å†…å­˜ç¼“å†²åŒºä¸­ã€‚è¿™ä¸€è¿‡ç¨‹æ¶‰åŠç£ç›˜æ—‹è½¬å®šä½ï¼ˆå¦‚æœæ˜¯HDDï¼‰æˆ–é—ªå­˜å¯»å€ï¼ˆå¦‚æœæ˜¯SSDï¼‰ã€‚</p><p><strong>DMAä¼ è¾“</strong>ï¼šç›´æ¥å†…å­˜è®¿é—®ï¼ˆDMAï¼‰æ§åˆ¶å™¨å¯èƒ½ç”¨äºåŠ é€Ÿæ•°æ®ä¼ è¾“è¿‡ç¨‹ï¼Œå°†æ•°æ®ä»ç£ç›˜ç›´æ¥åŠ è½½åˆ°å†…å­˜ï¼Œè€Œä¸ç»è¿‡CPUï¼Œé‡Šæ”¾CPUç”¨äºå…¶ä»–ä»»åŠ¡ã€‚</p><p>3.4 <strong>å†…å­˜æ›´æ–°</strong></p><p><strong>å†…å­˜å¡«å……</strong>ï¼šå½“æ•°æ®ä»ç£ç›˜è¯»å–åˆ°å†…å­˜åï¼Œæ“ä½œç³»ç»Ÿå°†å…¶æ”¾å…¥æŒ‡å®šçš„å†…å­˜ä½ç½®ï¼Œå¹¶æ›´æ–°é¡µè¡¨ä»¥åæ˜ è¿™ä¸€å˜åŒ–ã€‚</p><p><strong>è¿›ç¨‹æ¢å¤</strong>ï¼šåœ¨å†…å­˜æ›´æ–°å®Œæˆåï¼Œæ“ä½œç³»ç»Ÿæ¢å¤åŸå…ˆçš„è¿›ç¨‹ï¼Œé‡æ–°æ‰§è¡Œä¹‹å‰å› é¡µé”™è¯¯è€Œæš‚åœçš„æŒ‡ä»¤ã€‚</p><ol start="4"><li><strong>ç¼“å­˜ä¸é¢„è¯»å–</strong></li></ol><p><strong>ç£ç›˜ç¼“å­˜</strong>ï¼šæ“ä½œç³»ç»Ÿå¯èƒ½ä¼šå°†ä»ç£ç›˜è¯»å–çš„æ•°æ®æš‚æ—¶å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ˆç¼“å­˜ï¼‰ï¼Œä»¥åŠ é€Ÿåç»­çš„è®¿é—®ã€‚è‹¥ç¨‹åºåœ¨çŸ­æ—¶é—´å†…å†æ¬¡è¯·æ±‚åŒä¸€æ•°æ®ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥ç›´æ¥ä»å†…å­˜ä¸­è·å–æ•°æ®ï¼Œè€Œæ— éœ€é‡æ–°è®¿é—®ç£ç›˜ã€‚</p><p><strong>é¢„è¯»å–ï¼ˆPrefetchingï¼‰</strong>ï¼šæ“ä½œç³»ç»Ÿæœ‰æ—¶ä¼šé¢„å…ˆä»ç£ç›˜è¯»å–ä¸€ç³»åˆ—<strong>è¿ç»­</strong>çš„æ•°æ®å—åˆ°å†…å­˜ä¸­ï¼Œé¢„è®¡ç¨‹åºå¯èƒ½ä¼šéœ€è¦è¿™äº›æ•°æ®ï¼Œä»è€Œå‡å°‘åç»­çš„I/Oæ“ä½œæ¬¡æ•°ã€‚</p><ol start="5"><li><strong>æ–‡ä»¶ç³»ç»Ÿå’Œå—è®¾å¤‡ç®¡ç†</strong></li></ol><p><strong>æ–‡ä»¶ç³»ç»Ÿ</strong>ï¼šæ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿè´Ÿè´£å°†æ–‡ä»¶æ˜ å°„åˆ°ç£ç›˜ä¸Šçš„ç‰©ç†å—åœ°å€ï¼Œå†³å®šå¦‚ä½•å°†æ–‡ä»¶å†…å®¹ç»„ç»‡æˆå—å¹¶å­˜å‚¨åœ¨ç£ç›˜ä¸Šã€‚</p><p><strong>å—è®¾å¤‡ç®¡ç†</strong>ï¼šå—è®¾å¤‡ï¼ˆå¦‚ç£ç›˜ï¼‰çš„ç®¡ç†ç¨‹åºå¤„ç†ä½çº§åˆ«çš„è¯»å†™æ“ä½œï¼ŒåŒ…æ‹¬å°†é€»è¾‘å—åœ°å€è½¬æ¢ä¸ºç‰©ç†å—åœ°å€å¹¶æ‰§è¡Œè¯»å†™ã€‚</p><ol start="6"><li><strong>æ€»ç»“</strong></li></ol><p>å½“CPUéœ€è¦è®¿é—®ä¸åœ¨å†…å­˜ä¸­çš„æ•°æ®æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šé€šè¿‡é¡µè¡¨æ˜ å°„ã€é¡µé”™è¯¯å¤„ç†ã€I/Oè¯·æ±‚ã€DMAä¼ è¾“ã€ä»¥åŠç¼“å­˜ç­‰æœºåˆ¶ï¼Œä»ç£ç›˜ä¸­è¯»å–æ•°æ®å¹¶åŠ è½½åˆ°å†…å­˜ã€‚è¿™ä¸€è¿‡ç¨‹ç¡®ä¿ç¨‹åºåœ¨ç‰©ç†å†…å­˜ä¸è¶³ä»¥å®¹çº³æ‰€æœ‰æ•°æ®æ—¶ï¼Œä¾ç„¶èƒ½å¤Ÿé¡ºåˆ©æ‰§è¡Œï¼Œä»è€Œå®ç°è™šæ‹Ÿå†…å­˜çš„æ‰©å±•ã€‚</p><p><strong>è™šæ‹Ÿå†…å­˜ä¸ºæ¯ä¸ªè¿›ç¨‹æä¾›äº†ä¸€ä¸ªç§æœ‰çš„åœ°å€ç©ºé—´ æ¯ä¸ªè¿›ç¨‹æ‹¥æœ‰ä¸€ç‰‡è¿ç»­å®Œæ•´çš„<a href="https://www.zhihu.com/search?q=%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A%2282746153%22%7D">å†…å­˜ç©ºé—´</a> æ•°æ®ä¸æ–­æ¢å…¥æ¢å‡ºå¤–å­˜å®ç°å®è§‚ä¸Šçš„å¤§äºå®é™…å†…å­˜çš„è™šæ‹Ÿå†…å­˜ã€‚</strong></p><ol><li><strong>è™šæ‹Ÿåœ°å€ç©ºé—´å’Œç‰©ç†åœ°å€ç©ºé—´ï¼š</strong> æ¯ä¸ªåº”ç”¨ç¨‹åºçœ‹åˆ°çš„æ˜¯ä¸€ç»„è™šæ‹Ÿåœ°å€ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„ç‰©ç†å†…å­˜åœ°å€ã€‚æ“ä½œç³»ç»Ÿè´Ÿè´£å°†è¿™äº›è™šæ‹Ÿåœ°å€æ˜ å°„åˆ°ç‰©ç†å†…å­˜ä¸­çš„å®é™…ä½ç½®ã€‚</li><li><strong>åˆ†é¡µæŠ€æœ¯ï¼š</strong> æ“ä½œç³»ç»Ÿå°†è™šæ‹Ÿå†…å­˜åˆ’åˆ†æˆå›ºå®šå¤§å°çš„é¡µé¢ï¼ˆé€šå¸¸æ˜¯4KBï¼‰ï¼ŒåŒæ—¶ä¹Ÿå°†ç‰©ç†å†…å­˜åˆ’åˆ†æˆç›¸åŒå¤§å°çš„é¡µæ¡†ã€‚è™šæ‹Ÿé¡µè¢«æ˜ å°„åˆ°ç‰©ç†é¡µæ¡†ï¼Œä½†ä¸ä¸€å®šè¦å°†æ‰€æœ‰è™šæ‹Ÿé¡µéƒ½åŠ è½½åˆ°ç‰©ç†å†…å­˜ä¸­ã€‚</li><li><strong>é¡µé¢ç½®æ¢ï¼š</strong> å½“åº”ç”¨ç¨‹åºéœ€è¦è®¿é—®ä¸€ä¸ªè™šæ‹Ÿé¡µï¼Œä½†è¯¥é¡µä¸åœ¨ç‰©ç†å†…å­˜ä¸­æ—¶ï¼Œä¼šè§¦å‘é¡µé¢ç½®æ¢ã€‚æ“ä½œç³»ç»Ÿä¼šæ ¹æ®ä¸€å®šçš„ç®—æ³•ï¼Œå°†ä¸€ä¸ªå½“<strong>å‰ä¸å¤ªå¯èƒ½è®¿é—®</strong>çš„ç‰©ç†é¡µæ›¿æ¢å‡ºå»ï¼Œç„¶åå°†éœ€è¦çš„è™šæ‹Ÿé¡µåŠ è½½åˆ°è¿™ä¸ªç‰©ç†é¡µä¸­ã€‚</li><li><strong>é¡µè¡¨ï¼š</strong> æ“ä½œç³»ç»Ÿç»´æŠ¤ä¸€ä¸ªé¡µè¡¨ï¼Œè®°å½•è™šæ‹Ÿé¡µä¸ç‰©ç†é¡µçš„æ˜ å°„å…³ç³»ã€‚å½“åº”ç”¨ç¨‹åºè®¿é—®è™šæ‹Ÿåœ°å€æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šæŸ¥è¯¢é¡µè¡¨ï¼Œæ‰¾åˆ°å¯¹åº”çš„ç‰©ç†é¡µã€‚</li><li><strong>é¡µé¢è°ƒåº¦ç®—æ³•ï¼š</strong> æ“ä½œç³»ç»Ÿä½¿ç”¨ä¸åŒçš„ç®—æ³•æ¥å†³å®šå“ªäº›é¡µåº”è¯¥è¢«æ›¿æ¢å‡ºç‰©ç†å†…å­˜ï¼Œä»¥ä¾¿ä¸ºæ–°çš„è™šæ‹Ÿé¡µè…¾å‡ºç©ºé—´ã€‚ä¸€äº›å¸¸è§çš„é¡µé¢è°ƒåº¦ç®—æ³•åŒ…æ‹¬æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼ˆLRUï¼‰ã€å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰ã€æœ€ä¸å¸¸ç”¨ï¼ˆLFUï¼‰ç­‰ã€‚</li></ol><p>è™šæ‹Ÿå†…å­˜çš„ä¸»è¦ä¼˜ç‚¹åŒ…æ‹¬ï¼š</p><ul><li>å…è®¸è¿è¡Œæ¯”ç‰©ç†å†…å­˜æ›´å¤§çš„åº”ç”¨ç¨‹åºã€‚</li><li>æä¾›äº†æ›´å¥½çš„å†…å­˜ç®¡ç†å’Œåˆ†é…çµæ´»æ€§ã€‚</li><li>èƒ½å¤Ÿä½¿å¤šä¸ªåº”ç”¨ç¨‹åºåŒæ—¶è¿è¡Œï¼Œè€Œä¸ä¼šå‘ç”Ÿå†…å­˜å†²çªã€‚</li><li>æä¾›äº†æ›´å¥½çš„å†…å­˜ä¿æŠ¤ï¼Œé˜²æ­¢ä¸€ä¸ªåº”ç”¨ç¨‹åºå½±å“åˆ°å…¶ä»–åº”ç”¨ç¨‹åºçš„å†…å­˜ç©ºé—´ã€‚</li></ul><p>ç„¶è€Œï¼Œè™šæ‹Ÿå†…å­˜ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ï¼Œæ¯”å¦‚è®¿é—®è™šæ‹Ÿå†…å­˜å¯èƒ½ä¼šå¼•å…¥ä¸€å®šçš„æ€§èƒ½å¼€é”€ï¼Œå› ä¸ºæ¶‰åŠåˆ°ç‰©ç†å†…å­˜å’Œç¡¬ç›˜ä¹‹é—´çš„æ•°æ®äº¤æ¢ã€‚å¦‚æœç³»ç»Ÿä¸­åŒæ—¶è¿è¡Œçš„åº”ç”¨ç¨‹åºè¿‡å¤šï¼Œå¯èƒ½ä¼šå¯¼è‡´é¢‘ç¹çš„é¡µé¢ç½®æ¢ï¼Œä»è€Œå½±å“æ€§èƒ½ã€‚</p><p>æ€»ä¹‹ï¼Œè™šæ‹Ÿå†…å­˜æ˜¯ç°ä»£æ“ä½œç³»ç»Ÿä¸­é‡è¦çš„å†…å­˜ç®¡ç†æŠ€æœ¯ï¼Œå®ƒé€šè¿‡å°†ç‰©ç†å†…å­˜å’Œç¡¬ç›˜ç©ºé—´ç»“åˆèµ·æ¥ï¼Œä½¿å¾—è®¡ç®—æœºç³»ç»Ÿèƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°ç®¡ç†å†…å­˜èµ„æºï¼Œå¹¶æ”¯æŒè¿è¡Œå¤šä¸ªåº”ç”¨ç¨‹åºã€‚</p><p>ä¸€å°è®¡ç®—æœºå…·æœ‰16ä½åœ°å€æ„å‘³ç€å®ƒå¯ä»¥å¯»å€2^16ä¸ªä¸åŒçš„åœ°å€ï¼Œå› æ­¤å®ƒçš„åœ°å€æ€»ç©ºé—´ä¸º64Kï¼ˆ64 kilobytesï¼‰</p><p>ç„¶è€Œï¼Œç‰©ç†å†…å­˜åªæœ‰32KBï¼ˆ32 kilobytesï¼‰ã€‚è¿™æ„å‘³ç€ï¼Œå®é™…ä¸Šï¼Œè®¡ç®—æœºåœ¨ç‰©ç†å†…å­˜ä¸­åªèƒ½åŒæ—¶å­˜å‚¨32KBçš„æ•°æ®ã€‚</p><p>è™šæ‹Ÿå†…å­˜æŠ€æœ¯å¯ä»¥æä¾›ä¸€ç§æœºåˆ¶ï¼Œå…è®¸è®¡ç®—æœºè¿è¡Œæ¯”å…¶ç‰©ç†å†…å­˜æ›´å¤§çš„ç¨‹åºã€‚è¿™æ˜¯é€šè¿‡å°†éƒ¨åˆ†ç¨‹åºæ•°æ®å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„è™šæ‹Ÿå†…å­˜ä¸­å®ç°çš„ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„è§£é‡Šï¼š</p><ol><li><strong>è™šæ‹Ÿå†…å­˜ï¼š</strong><ul><li>è®¡ç®—æœºä¸Šè¿è¡Œçš„ç¨‹åºå¯èƒ½æ¯”ç‰©ç†å†…å­˜å¤§ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ“ä½œç³»ç»Ÿä½¿ç”¨è™šæ‹Ÿå†…å­˜æŠ€æœ¯ã€‚ç¨‹åºçš„åœ°å€ç©ºé—´å¯ä»¥åˆ†ä¸ºå¤šä¸ªéƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†è¢«åŠ è½½åˆ°ç‰©ç†å†…å­˜ä¸­ï¼Œè€Œå¦ä¸€éƒ¨åˆ†å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„è™šæ‹Ÿå†…å­˜ä¸­ã€‚</li><li>å½“ç¨‹åºè®¿é—®åœ¨è™šæ‹Ÿå†…å­˜ä¸­çš„éƒ¨åˆ†æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†ç›¸åº”çš„æ•°æ®å—åŠ è½½åˆ°ç‰©ç†å†…å­˜ä¸­ã€‚è¿™ç§æ–¹å¼å…è®¸è¿è¡Œå¤§äºç‰©ç†å†…å­˜çš„ç¨‹åºï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½æŸå¤±ï¼Œå› ä¸ºé¢‘ç¹çš„ç£ç›˜I/Oä¼šæ¯”å†…å­˜è®¿é—®æ…¢å¾—å¤šã€‚</li></ul></li><li><strong>é¡µé¢äº¤æ¢ï¼š</strong><ul><li>å½“ç¨‹åºè®¿é—®æœªåŠ è½½åˆ°ç‰©ç†å†…å­˜ä¸­çš„è™šæ‹Ÿå†…å­˜é¡µé¢æ—¶ï¼Œå‘ç”Ÿé¡µé¢äº¤æ¢ã€‚æ“ä½œç³»ç»Ÿå¯èƒ½ä¼šå°†ä¸€äº›å½“å‰ä¸ä½¿ç”¨çš„ç‰©ç†å†…å­˜é¡µé¢ï¼ˆé€šå¸¸æ˜¯æœ€è¿‘æœªä½¿ç”¨çš„é¡µé¢ï¼‰å†™å›åˆ°ç£ç›˜ä¸Šçš„è™šæ‹Ÿå†…å­˜ï¼Œä»¥ä¾¿è…¾å‡ºç©ºé—´æ¥åŠ è½½è¢«è¯·æ±‚çš„è™šæ‹Ÿå†…å­˜é¡µé¢ã€‚</li></ul></li><li><strong>åœ°å€ç¿»è¯‘ï¼š</strong><ul><li>æ“ä½œç³»ç»Ÿä½¿ç”¨åœ°å€ç¿»è¯‘æœºåˆ¶æ¥å°†ç¨‹åºä¸­çš„è™šæ‹Ÿåœ°å€æ˜ å°„åˆ°ç‰©ç†åœ°å€ã€‚è¿™ä¸ªæ˜ å°„æ˜¯ç”±ç¡¬ä»¶çš„å†…å­˜ç®¡ç†å•å…ƒï¼ˆMMUï¼‰æ¥å¤„ç†çš„ã€‚MMUè´Ÿè´£å°†è™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€ï¼Œå¹¶ç¡®ä¿è®¿é—®çš„å†…å­˜åŒºåŸŸæ˜¯æœ‰æ•ˆçš„ã€‚</li></ul></li></ol><p><strong>åˆ†é¡µç³»ç»Ÿæ˜ å°„</strong></p><p>å†…å­˜ç®¡ç†å•å…ƒï¼ˆMMUï¼‰ç®¡ç†ç€åœ°å€ç©ºé—´å’Œç‰©ç†å†…å­˜çš„è½¬æ¢ï¼Œå…¶ä¸­çš„é¡µè¡¨ï¼ˆPage tableï¼‰å­˜å‚¨ç€é¡µï¼ˆç¨‹åºåœ°å€ç©ºé—´ï¼‰å’Œé¡µæ¡†ï¼ˆç‰©ç†å†…å­˜ç©ºé—´ï¼‰çš„æ˜ å°„è¡¨ã€‚ä¸€ä¸ªè™šæ‹Ÿåœ°å€åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†å­˜å‚¨é¡µé¢å·ï¼Œä¸€éƒ¨åˆ†å­˜å‚¨åç§»é‡ã€‚CPU ä¸Šçš„å†…å­˜ç®¡ç†å•å…ƒï¼ˆMemory Management Unitï¼ŒMMUï¼‰å°±æ˜¯ä¸“é—¨ç”¨æ¥è¿›è¡Œ<strong>è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢çš„</strong>ï¼Œä¸è¿‡ MMU éœ€è¦å€ŸåŠ©å­˜æ”¾åœ¨å†…å­˜ä¸­çš„é¡µè¡¨ï¼Œè€Œè¿™å¼ è¡¨çš„å†…å®¹æ­£æ˜¯ç”±æ“ä½œç³»ç»Ÿè¿›è¡Œç®¡ç†çš„ã€‚</p><p>é¡µè¡¨æ˜¯ä¸€ä¸ªååˆ†é‡è¦çš„æ•°æ®ç»“æ„ï¼</p><p><strong>æ“ä½œç³»ç»Ÿä¸ºæ¯ä¸ªè¿›ç¨‹å»ºç«‹äº†ä¸€å¼ é¡µè¡¨ã€‚ä¸€ä¸ªè¿›ç¨‹å¯¹åº”ä¸€å¼ é¡µè¡¨ï¼Œè¿›ç¨‹çš„æ¯ä¸ªé¡µé¢å¯¹åº”ä¸€ä¸ªé¡µè¡¨é¡¹ï¼Œæ¯ä¸ªé¡µè¡¨é¡¹ç”±é¡µå·å’Œå—å·ï¼ˆé¡µæ¡†å·ï¼‰ç»„æˆï¼Œè®°å½•ç€è¿›ç¨‹é¡µé¢å’Œå®é™…å­˜æ”¾çš„å†…å­˜å—ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚</strong></p><h3 id="ARMæ¶æ„">ARMæ¶æ„</h3><ul><li><strong>æ¨¡å¼</strong>ï¼š<ul><li><strong>ç”¨æˆ·æ¨¡å¼ (usr)</strong>ï¼šè¿™æ˜¯åº”ç”¨ç¨‹åºè¿è¡Œçš„æ¨¡å¼ã€‚</li><li><strong>ç³»ç»Ÿç®¡ç†æ¨¡å¼ (svc - Supervisor Call)</strong>ï¼šè¿™æ˜¯å†…æ ¸æ¨¡å¼ï¼Œç³»ç»Ÿè°ƒç”¨é€šè¿‡SWI (Software Interrupt) æŒ‡ä»¤è¿›å…¥æ­¤æ¨¡å¼ã€‚</li></ul></li><li><strong>ç³»ç»Ÿè°ƒç”¨</strong>ï¼š<ul><li>åœ¨ARMä¸­ï¼Œç³»ç»Ÿè°ƒç”¨é€šå¸¸æ˜¯é€šè¿‡æ‰§è¡Œ <code>SWI</code> (æˆ–æ–°ç‰ˆçš„ <code>SVC</code>) æŒ‡ä»¤æ¥å®ç°çš„ã€‚è¿™ä¸ªæŒ‡ä»¤ä¼šè§¦å‘ä¸€ä¸ªè½¯ä¸­æ–­ï¼Œä½¿å¾—CPUä»ç”¨æˆ·æ¨¡å¼åˆ‡æ¢åˆ°ç›‘ç£è€…æ¨¡å¼ï¼ˆå†…æ ¸æ€ï¼‰ï¼Œå¹¶è·³è½¬åˆ°é¢„å®šä¹‰çš„ä¸­æ–­å‘é‡å»å¤„ç†ç³»ç»Ÿè°ƒç”¨ã€‚</li></ul></li></ul><h3 id="x86æ¶æ„">x86æ¶æ„</h3><ul><li><strong>Ringçº§åˆ«</strong>ï¼š<ul><li><strong>Ring 0</strong>ï¼šå†…æ ¸æ€ï¼Œæ‹¥æœ‰æœ€é«˜æƒé™ï¼Œå¯ä»¥æ‰§è¡Œä»»ä½•æŒ‡ä»¤ã€‚</li><li><strong>Ring 3</strong>ï¼šç”¨æˆ·æ€ï¼Œæƒé™æœ€ä½ï¼Œä¸èƒ½æ‰§è¡Œç‰¹æƒæŒ‡ä»¤ã€‚</li></ul></li><li><strong>ç³»ç»Ÿè°ƒç”¨</strong>ï¼š<ul><li>åœ¨x86æ¶æ„ä¸Šï¼Œä¼ ç»Ÿä¸Šæ˜¯é€šè¿‡ <code>int 0x80</code> ä¸­æ–­å®ç°ç³»ç»Ÿè°ƒç”¨çš„ã€‚ç°ä»£x86 CPUï¼ˆç‰¹åˆ«æ˜¯x86-64ï¼‰é€šå¸¸ä½¿ç”¨ <code>syscall</code> æŒ‡ä»¤ï¼Œè¿™æ˜¯ä¸ºäº†æé«˜ç³»ç»Ÿè°ƒç”¨çš„æ•ˆç‡ã€‚</li><li><code>int 0x80</code> è§¦å‘ä¸€ä¸ªä¸­æ–­ï¼Œä½¿å¾—å¤„ç†å™¨ä»Ring 3åˆ‡æ¢åˆ°Ring 0ï¼Œå¹¶è·³è½¬åˆ°ä¸­æ–­å¤„ç†ç¨‹åºï¼Œå¤„ç†ç³»ç»Ÿè°ƒç”¨ã€‚</li></ul></li></ul><h3 id="Linuxçš„ç³»ç»Ÿè°ƒç”¨å’Œä¸­æ–­å¤„ç†">Linuxçš„ç³»ç»Ÿè°ƒç”¨å’Œä¸­æ–­å¤„ç†</h3><ul><li><strong>ç³»ç»Ÿè°ƒç”¨çš„ä¸Šä¸‹æ–‡</strong>ï¼š<ul><li>ç³»ç»Ÿè°ƒç”¨çš„æ‰§è¡Œæ˜¯åœ¨è°ƒç”¨è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ä¸­è¿›è¡Œçš„ã€‚è¿™æ„å‘³ç€å†…æ ¸ä»£ç å¯ä»¥è®¿é—®è¯¥è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œæ‰§è¡ŒI/Oæ“ä½œï¼Œç®¡ç†æ–‡ä»¶ç­‰ã€‚</li></ul></li><li><strong>ç¡¬ä»¶ä¸­æ–­çš„ä¸Šä¸‹æ–‡</strong>ï¼š<ul><li>ç¡¬ä»¶ä¸­æ–­å¤„ç†ç¨‹åºè¿è¡Œåœ¨ä¸­æ–­ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™ä¸ªä¸Šä¸‹æ–‡ä¸ä»»ä½•ç‰¹å®šè¿›ç¨‹æ— å…³ã€‚å¤„ç†ä¸­æ–­çš„ä»£ç å¿…é¡»å°½å¿«å®Œæˆï¼Œå› ä¸ºä¸­æ–­å¤„ç†ä¼šé˜»æ­¢å…¶ä»–ä¸­æ–­çš„å‘ç”Ÿï¼ˆåœ¨åŒä¸€IRQçº¿ä¸Šï¼‰ï¼Œæˆ–è€…éœ€è¦ç‰¹åˆ«å¤„ç†åµŒå¥—ä¸­æ–­ã€‚</li></ul></li><li><strong>åˆ‡æ¢è¿‡ç¨‹</strong>ï¼š<ul><li><strong>ç”¨æˆ·æ€åˆ°å†…æ ¸æ€</strong>ï¼šé€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥å£ï¼ˆå¦‚ARMçš„ <code>SWI</code> æˆ– x86çš„ <code>int 0x80</code> æˆ– <code>syscall</code>ï¼‰ï¼Œæˆ–è€…ç¡¬ä»¶ä¸­æ–­ã€‚</li><li><strong>å†…æ ¸æ€åˆ°ç”¨æˆ·æ€</strong>ï¼šé€šè¿‡ç‰¹å®šçš„è¿”å›æŒ‡ä»¤ï¼ˆå¦‚x86çš„ <code>iret</code>ï¼‰ï¼Œæ¢å¤ç”¨æˆ·æ€çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</li></ul></li></ul><h3 id="å…¶ä»–ç»†èŠ‚">å…¶ä»–ç»†èŠ‚</h3><ul><li><strong>é©±åŠ¨ç¨‹åº</strong>ï¼š<ul><li>é©±åŠ¨ç¨‹åºä¸­çš„å‡½æ•°ä¸€éƒ¨åˆ†ä½œä¸ºç³»ç»Ÿè°ƒç”¨çš„ä¸€éƒ¨åˆ†æ‰§è¡Œï¼Œå¦ä¸€éƒ¨åˆ†å¯èƒ½åœ¨ä¸­æ–­å¤„ç†ç¨‹åºä¸­æ‰§è¡Œã€‚é©±åŠ¨ç¨‹åºéœ€è¦ç²¾å¿ƒè®¾è®¡ï¼Œä»¥å¤„ç†å¥½åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­çš„æ“ä½œã€‚</li></ul></li><li><strong>å®‰å…¨æ€§å’Œç¨³å®šæ€§</strong>ï¼š<ul><li>è¿™ç§ç‰¹æƒçº§åˆ«çš„åˆ†ç¦»ç¡®ä¿äº†å³ä½¿ä¸€ä¸ªç”¨æˆ·æ€çš„ç¨‹åºå´©æºƒæˆ–è¢«æ¶æ„æ”»å‡»ï¼Œå®ƒä¹Ÿä¸ä¼šç›´æ¥å½±å“åˆ°ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä¿æŠ¤äº†æ“ä½œç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚</li></ul></li></ul><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒLinuxæœ‰æ•ˆåœ°ç®¡ç†äº†ç³»ç»Ÿèµ„æºï¼Œæä¾›äº†å®‰å…¨çš„ç¯å¢ƒè®©åº”ç”¨ç¨‹åºè¿è¡Œï¼ŒåŒæ—¶ä¿æŒäº†å¯¹ç¡¬ä»¶çš„å®Œå…¨æ§åˆ¶ã€‚</p><p>dmaé›¶æ‹·è´</p><p>ä»€ä¹ˆæ˜¯ DMA æŠ€æœ¯ï¼Ÿç®€å•ç†è§£å°±æ˜¯ï¼Œ<strong>åœ¨è¿›è¡Œ I/O è®¾å¤‡å’Œå†…å­˜çš„æ•°æ®ä¼ è¾“çš„æ—¶å€™ï¼Œæ•°æ®æ¬è¿çš„å·¥ä½œå…¨éƒ¨äº¤ç»™ DMA æ§åˆ¶å™¨ï¼Œè€Œ CPU ä¸å†å‚ä¸ä»»ä½•ä¸æ•°æ®æ¬è¿ç›¸å…³çš„äº‹æƒ…ï¼Œè¿™æ · CPU å°±å¯ä»¥å»å¤„ç†åˆ«çš„äº‹åŠ¡</strong>ã€‚</p><p><img src="https://prod-files-secure.s3.us-west-2.amazonaws.com/ea503cf6-9325-47ab-9fb3-3e33e40583ef/886c819c-75b8-4ea9-ac7f-812d4c949002/Untitled.png" alt="Untitled"></p><p>ä¸Šä¸‹æ–‡åˆ‡æ¢åˆ°æˆæœ¬å¹¶ä¸å°ï¼Œä¸€æ¬¡åˆ‡æ¢éœ€è¦è€—æ—¶å‡ åçº³ç§’åˆ°å‡ å¾®ç§’ï¼Œè™½ç„¶æ—¶é—´çœ‹ä¸Šå»å¾ˆçŸ­ï¼Œä½†æ˜¯åœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œè¿™ç±»æ—¶é—´å®¹æ˜“è¢«ç´¯ç§¯å’Œæ”¾å¤§ï¼Œä»è€Œå½±å“ç³»ç»Ÿçš„æ€§èƒ½ã€‚ å…¶æ¬¡ï¼Œè¿˜å‘ç”Ÿäº† 4 æ¬¡æ•°æ®æ‹·è´ï¼Œå…¶ä¸­ä¸¤æ¬¡æ˜¯ DMA çš„æ‹·è´ï¼Œå¦å¤–ä¸¤æ¬¡åˆ™æ˜¯é€šè¿‡ CPU æ‹·è´çš„ï¼Œä¸‹é¢è¯´ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼š</p><p>ç¬¬ä¸€æ¬¡æ‹·è´ï¼ŒæŠŠç£ç›˜ä¸Šçš„æ•°æ®æ‹·è´åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸çš„ç¼“å†²åŒºé‡Œï¼Œè¿™ä¸ªæ‹·è´çš„è¿‡ç¨‹æ˜¯é€šè¿‡ DMA æ¬è¿çš„ã€‚ ç¬¬äºŒæ¬¡æ‹·è´ï¼ŒæŠŠå†…æ ¸ç¼“å†²åŒºçš„æ•°æ®æ‹·è´åˆ°ç”¨æˆ·çš„ç¼“å†²åŒºé‡Œï¼Œäºæ˜¯æˆ‘ä»¬åº”ç”¨ç¨‹åºå°±å¯ä»¥ä½¿ç”¨è¿™éƒ¨åˆ†æ•°æ®äº†ï¼Œè¿™ä¸ªæ‹·è´åˆ°è¿‡ç¨‹æ˜¯ç”± CPU å®Œæˆçš„ã€‚ ç¬¬ä¸‰æ¬¡æ‹·è´ï¼ŒæŠŠåˆšæ‰æ‹·è´åˆ°ç”¨æˆ·çš„ç¼“å†²åŒºé‡Œçš„æ•°æ®ï¼Œå†æ‹·è´åˆ°å†…æ ¸çš„ socket çš„ç¼“å†²åŒºé‡Œï¼Œè¿™ä¸ªè¿‡ç¨‹ä¾ç„¶è¿˜æ˜¯ç”± CPU æ¬è¿çš„ã€‚ ç¬¬å››æ¬¡æ‹·è´ï¼ŒæŠŠå†…æ ¸çš„ socket ç¼“å†²åŒºé‡Œçš„æ•°æ®ï¼Œæ‹·è´åˆ°ç½‘å¡çš„ç¼“å†²åŒºé‡Œï¼Œè¿™ä¸ªè¿‡ç¨‹åˆæ˜¯ç”± DMA æ¬è¿çš„ã€‚</p><p>æˆ‘ä»¬å›è¿‡å¤´çœ‹è¿™ä¸ªæ–‡ä»¶ä¼ è¾“çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬åªæ˜¯æ¬è¿ä¸€ä»½æ•°æ®ï¼Œç»“æœå´æ¬è¿äº† 4 æ¬¡ï¼Œè¿‡å¤šçš„æ•°æ®æ‹·è´æ— ç–‘ä¼šæ¶ˆè€— CPU èµ„æºï¼Œå¤§å¤§é™ä½äº†ç³»ç»Ÿæ€§èƒ½ã€‚ è¿™ç§ç®€å•åˆä¼ ç»Ÿçš„æ–‡ä»¶ä¼ è¾“æ–¹å¼ï¼Œå­˜åœ¨å†—ä½™çš„ä¸Šæ–‡åˆ‡æ¢å’Œæ•°æ®æ‹·è´ï¼Œåœ¨é«˜å¹¶å‘ç³»ç»Ÿé‡Œæ˜¯éå¸¸ç³Ÿç³•çš„ï¼Œå¤šäº†å¾ˆå¤šä¸å¿…è¦çš„å¼€é”€ï¼Œä¼šä¸¥é‡å½±å“ç³»ç»Ÿæ€§èƒ½ã€‚</p><p><strong>æ‰€ä»¥ï¼Œè¦æƒ³æé«˜æ–‡ä»¶ä¼ è¾“çš„æ€§èƒ½ï¼Œå°±éœ€è¦å‡å°‘ã€Œç”¨æˆ·æ€ä¸å†…æ ¸æ€çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€å’Œã€Œå†…å­˜æ‹·è´ã€çš„æ¬¡æ•°ã€‚</strong></p><p><strong>é›¶æ‹·è´ï¼ˆ<em>Zero-copy</em>ï¼‰æŠ€æœ¯ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰åœ¨å†…å­˜å±‚é¢å»æ‹·è´æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´å…¨ç¨‹æ²¡æœ‰é€šè¿‡ CPU æ¥æ¬è¿æ•°æ®ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯é€šè¿‡ DMA æ¥è¿›è¡Œä¼ è¾“çš„ã€‚</strong>ã€‚</p><p>é›¶æ‹·è´æŠ€æœ¯çš„æ–‡ä»¶ä¼ è¾“æ–¹å¼ç›¸æ¯”ä¼ ç»Ÿæ–‡ä»¶ä¼ è¾“çš„æ–¹å¼ï¼Œå‡å°‘äº† 2 æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œæ•°æ®æ‹·è´æ¬¡æ•°ï¼Œ<strong>åªéœ€è¦ 2 æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œæ•°æ®æ‹·è´æ¬¡æ•°ï¼Œå°±å¯ä»¥å®Œæˆæ–‡ä»¶çš„ä¼ è¾“ï¼Œè€Œä¸” 2 æ¬¡çš„æ•°æ®æ‹·è´è¿‡ç¨‹ï¼Œéƒ½ä¸éœ€è¦é€šè¿‡ CPUï¼Œ2 æ¬¡éƒ½æ˜¯ç”± DMA æ¥æ¬è¿ã€‚</strong></p><p>æ‰€ä»¥ï¼Œæ€»ä½“æ¥çœ‹ï¼Œ<strong>é›¶æ‹·è´æŠ€æœ¯å¯ä»¥æŠŠæ–‡ä»¶ä¼ è¾“çš„æ€§èƒ½æé«˜è‡³å°‘ä¸€å€ä»¥ä¸Š</strong>ã€‚<br><strong>å†™æ—¶å¤åˆ¶ (Copy-on-Write, COW)</strong>Â æ˜¯ä¸€ç§é‡è¦çš„èµ„æºç®¡ç†æŠ€æœ¯ï¼Œç”¨äºé«˜æ•ˆåœ°å®ç°å¯ä¿®æ”¹èµ„æºçš„å¤åˆ¶æ“ä½œï¼Œå°¤å…¶æ˜¯åœ¨è™šæ‹Ÿå†…å­˜ç®¡ç†å’Œæ•°æ®ç»“æ„ä¸­åº”ç”¨å¹¿æ³›ã€‚</p><p><strong>COW çš„æ ¸å¿ƒæ€æƒ³:</strong></p><ul><li><strong>å»¶è¿Ÿå¤åˆ¶:</strong>Â COW ä¸ä¼šç«‹å³å¤åˆ¶æ•´ä¸ªèµ„æºï¼Œè€Œæ˜¯åœ¨éœ€è¦ä¿®æ”¹èµ„æºæ—¶æ‰è¿›è¡Œå¤åˆ¶ã€‚</li><li><strong>å…±äº«åªè¯»æ•°æ®:</strong>Â åœ¨ä¿®æ”¹ä¹‹å‰ï¼Œå¤šä¸ªè¿›ç¨‹æˆ–æ•°æ®ç»“æ„å¯ä»¥å…±äº«åŒä¸€ä»½åªè¯»æ•°æ®ï¼ŒèŠ‚çœå†…å­˜ç©ºé—´å’Œå¤åˆ¶æ—¶é—´ã€‚</li><li><strong>æŒ‰éœ€å¤åˆ¶:</strong>Â åªæœ‰å½“æŸä¸ªè¿›ç¨‹æˆ–æ•°æ®ç»“æ„éœ€è¦ä¿®æ”¹æ•°æ®æ—¶ï¼Œæ‰ä¼šå¤åˆ¶ä¸€ä»½å‰¯æœ¬è¿›è¡Œä¿®æ”¹ï¼Œå…¶ä»–è¿›ç¨‹æˆ–æ•°æ®ç»“æ„ä¸å—å½±å“ã€‚</li></ul><p><strong>COW åœ¨è™šæ‹Ÿå†…å­˜ç®¡ç†ä¸­çš„åº”ç”¨:</strong></p><ul><li><strong>fork() ç³»ç»Ÿè°ƒç”¨:</strong>Â åœ¨ç±» Unix æ“ä½œç³»ç»Ÿä¸­ï¼Œ<code>fork()</code>Â ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹æ˜¯çˆ¶è¿›ç¨‹çš„å‰¯æœ¬ã€‚COW å¯ä»¥æ˜¾è‘—æé«˜Â <code>fork()</code>Â çš„æ•ˆç‡ã€‚<ul><li><strong>ä¼ ç»Ÿ fork():</strong>Â éœ€è¦å¤åˆ¶çˆ¶è¿›ç¨‹çš„æ•´ä¸ªåœ°å€ç©ºé—´ï¼Œè€—æ—¶ä¸”æµªè´¹å†…å­˜ã€‚</li><li><strong>COW fork():</strong>Â çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ initially å…±äº«ç›¸åŒçš„ç‰©ç†å†…å­˜é¡µé¢ï¼Œè¿™äº›é¡µé¢è¢«æ ‡è®°ä¸ºåªè¯»ã€‚åªæœ‰å½“æŸä¸ªè¿›ç¨‹éœ€è¦ä¿®æ”¹é¡µé¢å†…å®¹æ—¶ï¼Œæ‰ä¼šå¤åˆ¶ä¸€ä»½å‰¯æœ¬è¿›è¡Œä¿®æ”¹ã€‚</li></ul></li></ul><h1><strong>What is POSIX?</strong></h1><p><strong>POSIX</strong> æ˜¯ä¸€å¥—ç”± IEEE åˆ¶å®šçš„æ ‡å‡†ï¼Œæ—¨åœ¨ç»´æŠ¤æ“ä½œç³»ç»Ÿä¹‹é—´çš„å…¼å®¹æ€§ã€‚å®ƒå®šä¹‰äº† APIã€å‘½ä»¤è¡Œ shell å’Œå®ç”¨ç¨‹åºæ¥å£ï¼Œä»¥ç¡®ä¿è½¯ä»¶ä¸å„ç§ Unix å˜ä½“å’Œå…¶ä»–æ“ä½œç³»ç»Ÿå…¼å®¹ã€‚</p><h3 id="Key-Components-of-POSIX"><strong>Key Components of POSIX</strong></h3><ol><li><strong>C API Extensions</strong>:<ul><li>POSIX greatly extends the ANSI C standard with a wide array of APIs for file operations, process and thread management, networking, memory management, and more.</li><li><strong>File Operations</strong>: Includes functions likeÂ <code>mkdir</code>,Â <code>symlink</code>,Â <code>stat</code>,Â <code>poll</code>, etc.</li><li><strong>Process and Threads</strong>: Functions likeÂ <code>fork</code>,Â <code>execl</code>,Â <code>wait</code>,Â <code>pipe</code>,Â <code>sem_*</code>,Â <code>shm_*</code>, etc., are essential for process creation, inter-process communication, and synchronization.</li><li><strong>Networking</strong>: TheÂ <code>socket()</code>Â API is crucial for network communication.</li><li><strong>Memory Management</strong>: Functions likeÂ <code>mmap</code>,Â <code>mlock</code>,Â <code>mprotect</code>, etc., manage memory allocation, protection, and advice.</li></ul></li><li><strong>CLI Utilities</strong>:<ul><li>POSIX defines a set of standard command-line utilities likeÂ <code>cd</code>,Â <code>ls</code>,Â <code>echo</code>,Â <code>mkdir</code>, etc. Many of these utilities are direct shell front-ends for corresponding C API functions.</li><li>Major implementations include GNU Coreutils, which provides the majority of these utilities on Linux systems.</li></ul></li><li><strong>Shell Language</strong>:<ul><li>POSIX standardizes the shell scripting language, which includes variable assignments, command execution, and control structures. The most common implementation in Linux is GNU Bash.</li></ul></li><li><strong>Environment Variables</strong>:<ul><li>POSIX specifies standard environment variables likeÂ <code>HOME</code>,Â <code>PATH</code>, which play a crucial role in the shell and other utilities.</li></ul></li><li><strong>Program Exit Status</strong>:<ul><li>POSIX extends the ANSI C standard by defining specific exit codes, such as 126 (command found but not executable), 127 (command not found), and values greater than 128 indicating termination by a signal.</li></ul></li><li><strong>Regular Expressions</strong>:<ul><li>POSIX defines two types of regular expressions: Basic (BRE) and Extended (ERE). These are used in various CLI utilities, such asÂ <code>grep</code>, and are implemented in C libraries underÂ <code>regex.h</code>.</li></ul></li><li><strong>Directory Structure and Filenames</strong>:<ul><li>POSIX specifies aspects of the filesystem, such as the path separator (<code>/</code>), special directories (<code>.</code>Â for current directory,Â <code>..</code>Â for parent directory), and restrictions on filenames.</li></ul></li><li><strong>Command Line Utility API Conventions</strong>:<ul><li>POSIX outlines conventions for command-line utilities, such as usingÂ ``Â for standard input,Â <code>-</code>Â to terminate option parsing, and single-letter flags, although these are not strictly enforced by all implementations (e.g., GNU utilities often use long options).</li></ul></li><li><strong>POSIX ACLs (Access Control Lists)</strong>:<ul><li>Although originally part of POSIX, ACLs were withdrawn but have been implemented in several operating systems, including Linux.</li></ul></li></ol><h3 id="POSIX-Compliance-and-Implementations"><strong>POSIX Compliance and Implementations</strong></h3><ol><li><strong>Certified Systems</strong>:<ul><li>Not all systems are officially certified as POSIX-compliant due to the cost of certification, but many closely follow the standards. Examples of certified systems include macOS (formerly OS X), AIX, HP-UX, and Solaris.</li><li>Most Linux distributions are very compliant with POSIX, although not officially certified.</li></ul></li><li><strong>Windows and POSIX</strong>:<ul><li>Windows had limited POSIX support in some professional editions, but this was deprecated in Windows 8. Since 2016, Microsoft introduced the Windows Subsystem for Linux (WSL), which provides a Linux-like environment with system calls, ELF binary execution, and more, bringing Windows closer to POSIX compliance for developer usage.</li></ul></li><li><strong>Cygwin and MSYS2</strong>:<ul><li>These are third-party projects that provide substantial POSIX API functionality on Windows. Cygwin offers a large collection of GNU and Open Source tools that provide functionality similar to a Linux distribution on Windows.</li></ul></li><li><strong>Android</strong>:<ul><li>While Android is based on the Linux kernel, it does not fully comply with POSIX, primarily because it uses its own libraries and runtime environment (Dalvik/ART) rather than standard Linux libraries like glibc.</li></ul></li></ol><p>POSIX åœ¨ç¡®ä¿ä¸åŒç±» Unix ç³»ç»Ÿä¹‹é—´çš„äº’æ“ä½œæ€§å’Œå¯ç§»æ¤æ€§æ–¹é¢å‘æŒ¥ç€å…³é”®ä½œç”¨ã€‚è™½ç„¶ Linux å’Œ macOS ç­‰ä¸€äº›ç³»ç»Ÿå¯†åˆ‡éµå¾ª POSIXï¼Œä½† Windows ç­‰å…¶ä»–ç³»ç»Ÿå†æ¥å¯¹ POSIX çš„æ”¯æŒæœ‰é™ï¼Œå°½ç®¡ WSL ç­‰æœ€è¿‘çš„å‘å±•å·²ç»æ”¹è¿›äº†è¿™ä¸€ç‚¹ã€‚å¯¹äºæƒ³è¦ç¼–å†™è·¨ä¸åŒæ“ä½œç³»ç»Ÿçš„å¯ç§»æ¤ä¸”å¯äº’æ“ä½œçš„ä»£ç çš„å¼€å‘äººå‘˜æ¥è¯´ï¼Œäº†è§£ POSIX è‡³å…³é‡è¦</p><h1>Linux</h1><p>Linus Torvalds åˆ›å»ºäº†å‰è€…ã€‚åè€…æ˜¯å…¨çƒæ•°ç™¾ä¸‡å¼€å‘äººå‘˜ä¹‹é—´çš„åä½œï¼Œæ¶‰åŠ<a href="https://www.gnu.org/home.en.html">GNU é¡¹ç›®</a>,Â <a href="https://www.kernel.org/">Linux å†…æ ¸å¼€å‘å›¢é˜Ÿ</a><a href="http://www.x.org/wiki/">ç”± Torvalds é¢†å¯¼ï¼Œ X Window ç³»ç»Ÿçš„</a>å„ç§å¼€å‘äººå‘˜åœ¨è¿‡å»çš„ 29 å¹´ä¸­ï¼Œä»¥åŠå…¶ä»–ã€‚è¿™å°±æ˜¯è‡ªç”±è½¯ä»¶åŸºé‡‘ä¼šè¦æ±‚å°†ä½¿ç”¨æ¥è‡ª GNU é¡¹ç›®çš„è½¯ä»¶çš„å®Œæ•´ Linux æ“ä½œç³»ç»Ÿç§°ä¸ºâ€œGNU/Linuxâ€çš„åŸå› ã€‚</p><p>ManyÂ <a href="https://en.wikipedia.org/wiki/Open_source">open source</a>Â developers agree that the Linux kernel was not designed but ratherÂ <a href="https://en.wikipedia.org/wiki/Evolution">evolved</a>Â throughÂ <a href="https://en.wikipedia.org/wiki/Natural_selection">natural selection</a>. Torvalds considers that although the design of Unix served as a scaffolding, â€œLinux grew with a lot of mutations â€“ and because the mutations were less than random, they were faster and more directed thanÂ <a href="https://en.wikipedia.org/wiki/Mutation#Induced_mutation">alpha-particles in DNA</a>.â€<a href="https://en.wikipedia.org/wiki/Linux#cite_note-77">[73]</a>Â <a href="https://en.wikipedia.org/wiki/Eric_S._Raymond">Eric S. Raymond</a>Â considers Linuxâ€™s revolutionary aspects to be social, not technical: before Linux, complex software was designed carefully by small groups, but â€œLinux evolved in a completely different way. From nearly the beginning, it was rather casually hacked on by huge numbers of volunteers coordinating only through the Internet. Quality was maintained not by rigid standards or autocracy but by the naively simple strategy of releasing every week and getting feedback from hundreds of users within days, creating a sort of rapid Darwinian selection on the mutations introduced by developers.â€<a href="https://en.wikipedia.org/wiki/Linux#cite_note-78">[74]</a>Â <a href="https://en.wikipedia.org/wiki/Bryan_Cantrill">Bryan Cantrill</a>, an engineer of a competing OS, agrees that â€œLinux wasnâ€™t designed, it evolvedâ€, but considers this to be a limitation, proposing that some features, especially those related to security,<a href="https://en.wikipedia.org/wiki/Linux#cite_note-79">[75]</a>Â cannot be evolved into, â€œthis is not a biological system at the end of the day, itâ€™s a software system.â€</p><p><strong>å…¨ç§°GNU/Linuxï¼Œæ˜¯ä¸€ç§å…è´¹ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„<a href="https://baike.baidu.com/item/%E7%B1%BBUNIX/9032872">ç±»UNIX</a>æ“ä½œç³»ç»Ÿ</strong>ï¼Œå…¶å†…æ ¸ç”±<a href="https://baike.baidu.com/item/%E6%9E%97%E7%BA%B3%E6%96%AF%C2%B7%E6%9C%AC%E7%BA%B3%E7%AC%AC%E5%85%8B%E7%89%B9%C2%B7%E6%89%98%E7%93%A6%E5%85%B9/1034429">æ—çº³æ–¯Â·æœ¬çº³ç¬¬å…‹ç‰¹Â·æ‰˜ç“¦å…¹</a>äº1991å¹´10æœˆ5æ—¥é¦–æ¬¡å‘å¸ƒï¼Œå®ƒä¸»è¦å—åˆ°<a href="https://baike.baidu.com/item/Minix/7106045">Minix</a>å’ŒUnixæ€æƒ³çš„å¯å‘ï¼Œæ˜¯ä¸€ä¸ªåŸºäº<a href="https://baike.baidu.com/item/POSIX/3792413">POSIX</a>çš„å¤šç”¨æˆ·ã€<a href="https://baike.baidu.com/item/%E5%A4%9A%E4%BB%BB%E5%8A%A1/1011764">å¤šä»»åŠ¡</a>ã€æ”¯æŒ<a href="https://baike.baidu.com/item/%E5%A4%9A%E7%BA%BF%E7%A8%8B/1190404">å¤šçº¿ç¨‹</a>å’Œå¤š<a href="https://baike.baidu.com/item/CPU/120556">CPU</a>çš„æ“ä½œç³»ç»Ÿã€‚å®ƒèƒ½è¿è¡Œä¸»è¦çš„<a href="https://baike.baidu.com/item/Unix/219943">Unix</a>å·¥å…·è½¯ä»¶ã€åº”ç”¨ç¨‹åºå’Œç½‘ç»œåè®®ã€‚å®ƒæ”¯æŒ<a href="https://baike.baidu.com/item/32%E4%BD%8D/5812218">32ä½</a>å’Œ<a href="https://baike.baidu.com/item/64%E4%BD%8D/2262282">64ä½</a>ç¡¬ä»¶ã€‚Linuxç»§æ‰¿äº†Unixä»¥ç½‘ç»œä¸ºæ ¸å¿ƒçš„è®¾è®¡æ€æƒ³ï¼Œæ˜¯ä¸€ä¸ªæ€§èƒ½ç¨³å®šçš„å¤šç”¨æˆ·ç½‘ç»œæ“ä½œç³»ç»Ÿã€‚Linuxæœ‰ä¸Šç™¾ç§ä¸åŒçš„å‘è¡Œç‰ˆï¼Œå¦‚åŸºäºç¤¾åŒºå¼€å‘çš„<a href="https://baike.baidu.com/item/debian/748667">debian</a>ã€<a href="https://baike.baidu.com/item/archlinux/10857530">archlinux</a>ï¼Œå’ŒåŸºäºå•†ä¸šå¼€å‘çš„<a href="https://baike.baidu.com/item/Red%20Hat%20Enterprise%20Linux/10770503">Red Hat Enterprise Linux</a>ã€<a href="https://baike.baidu.com/item/SUSE/60409">SUSE</a>ã€<a href="https://baike.baidu.com/item/Oracle%20Linux/6876458">Oracle Linux</a>ç­‰ã€‚</p><p>Linus built kernel to solve unix hard-use and lack I/O RPC function.  åŒºåˆ† Linuxï¼ˆå†…æ ¸ï¼‰å’Œ Linuxï¼ˆæ“ä½œç³»ç»Ÿï¼‰ã€‚</p><p>Kernel æ˜¯è®¡ç®—æœº<a href="https://en.wikipedia.org/wiki/Operating_system">æ“ä½œç³»ç»Ÿ</a>æ ¸å¿ƒçš„<a href="https://en.wikipedia.org/wiki/Computer_program">è®¡ç®—æœºç¨‹åº</a>ï¼Œé€šå¸¸å¯ä»¥å®Œå…¨æ§åˆ¶ç³»ç»Ÿä¸­çš„æ‰€æœ‰å†…å®¹**ã€‚**<a href="https://en.wikipedia.org/wiki/Kernel_(operating_system)#cite_note-Linfo-1">[1]</a>å®ƒæ˜¯æ“ä½œç³»ç»Ÿä»£ç çš„ä¸€éƒ¨åˆ†ï¼Œå§‹ç»ˆé©»ç•™åœ¨å†…å­˜ä¸­<a href="https://en.wikipedia.org/wiki/Kernel_(operating_system)#cite_note-2">[2]</a>å¹¶ä¿ƒè¿›ç¡¬ä»¶å’Œè½¯ä»¶ç»„ä»¶ä¹‹é—´çš„äº¤äº’ã€‚å®Œæ•´çš„å†…æ ¸é€šè¿‡<a href="https://en.wikipedia.org/wiki/Device_driver">è®¾å¤‡é©±åŠ¨ç¨‹åºæ§åˆ¶</a>æ‰€æœ‰ç¡¬ä»¶èµ„æºï¼ˆä¾‹å¦‚ I/Oã€å†…å­˜ã€å¯†ç ï¼‰ ï¼Œä»²è£æ¶‰åŠè¿™äº›èµ„æºçš„è¿›ç¨‹ä¹‹é—´çš„å†²çªï¼Œå¹¶ä¼˜åŒ–å…¬å…±èµ„æºçš„åˆ©ç”¨ï¼Œä¾‹å¦‚ CPU å’Œç¼“å­˜ä½¿ç”¨ã€æ–‡ä»¶ç³»ç»Ÿå’Œç½‘ç»œå¥—æ¥å­—ã€‚<a href="https://en.wikipedia.org/wiki/Booting">åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸Šï¼Œå†…æ ¸æ˜¯å¯åŠ¨</a>æ—¶æœ€å…ˆåŠ è½½çš„ç¨‹åºä¹‹ä¸€ï¼ˆåœ¨<a href="https://en.wikipedia.org/wiki/Bootloader">å¼•å¯¼åŠ è½½ç¨‹åº</a>ï¼‰ã€‚å®ƒå¤„ç†å…¶ä½™çš„å¯åŠ¨ä»¥åŠå†…å­˜ã€<a href="https://en.wikipedia.org/wiki/Peripheral">å¤–å›´è®¾å¤‡</a>å’Œæ¥è‡ª<a href="https://en.wikipedia.org/wiki/Software">è½¯ä»¶çš„</a><a href="https://en.wikipedia.org/wiki/Input/output">è¾“å…¥/è¾“å‡º</a>(I/O) è¯·æ±‚ï¼Œå°†å®ƒä»¬è½¬æ¢ä¸º<a href="https://en.wikipedia.org/wiki/Central_processing_unit">ä¸­å¤®å¤„ç†å™¨çš„</a><a href="https://en.wikipedia.org/wiki/Data_processing">æ•°æ®å¤„ç†</a>æŒ‡ä»¤ã€‚</p><p>å†…æ ¸æ˜¯æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå…·æœ‰å®Œå…¨æ§åˆ¶ç³»ç»Ÿèµ„æºçš„èƒ½åŠ›ã€‚å®ƒå§‹ç»ˆé©»ç•™åœ¨å†…å­˜ä¸­ï¼Œä¿ƒè¿›ç¡¬ä»¶å’Œè½¯ä»¶ä¹‹é—´çš„äº¤äº’ã€‚å†…æ ¸é€šè¿‡è®¾å¤‡é©±åŠ¨ç¨‹åºæ§åˆ¶ç¡¬ä»¶èµ„æºï¼Œä»²è£è¿›ç¨‹ä¹‹é—´çš„å†²çªï¼Œå¹¶ä¼˜åŒ–å…±äº«èµ„æºçš„åˆ©ç”¨ã€‚åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸Šï¼Œå†…æ ¸æ˜¯å¯åŠ¨æ—¶æœ€å…ˆåŠ è½½çš„ç¨‹åºã€‚<br>å†…æ ¸çš„å…³é”®ä»£ç è¢«åŠ è½½åˆ°å—ä¿æŠ¤çš„å†…æ ¸ç©ºé—´ä¸­ï¼Œä¸åº”ç”¨ç¨‹åºè¿è¡Œçš„ç”¨æˆ·ç©ºé—´åˆ†ç¦»ã€‚è¿™ç§åˆ†ç¦»å¯ä»¥é˜²æ­¢ç”¨æˆ·æ•°æ®å’Œå†…æ ¸æ•°æ®ç›¸äº’å¹²æ‰°ï¼Œå¹¶æé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚å†…æ ¸æä¾›äº†ä¸€ä¸ªä½çº§çš„æ¥å£ï¼Œè¿›ç¨‹é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥è¯·æ±‚å†…æ ¸æœåŠ¡ã€‚<br>å†…æ ¸æ¶æ„æœ‰<strong>æ•´ä½“å†…æ ¸å’Œå¾®å†…æ ¸</strong>ä¸¤ç§è®¾è®¡ã€‚æ•´ä½“å†…æ ¸åœ¨å•ä¸ªåœ°å€ç©ºé—´ä¸­è¿è¡Œï¼Œä»¥æé«˜é€Ÿåº¦ï¼›å¾®å†…æ ¸åœ¨ç”¨æˆ·ç©ºé—´ä¸­è¿è¡Œå¤§éƒ¨åˆ†æœåŠ¡ï¼Œä»¥æé«˜çµæ´»æ€§å’Œæ¨¡å—åŒ–ã€‚Linuxå†…æ ¸æ˜¯æ•´ä½“å¼çš„ï¼Œä½†ä¹Ÿæ”¯æŒæ¨¡å—åŒ–ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ è½½å’Œå¸è½½å†…æ ¸æ¨¡å—ã€‚<br>å†…æ ¸è´Ÿè´£å†³å®šå°†å“ªäº›æ­£åœ¨è¿è¡Œçš„ç¨‹åºåˆ†é…ç»™å¤„ç†å™¨ï¼Œä»è€Œæ‰§è¡Œç¨‹åºã€‚å®ƒæ˜¯è®¡ç®—æœºç³»ç»Ÿçš„ä¸­å¤®ç»„ä»¶ï¼Œæ§åˆ¶å’Œç®¡ç†ç³»ç»Ÿçš„å„ä¸ªæ–¹é¢ã€‚</p><p>Linux æ“ä½œç³»ç»Ÿå°†å…¶è¿è¡Œç¯å¢ƒåˆ†ä¸ºä¸¤ç§çŠ¶æ€ï¼šç”¨æˆ·æ€å’Œå†…æ ¸æ€ã€‚ç”¨æˆ·æ€æ˜¯æŒ‡åº”ç”¨ç¨‹åºè¿è¡Œçš„ç¯å¢ƒï¼Œè€Œå†…æ ¸æ€æ˜¯æŒ‡æ“ä½œç³»ç»Ÿå†…æ ¸è¿è¡Œçš„ç¯å¢ƒã€‚</p><h3 id="ç”¨æˆ·æ€">ç”¨æˆ·æ€</h3><p>ç”¨æˆ·æ€ï¼ˆUser Modeï¼‰æ˜¯æŒ‡åº”ç”¨ç¨‹åºè¿è¡Œçš„ç¯å¢ƒã€‚åœ¨ç”¨æˆ·æ€ä¸‹ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨ç”¨æˆ·æ€æä¾›çš„ç³»ç»Ÿè°ƒç”¨æ¥å£æ¥è¯·æ±‚æ“ä½œç³»ç»ŸæœåŠ¡ã€‚ç”¨æˆ·æ€çš„åº”ç”¨ç¨‹åºä¸èƒ½ç›´æ¥è®¿é—®ç¡¬ä»¶èµ„æºï¼Œå¿…é¡»é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥è¯·æ±‚å†…æ ¸æ€çš„æœåŠ¡ã€‚</p><p>ç”¨æˆ·æ€çš„ç‰¹ç‚¹ï¼š</p><ul><li>åº”ç”¨ç¨‹åºè¿è¡Œåœ¨ç”¨æˆ·æ€ä¸‹</li><li>ä¸å…è®¸ç›´æ¥è®¿é—®ç¡¬ä»¶èµ„æº</li><li>å¿…é¡»é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥è¯·æ±‚å†…æ ¸æ€æœåŠ¡</li></ul><h3 id="å†…æ ¸æ€">å†…æ ¸æ€</h3><p>å†…æ ¸æ€ï¼ˆKernel Modeï¼‰æ˜¯æŒ‡æ“ä½œç³»ç»Ÿå†…æ ¸è¿è¡Œçš„ç¯å¢ƒã€‚åœ¨å†…æ ¸æ€ä¸‹ï¼Œå†…æ ¸å¯ä»¥ç›´æ¥è®¿é—®ç¡¬ä»¶èµ„æºï¼Œç®¡ç†ç³»ç»Ÿèµ„æºï¼Œå¹¶æä¾›æœåŠ¡ç»™ç”¨æˆ·æ€çš„åº”ç”¨ç¨‹åºã€‚</p><p>å†…æ ¸æ€çš„ç‰¹ç‚¹ï¼š</p><ul><li>æ“ä½œç³»ç»Ÿå†…æ ¸è¿è¡Œåœ¨å†…æ ¸æ€ä¸‹</li><li>å…è®¸ç›´æ¥è®¿é—®ç¡¬ä»¶èµ„æº</li><li>ç®¡ç†ç³»ç»Ÿèµ„æºå¹¶æä¾›æœåŠ¡ç»™ç”¨æˆ·æ€åº”ç”¨ç¨‹åº</li></ul><h3 id="ç³»ç»Ÿè°ƒç”¨">ç³»ç»Ÿè°ƒç”¨</h3><p>ç³»ç»Ÿè°ƒç”¨ï¼ˆSystem Callï¼‰æ˜¯ç”¨æˆ·æ€åº”ç”¨ç¨‹åºè¯·æ±‚å†…æ ¸æ€æœåŠ¡çš„æ¥å£ã€‚ç”¨æˆ·æ€åº”ç”¨ç¨‹åºé€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥è¯·æ±‚å†…æ ¸æ€çš„æœåŠ¡ï¼Œä¾‹å¦‚è¯»å–æ–‡ä»¶ã€åˆ›å»ºè¿›ç¨‹ç­‰ã€‚</p><p>ç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹ï¼š</p><ol><li>åº”ç”¨ç¨‹åºåœ¨ç”¨æˆ·æ€ä¸‹æ‰§è¡Œ</li><li>åº”ç”¨ç¨‹åºéœ€è¦è¯·æ±‚å†…æ ¸æ€æœåŠ¡</li><li>åº”ç”¨ç¨‹åºé€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥å£è¯·æ±‚æœåŠ¡</li><li>å†…æ ¸æ€æ¥æ”¶åˆ°è¯·æ±‚å¹¶å¤„ç†</li><li>å†…æ ¸æ€å°†ç»“æœè¿”å›ç»™åº”ç”¨ç¨‹åº</li></ol><p><strong>å®è·µ</strong></p><p>$è¡¨æ˜æ˜¯érootç”¨æˆ·ç™»å½•ï¼Œ#è¡¨ç¤ºæ˜¯rootç”¨æˆ·ç™»å½•ï¼Œå®ƒä»¬æ˜¯ç»ˆç«¯shellçš„å‘½ä»¤æç¤ºç¬¦ å‡ ç§å¸¸ç”¨ç»ˆç«¯çš„å‘½ä»¤æç¤ºç¬¦</p><p>BASH: rootè´¦æˆ·: # ,érootè´¦æˆ·: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.452ex;" xmlns="http://www.w3.org/2000/svg" width="39.819ex" height="2.149ex" role="img" focusable="false" viewBox="0 -750 17600 950"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="merror" data-mjx-error="You can't use 'macro parameter character #' in math mode" title="You can't use 'macro parameter character #' in math mode"><rect data-background="true" width="17600" height="950" y="-200"></rect><title>You can't use 'macro parameter character #' in math mode</title><g data-mml-node="mtext" style="font-family: serif;"><text data-variant="-explicitFont" transform="scale(1,-1)" font-size="884px"> KSH: rootè´¦æˆ·: # ,érootè´¦æˆ·: </text></g></g></g></g></svg></mjx-container> CSH[TCSH]: rootè´¦æˆ·: % ,érootè´¦æˆ·: %</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è€Œ/ æ˜¯æ ¹èŠ‚ç‚¹ï¼Œ ~ æ˜¯ home</span><br><span class="line">å¦‚æœä»¥rootè´¦å·ç™»é™†   ~ æ˜¯ /root/</span><br></pre></td></tr></table></figure><p>Program: a file containing instructions to be executed, static Process: an instance of a program in execution, live entity</p><p>execveï¼ˆæ‰§è¡Œæ–‡ä»¶ï¼‰åœ¨<a href="https://baike.baidu.com/item/%E7%88%B6%E8%BF%9B%E7%A8%8B/614062">çˆ¶è¿›ç¨‹</a>ä¸­forkä¸€ä¸ªå­è¿›ç¨‹ï¼Œåœ¨å­è¿›ç¨‹ä¸­è°ƒç”¨execå‡½æ•°å¯åŠ¨æ–°çš„ç¨‹åºã€‚execå‡½æ•°ä¸€å…±æœ‰å…­ä¸ªï¼Œå…¶ä¸­execveä¸ºå†…æ ¸çº§<a href="https://baike.baidu.com/item/%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/861110">ç³»ç»Ÿè°ƒç”¨</a>ï¼Œå…¶ä»–ï¼ˆexeclï¼Œexecleï¼Œexeclpï¼Œexecvï¼Œexecvpï¼‰exec(): often used after fork() to <strong>load</strong> another process</p><p>è®¸å¤šç¨‹åºéœ€è¦å¼€æœºå¯åŠ¨ã€‚å®ƒä»¬åœ¨Windowså«åš"æœåŠ¡"ï¼ˆserviceï¼‰ï¼Œåœ¨Linuxå°±å«åš"<a href="https://zh.wikipedia.org/wiki/%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B">å®ˆæŠ¤è¿›ç¨‹</a>"ï¼ˆdaemonï¼‰ã€‚Linux Daemonï¼ˆå®ˆæŠ¤è¿›ç¨‹ï¼‰æ˜¯è¿è¡Œåœ¨åå°çš„ä¸€ç§ç‰¹æ®Šè¿›ç¨‹ã€‚å®ƒç‹¬ç«‹äºæ§åˆ¶ç»ˆç«¯å¹¶ä¸”å‘¨æœŸæ€§åœ°æ‰§è¡ŒæŸç§ä»»åŠ¡æˆ–ç­‰å¾…å¤„ç†æŸäº›å‘ç”Ÿçš„äº‹ä»¶ã€‚</p><ol><li><strong>syslogd</strong>ï¼šç³»ç»Ÿæ—¥å¿—å®ˆæŠ¤è¿›ç¨‹ï¼Œè´Ÿè´£è®°å½•ç³»ç»Ÿæ—¥å¿—æ¶ˆæ¯ã€‚</li><li><strong>httpd</strong>ï¼šWeb æœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹ï¼Œå¦‚ Apache æˆ– Nginxï¼Œç”¨äºæä¾› Web æœåŠ¡ã€‚</li><li><strong>sendmail</strong>ï¼šé‚®ä»¶æœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹ï¼Œè´Ÿè´£å¤„ç†å‘é€å’Œæ¥æ”¶é‚®ä»¶çš„åŠŸèƒ½ã€‚</li><li><strong>mysqld</strong>ï¼šæ•°æ®åº“æœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹ï¼Œæ¯”å¦‚ MySQL æˆ– MariaDBï¼Œç”¨äºç®¡ç†å’Œæä¾›æ•°æ®åº“æœåŠ¡ã€‚</li></ol><p>è¿™äº›å®ˆæŠ¤è¿›ç¨‹é€šå¸¸åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ï¼Œå¹¶åœ¨ç³»ç»Ÿè¿è¡ŒæœŸé—´æŒç»­<strong>ç›‘å¬ã€å¤„ç†æˆ–æä¾›æœåŠ¡</strong>ã€‚å®ƒä»¬çš„è¿è¡Œé€šå¸¸ä¸éœ€è¦ç”¨æˆ·çš„ç›´æ¥å¹²é¢„ï¼Œè€Œæ˜¯é€šè¿‡é…ç½®æ–‡ä»¶æˆ–å…¶ä»–è®¾ç½®æ¥æ§åˆ¶å…¶è¡Œä¸ºå’ŒåŠŸèƒ½ã€‚</p><p><strong>FTP</strong></p><p><strong>ä¸»åŠ¨</strong>æ¨¡å¼çš„FTPæ˜¯æŒ‡<strong>æœåŠ¡å™¨ä¸»åŠ¨</strong>è¿æ¥å®¢æˆ·ç«¯çš„æ•°æ®ç«¯å£ï¼Œè¢«åŠ¨æ¨¡å¼çš„FTPæ˜¯æŒ‡<strong>æœåŠ¡å™¨è¢«åŠ¨ç­‰å¾…</strong>å®¢æˆ·ç«¯è¿æ¥è‡ªå·±çš„æ•°æ®ç«¯å£ã€‚</p><p>è¢«åŠ¨æ¨¡å¼çš„FTPé€šå¸¸ç”¨åœ¨å¤„äºé˜²ç«å¢™ä¹‹åçš„FTPå®¢æˆ·è®¿é—®å¤–ç•ŒFTPæœåŠ¡å™¨çš„æƒ…å†µï¼Œå› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé˜²ç«å¢™é€šå¸¸é…ç½®ä¸º<strong>ä¸å…è®¸å¤–ç•Œè®¿é—®é˜²ç«å¢™ä¹‹å†…çš„ä¸»æœº</strong>ï¼Œè€Œ<strong>åªå…è®¸ç”±é˜²ç«å¢™ä¹‹å†…çš„ä¸»æœºå‘èµ·å¯¹å¤–çš„è¿æ¥è¯·æ±‚</strong>ã€‚å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ä¸èƒ½ä½¿ç”¨ä¸»åŠ¨æ¨¡å¼çš„FTPä¼ è¾“ï¼Œè€Œè¢«åŠ¨æ¨¡å¼çš„FTPå¯ä»¥è‰¯å¥½çš„å·¥ä½œã€‚</p><p>ä¸»åŠ¨æ¨¡å¼éœ€è¦æœåŠ¡å™¨ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘èµ·è¿æ¥ï¼Œè€Œç°åœ¨æ™®é€šçš„å®¢æˆ·ç«¯å¤§å¤šä½äºNATä¹‹åï¼Œæ‰€ä»¥ä¸»åŠ¨æ¨¡å¼å¸¸å¸¸æ— æ³•è¿›è¡Œã€‚å³ä½¿å¯ä»¥ï¼Œä¹Ÿéœ€è¦å®¢æˆ·ç«¯æ‰“å¼€é˜²ç«å¢™ï¼Œå…è®¸æœåŠ¡ç«¯çš„20ç«¯å£è®¿é—®ã€‚æ‰€ä»¥æœåŠ¡ç«¯åŸºæœ¬éœ€è¦æ”¯æŒè¢«åŠ¨æ¨¡å¼ï¼Œä½†è¢«åŠ¨æ¨¡å¼éœ€è¦å¼€æ”¾ä¸€æ®µç«¯å£ã€‚ä¸ºäº†å®‰å…¨ï¼Œå¯ä»¥é€‰æ‹©ä¸€å°æ®µç«¯å£ï¼Œç„¶ååœ¨é˜²ç«å¢™å¼€æ”¾è¿™ä¸€æ®µç«¯å£ã€‚</p><h3 id="Everything-is-a-file">Everything is a file</h3><p><strong>Linuxæ“ä½œç³»ç»Ÿçš„è®¾è®¡å“²å­¦ä¹‹ä¸€ï¼šå°†æ‰€æœ‰è®¾å¤‡ã€èµ„æºæˆ–è¿›ç¨‹éƒ½è§†ä¸ºæ–‡ä»¶æˆ–æ–‡ä»¶ç±»ä¼¼çš„å¯¹è±¡ã€‚</strong></p><p>åœ¨Linuxä¸­ï¼Œä¸ä»…æ™®é€šçš„æ–‡æœ¬æ–‡ä»¶ã€ç›®å½•ã€ç¡¬ä»¶è®¾å¤‡å’Œå¤–éƒ¨è®¾å¤‡éƒ½è¢«è§†ä¸ºæ–‡ä»¶ï¼Œç”šè‡³ç³»ç»Ÿä¸­çš„è¿›ç¨‹ã€ç½‘ç»œè¿æ¥ã€ç¡¬ä»¶æ¥å£ç­‰ä¹Ÿè¢«æŠ½è±¡ä¸ºæ–‡ä»¶ã€‚è¿™ç§æŠ½è±¡åŒ–ä½¿å¾—Linuxç³»ç»Ÿæ›´åŠ ç»Ÿä¸€å’Œçµæ´»ï¼Œå› ä¸ºå®ƒå…è®¸å¯¹ä¸åŒèµ„æºä½¿ç”¨ç›¸ä¼¼çš„æ“ä½œæ–¹å¼ã€‚</p><p>å¥½å¤„æ˜¯è¯»å†™è¿™äº›èµ„æºéƒ½å¯ç”¨open()/close()/write()/read()ç­‰å‡½æ•°è¿›è¡Œå¤„ç†ã€‚å±è”½äº†ç¡¬ä»¶çš„åŒºåˆ«ï¼Œæ‰€æœ‰è®¾å¤‡éƒ½æŠ½è±¡æˆæ–‡ä»¶ï¼Œæä¾›ç»Ÿä¸€çš„æ¥å£ç»™ç”¨æˆ·ã€‚è™½ç„¶ç±»å‹å„ä¸ç›¸åŒï¼Œä½†æ˜¯å¯¹å…¶æä¾›çš„å´æ˜¯åŒä¸€å¥—APIã€‚æ›´è¿›ä¸€æ­¥ï¼Œå¯¹æ–‡ä»¶çš„æ“ä½œä¹Ÿå¯ä»¥è·¨æ–‡ä»¶ç³»ç»Ÿæ‰§è¡Œã€‚åœ¨Linuxç³»ç»Ÿä¸­æœ‰ä¸‰ç±»æ–‡ä»¶ï¼šæ™®é€šæ–‡ä»¶ã€ç›®å½•æ–‡ä»¶å’Œç‰¹æ®Šæ–‡ä»¶ã€‚</p><p>ç½‘ç»œ I/O é€šè¿‡ç½‘ç»œè¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œé€šå¸¸åŒ…æ‹¬ TCP æˆ– UDP ç­‰åè®®ã€‚ç½‘ç»œ I/O çš„å»¶è¿Ÿè¾ƒé«˜ï¼Œå–å†³äºç½‘ç»œå¸¦å®½ã€è·¯ç”±å™¨ã€ä¸­ç»§è®¾å¤‡ç­‰ï¼Œæ•°æ®åŒ…å¯èƒ½éœ€è¦ç»è¿‡å¤šä¸ªä¸­é—´èŠ‚ç‚¹æ‰èƒ½åˆ°è¾¾ç›®æ ‡æœåŠ¡å™¨ã€‚</p><p>å±€åŸŸç½‘çš„å»¶è¿Ÿé€šå¸¸åœ¨å¾®ç§’åˆ°æ¯«ç§’çº§ï¼Œè€Œå¹¿åŸŸç½‘ï¼ˆå¦‚äº’è”ç½‘ï¼‰çš„å»¶è¿Ÿå¯èƒ½ä¼šè¾¾åˆ°å‡ åæ¯«ç§’ç”šè‡³æ›´é«˜ã€‚ç½‘ç»œ I/O å¹¶å‘æ˜¯éå¸¸å¸¸è§çš„éœ€æ±‚ï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜å¹¶å‘æœåŠ¡å™¨ï¼ˆå¦‚ Web æœåŠ¡å™¨ï¼‰ä¸­ã€‚æœåŠ¡å™¨é€šå¸¸éœ€è¦åŒæ—¶å¤„ç†æ•°ç™¾ç”šè‡³æ•°åƒä¸ªç½‘ç»œè¿æ¥ã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼Œä½¿ç”¨äº† I/O å¤šè·¯å¤ç”¨ï¼ˆselectã€pollã€epollï¼‰å’Œå¼‚æ­¥ I/O æ¥ç®¡ç†å¤§é‡çš„å¹¶å‘è¿æ¥ã€‚ç½‘ç»œ I/O å¸¦å®½å—åˆ°ç½‘ç»œè®¾å¤‡ï¼ˆå¦‚ç½‘å¡ã€è·¯ç”±å™¨ï¼‰çš„é™åˆ¶ã€‚åƒå…†ä»¥å¤ªç½‘çš„å¸¦å®½æ˜¯ 1 Gbpsï¼Œå¤§çº¦ç›¸å½“äº 125 MB/sï¼Œè€Œå¦‚ä»Šå¸¸è§çš„ 10 Gbps ç½‘å¡èƒ½è¾¾åˆ° 1.25 GB/sï¼Œè¿œä½äºæœ¬åœ°å­˜å‚¨è®¾å¤‡ã€‚</p><p>ç°ä»£æœåŠ¡å™¨ï¼ˆå¦‚ Nginxã€Node.jsï¼‰é€šå¸¸ä½¿ç”¨å¼‚æ­¥éé˜»å¡ I/O æ¨¡å‹ï¼Œä»¥æœ€å¤§é™åº¦æé«˜ I/O ååé‡ã€‚</p><h2 id="å¤šè·¯å¤ç”¨I-O">å¤šè·¯å¤ç”¨I/O</h2><p>select()ã€poll() å’Œ epoll() å‡½æ•°åœ¨ç½‘ç»œç¼–ç¨‹å’Œæ“ä½œç³»ç»Ÿä¸­ç”¨äºåŒæ—¶ç›‘æ§å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ˆä¾‹å¦‚ï¼Œå¥—æ¥å­—ï¼‰çš„<strong>å¯è¯»æ€§ã€å¯å†™æ€§æˆ–å¼‚å¸¸çŠ¶æ€</strong>ã€‚å®ƒä»¬çš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡ç›‘å¬<strong>ä¸€ç»„</strong>æ–‡ä»¶æè¿°ç¬¦ï¼Œæ¥å¤„ç†å¤šä¸ªè¾“å…¥/è¾“å‡ºæ“ä½œï¼Œ<strong>è€Œä¸éœ€è¦æ¯ä¸ªè¿æ¥éƒ½ä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹æˆ–è¿›ç¨‹</strong>ã€‚å®ƒä»¬ä¸»è¦ç”¨äºäº‹ä»¶é©±åŠ¨ç¼–ç¨‹ï¼Œç‰¹åˆ«æ˜¯åœ¨æœåŠ¡å™¨ä¸­åŒæ—¶å¤„ç†å¤šä¸ªè¿æ¥æ—¶ã€‚</p><h3 id="1-select">1. <code>select()</code></h3><p><code>select()</code> æ˜¯ä¸€ä¸ª POSIX æ ‡å‡†å‡½æ•°ï¼Œç”¨äºç›‘æ§å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œç­‰å¾…å…¶ä¸­çš„æŸä¸ªå˜ä¸ºå°±ç»ªï¼ˆå¯è¯»ã€å¯å†™æˆ–æœ‰å¼‚å¸¸ï¼‰ã€‚ä¸»è¦åº”ç”¨äºç½‘ç»œç¼–ç¨‹ä¸­å¤„ç†å¤šå®¢æˆ·ç«¯çš„å¹¶å‘è¿æ¥ã€‚</p><h3 id="ç”¨æ³•">ç”¨æ³•</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/select.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">select</span><span class="params">(<span class="type">int</span> nfds, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, <span class="keyword">struct</span> timeval *timeout)</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><strong><code>nfds</code></strong>: æ˜¯éœ€è¦ç›‘æ§çš„æœ€å¤§æ–‡ä»¶æè¿°ç¬¦åŠ 1ã€‚</li><li><strong><code>readfds</code></strong>: ç›‘æ§å¯è¯»äº‹ä»¶çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆã€‚</li><li><strong><code>writefds</code></strong>: ç›‘æ§å¯å†™äº‹ä»¶çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆã€‚</li><li><strong><code>exceptfds</code></strong>: ç›‘æ§å¼‚å¸¸äº‹ä»¶çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆã€‚</li><li><strong><code>timeout</code></strong>: è¶…æ—¶å‚æ•°ï¼ŒæŒ‡å®š <code>select()</code> åº”ç­‰å¾…çš„æ—¶é—´ã€‚</li></ul><h3 id="ä½¿ç”¨æ­¥éª¤">ä½¿ç”¨æ­¥éª¤</h3><ol><li>åˆ›å»ºä¸€ä¸ª <code>fd_set</code> é›†åˆï¼Œå¹¶é€šè¿‡ <code>FD_SET()</code> å‘å…¶ä¸­æ·»åŠ æ–‡ä»¶æè¿°ç¬¦ã€‚</li><li>è°ƒç”¨ <code>select()</code>ï¼Œç­‰å¾…æ–‡ä»¶æè¿°ç¬¦å°±ç»ªã€‚</li><li>æ£€æŸ¥è¿”å›çš„é›†åˆï¼Œå¤„ç†å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ã€‚</li></ol><h3 id="ä¾‹å­">ä¾‹å­</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fd_set readfds;</span><br><span class="line">FD_ZERO(&amp;readfds);       <span class="comment">// åˆå§‹åŒ–é›†åˆ</span></span><br><span class="line">FD_SET(sockfd, &amp;readfds); <span class="comment">// æ·»åŠ ä¸€ä¸ªsocketåˆ°é›†åˆä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> result = select(sockfd + <span class="number">1</span>, &amp;readfds, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line"><span class="keyword">if</span> (result &gt; <span class="number">0</span>) {</span><br><span class="line">    <span class="keyword">if</span> (FD_ISSET(sockfd, &amp;readfds)) {</span><br><span class="line">        <span class="comment">// sockfd å¯è¯»ï¼Œå¤„ç†æ•°æ®</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯</h3><ul><li><strong>å¤šå®¢æˆ·ç«¯ TCP æœåŠ¡å™¨</strong>ï¼šåœ¨ä¸€ä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹ä¸­ï¼Œ<code>select()</code> å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯çš„ I/O è¯·æ±‚ï¼Œè€Œä¸éœ€è¦ä¸ºæ¯ä¸ªè¿æ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ã€‚</li><li><strong>äº‹ä»¶é©±åŠ¨ç³»ç»Ÿ</strong>ï¼šé€šè¿‡ <code>select()</code> æ¥å¤„ç†å¤šä¸ª I/O äº‹ä»¶æˆ–å®šæ—¶äº‹ä»¶ã€‚</li></ul><h3 id="2-poll">2. <code>poll()</code></h3><p><code>poll()</code> æ˜¯ <code>select()</code> çš„å¢å¼ºç‰ˆæœ¬ï¼Œè§£å†³äº† <code>select()</code> ä¸€äº›æ€§èƒ½ä¸Šçš„ç“¶é¢ˆï¼ˆå¦‚æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ï¼‰ã€‚å®ƒæ›´çµæ´»ï¼Œé€‚åˆå¤„ç†å¤§é‡æ–‡ä»¶æè¿°ç¬¦ã€‚</p><h3 id="ç”¨æ³•-2">ç”¨æ³•</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;poll.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">poll</span><span class="params">(<span class="keyword">struct</span> pollfd *fds, <span class="type">nfds_t</span> nfds, <span class="type">int</span> timeout)</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><strong><code>fds</code></strong>: ä¸€ä¸ªç»“æ„ä½“æ•°ç»„ï¼Œæ¯ä¸ªç»“æ„ä½“è¡¨ç¤ºä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦åŠå…¶äº‹ä»¶ã€‚</li><li><strong><code>nfds</code></strong>: è¦ç›‘æ§çš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡ã€‚</li><li><strong><code>timeout</code></strong>: è¶…æ—¶å‚æ•°ï¼ŒæŒ‡å®šç­‰å¾…çš„æ—¶é—´ã€‚</li></ul><h3 id="ä½¿ç”¨æ­¥éª¤-2">ä½¿ç”¨æ­¥éª¤</h3><ol><li>åˆ›å»ºä¸€ä¸ª <code>pollfd</code> æ•°ç»„ï¼Œä¸ºæ¯ä¸ªæ–‡ä»¶æè¿°ç¬¦è®¾ç½®æ„Ÿå…´è¶£çš„äº‹ä»¶ã€‚</li><li>è°ƒç”¨ <code>poll()</code>ï¼Œç­‰å¾…æ–‡ä»¶æè¿°ç¬¦å°±ç»ªã€‚</li><li>æ£€æŸ¥è¿”å›çš„ç»“æ„ä½“æ•°ç»„ï¼Œå¤„ç†å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ã€‚</li></ol><h3 id="ä¾‹å­-2">ä¾‹å­</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">pollfd</span> <span class="title">fds</span>[1];</span></span><br><span class="line">fds[<span class="number">0</span>].fd = sockfd;</span><br><span class="line">fds[<span class="number">0</span>].events = POLLIN;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> result = poll(fds, <span class="number">1</span>, <span class="number">-1</span>); <span class="comment">// -1è¡¨ç¤ºæ— é™ç­‰å¾…</span></span><br><span class="line"><span class="keyword">if</span> (result &gt; <span class="number">0</span>) {</span><br><span class="line">    <span class="keyword">if</span> (fds[<span class="number">0</span>].revents &amp; POLLIN) {</span><br><span class="line">        <span class="comment">// sockfd å¯è¯»ï¼Œå¤„ç†æ•°æ®</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨åœºæ™¯-2">ä½¿ç”¨åœºæ™¯</h3><ul><li><strong>é«˜å¹¶å‘ç³»ç»Ÿ</strong>ï¼š<code>poll()</code> é€‚ç”¨äºå¤„ç†å¤§é‡å¹¶å‘è¿æ¥ï¼Œå¦‚é«˜æ€§èƒ½ HTTP æœåŠ¡å™¨ã€‚</li><li><strong>æ–‡ä»¶æè¿°ç¬¦å¤§äº <code>select()</code> é™åˆ¶</strong>ï¼š<code>poll()</code> æ²¡æœ‰ <code>select()</code> çš„æœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ï¼Œæ›´é€‚åˆéœ€è¦ç›‘æ§å¤§é‡æ–‡ä»¶æè¿°ç¬¦çš„åœºæ™¯ã€‚</li></ul><h3 id="3-select-vs-poll">3. <code>select()</code> vs <code>poll()</code></h3><ul><li><strong>æ€§èƒ½</strong>: <code>poll()</code> é€šå¸¸æ¯” <code>select()</code> æ›´å¿«ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦ç›‘æ§å¤§é‡æ–‡ä»¶æè¿°ç¬¦æ—¶ï¼Œå› ä¸º <code>select()</code> çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆåœ¨æ¯æ¬¡è°ƒç”¨æ—¶éƒ½éœ€è¦é‡æ–°å¡«å……ï¼Œè€Œ <code>poll()</code> ä½¿ç”¨çš„ <code>pollfd</code> æ•°ç»„æ›´é«˜æ•ˆã€‚</li><li><strong>çµæ´»æ€§</strong>: <code>poll()</code> æ›´çµæ´»ï¼Œæ”¯æŒæ›´å¤šçš„äº‹ä»¶ç±»å‹ï¼Œä¸”ä¸å— <code>select()</code> æœ€å¤§æ–‡ä»¶æè¿°ç¬¦æ•°é‡çš„é™åˆ¶ã€‚</li><li><strong>å…¼å®¹æ€§</strong>: <code>select()</code> æ˜¯è¾ƒæ—§çš„å‡½æ•°ï¼Œå‡ ä¹åœ¨æ‰€æœ‰å¹³å°ä¸Šéƒ½æ”¯æŒï¼Œè€Œ <code>poll()</code> æ˜¯è¾ƒæ–°çš„æ›¿ä»£æ–¹æ¡ˆï¼Œé€‚åˆæ›´ç°ä»£çš„ç³»ç»Ÿã€‚</li></ul><h3 id="4-ç°ä»£æ›¿ä»£æ–¹æ¡ˆ">4. ç°ä»£æ›¿ä»£æ–¹æ¡ˆ</h3><ul><li><strong><code>epoll()</code></strong>ï¼ˆLinuxï¼‰ï¼šæ¯” <code>poll()</code> æ›´åŠ é«˜æ•ˆï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§é‡æ–‡ä»¶æè¿°ç¬¦åŒæ—¶å°±ç»ªçš„åœºæ™¯ä¸‹ã€‚é€‚åˆé«˜å¹¶å‘åœºæ™¯ï¼Œå¦‚å¤§å‹ç½‘ç»œæœåŠ¡å™¨ã€‚</li><li><strong><code>kqueue()</code></strong>ï¼ˆBSD ç³»ç»Ÿï¼‰ï¼šFreeBSDã€OpenBSD å’Œ macOS ç­‰ç³»ç»Ÿä¸­çš„å¤šè·¯å¤ç”¨å‡½æ•°ï¼Œç±»ä¼¼ <code>epoll()</code>ã€‚</li></ul><h3 id="æ€»ç»“">æ€»ç»“</h3><ul><li><strong><code>select()</code></strong>: ç®€å•ä½†æœ‰æ–‡ä»¶æè¿°ç¬¦æ•°é‡é™åˆ¶ï¼Œé€‚ç”¨äºå°å‹å¹¶å‘åœºæ™¯ã€‚</li><li><strong><code>poll()</code></strong>: æ›´çµæ´»ã€é€‚åˆå¤§é‡å¹¶å‘è¿æ¥ï¼Œè§£å†³äº† <code>select()</code> çš„ä¸€äº›å±€é™æ€§ã€‚</li></ul><p>åœ¨ç°ä»£é«˜å¹¶å‘ç³»ç»Ÿä¸­ï¼Œé€šå¸¸ä¼šæ›´å€¾å‘äºä½¿ç”¨ <code>epoll()</code> æˆ–è€… <code>kqueue()</code>ï¼Œè€Œ <code>select()</code> å’Œ <code>poll()</code> æ›´å¤šç”¨äºç›¸å¯¹ç®€å•æˆ–è·¨å¹³å°çš„åœºæ™¯ã€‚</p><h3 id="epoll-Linux-specific"><strong><code>epoll()</code> (Linux-specific)</strong></h3><ul><li><p><strong>Usage</strong>: A more scalable and efficient mechanism designed specifically for high-performance applications (e.g., handling thousands of file descriptors).</p></li><li><p><strong>Benefits</strong>:</p><ul><li>More efficient than <code>poll()</code> and <code>select()</code> because it uses an event-based model.</li><li>The kernel only returns file descriptors that are ready, rather than polling each one.</li><li>Allows edge-triggered and level-triggered modes, offering flexibility.</li></ul></li><li><p><strong>Drawbacks</strong>:</p><ul><li>Only available on Linux, so itâ€™s not portable to other operating systems like macOS or Windows.</li></ul><p><strong>epollä¸ºä»€ä¹ˆæ›´é«˜æ•ˆ?</strong></p><ul><li><strong>é«˜æ•ˆçš„äº‹ä»¶é€šçŸ¥æœºåˆ¶</strong></li><li>epollå®ƒçš„å·¥ä½œåŸç†æ˜¯åªå‘å†…æ ¸æ³¨å†Œä¸€æ¬¡æ–‡ä»¶æè¿°ç¬¦ï¼ˆä½¿ç”¨epoll_ctl()ï¼‰ã€‚æ­¤åï¼Œå†…æ ¸ä¼šè·Ÿè¸ªå“ªäº›æ–‡ä»¶æè¿°ç¬¦å·²å°±ç»ªã€‚å½“æ‚¨è°ƒç”¨æ—¶epoll_wait()ï¼Œå®ƒä»…è¿”å›å…·æœ‰äº‹ä»¶ï¼ˆå³æ•°æ®å°±ç»ªï¼‰çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œä¸ä¼šæ‰«ææ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ã€‚è¿™ä½¿å¾—å®ƒæ›´åŠ é«˜æ•ˆï¼Œå°¤å…¶æ˜¯åœ¨ç›‘è§†å¤§é‡æè¿°ç¬¦æ—¶ï¼Œå› ä¸ºå®ƒæ¶ˆé™¤äº†é‡å¤æ‰«æçš„éœ€è¦ã€‚<br>å®ƒä¸å†åœ¨æ¯æ¬¡è°ƒç”¨æ—¶æ£€æŸ¥æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ï¼Œepollè€Œæ˜¯æ›´åƒä¸€ä¸ªâ€œäº‹ä»¶é©±åŠ¨â€ç³»ç»Ÿï¼šå½“æ³¨å†Œæè¿°ç¬¦çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå†…æ ¸ä¼šé€šçŸ¥æ‚¨ã€‚</li><li><code>epoll()</code> offers two modes: <strong>edge-triggered (ET)</strong> and <strong>level-triggered (LT)</strong>.<ul><li><strong>Edge-triggered</strong>: The application is notified <strong>only once</strong> when the state of a file descriptor changes (e.g., when data becomes available). The application is then responsible for reading/writing all available data. This minimizes system calls, as the application doesnâ€™t need to continuously poll the kernel.</li><li><strong>Level-triggered</strong>: The behavior is more like <code>poll()</code> or <code>select()</code>; it keeps notifying the application as long as the file descriptor remains ready. This provides flexibility, but edge-triggered mode can significantly reduce overhead in high-performance applications.</li></ul></li></ul><h3 id="3-O-1-Performance-with-Large-Numbers-of-Descriptors">3. <strong>O(1) Performance with Large Numbers of Descriptors</strong></h3><ul><li><strong><code>select()</code> and <code>poll()</code></strong>:<ul><li>Both have <strong>O(n)</strong> complexity, where <code>n</code> is the number of file descriptors being monitored. As the number of descriptors grows, the time taken to check them grows linearly.</li></ul></li><li><strong><code>epoll()</code></strong>:<ul><li><code>epoll_wait()</code> has <strong>O(1)</strong> complexity for most operations, meaning it doesnâ€™t degrade in performance as the number of file descriptors increases. This allows it to scale much better when handling thousands (or even tens of thousands) of connections.</li></ul></li></ul><h3 id="4-Kernel-Space-Data-Structures">4. <strong>Kernel-Space Data Structures</strong></h3><ul><li><code>epoll()</code> uses more advanced kernel-space data structures (like red-black trees and linked lists) to efficiently track the file descriptors. Once a file descriptor is registered, it is stored in a tree, allowing quick lookups and updates, further improving performance.</li><li>In contrast, <code>select()</code> and <code>poll()</code> need to copy all file descriptors from user space to kernel space on every call, and the kernel has to check each one, leading to more overhead.</li></ul><p>æ­¤å¤–è¿˜ä½¿ç”¨äº†å†…å­˜æ˜ å°„ï¼ˆÂ <code>mmap</code>Â ï¼‰æŠ€æœ¯</p><p>å¦ä¸€ä¸ªæœ¬è´¨çš„æ”¹è¿›åœ¨äºÂ <code>epoll</code>Â é‡‡ç”¨åŸºäºäº‹ä»¶çš„å°±ç»ªé€šçŸ¥æ–¹å¼ã€‚åœ¨Â <code>select/poll</code>Â ä¸­ï¼Œè¿›ç¨‹åªæœ‰åœ¨è°ƒç”¨ä¸€å®šçš„æ–¹æ³•åï¼Œå†…æ ¸æ‰å¯¹æ‰€æœ‰ç›‘è§†çš„socketæè¿°ç¬¦è¿›è¡Œæ‰«æï¼Œè€ŒÂ <code>epoll</code>Â äº‹å…ˆé€šè¿‡Â <code>epoll_ctl()</code>Â æ¥æ³¨å†Œä¸€ä¸ªsocketæè¿°ç¬¦ï¼Œä¸€æ—¦æ£€æµ‹åˆ°epollç®¡ç†çš„socketæè¿°ç¬¦å°±ç»ªæ—¶ï¼Œå†…æ ¸ä¼šé‡‡ç”¨ç±»ä¼¼Â <code>callback</code>Â çš„å›è°ƒæœºåˆ¶ï¼Œè¿…é€Ÿæ¿€æ´»è¿™ä¸ªsocketæè¿°ç¬¦ï¼Œå½“è¿›ç¨‹è°ƒç”¨Â <code>epoll_wait()</code>Â æ—¶ä¾¿å¯ä»¥å¾—åˆ°é€šçŸ¥ï¼Œä¹Ÿå°±æ˜¯è¯´epollæœ€å¤§çš„ä¼˜ç‚¹å°±åœ¨äºå®ƒÂ <strong>åªç®¡å°±ç»ªçš„socketæè¿°ç¬¦ï¼Œè€Œè·Ÿsocketæè¿°ç¬¦çš„æ€»æ•°æ— å…³</strong>Â ã€‚</p></li></ul><ol><li><p>æå‡ºä¸€ä¸ªé—®é¢˜ï¼šå½“åœ¨O_APPENDæ‰“å¼€åï¼Œç„¶åç”¨ lseekç§»åŠ¨åˆ°å…¶ä»–çš„ä½ç½®ï¼Œç„¶åå†ç”¨writeå†™ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè¯·é—®ä½ æ•°æ®å†™åˆ°å“ªé‡Œå»äº†ï¼Ÿ</p></li><li><p>ç³»ç»Ÿè°ƒç”¨ï¼š</p><p>ä¸»è¦ä½¿ç”¨ open() ç³»ç»Ÿè°ƒç”¨æ¥æ‰“å¼€æ–‡ä»¶ã€‚</p><p>å‡½æ•°åŸå‹ï¼šint open(const char *pathname, int flags, mode_t mode);</p></li><li><p>å¸¸ç”¨æ ‡å¿—ï¼ˆflagsï¼‰ï¼š</p><ul><li>O_RDONLYï¼šåªè¯»æ¨¡å¼</li><li>O_WRONLYï¼šåªå†™æ¨¡å¼</li><li>O_RDWRï¼šè¯»å†™æ¨¡å¼</li><li>O_CREATï¼šå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»º</li><li>O_APPENDï¼šè¿½åŠ æ¨¡å¼</li><li>O_TRUNCï¼šå¦‚æœæ–‡ä»¶å­˜åœ¨åˆ™æ¸…ç©º</li><li>O_NONBLOCKï¼šéé˜»å¡æ¨¡å¼</li></ul></li><li><p>æƒé™æ¨¡å¼ï¼ˆmodeï¼‰ï¼š</p><p>å½“åˆ›å»ºæ–°æ–‡ä»¶æ—¶ä½¿ç”¨ï¼Œå¦‚ 0644ï¼ˆæ‰€æœ‰è€…å¯è¯»å†™ï¼Œå…¶ä»–äººå¯è¯»ï¼‰</p></li><li><p>è¿”å›å€¼ï¼š</p><p>æˆåŠŸè¿”å›æ–‡ä»¶æè¿°ç¬¦ï¼ˆéè´Ÿæ•´æ•°ï¼‰ï¼Œå¤±è´¥è¿”å›-1</p></li><li><p>æ–‡ä»¶æè¿°ç¬¦ï¼š</p><ul><li>æ˜¯ä¸€ä¸ªå°çš„éè´Ÿæ•´æ•°</li><li>ç”¨ä½œI/Oæ“ä½œçš„å¥æŸ„</li><li>0, 1, 2 åˆ†åˆ«é¢„ç•™ç»™æ ‡å‡†è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯</li></ul></li><li><p>æ‰“å¼€æ–‡ä»¶çš„é™åˆ¶ï¼š</p><ul><li>æ¯ä¸ªè¿›ç¨‹æœ‰æ‰“å¼€æ–‡ä»¶çš„æœ€å¤§æ•°é‡é™åˆ¶</li><li>ç³»ç»Ÿå…¨å±€ä¹Ÿæœ‰æ‰“å¼€æ–‡ä»¶çš„æœ€å¤§æ•°é‡é™åˆ¶</li></ul></li><li><p>å…³é—­æ–‡ä»¶ï¼š</p><p>ä½¿ç”¨ close() ç³»ç»Ÿè°ƒç”¨å…³é—­æ–‡ä»¶æè¿°ç¬¦</p></li><li><p><strong>é”™è¯¯å¤„ç†</strong></p><p>ä½¿ç”¨ errno æ¥æ£€æŸ¥å…·ä½“çš„é”™è¯¯åŸå› ,     åœ¨ Linux ä¸­æ‰“å¼€å’Œå¤„ç†æ–‡ä»¶æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°å„ç§é—®é¢˜æˆ–é”™è¯¯ï¼Œè¿™äº›é—®é¢˜é€šå¸¸ä¸æ–‡ä»¶ç³»ç»ŸçŠ¶æ€ã€æƒé™ã€ç³»ç»Ÿèµ„æºé™åˆ¶æœ‰å…³ï¼š</p><ol><li>æ–‡ä»¶æè¿°ç¬¦è€—å°½ï¼š<ul><li>åŸå› ï¼šæ‰“å¼€å¤ªå¤šæ–‡ä»¶è€Œä¸å…³é—­</li><li>ç—‡çŠ¶ï¼šopen() è°ƒç”¨å¤±è´¥ï¼Œè¿”å› EMFILE é”™è¯¯</li><li>è§£å†³ï¼šåŠæ—¶å…³é—­ä¸ç”¨çš„æ–‡ä»¶ï¼Œä½¿ç”¨ select()/poll()/epoll() ç®¡ç†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦</li></ul></li><li>æƒé™é—®é¢˜ï¼š<ul><li>åŸå› ï¼šæ²¡æœ‰è¶³å¤Ÿçš„æƒé™è®¿é—®æ–‡ä»¶</li><li>ç—‡çŠ¶ï¼šopen() è¿”å› EACCES é”™è¯¯</li><li>è§£å†³ï¼šæ£€æŸ¥æ–‡ä»¶æƒé™å’Œè¿›ç¨‹æƒé™ï¼Œå¿…è¦æ—¶è°ƒæ•´</li></ul></li><li>æ–‡ä»¶ä¸å­˜åœ¨ï¼š<ul><li>åŸå› ï¼šå°è¯•æ‰“å¼€ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼ˆæœªä½¿ç”¨ O_CREAT æ ‡å¿—ï¼‰</li><li>ç—‡çŠ¶ï¼šopen() è¿”å› ENOENT é”™è¯¯</li><li>è§£å†³ï¼šç¡®ä¿æ–‡ä»¶å­˜åœ¨æˆ–ä½¿ç”¨é€‚å½“çš„æ ‡å¿—åˆ›å»º</li></ul></li><li>ç£ç›˜ç©ºé—´ä¸è¶³ï¼š<ul><li>åŸå› ï¼šå†™å…¥æ•°æ®æ—¶ç£ç›˜å·²æ»¡</li><li>ç—‡çŠ¶ï¼šwrite() è°ƒç”¨å¤±è´¥ï¼Œè¿”å› ENOSPC é”™è¯¯</li><li>è§£å†³ï¼šæ¸…ç†ç£ç›˜ç©ºé—´æˆ–ä½¿ç”¨æ›´å¤§çš„å­˜å‚¨è®¾å¤‡</li></ul></li><li>æ–‡ä»¶é”å†²çªï¼š<ul><li>åŸå› ï¼šå¤šä¸ªè¿›ç¨‹åŒæ—¶è®¿é—®åŒä¸€æ–‡ä»¶</li><li>ç—‡çŠ¶ï¼šfcntl() é”å®šæ“ä½œå¤±è´¥</li><li>è§£å†³ï¼šå®ç°é€‚å½“çš„é”å®šæœºåˆ¶å’Œé”™è¯¯å¤„ç†</li></ul></li><li>ç¬¦å·é“¾æ¥å¾ªç¯ï¼š<ul><li>åŸå› ï¼šç¬¦å·é“¾æ¥å½¢æˆå¾ªç¯</li><li>ç—‡çŠ¶ï¼šopen() è¿”å› ELOOP é”™è¯¯</li><li>è§£å†³ï¼šæ£€æŸ¥å’Œä¿®å¤ç¬¦å·é“¾æ¥ç»“æ„</li></ul></li><li>æ–‡ä»¶ç³»ç»Ÿåªè¯»ï¼š<ul><li>åŸå› ï¼šå°è¯•å†™å…¥åªè¯»æ–‡ä»¶ç³»ç»Ÿ</li><li>ç—‡çŠ¶ï¼šopen() æˆ– write() è¿”å› EROFS é”™è¯¯</li><li>è§£å†³ï¼šç¡®ä¿æ–‡ä»¶ç³»ç»Ÿå¯å†™æˆ–æ›´æ”¹æ“ä½œé€»è¾‘</li></ul></li></ol></li></ol><p>åœ¨ Linux å’Œç±» Unix ç³»ç»Ÿä¸­ï¼Œå½“ä¸€ä¸ªæ–‡ä»¶ä»¥Â <code>O_APPEND</code>Â æ¨¡å¼æ‰“å¼€æ—¶ï¼Œæ¯æ¬¡è¿›è¡ŒÂ <code>write</code>Â æ“ä½œæ—¶ï¼Œæ–‡ä»¶çš„åç§»é‡éƒ½ä¼šè‡ªåŠ¨è®¾ç½®åˆ°æ–‡ä»¶çš„æœ«å°¾ï¼Œå³ä½¿åœ¨æ­¤ä¹‹å‰ä½¿ç”¨Â <code>lseek</code>Â æ”¹å˜äº†æ–‡ä»¶ä½ç½®ã€‚å› æ­¤ï¼Œ<code>O_APPEND</code>Â æ ‡å¿—ä¼šå¯¼è‡´æ‰€æœ‰å†™æ“ä½œéƒ½è¿½åŠ åˆ°æ–‡ä»¶çš„æœ«å°¾ã€‚</p><p>å› ä¸º O_APPENDæ‰“å¼€åï¼Œæ˜¯ä¸€ä¸ª<a href="https://so.csdn.net/so/search?q=%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C&amp;spm=1001.2101.3001.7020">åŸå­æ“ä½œ</a>ï¼šç§»åŠ¨åˆ°æœ«ç«¯ï¼Œå†™æ•°æ®ã€‚è¿™æ˜¯O_APPENDæ‰“å¼€çš„ä½œç”¨ã€‚ä¸­é—´çš„æ’å…¥æ—¶æ— æ•ˆçš„</p><p>2.<strong>Linux é‡Œåˆ©ç”¨ grep å’Œ find å‘½ä»¤æŸ¥æ‰¾æ–‡ä»¶å†…å®¹</strong></p><p><strong>ä»æ–‡ä»¶å†…å®¹æŸ¥æ‰¾åŒ¹é…æŒ‡å®šå­—ç¬¦ä¸²çš„è¡Œï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ grep "è¢«æŸ¥æ‰¾çš„å­—ç¬¦ä¸²" æ–‡ä»¶å</span><br></pre></td></tr></table></figure><p>ä¾‹å­ï¼šåœ¨å½“å‰ç›®å½•é‡Œç¬¬ä¸€çº§æ–‡ä»¶å¤¹ä¸­å¯»æ‰¾åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²çš„ .in æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep "thermcontact" /.in</span><br></pre></td></tr></table></figure><p>ä»æ–‡ä»¶å†…å®¹æŸ¥æ‰¾ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„è¡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ grep â€“e "æ­£åˆ™è¡¨è¾¾å¼" æ–‡ä»¶å</span><br></pre></td></tr></table></figure><p>æŸ¥æ‰¾æ—¶ä¸åŒºåˆ†å¤§å°å†™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ grep â€“i "è¢«æŸ¥æ‰¾çš„å­—ç¬¦ä¸²" æ–‡ä»¶å</span><br></pre></td></tr></table></figure><h3 id="fork">fork()</h3><p><code>fork()</code> ç³»ç»Ÿè°ƒç”¨ï¼Œçˆ¶è¿›ç¨‹è°ƒç”¨forkä¼šåˆ›å»ºä¸€ä¸ªè¿›ç¨‹å‰¯æœ¬ï¼Œä»£ç ä¸­è¿˜å¯ä»¥é€šè¿‡forkè¿”å›å€¼æ˜¯å¦ä¸º0æ¥åŒºåˆ†æ˜¯å­è¿›ç¨‹è¿˜æ˜¯çˆ¶è¿›ç¨‹ã€‚<em><strong>å­è¿›ç¨‹ä¸</strong></em>è¿›è¡Œ fork() è°ƒç”¨çš„è¿›ç¨‹ï¼ˆçˆ¶è¿›ç¨‹ï¼‰åŒæ—¶è¿è¡Œã€‚åˆ›å»ºæ–°çš„å­è¿›ç¨‹åï¼Œä¸¤ä¸ªè¿›ç¨‹éƒ½å°†æ‰§è¡Œ fork() ç³»ç»Ÿè°ƒç”¨ä¹‹åçš„ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚</p><p><strong>å­è¿›ç¨‹ä½¿ç”¨ä¸çˆ¶è¿›ç¨‹ç›¸åŒçš„ pcï¼ˆç¨‹åºè®¡æ•°å™¨ï¼‰ã€ç›¸åŒçš„ CPU å¯„å­˜å™¨ã€ç›¸åŒçš„æ‰“å¼€æ–‡ä»¶ã€‚</strong></p><p><strong>ä¸åŒçº¿ç¨‹,çˆ¶å­æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´</strong></p><p>forkæ˜¯ç”¨æ¥åˆ›å»ºå­è¿›ç¨‹çš„ï¼Œè¿™ä¸ªå‡½æ•°çš„ç‰¹åˆ«ä¹‹å¤„åœ¨äºä¸€æ¬¡è°ƒç”¨ï¼Œä¸¤æ¬¡è¿”å›ï¼Œä¸€æ¬¡è¿”å›åˆ°çˆ¶è¿›ç¨‹ä¸­ï¼Œä¸€æ¬¡è¿”å›åˆ°å­è¿›ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿”å›å€¼æ¥åˆ¤æ–­å…¶è¿”å›ç‚¹ï¼š   å®ƒä¸æ¥å—ä»»ä½•å‚æ•°å¹¶è¿”å›ä¸€ä¸ªæ•´æ•°å€¼ã€‚ä¸‹é¢æ˜¯ fork() è¿”å›çš„ä¸åŒå€¼ã€‚</p><p>1.Â <strong><code>fork()</code>Â çš„å·¥ä½œåŸç†</strong></p><p>å½“ä¸€ä¸ªè¿›ç¨‹è°ƒç”¨Â <code>fork()</code>Â æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><p><strong>åˆ›å»ºå­è¿›ç¨‹</strong>ï¼šæ“ä½œç³»ç»Ÿä¸ºå­è¿›ç¨‹åˆ†é…ä¸€ä¸ªæ–°çš„è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰ï¼Œè¿™æ˜¯æ“ä½œç³»ç»Ÿç”¨äºç®¡ç†è¿›ç¨‹çš„ç»“æ„ã€‚</p><p><strong>å¤åˆ¶çˆ¶è¿›ç¨‹çš„èµ„æº</strong>ï¼š</p><ul><li>å­è¿›ç¨‹ä¼šè·å¾—çˆ¶è¿›ç¨‹çš„å‡ ä¹å®Œå…¨ç›¸åŒçš„<strong>èµ„æºå‰¯æœ¬ï¼ŒåŒ…æ‹¬è¿›ç¨‹çš„ä»£ç æ®µã€æ•°æ®æ®µã€å †ã€æ ˆã€æ–‡ä»¶æè¿°ç¬¦ç­‰ã€‚</strong></li><li>ä½†è¿™åªæ˜¯â€œå†™æ—¶å¤åˆ¶â€ï¼ˆCopy-On-Writeï¼ŒCOWï¼‰çš„å‰¯æœ¬ï¼Œçˆ¶å­è¿›ç¨‹æœ€åˆå…±äº«ç›¸åŒçš„å†…å­˜åŒºåŸŸï¼Œç›´åˆ°å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹è¯•å›¾ä¿®æ”¹æ•°æ®æ—¶æ‰ä¼šå®é™…è¿›è¡Œå†…å­˜çš„å¤åˆ¶ã€‚</li></ul><p><strong>è¿”å›å€¼</strong>ï¼š</p><ul><li>åœ¨çˆ¶è¿›ç¨‹ä¸­ï¼Œ<code>fork()</code>Â è¿”å›å­è¿›ç¨‹çš„è¿›ç¨‹IDï¼ˆPIDï¼‰ã€‚</li><li>åœ¨å­è¿›ç¨‹ä¸­ï¼Œ<code>fork()</code>Â è¿”å› 0ã€‚</li><li>å¦‚æœÂ <code>fork()</code>Â è°ƒç”¨å¤±è´¥ï¼ˆä¾‹å¦‚ç³»ç»Ÿèµ„æºä¸è¶³ï¼‰ï¼Œåˆ™ä¼šè¿”å› -1ï¼Œå¹¶è®¾ç½®Â <code>errno</code>Â ä»¥æŒ‡ç¤ºé”™è¯¯åŸå› ã€‚</li></ul><p>2.Â <strong><code>fork()</code>Â çš„ä½¿ç”¨</strong></p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Â <code>fork()</code>Â åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼š</p><p>`#include &lt;stdio.h&gt;<br>#include &lt;unistd.h&gt;</p><p>int main() {<br>pid_t pid = fork();  // åˆ›å»ºå­è¿›ç¨‹</p><pre><code>if (pid &lt; 0) {  // fork() è°ƒç”¨å¤±è´¥    perror("fork failed");    return 1;} else if (pid == 0) {  // å­è¿›ç¨‹    printf("This is the child process. PID: %d\n", getpid());} else {  // çˆ¶è¿›ç¨‹    printf("This is the parent process. Child PID: %d, Parent PID: %d\n", pid, getpid());}return 0;</code></pre><p>}`<em><strong>è´Ÿå€¼</strong></em>ï¼šåˆ›å»ºå­è¿›ç¨‹ä¸æˆåŠŸã€‚<em><strong>é›¶</strong></em>ï¼šè¿”å›æ–°åˆ›å»ºçš„å­è¿›ç¨‹ã€‚<em><strong>æ­£å€¼</strong></em>ï¼šè¿”å›ç»™çˆ¶çº§æˆ–è°ƒç”¨è€…ã€‚è¯¥å€¼åŒ…å«æ–°åˆ›å»ºçš„å­è¿›ç¨‹çš„è¿›ç¨‹ IDã€‚</p><p>3.Â <strong><code>fork()</code>Â çš„å…¸å‹è¡Œä¸º</strong></p><p><strong>çˆ¶å­è¿›ç¨‹çš„æ‰§è¡Œé¡ºåº</strong>ï¼š</p><ul><li><code>fork()</code>Â ä¹‹åï¼Œçˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ä¼šç»§ç»­æ‰§è¡ŒÂ <code>fork()</code>Â åçš„ä»£ç ï¼Œä½†å®ƒä»¬çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚çˆ¶è¿›ç¨‹å¯èƒ½å…ˆæ‰§è¡Œï¼Œä¹Ÿå¯èƒ½å­è¿›ç¨‹å…ˆæ‰§è¡Œã€‚</li></ul><p><strong>å˜é‡çš„ç‹¬ç«‹æ€§</strong>ï¼š</p><ul><li>å°½ç®¡å­è¿›ç¨‹å¤åˆ¶äº†çˆ¶è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼Œä½†å®ƒä»¬çš„å˜é‡æ˜¯ç‹¬ç«‹çš„ã€‚å¦‚æœå­è¿›ç¨‹ä¿®æ”¹äº†æŸä¸ªå˜é‡çš„å€¼ï¼Œçˆ¶è¿›ç¨‹ä¸ä¼šçœ‹åˆ°è¿™ä¸ªä¿®æ”¹ï¼Œåä¹‹äº¦ç„¶ã€‚</li></ul><p><strong>æ–‡ä»¶æè¿°ç¬¦çš„å…±äº«</strong>ï¼š</p><ul><li>å­è¿›ç¨‹å¤åˆ¶äº†çˆ¶è¿›ç¨‹çš„æ–‡ä»¶æè¿°ç¬¦è¡¨ï¼Œè¿™æ„å‘³ç€çˆ¶å­è¿›ç¨‹å¯ä»¥è®¿é—®ç›¸åŒçš„æ–‡ä»¶ã€‚ç„¶è€Œï¼Œå®ƒä»¬çš„æ–‡ä»¶åç§»é‡æ˜¯å…±äº«çš„ï¼›å¦‚æœä¸€ä¸ªè¿›ç¨‹æ”¹å˜äº†æ–‡ä»¶çš„åç§»é‡ï¼Œå¦ä¸€ä¸ªè¿›ç¨‹ä¼šå—å½±å“ã€‚</li></ul><p>4.Â <strong><code>fork()</code>Â çš„å…¸å‹åº”ç”¨</strong></p><p><strong>åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹</strong>ï¼š<code>fork()</code>Â å¸¸ç”¨äºåˆ›å»ºå®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰ã€‚å®ˆæŠ¤è¿›ç¨‹é€šå¸¸åœ¨åå°è¿è¡Œï¼Œä¸ä¸ç»ˆç«¯å…³è”ã€‚</p><p><strong>å¤šè¿›ç¨‹æœåŠ¡å™¨</strong>ï¼šåœ¨ä¸€ä¸ªå¤šè¿›ç¨‹æœåŠ¡å™¨ä¸­ï¼ŒæœåŠ¡å™¨è¿›ç¨‹ä¼šÂ <code>fork()</code>Â ä¸€ä¸ªå­è¿›ç¨‹æ¥å¤„ç†æ¯ä¸ªå®¢æˆ·ç«¯è¯·æ±‚ï¼Œä»è€Œå®ç°å¹¶è¡Œå¤„ç†ã€‚</p><p><strong>è¿›ç¨‹éš”ç¦»</strong>ï¼š<code>fork()</code>Â å¯ä»¥ç”¨äºåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹æ¥æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ï¼Œä»è€Œå®ç°è¿›ç¨‹éš”ç¦»ã€‚</p><p>5.Â <strong><code>fork()</code>Â ç›¸å…³çš„å…¶ä»–ç³»ç»Ÿè°ƒç”¨</strong></p><p><strong><code>exec()</code>Â ç³»åˆ—</strong>ï¼š<code>fork()</code>Â é€šå¸¸ä¸Â <code>exec()</code>Â ç³»åˆ—å‡½æ•°ï¼ˆå¦‚Â <code>execl()</code>ã€<code>execvp()</code>ï¼‰ä¸€èµ·ä½¿ç”¨ã€‚<code>fork()</code>Â åˆ›å»ºå­è¿›ç¨‹åï¼Œå­è¿›ç¨‹å¯ä»¥è°ƒç”¨Â <code>exec()</code>Â æ¥åŠ è½½ä¸€ä¸ªæ–°çš„ç¨‹åºã€‚</p><p><strong><code>wait()</code>Â å’ŒÂ <code>waitpid()</code></strong>ï¼šçˆ¶è¿›ç¨‹é€šå¸¸é€šè¿‡Â <code>wait()</code>Â æˆ–Â <code>waitpid()</code>Â ç­‰ç³»ç»Ÿè°ƒç”¨ç­‰å¾…å­è¿›ç¨‹å®Œæˆã€‚è¿™äº›è°ƒç”¨ä¼šé˜»å¡çˆ¶è¿›ç¨‹ï¼Œç›´åˆ°å­è¿›ç¨‹ç»ˆæ­¢ï¼Œå¹¶è¿”å›å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ã€‚</p><p>6.Â <strong>å¸¸è§çš„Â <code>fork()</code>Â é—®é¢˜</strong></p><p><strong>åƒµå°¸è¿›ç¨‹</strong>ï¼šå½“ä¸€ä¸ªå­è¿›ç¨‹ç»“æŸè€Œçˆ¶è¿›ç¨‹å°šæœªè°ƒç”¨Â <code>wait()</code>Â æˆ–Â <code>waitpid()</code>Â æ¥è¯»å–å…¶é€€å‡ºçŠ¶æ€æ—¶ï¼Œå­è¿›ç¨‹ä¼šæˆä¸ºåƒµå°¸è¿›ç¨‹ï¼Œå ç”¨ç³»ç»Ÿèµ„æºã€‚å¯ä»¥é€šè¿‡çˆ¶è¿›ç¨‹è°ƒç”¨ `wait</p><p><strong>ç°ä»£æ›¿ä»£æ–¹æ¡ˆ</strong></p><ul><li><strong><code>pthread</code>Â åº“</strong>ï¼šä¸Â <code>fork</code>Â ä¸åŒï¼Œ<code>pthread</code>Â æä¾›äº†çœŸæ­£çš„å¤šçº¿ç¨‹æ”¯æŒï¼Œå…è®¸å¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œè¿™åœ¨éœ€è¦é«˜æ•ˆå¹¶å‘çš„åœºæ™¯ä¸­æ›´åŠ å®ç”¨ã€‚</li><li><strong><code>CreateProcess</code></strong>ï¼šåœ¨ Windows ä¸Šï¼Œ<code>CreateProcess</code>Â æ˜¯ä¸€ä¸ªæ›´ä¸ºçµæ´»çš„è¿›ç¨‹åˆ›å»ºæœºåˆ¶ï¼Œå®ƒæä¾›äº†æ¯”Â <code>fork</code>Â æ›´ä¸ºä¸°å¯Œçš„é€‰é¡¹å’ŒåŠŸèƒ½ã€‚</li></ul><p>forkåªèƒ½åˆ›å»ºè°ƒç”¨è¯¥å‡½æ•°çš„çº¿ç¨‹çš„å‰¯æœ¬ï¼Œè¿›ç¨‹ä¸­å…¶ä»–è¿è¡Œçš„çº¿ç¨‹ï¼Œforkä¸äºˆå¤„ç†ã€‚è¿™å°±æ„å‘³ç€ï¼Œå¯¹äºå¤šçº¿ç¨‹ç¨‹åºè€Œè¨€ï¼Œå¯„å¸Œæœ›äºé€šè¿‡forkæ¥<strong>åˆ›å»ºä¸€ä¸ªå®Œæ•´è¿›ç¨‹å‰¯æœ¬æ˜¯ä¸å¯è¡Œçš„ã€‚</strong></p><ul><li><strong>ä¸ä¸€è‡´æ€§</strong>ï¼šå¦‚æœåœ¨<strong>å¤šçº¿ç¨‹ç¯å¢ƒ</strong>ä¸­ä½¿ç”¨Â <code>fork()</code>ï¼Œå­è¿›ç¨‹å¯èƒ½ä¼šè¿›å…¥ä¸€ä¸ªä¸ä¸€è‡´çš„çŠ¶æ€ï¼Œå› ä¸ºå®ƒåªç»§æ‰¿äº†ä¸€ä¸ªçº¿ç¨‹çš„çŠ¶æ€ï¼Œè€Œå…¶ä»–çº¿ç¨‹çš„çŠ¶æ€æœªè¢«å¤åˆ¶ã€‚æ¯”å¦‚ï¼Œçˆ¶è¿›ç¨‹ä¸­çš„æŸä¸ªé”å¯èƒ½æ­£åœ¨è¢«å¦ä¸€ä¸ªçº¿ç¨‹æŒæœ‰ï¼Œè€Œå­è¿›ç¨‹ä¸­æ²¡æœ‰è¿™ä¸ªçº¿ç¨‹ï¼Œè¿™å¯èƒ½å¯¼è‡´æ­»é”æˆ–å…¶ä»–åŒæ­¥é—®é¢˜ã€‚</li><li><strong>èµ„æºç«äº‰</strong>ï¼šå¤šçº¿ç¨‹ç¨‹åºä¸­ï¼Œå¤šä¸ªçº¿ç¨‹å¯èƒ½ä¼šç«äº‰åŒä¸€èµ„æºï¼ˆå¦‚æ–‡ä»¶æè¿°ç¬¦ã€ç½‘ç»œè¿æ¥ç­‰ï¼‰ã€‚å½“Â <code>fork()</code>Â åªå¤åˆ¶ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œå­è¿›ç¨‹ä¸­çš„èµ„æºçŠ¶æ€å¯èƒ½ä¸çˆ¶è¿›ç¨‹ä¸ä¸€è‡´ï¼Œå¯¼è‡´èµ„æºç«äº‰é—®é¢˜ã€‚</li></ul><p>Best practice</p><ul><li><strong><code>fork()</code>Â åç«‹å³è°ƒç”¨Â <code>exec()</code></strong>ï¼šåœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­ï¼Œå¦‚æœå¿…é¡»ä½¿ç”¨Â <code>fork()</code>ï¼Œé€šå¸¸çš„åšæ³•æ˜¯åœ¨Â <code>fork()</code>Â ä¹‹åç«‹å³è°ƒç”¨Â <code>exec()</code>Â ç³»åˆ—å‡½æ•°æ¥å¯åŠ¨ä¸€ä¸ªæ–°çš„ç¨‹åºã€‚è¿™å°†å®Œå…¨æ›¿æ¢å­è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œé¿å…äº†ä¸çˆ¶è¿›ç¨‹å…±äº«èµ„æºæˆ–çŠ¶æ€çš„ä¸ä¸€è‡´æ€§é—®é¢˜ã€‚</li><li><strong>ä½¿ç”¨Â <code>pthread_atfork()</code></strong>ï¼šPOSIX æä¾›äº†Â <code>pthread_atfork()</code>Â å‡½æ•°ï¼Œç”¨äºåœ¨Â <code>fork()</code>Â è°ƒç”¨å‰åæ‰§è¡Œç‰¹å®šçš„å‡†å¤‡å’Œæ¢å¤æ“ä½œã€‚é€šè¿‡Â <code>pthread_atfork()</code>ï¼Œå¯ä»¥åœ¨Â <code>fork()</code>Â ä¹‹å‰é”å®šæ‰€æœ‰å…¨å±€èµ„æºï¼Œåœ¨å­è¿›ç¨‹ä¸­é‡Šæ”¾è¿™äº›é”ï¼Œä»è€Œé¿å…æ½œåœ¨çš„ç«äº‰æ¡ä»¶ã€‚</li></ul><h3 id="Libs">Libs</h3><ol><li>ç³»ç»Ÿç®¡ç†<ul><li>systemd: ç³»ç»Ÿå’ŒæœåŠ¡ç®¡ç†å™¨</li><li>cron: å®šæ—¶ä»»åŠ¡ç®¡ç†</li><li>top/htop: ç³»ç»Ÿèµ„æºç›‘æ§</li><li>ps: è¿›ç¨‹çŠ¶æ€æŸ¥çœ‹</li><li>journalctl: æ—¥å¿—æŸ¥çœ‹</li><li>dmesg: å†…æ ¸æ—¥å¿—æŸ¥çœ‹</li></ul></li><li>æ–‡ä»¶ç®¡ç†<ul><li>ls, cp, mv, rm: åŸºæœ¬æ–‡ä»¶æ“ä½œ</li><li>find: æ–‡ä»¶æœç´¢</li><li>grep: æ–‡æœ¬æœç´¢</li><li>tar, gzip, bzip2: æ–‡ä»¶å‹ç¼©å’Œå½’æ¡£</li><li>chmod, chown: æ–‡ä»¶æƒé™ç®¡ç†</li></ul></li><li>æ–‡æœ¬å¤„ç†<ul><li>vim, nano: æ–‡æœ¬ç¼–è¾‘å™¨</li><li>sed, awk: æ–‡æœ¬å¤„ç†å·¥å…·</li><li>cat, less, more: æ–‡ä»¶æŸ¥çœ‹</li></ul></li><li>ç½‘ç»œå·¥å…·<ul><li>ifconfig/ip: ç½‘ç»œæ¥å£é…ç½®</li><li>ping, traceroute: ç½‘ç»œè¯Šæ–­</li><li>ssh: è¿œç¨‹ç™»å½•</li><li>curl, wget: æ–‡ä»¶ä¸‹è½½</li><li>netstat, ss: ç½‘ç»œè¿æ¥çŠ¶æ€</li><li>iptables/nftables: é˜²ç«å¢™ç®¡ç†</li></ul></li></ol><p>Systemd æ˜¯è®¸å¤šç°ä»£ Linux å‘è¡Œç‰ˆä¸­ä½¿ç”¨çš„åˆå§‹åŒ–ç³»ç»Ÿå’Œç³»ç»Ÿç®¡ç†å™¨ã€‚ä»¥ä¸‹æ˜¯å…³äº systemd çš„ä¸€äº›é‡è¦æ¦‚å¿µå’Œå¸¸ç”¨å‘½ä»¤ï¼š</p><ol><li>æ ¸å¿ƒæ¦‚å¿µï¼š<ul><li>Unitï¼šsystemd ç®¡ç†çš„åŸºæœ¬å¯¹è±¡ï¼ŒåŒ…æ‹¬æœåŠ¡ã€æŒ‚è½½ç‚¹ã€è®¾å¤‡å’Œç½‘ç»œé…ç½®ç­‰</li><li>Serviceï¼šæœ€å¸¸è§çš„ unit ç±»å‹ï¼Œç”¨äºç®¡ç†å®ˆæŠ¤è¿›ç¨‹</li><li>Targetï¼šä¸€ç»„ unit çš„é›†åˆï¼Œç±»ä¼¼äºè¿è¡Œçº§åˆ«</li></ul></li></ol><p>Unit æ–‡ä»¶ç»“æ„</p><p>ä¸€ä¸ªå…¸å‹çš„Â <code>.service</code>Â å•å…ƒæ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`[Unit]</span></span><br><span class="line"><span class="string">Description=My Custom Service</span></span><br><span class="line"><span class="string">After=network.target</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Service]</span></span><br><span class="line"><span class="string">ExecStart=/usr/bin/my-service</span></span><br><span class="line"><span class="string">ExecReload=/bin/kill -HUP $MAINPID</span></span><br><span class="line"><span class="string">ExecStop=/bin/kill $MAINPID</span></span><br><span class="line"><span class="string">Restart=on-failure</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Install]</span></span><br><span class="line"><span class="string">WantedBy=multi-user.target`</span></span><br><span class="line"></span><br><span class="line"><span class="string">`[Unit]`</span>ï¼šæè¿°å•å…ƒå’Œå…¶ä¾èµ–å…³ç³»ã€‚</span><br><span class="line"></span><br><span class="line"><span class="string">`[Service]`</span>ï¼šå®šä¹‰æœåŠ¡å¦‚ä½•å¯åŠ¨ã€åœæ­¢ï¼Œä»¥åŠé‡å¯ç­–ç•¥ã€‚</span><br><span class="line"></span><br><span class="line"><span class="string">`[Install]`</span>ï¼šå®šä¹‰å•å…ƒå¦‚ä½•è¢«å¯ç”¨æˆ–å…³è”åˆ°å…¶ä»–ç›®æ ‡ã€‚</span><br></pre></td></tr></table></figure><p>æ³¨æ„äº‹é¡¹</p><p><strong>æƒé™</strong>ï¼šè®¸å¤šÂ <code>systemctl</code>Â å‘½ä»¤éœ€è¦ä»¥Â <code>root</code>Â æƒé™è¿è¡Œã€‚</p><p><strong>é…ç½®ä¿®æ”¹åé‡è½½</strong>ï¼šä¿®æ”¹Â <code>.service</code>Â æ–‡ä»¶åï¼Œéœ€è¦è¿è¡ŒÂ <code>systemctl daemon-reload</code>Â æ¥é‡æ–°åŠ è½½é…ç½®ã€‚</p><p><strong>å®‰å…¨æ€§</strong>ï¼š<code>systemd</code>Â æä¾›äº†è®¸å¤šå®‰å…¨é€‰é¡¹ï¼Œå¯ä»¥é™åˆ¶æœåŠ¡çš„æƒé™å’Œèµ„æºä½¿ç”¨ã€‚</p><p>Endian refers to the order in which bytes are arranged in memory, particularly in multi-byte data types like integers or floating-point numbers. There are two main types of endianess: Big-endian and Little-endian.</p><ol><li><strong>Big-endian:</strong> In this format, the most significant byte (the one with the highest address) is stored first. That means the leftmost byte is stored at the lowest memory address. Itâ€™s like reading a number from left to right.</li><li><strong>Little-endian:</strong> Conversely, in little-endian format, the least significant byte (the one with the lowest address) is stored first. The rightmost byte is stored at the lowest memory address. Itâ€™s like reading a number from right to left.</li></ol><p>For example, letâ€™s take a 32-bit integer <strong><code>0x12345678</code></strong>:</p><ul><li>In Big-endian:<ul><li>Memory: <strong><code>12 34 56 78</code></strong></li><li>Addresses: <strong><code>0x00 0x01 0x02 0x03</code></strong></li></ul></li><li>In Little-endian:<ul><li>Memory: <strong><code>78 56 34 12</code></strong></li><li>Addresses: <strong><code>0x00 0x01 0x02 0x03</code></strong></li></ul></li></ul><p>The choice between big-endian and little-endian is important in systems where data needs to be communicated between different architectures, as interpreting multi-byte data requires knowing the byte order. Some architectures use big-endian (e.g., PowerPC, SPARC), while others use little-endian (e.g., x86, ARM).</p><ol><li>**åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼š**å°†æ•°æ®ç»“æ„è½¬æ¢ä¸ºå­—èŠ‚æµï¼ˆåºåˆ—åŒ–ï¼‰æˆ–ä»å­—èŠ‚æµé‡å»ºæ•°æ®ç»“æ„ï¼ˆååºåˆ—åŒ–ï¼‰æ—¶ï¼Œå­—èŠ‚é¡ºåºå¯èƒ½ä¼šå˜å¾—ç›¸å…³ã€‚åºåˆ—åŒ–åº“æˆ–åè®®å¯èƒ½ä¼šéšå¼æˆ–æ˜¾å¼æŒ‡å®šæˆ–å¤„ç†å­—èŠ‚é¡ºåºã€‚</li><li>ç½‘ç»œä¼ è¾“åè®®é€šå¸¸å®šä¹‰ä¸ºbigEndian</li><li>æ–‡ä»¶è¯»å–ä¿å­˜</li><li>**è·¨å¹³å°å…¼å®¹æ€§ï¼š**å¼€å‘åœ¨ä¸åŒæ¶æ„ä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºå¯èƒ½éœ€è¦æ³¨æ„å­—èŠ‚é¡ºåºï¼Œä»¥ç¡®ä¿åœ¨ç³»ç»Ÿä¹‹é—´å…±äº«æ•°æ®æ—¶æ•°æ®çš„ä¸€è‡´æ€§å’Œæ­£ç¡®æ€§ã€‚</li></ol><p>è®¸å¤šç°ä»£é«˜çº§ç¼–ç¨‹è¯­è¨€é€šè¿‡æä¾›å¤„ç†æ•°æ®è¡¨ç¤ºå’Œè½¬æ¢çš„æ ‡å‡†åŒ–æ–¹æ³•ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸ŠæŠ½è±¡äº†å­—èŠ‚é¡ºåºé—®é¢˜ã€‚ä¾‹å¦‚ï¼š</p><ul><li>Pythonã€Java æˆ– C# ç­‰è¯­è¨€æä¾›äº†æ˜¾å¼å¤„ç†å­—èŠ‚æ’åºçš„åº“æˆ–æ–¹æ³•ã€‚åœ¨Javaä¸­ï¼Œ<strong><code>java.nio.ByteBuffer</code></strong> ç±»å¯ä»¥ç”¨äºå¤„ç†å­—èŠ‚é¡ºåºã€‚å®ƒæä¾›äº† <strong><code>order()</code></strong> æ–¹æ³•ï¼Œå…è®¸ä½ è®¾ç½®å­—èŠ‚é¡ºåºä¸ºå¤§ç«¯æˆ–å°ç«¯ã€‚</li><li>åºåˆ—åŒ–åº“é€šå¸¸åœ¨å†…éƒ¨å¤„ç†å­—èŠ‚åºï¼Œå°†å…¶ä»å¼€å‘äººå‘˜æ‰‹ä¸­æŠ½è±¡å‡ºæ¥ã€‚</li><li>æ ‡å‡†åŒ–ç½‘ç»œåè®®å®šä¹‰äº†å­—èŠ‚é¡ºåºçº¦å®šï¼ˆä¾‹å¦‚ï¼ŒHTTP å¯¹æŸäº›æ•°æ®ä½¿ç”¨å¤§ç«¯å­—èŠ‚åºï¼‰ã€‚</li></ul><h3 id="å†…å­˜æ³„æ¼ï¼ˆMemory-Leakï¼‰ï¼š"><strong>å†…å­˜æ³„æ¼ï¼ˆMemory Leakï¼‰ï¼š</strong></h3><p>å†…å­˜æ³„æ¼æ˜¯æŒ‡è®¡ç®—æœºç¨‹åºä¸­åˆ†é…çš„å†…å­˜ç©ºé—´åœ¨ä¸å†éœ€è¦æ—¶æœªè¢«é‡Šæ”¾ï¼Œå¯¼è‡´ç³»ç»Ÿä¸­çš„å¯ç”¨å†…å­˜æŒç»­å‡å°‘ã€‚å½“ç¨‹åºä¸­çš„å†…å­˜æ³„æ¼ä¸¥é‡æ—¶ï¼Œæœ€ç»ˆå¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿæ€§èƒ½ä¸‹é™ã€ç¨‹åºå´©æºƒç”šè‡³ç³»ç»Ÿå´©æºƒã€‚<strong>å†…å­˜æ³„æ¼é€šå¸¸ç”±ç¼–ç¨‹é”™è¯¯æˆ–è®¾è®¡é—®é¢˜å¼•èµ·ï¼Œä¾‹å¦‚å¿˜è®°é‡Šæ”¾åŠ¨æ€åˆ†é…çš„å†…å­˜ã€å¾ªç¯å¼•ç”¨ã€æŒ‡é’ˆé—®é¢˜ç­‰</strong>ã€‚ä¸ºäº†è§£å†³å†…å­˜æ³„æ¼é—®é¢˜ï¼Œç¨‹åºå‘˜éœ€è¦å®šæœŸæ£€æŸ¥å’Œæ¸…ç†ä¸å†ä½¿ç”¨çš„å†…å­˜ï¼Œæˆ–è€…ä½¿ç”¨ä¸“é—¨çš„å·¥å…·æ¥å¸®åŠ©è¯†åˆ«å’Œè§£å†³å†…å­˜æ³„æ¼ã€‚</p><p>æŒ‡é’ˆæœ¬è´¨ä¸Šå¯ä»¥åœ¨æ•´ä¸ªOSå…è®¸çš„<a href="https://www.zhihu.com/search?q=%E5%86%85%E5%AD%98%E5%9D%97&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A%2216303748%22%7D">å†…å­˜å—</a>ä¸Šä»»æ„ç§»åŠ¨ï¼Œæœ‰æ—¶å€™è¿˜ä¼šè·¨ç•Œåˆ°å…¶ä»–å†…å­˜å—ä¸Šå»ã€‚æœ¬è´¨ä¸Šå®ƒç¦»æœºå™¨è¯­è¨€å¤ªè¿‘ï¼Œèƒ½å¤Ÿé€ æˆéå¸¸å·¨å¤§çš„<a href="https://www.zhihu.com/search?q=%E5%A4%96%E5%BB%B6%E6%80%A7&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A%2216303748%22%7D">å¤–å»¶æ€§</a>ç ´åã€‚ä¸€ä¸ªæœ€ç»å…¸çš„ä¾‹å­å°±æ˜¯å†…å­˜è·µè¸é€ æˆçš„ç¼“å†²åŒºæº¢å‡ºã€‚</p><p>Javaè¯­è¨€ä¸­æ²¡æœ‰æ˜ç¡®çš„æŒ‡é’ˆæ¦‚å¿µï¼Œå®ƒä½¿ç”¨å¼•ç”¨ï¼ˆreferenceï¼‰æ¥æ“ä½œå¯¹è±¡ã€‚è¿™æ˜¯ä¸ºäº†æé«˜å®‰å…¨æ€§å’Œç®€åŒ–å¼€å‘ï¼Œå› ä¸ºæŒ‡é’ˆå®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼ã€è¶Šç•Œè®¿é—®å’Œæ‚¬ç©ºæŒ‡é’ˆç­‰é—®é¢˜ã€‚Javaçš„å¯¹è±¡å¼•ç”¨æ˜¯ç”±Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ç®¡ç†çš„ï¼Œè¿™ç§æ–¹å¼æœ‰åŠ©äºå‡å°‘å¯¹å†…å­˜çš„ç›´æ¥æ“ä½œï¼Œä»è€Œæé«˜äº†å®‰å…¨æ€§å’Œå¯é æ€§ã€‚</p><p>C++ åˆ©ç”¨ æ™ºèƒ½æŒ‡é’ˆè¾¾æˆçš„æ•ˆæœæ˜¯ï¼šä¸€æ—¦æŸå¯¹è±¡ä¸å†è¢«å¼•ç”¨ï¼Œç³»ç»Ÿåˆ»ä¸å®¹ç¼“ï¼Œç«‹åˆ»å›æ”¶å†…å­˜</p><p>ä¸€ä¸ªè§£å†³<strong>ç©ºæ‚¬æŒ‡é’ˆ</strong>çš„åŠæ³•æ˜¯ï¼Œå¼•å…¥ä¸€å±‚é—´æ¥æ€§ï¼Œè®© p1 å’Œ p2 æ‰€æŒ‡çš„å¯¹è±¡æ°¸ä¹…æœ‰ æ•ˆã€‚</p><p>åœ¨Javaä¸­ï¼Œå¸¸è§çš„å†…å­˜æ³„æ¼æƒ…å†µåŒ…æ‹¬ï¼š</p><ol><li><strong>é•¿æœŸæŒæœ‰å¯¹è±¡çš„å¼•ç”¨ï¼š</strong> å¦‚æœä¸€ä¸ªå¯¹è±¡è¢«åˆ†é…äº†å†…å­˜ï¼Œå¹¶è¢«å­˜å‚¨åœ¨æŸä¸ªå…¨å±€å˜é‡ã€é™æ€å˜é‡ã€é›†åˆæˆ–ç¼“å­˜ä¸­ï¼Œä½†åœ¨åç»­çš„ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­æœªé‡Šæ”¾å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼Œå³ä½¿è¯¥å¯¹è±¡ä¸å†éœ€è¦ï¼Œä¹Ÿæ— æ³•è¢«åƒåœ¾å›æ”¶ã€‚</li><li><strong>ç›‘å¬å™¨æœªåŠæ—¶ç§»é™¤ï¼š</strong> å½“ä¸€ä¸ªå¯¹è±¡ä½œä¸ºç›‘å¬å™¨æ³¨å†Œåˆ°æŸä¸ªäº‹ä»¶ä¸Šï¼Œä½†åœ¨å¯¹è±¡ä¸å†éœ€è¦æ—¶ï¼Œæœªå–æ¶ˆæ³¨å†Œæˆ–è€…ç§»é™¤å¯¹ç›‘å¬å™¨çš„å¼•ç”¨ï¼Œè¿™å¯èƒ½å¯¼è‡´å¯¹è±¡æ— æ³•è¢«åƒåœ¾å›æ”¶ã€‚</li><li><strong>æœªå…³é—­èµ„æºï¼š</strong> ä¾‹å¦‚æ‰“å¼€äº†æ–‡ä»¶ã€æ•°æ®åº“è¿æ¥ã€ç½‘ç»œè¿æ¥ç­‰èµ„æºï¼Œä½†åœ¨ä½¿ç”¨å®Œåæœªæ˜¾å¼åœ°å…³é—­æˆ–é‡Šæ”¾è¿™äº›èµ„æºï¼Œä¼šå¯¼è‡´èµ„æºæ³„æ¼ï¼Œè¿›è€Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ã€‚</li><li><strong>å¾ªç¯å¼•ç”¨ï¼š</strong> å½“ä¸¤ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ç›¸äº’å¼•ç”¨ï¼Œå¹¶ä¸”è¿™äº›å¯¹è±¡ä¹‹é—´å½¢æˆäº†ä¸€ä¸ªç¯å½¢çš„å¼•ç”¨ç»“æ„ï¼Œå³ä½¿è¿™äº›å¯¹è±¡åœ¨å¤–éƒ¨ä¸å†è¢«ä½¿ç”¨ï¼Œä½†ç”±äºå®ƒä»¬äº’ç›¸å¼•ç”¨å¯¼è‡´å®ƒä»¬ä¹‹é—´çš„å¼•ç”¨è®¡æ•°ä¸ä¸ºé›¶ï¼Œæ— æ³•è¢«åƒåœ¾å›æ”¶ã€‚</li></ol><p>ä¸ºé¿å…å†…å­˜æ³„æ¼ï¼Œéœ€è¦è¿›è¡Œè‰¯å¥½çš„å†…å­˜ç®¡ç†å’Œç¼–ç¨‹å®è·µï¼š</p><ul><li>åŠæ—¶é‡Šæ”¾ä¸å†éœ€è¦çš„å¯¹è±¡å¼•ç”¨ï¼Œå¯ä»¥æ‰‹åŠ¨å°†å¯¹è±¡å¼•ç”¨ç½®ä¸ºnullã€‚</li><li>åœ¨ä½¿ç”¨å®Œèµ„æºååŠæ—¶å…³é—­æ–‡ä»¶ã€æ•°æ®åº“è¿æ¥ã€ç½‘ç»œè¿æ¥ç­‰ã€‚</li><li>é¿å…å¾ªç¯å¼•ç”¨ï¼Œä½¿ç”¨å¼±å¼•ç”¨æˆ–è½¯å¼•ç”¨æ¥é¿å…å½¢æˆæ°¸ä¹…æ€§çš„å¯¹è±¡å¼•ç”¨ã€‚</li><li>å¯¹äºç›‘å¬å™¨ç­‰æ³¨å†Œçš„å¯¹è±¡ï¼ŒåŠæ—¶å–æ¶ˆæ³¨å†Œæˆ–ç§»é™¤å¼•ç”¨ã€‚</li></ul><p>Golang:</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s0 string <span class="comment">// ä¸€ä¸ªåŒ…çº§å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸€ä¸ªæ¼”ç¤ºç›®çš„å‡½æ•°ã€‚</span></span><br><span class="line">func <span class="title function_">f</span>(<span class="params">s1 string</span>) {</span><br><span class="line">    <span class="comment">// s0 s1 å…±äº«åŒä¸€å—å†…å­˜ç©ºé—´ï¼Œs0æ­£åœ¨è¢«ä½¿ç”¨æ‰€ä»¥ä¸ä¼š</span></span><br><span class="line">    <span class="comment">//é‡Šæ”¾ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº†50å­—èŠ‚çš„å†…å­˜è¿˜æœ‰2^20-50æœªè¢«ä½¿ç”¨ï¼Œé€ æˆå¾ˆå¤§çš„å†…å­˜æ³„æ¼</span></span><br><span class="line">    s0 = s1[:<span class="number">50</span>]</span><br><span class="line">    <span class="comment">// Solution: Soï¼Œæœ‰è¾ƒå¤§èŒƒå›´çš„å†…å­˜æ³„æ¼æ—¶  åˆ›å»ºs1çš„ä¸€ä¸ªå‰¯æœ¬çš„å­ä¸²ï¼Œè€Œä¸æ˜¯ç›´æ¥å¼•ç”¨s1çš„å­ä¸²ã€‚</span></span><br><span class="line">    s0 = <span class="title function_">string</span>([]<span class="title function_">byte</span>(s1[:<span class="number">50</span>]))</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">func <span class="title function_">demo</span>(<span class="params"></span>) {</span><br><span class="line">    s := <span class="title function_">createStringWithLengthOnHeap</span>(<span class="number">1</span> &lt;&lt; <span class="number">20</span>) <span class="comment">// 1M bytes</span></span><br><span class="line">    <span class="title function_">f</span>(s)</span><br><span class="line">}</span><br><span class="line">func <span class="title function_">createStringWithLengthOnHeap</span>(length int) string {</span><br><span class="line">    <span class="comment">// Create a byte slice of the specified length</span></span><br><span class="line">    strBytes := <span class="title function_">make</span>([]byte, length)</span><br><span class="line">    fillChar := <span class="string">'a'</span></span><br><span class="line">    <span class="keyword">for</span> i := range strBytes {</span><br><span class="line">        strBytes[i] = <span class="title function_">byte</span>(fillChar)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Convert the byte slice to a string and return</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">string</span>(strBytes)</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="è¿›ç¨‹é—´é€šä¿¡IPC"><strong>è¿›ç¨‹é—´é€šä¿¡IPC</strong></h2><p><strong>å¯é€‰ç”¨çš„6ç§æ–¹æ³•</strong></p><ol><li><p>ç®¡é“ Linuxç®¡é“æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶æè¿°ç¬¦çš„ã€Œ<code>|</code>ã€ç«–çº¿å°±æ˜¯ä¸€ä¸ª<strong>ç®¡é“</strong>ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯å°†å‰ä¸€ä¸ªå‘½ä»¤ï¼ˆ<code>ps auxf</code>ï¼‰çš„è¾“å‡ºï¼Œä½œä¸ºåä¸€ä¸ªå‘½ä»¤ï¼ˆ<code>grep mysql</code>ï¼‰çš„è¾“å…¥ï¼Œä»è¿™åŠŸèƒ½æè¿°ï¼Œå¯ä»¥çœ‹å‡º<strong>ç®¡é“ä¼ è¾“æ•°æ®æ˜¯å•å‘çš„</strong>ï¼Œå¦‚æœæƒ³ç›¸äº’é€šä¿¡ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸¤ä¸ªç®¡é“æ‰è¡Œã€‚ç®¡é“æ˜¯é€šè¿‡è°ƒç”¨ pipe å‡½æ•°åˆ›å»ºçš„ï¼Œfd[0] ç”¨äºè¯»ï¼Œfd[1] ç”¨äºå†™ã€‚Channelæ˜¯Goè¯­è¨€ä¸­çš„ä¸€ç§ç‰¹æ®Šç±»å‹ï¼Œç”¨äºåœ¨Goroutineä¹‹é—´è¿›è¡Œé€šä¿¡å’ŒåŒæ­¥ã€‚</p></li><li><p>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessage Queueï¼‰ï¼šä»¥ä¸Šä¸‰ç§æ–¹å¼åªé€‚åˆä¼ é€’ä¼ é€’å°‘é‡ä¿¡æ¯ï¼ŒPOSIX æ ‡å‡†ä¸­ å®šä¹‰äº†æ¶ˆæ¯é˜Ÿåˆ—ç”¨äº<strong>è¿›ç¨‹é—´æ•°æ®é‡è¾ƒå¤šå°æ•°æ®çš„é€šä¿¡</strong>ã€‚è¿›ç¨‹å¯ä»¥å‘é˜Ÿåˆ—æ·»åŠ æ¶ˆæ¯ï¼Œè¢«èµ‹äºˆè¯»æƒ é™çš„è¿›ç¨‹åˆ™å¯ä»¥ä»é˜Ÿåˆ—æ¶ˆè´¹æ¶ˆæ¯ã€‚æ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·æ‰¿è½½ä¿¡æ¯é‡å°‘ï¼Œç®¡é“åªèƒ½ç”¨äºæ—  æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼ºç‚¹ï¼Œä½†å®æ—¶æ€§ç›¸å¯¹å—é™ã€‚</p></li><li><p>ä¿¡å·ï¼ˆSignalï¼‰ï¼šä¿¡å·ç”¨äºé€šçŸ¥ç›®æ ‡è¿›ç¨‹æœ‰æŸç§äº‹ä»¶å‘ç”Ÿï¼Œé™¤äº†ç”¨äºè¿›ç¨‹é—´é€šä¿¡å¤–ï¼Œè¿› ç¨‹è¿˜å¯ä»¥å‘é€ä¿¡å·ç»™è¿›ç¨‹è‡ªèº«ã€‚ä¿¡å·çš„å…¸å‹åº”ç”¨æ˜¯ kill å‘½ä»¤  <code>kill -l</code>è¿è¡Œåœ¨ shell ç»ˆç«¯çš„è¿›ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é”®ç›˜è¾“å…¥æŸäº›ç»„åˆé”®çš„æ—¶å€™ï¼Œç»™è¿›ç¨‹å‘é€ä¿¡å·ã€‚ä¾‹å¦‚Ctrl+C äº§ç”ŸÂ <code>SIGINT</code>Â ä¿¡å·ï¼Œè¡¨ç¤ºç»ˆæ­¢è¯¥è¿›ç¨‹ï¼› - Ctrl+Z äº§ç”ŸÂ <code>SIGTSTP</code>Â ä¿¡å·ï¼Œè¡¨ç¤ºåœæ­¢è¯¥è¿›ç¨‹ï¼Œä½†è¿˜æœªç»“æŸï¼› å¦‚æœè¿›ç¨‹åœ¨åå°è¿è¡Œï¼Œå¯ä»¥é€šè¿‡Â <code>kill</code>Â å‘½ä»¤çš„æ–¹å¼ç»™è¿›ç¨‹å‘é€ä¿¡å·ï¼Œä½†å‰æéœ€è¦çŸ¥é“è¿è¡Œä¸­çš„è¿›ç¨‹ PID å·ï¼Œ</p><p>ä¾‹å¦‚ï¼š - kill -9 1050 ï¼Œè¡¨ç¤ºç»™ PID ä¸º 1050 çš„è¿›ç¨‹å‘é€Â <code>SIGKILL</code>Â ä¿¡å·ï¼Œç”¨æ¥ç«‹å³ç»“æŸè¯¥è¿›ç¨‹ï¼› æ‰€ä»¥ï¼Œä¿¡å·äº‹ä»¶çš„æ¥æºä¸»è¦æœ‰ç¡¬ä»¶æ¥æºï¼ˆå¦‚é”®ç›˜ Cltr+C ï¼‰å’Œè½¯ä»¶æ¥æºï¼ˆå¦‚ kill å‘½ä»¤ï¼‰ã€‚ ä¿¡å·æ˜¯è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ä¸­<strong>å”¯ä¸€çš„å¼‚æ­¥é€šä¿¡æœºåˆ¶</strong></p></li><li><p>ä¿¡å·é‡ï¼ˆSemaphoreï¼‰ï¼šä¸ºäº†é˜²æ­¢å¤šè¿›ç¨‹ç«äº‰å…±äº«èµ„æºï¼Œäº’æ–¥å’ŒåŒæ­¥é—®é¢˜ã€‚<strong>ä¿¡å·é‡</strong>å°±å®ç°äº†è¿™ä¸€ä¿æŠ¤æœºåˆ¶ã€‚PVæ“ä½œï¼Œä¿¡å·é‡ç”¨äºä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´åŒæ­¥åä½œæ‰‹æ®µï¼Œå®ƒç›¸å½“äºæ“ä½œç³»ç»Ÿæ ä¾›çš„ä¸€ä¸ªç‰¹æ®Šå˜é‡ï¼Œç¨‹åºå¯ä»¥åœ¨ä¸Šé¢è¿›è¡Œ wait() å’Œ notify() æ“ä½œã€‚è¿›ç¨‹ A åœ¨è®¿é—®å…±äº«å†…å­˜å‰ï¼Œå…ˆæ‰§è¡Œäº† P æ“ä½œï¼Œç”±äºä¿¡å·é‡çš„åˆå§‹å€¼ä¸º 1ï¼Œæ•…åœ¨è¿›ç¨‹ A æ‰§è¡Œ P æ“ä½œåä¿¡å·é‡å˜ä¸º 0ï¼Œè¡¨ç¤ºå…±äº«èµ„æºå¯ç”¨ï¼Œäºæ˜¯è¿›ç¨‹ A å°±å¯ä»¥è®¿é—®å…±äº«å†…å­˜ã€‚ è‹¥æ­¤æ—¶ï¼Œè¿›ç¨‹ B ä¹Ÿæƒ³è®¿é—®å…±äº«å†…å­˜ï¼Œæ‰§è¡Œäº† P æ“ä½œï¼Œç»“æœä¿¡å·é‡å˜ä¸ºäº† -1ï¼Œè¿™å°±æ„å‘³ç€ä¸´ç•Œèµ„æº<strong>å·²è¢«å ç”¨</strong>ï¼Œå› æ­¤è¿›ç¨‹ B è¢«é˜»å¡ã€‚ ç›´åˆ°è¿›ç¨‹ A è®¿é—®å®Œå…±äº«å†…å­˜ï¼Œæ‰ä¼šæ‰§è¡Œ V æ“ä½œï¼Œä½¿å¾—ä¿¡å·é‡æ¢å¤ä¸º 0ï¼Œæ¥ç€å°±ä¼šå”¤é†’é˜»å¡ä¸­çš„çº¿ç¨‹ Bï¼Œä½¿å¾—è¿›ç¨‹ B å¯ä»¥è®¿é—®å…±äº«å†…å­˜ï¼Œæœ€åå®Œæˆå…±äº«å†…å­˜çš„è®¿é—®åï¼Œæ‰§è¡Œ V æ“ä½œï¼Œä½¿ä¿¡å·é‡æ¢å¤åˆ°åˆå§‹å€¼ 1ã€‚</p></li><li><p><strong>å…±äº«å†…å­˜ï¼ˆShared Memoryï¼‰</strong>ï¼šå…è®¸å¤šä¸ªè¿›ç¨‹è®¿é—®åŒä¸€å—å…¬å…±çš„å†…å­˜ç©ºé—´ï¼Œè¿™æ˜¯æ•ˆç‡æœ€é«˜çš„è¿›ç¨‹é—´é€šä¿¡å½¢å¼ã€‚<strong>åŸæœ¬æ¯ä¸ªè¿›ç¨‹çš„å†…å­˜åœ°å€ç©ºé—´éƒ½æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œä½†æ“ä½œç³»ç»Ÿæä¾›äº†è®©è¿›ç¨‹ä¸»åŠ¨åˆ›å»ºã€æ˜ å°„ã€åˆ†ç¦»ã€æ§åˆ¶æŸä¸€å—å†…å­˜çš„ç¨‹åºæ¥å£ã€‚å½“ä¸€å—å†…å­˜è¢«å¤šè¿›ç¨‹å…±äº«</strong>æ—¶ï¼Œå„ä¸ªè¿›ç¨‹å¾€å¾€ä¼šä¸å…¶å®ƒé€šä¿¡æœºåˆ¶ï¼Œè­¬å¦‚ä¿¡å·é‡ç»“åˆä½¿ç”¨ï¼Œæ¥è¾¾åˆ°è¿›ç¨‹é—´åŒæ­¥åŠäº’æ–¥çš„åè°ƒæ“ä½œã€‚</p></li><li><p>å¥—æ¥å­—æ¥å£ï¼ˆSocketï¼‰RPcï¼š<strong>æ¶ˆæ¯é˜Ÿåˆ—å’Œå…±äº«å†…å­˜åªé€‚åˆå•æœºå¤šè¿›ç¨‹é—´çš„é€šä¿¡ï¼Œå¥—æ¥å­—æ¥å£ æ˜¯æ›´ä¸ºæ™®é€‚çš„è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼Œå¯ç”¨äºä¸åŒæœºå™¨ä¹‹é—´çš„è¿›ç¨‹é€šä¿¡</strong>ã€‚å¥—æ¥å­—ï¼ˆSocketï¼‰èµ· åˆæ˜¯ç”± UNIX ç³»ç»Ÿçš„ BSD åˆ†æ”¯å¼€å‘å‡ºæ¥çš„ï¼Œç°åœ¨å·²ç»ç§»æ¤åˆ°æ‰€æœ‰ä¸»æµçš„æ“ä½œç³»ç»Ÿä¸Šã€‚</p></li></ol><p>å½“ä»…é™äºæœ¬æœºè¿›ç¨‹é—´é€šä¿¡æ—¶ï¼Œå¥—æ¥å­—æ¥å£æ˜¯è¢«ä¼˜åŒ–è¿‡çš„ï¼Œä¸ä¼šç»è¿‡ç½‘ç»œåè®®æ ˆï¼Œä¸éœ€è¦æ‰“åŒ…æ‹†åŒ…ã€è®¡ç®—æ ¡éªŒå’Œã€ç»´æŠ¤åºå·å’Œåº”ç­”ç­‰æ“ä½œï¼Œåªæ˜¯ç®€å•åœ°å°†åº”ç”¨å±‚æ•° æ®ä»ä¸€ä¸ªè¿›ç¨‹æ‹·è´åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™ç§è¿›ç¨‹é—´é€šä¿¡æ–¹å¼æœ‰ä¸ªä¸“åçš„åç§°ï¼šUNIX Domain Socketï¼Œåˆå«åš IPC Socketã€‚</p><ul><li><strong>åªæ”¯æŒåŠåŒå·¥é€šä¿¡ï¼š</strong> æ„å‘³ç€æ•°æ®ä¼ è¾“æ˜¯å•å‘äº¤æ›¿çš„ï¼Œé€šä¿¡çš„ä¸€æ–¹æ—¢æ˜¯å‘é€è€…ä¹Ÿæ˜¯æ¥æ”¶è€…ï¼Œä½†åŒä¸€æ—¶é—´åªèƒ½è¿›è¡Œä¸€ç§æ“ä½œã€‚</li><li><strong>ä»…é™äºçˆ¶å­è¿›ç¨‹æˆ–å…„å¼Ÿè¿›ç¨‹ä¹‹é—´ä½¿ç”¨ï¼š</strong> ç”±äºUNIX Domain Socketæ˜¯æœ¬åœ°é€šä¿¡çš„ä¸€ç§æ–¹å¼ï¼Œå› æ­¤é€šå¸¸ç”¨äºåŒä¸€å°æœºå™¨ä¸Šçš„è¿›ç¨‹é—´é€šä¿¡ï¼Œæ¯”å¦‚çˆ¶å­è¿›ç¨‹æˆ–å…„å¼Ÿè¿›ç¨‹ä¹‹é—´ã€‚</li></ul><ol><li><strong>ç©ºåˆ†å¤ç”¨æŠ€æœ¯ï¼ˆSwappingï¼‰ï¼š</strong> ä¸­ã€‚è¿™ç§æŠ€æœ¯èƒ½å¤Ÿæœ‰æ•ˆåœ°æ‰©å±•å¯ç”¨å†…å­˜çš„å¤§å°ã€‚ç©ºåˆ†å¤ç”¨éœ€è¦å¿«é€Ÿçš„å†…å­˜åœ°å€æ˜ å°„ï¼Œä½¿å¾—æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿…é€Ÿå°†è™šæ‹Ÿå†…å­˜åœ°å€è½¬æ¢ä¸ºå®é™…ç‰©ç†å†…å­˜åœ°å€ã€‚è¿™ç§æ˜ å°„æ˜¯ç”±CPUä¸­çš„å­˜å‚¨å™¨ç®¡ç†å•å…ƒï¼ˆMemory Management Unitï¼ŒMMUï¼‰è´Ÿè´£å®Œæˆçš„ã€‚</li><li><strong>æ—¶åˆ†å¤ç”¨æŠ€æœ¯ï¼ˆTime Division Multiplexingï¼ŒTDMï¼‰ï¼š</strong> æ—¶åˆ†å¤ç”¨æ˜¯ä¸€ç§é€šä¿¡æŠ€æœ¯ï¼Œç”¨äºå¤šè·¯å¤ç”¨ï¼Œè®©å¤šä¸ªç”¨æˆ·æˆ–ä¿¡å·å…±äº«åŒä¸€ä¸ªé€šä¿¡ä¿¡é“æˆ–èµ„æºã€‚åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæ—¶åˆ†å¤ç”¨ä¹Ÿå¯ä»¥è¢«ç†è§£ä¸ºåœ¨å•ä¸ªCPUä¸Šæ‰§è¡Œå¤šä¸ªè¿›ç¨‹çš„æŠ€æœ¯ã€‚è¿™ç§æŠ€æœ¯ä¼šåˆ†å‰²æ—¶é—´æˆä¸ºå¤šä¸ªæ—¶é—´ç‰‡ï¼ˆTime Sliceï¼‰ï¼Œæ¯ä¸ªæ—¶é—´ç‰‡åˆ†é…ç»™ä¸åŒçš„è¿›ç¨‹ï¼Œä½¿å¾—å®ƒä»¬è½®æµå ç”¨CPUå¹¶æ‰§è¡Œã€‚è¿™ç§æŠ€æœ¯å¯ä»¥ä½¿ç³»ç»Ÿä¸­çš„å¤šä¸ªè¿›ç¨‹è¡¨ç°å‡ºå¹¶å‘æ€§ï¼Œå°½ç®¡å®é™…ä¸Šåœ¨åŒä¸€æ—¶é—´ç‚¹åªæœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨æ‰§è¡Œã€‚è¿™ç§å¹¶å‘æ€§æ˜¯é€šè¿‡å¿«é€Ÿçš„è¿›ç¨‹åˆ‡æ¢å’Œè°ƒåº¦å®ç°çš„ã€‚</li></ol><p><strong>å¤šçº¿ç¨‹/å¤šè¿›ç¨‹è§£å†³äº†é˜»å¡é—®é¢˜</strong></p><p>çº¿ç¨‹æ˜¯æŠ¢å å¼ï¼Œ<strong>è€Œåç¨‹æ˜¯éæŠ¢å å¼çš„</strong>ï¼Œæ‰€ä»¥éœ€è¦ç”¨æˆ·è‡ªå·±é‡Šæ”¾ä½¿ç”¨æƒæ¥åˆ‡æ¢åˆ°å…¶ä»–åç¨‹ï¼Œå› æ­¤åŒä¸€æ—¶é—´å…¶å®åªæœ‰ä¸€ä¸ªåç¨‹æ‹¥æœ‰è¿è¡Œæƒï¼Œç›¸å½“äºå•çº¿ç¨‹çš„èƒ½åŠ›ã€‚</p><p>åç¨‹å¹¶ä¸æ˜¯å–ä»£çº¿ç¨‹, è€Œä¸”<strong>æŠ½è±¡äºçº¿ç¨‹ä¹‹ä¸Š</strong>, çº¿ç¨‹æ˜¯è¢«åˆ†å‰²çš„CPUèµ„æº, åç¨‹æ˜¯ç»„ç»‡å¥½çš„ä»£ç æµç¨‹, åç¨‹éœ€è¦çº¿ç¨‹æ¥æ‰¿è½½è¿è¡Œ, çº¿ç¨‹æ˜¯åç¨‹çš„èµ„æº, ä½†åç¨‹ä¸ä¼šç›´æ¥ä½¿ç”¨çº¿ç¨‹, åç¨‹ç›´æ¥åˆ©ç”¨çš„æ˜¯æ‰§è¡Œå™¨(Interceptor), æ‰§è¡Œå™¨å¯ä»¥å…³è”ä»»æ„çº¿ç¨‹æˆ–çº¿ç¨‹æ± , å¯ä»¥ä½¿å½“å‰çº¿ç¨‹, UIçº¿ç¨‹, æˆ–æ–°å»ºæ–°ç¨‹.ã€‚</p><p><strong>çº¿ç¨‹æ˜¯åç¨‹çš„èµ„æºã€‚åç¨‹é€šè¿‡Interceptoræ¥é—´æ¥ä½¿ç”¨çº¿ç¨‹è¿™ä¸ªèµ„æºã€‚</strong></p><p>å†…æ ¸æ€å’Œç”¨æˆ·æ€</p><p>å†…æ ¸kernelæ˜¯ç¨‹åºï¼Œå®ƒéœ€è¦è¿è¡Œï¼Œå°±å¿…é¡»è¢«åˆ†é… CPUã€‚å› æ­¤ï¼ŒCPU ä¸Šä¼šè¿è¡Œä¸¤ç§ç¨‹åºï¼Œä¸€ç§æ˜¯æ“ä½œç³»ç»Ÿçš„å†…æ ¸ç¨‹åºï¼ˆä¹Ÿç§°ä¸ºç³»ç»Ÿç¨‹åºï¼‰ï¼Œä¸€ç§æ˜¯åº”ç”¨ç¨‹åºã€‚å‰è€…å®Œæˆç³»ç»Ÿä»»åŠ¡ï¼Œåè€…å®ç°åº”ç”¨ä»»åŠ¡ã€‚ä¸¤è€…ä¹‹é—´æœ‰æ§åˆ¶å’Œè¢«æ§åˆ¶çš„å…³ç³»ï¼Œå‰è€…æœ‰æƒç®¡ç†å’Œåˆ†é…èµ„æºï¼Œè€Œåè€…åªèƒ½<strong>å‘ç³»ç»Ÿç”³è¯·ä½¿ç”¨èµ„æºã€‚</strong></p><p>æ‚¨å¯¹å†…æ ¸æ€ï¼ˆKernel Modeï¼‰å’Œç”¨æˆ·æ€ï¼ˆUser Modeï¼‰çš„æè¿°éå¸¸å‡†ç¡®ã€‚ä»¥ä¸‹æ˜¯è¿›ä¸€æ­¥çš„è¯¦ç»†è§£é‡Šå’Œä¸€äº›è¡¥å……ä¿¡æ¯ï¼š</p><h3 id="å†…æ ¸æ€ï¼ˆKernel-Modeï¼‰">å†…æ ¸æ€ï¼ˆKernel Modeï¼‰</h3><ul><li><strong>æƒé™</strong>ï¼šåœ¨å†…æ ¸æ€ä¸­ï¼Œè¿è¡Œçš„ä»£ç æ‹¥æœ‰æœ€é«˜çš„æƒé™ï¼Œå¯ä»¥è®¿é—®ç³»ç»Ÿçš„æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬ç¡¬ä»¶å’Œæ‰€æœ‰å†…å­˜ç©ºé—´ã€‚è¿™æ„å‘³ç€å†…æ ¸å¯ä»¥æ‰§è¡Œä»»ä½•CPUæŒ‡ä»¤ï¼Œç®¡ç†ç³»ç»Ÿçš„æ‰€æœ‰ç¡¬ä»¶èµ„æºï¼Œå¦‚I/Oè®¾å¤‡ã€CPUã€å†…å­˜ç­‰ã€‚</li><li><strong>ç”¨é€”</strong>ï¼š<ul><li><strong>ç³»ç»Ÿè°ƒç”¨</strong>ï¼šå½“ç”¨æˆ·æ€çš„ç¨‹åºéœ€è¦æ‰§è¡Œéœ€è¦é«˜æƒé™çš„æ“ä½œï¼ˆå¦‚I/Oæ“ä½œã€è¿›ç¨‹ç®¡ç†ç­‰ï¼‰ï¼Œå®ƒé€šè¿‡ç³»ç»Ÿè°ƒç”¨é™·å…¥å†…æ ¸æ€ã€‚</li><li><strong>ç¡¬ä»¶ä¸­æ–­å¤„ç†</strong>ï¼šç¡¬ä»¶ä¸­æ–­å‘ç”Ÿæ—¶ï¼Œç³»ç»Ÿä¼šåˆ‡æ¢åˆ°å†…æ ¸æ€æ¥å¤„ç†ä¸­æ–­ã€‚</li><li><strong>å†…å­˜ç®¡ç†</strong>ï¼šå†…æ ¸è´Ÿè´£ç®¡ç†è™šæ‹Ÿå†…å­˜åˆ°ç‰©ç†å†…å­˜çš„æ˜ å°„ï¼Œä¿æŠ¤å†…å­˜ç©ºé—´ä¸è¢«éæ³•è®¿é—®ã€‚</li></ul></li><li><strong>é£é™©</strong>ï¼šç”±äºå†…æ ¸æ€çš„ä»£ç æœ‰å¦‚æ­¤é«˜çš„æƒé™ï¼Œä»»ä½•é”™è¯¯æˆ–æ¼æ´éƒ½å¯èƒ½å¯¼è‡´ç³»ç»Ÿå´©æºƒæˆ–å®‰å…¨æ€§é—®é¢˜ã€‚</li></ul><h3 id="ç”¨æˆ·æ€ï¼ˆUser-Modeï¼‰">ç”¨æˆ·æ€ï¼ˆUser Modeï¼‰</h3><ul><li><strong>æƒé™</strong>ï¼šåœ¨ç”¨æˆ·æ€ï¼Œç¨‹åºçš„æ‰§è¡Œæƒé™å—åˆ°é™åˆ¶ã€‚å®ƒä»¬åªèƒ½è®¿é—®ç”±å†…æ ¸åˆ†é…å’Œç®¡ç†çš„å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸”åªèƒ½é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥è¯·æ±‚å†…æ ¸æ‰§è¡Œé«˜æƒé™æ“ä½œã€‚</li><li><strong>ç”¨é€”</strong>ï¼š<ul><li><strong>åº”ç”¨ç¨‹åºæ‰§è¡Œ</strong>ï¼šæ‰€æœ‰ç”¨æˆ·åº”ç”¨ç¨‹åºå¦‚æµè§ˆå™¨ã€æ–‡æœ¬ç¼–è¾‘å™¨ç­‰éƒ½åœ¨ç”¨æˆ·æ€è¿è¡Œã€‚</li><li><strong>å®‰å…¨æ€§</strong>ï¼šé™åˆ¶ç”¨æˆ·æ€ç¨‹åºçš„æƒé™å¯ä»¥ä¿æŠ¤ç³»ç»Ÿçš„æ•´ä½“ç¨³å®šæ€§å’Œå®‰å…¨æ€§ï¼Œé˜²æ­¢ä¸€ä¸ªç¨‹åºæ¶æ„æˆ–é”™è¯¯åœ°å½±å“æ•´ä¸ªç³»ç»Ÿã€‚</li></ul></li><li><strong>å†…å­˜è®¿é—®</strong>ï¼šç”¨æˆ·æ€ä¸‹çš„ç¨‹åºåªèƒ½è®¿é—®é‚£äº›åœ¨å…¶è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­è¢«æ˜ å°„çš„å†…å­˜é¡µã€‚è¯•å›¾è®¿é—®æœªæ˜ å°„æˆ–æ— æƒé™çš„å†…å­˜ä¼šå¯¼è‡´ä¿æŠ¤é”™è¯¯ï¼ˆå¦‚æ®µé”™è¯¯ï¼‰ã€‚</li><li><strong>ç³»ç»Ÿè°ƒç”¨</strong>ï¼šå½“ç”¨æˆ·æ€ç¨‹åºéœ€è¦è¿›è¡Œéœ€è¦å†…æ ¸æƒé™çš„æ“ä½œæ—¶ï¼ˆä¾‹å¦‚è¯»å–æ–‡ä»¶ã€ç½‘ç»œé€šä¿¡ç­‰ï¼‰ï¼Œå®ƒå¿…é¡»é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥å£ã€‚è¿™æ—¶ï¼ŒCPUä¼šåˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œæ‰§è¡Œç›¸åº”çš„å†…æ ¸ä»£ç ï¼Œå®Œæˆæ“ä½œåå†è¿”å›åˆ°ç”¨æˆ·æ€ã€‚</li></ul><h3 id="åˆ‡æ¢æœºåˆ¶">åˆ‡æ¢æœºåˆ¶</h3><ul><li><strong>ä»ç”¨æˆ·æ€åˆ°å†…æ ¸æ€</strong>ï¼šä¸»è¦é€šè¿‡ä»¥ä¸‹æ–¹å¼ï¼š<ul><li><strong>ç³»ç»Ÿè°ƒç”¨</strong>ï¼ˆå¦‚ <code>fork</code>, <code>exec</code>, <code>read</code>, <code>write</code> ç­‰ï¼‰ã€‚</li><li><strong>ä¸­æ–­</strong>ï¼šå¦‚æ—¶é’Ÿä¸­æ–­ï¼Œç¡¬ä»¶è®¾å¤‡ä¸­æ–­ã€‚</li><li><strong>å¼‚å¸¸</strong>ï¼šå¦‚é¡µé¢é”™è¯¯ï¼ˆpage faultï¼‰ï¼Œé™¤é›¶é”™è¯¯ç­‰ã€‚</li></ul></li><li><strong>ä»å†…æ ¸æ€è¿”å›ç”¨æˆ·æ€</strong>ï¼šå½“å†…æ ¸å®Œæˆå…¶ä»»åŠ¡åï¼Œé€šè¿‡ç‰¹å®šçš„CPUæŒ‡ä»¤ï¼ˆå¦‚åœ¨x86æ¶æ„ä¸Šçš„ <code>iret</code> æˆ– <code>sysret</code>ï¼‰è¿”å›åˆ°ç”¨æˆ·æ€ï¼Œæ¢å¤ä¹‹å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</li></ul><p>è¿™ç§åˆ†ç¦»çš„è®¾è®¡æœ‰åŠ©äºç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ï¼Œå› ä¸ºå®ƒé™åˆ¶äº†ç”¨æˆ·ç¨‹åºç›´æ¥æ“ä½œç¡¬ä»¶çš„èƒ½åŠ›ï¼Œä»è€Œä¿æŠ¤äº†ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ä¸å—ç”¨æˆ·ç¨‹åºçš„é”™è¯¯æˆ–æ¶æ„è¡Œä¸ºå½±å“ã€‚</p><h1>Linux</h1><p>Linus Torvalds åˆ›å»ºã€‚GNU/LInuxæ˜¯å…¨çƒæ•°ç™¾ä¸‡å¼€å‘äººå‘˜ä¹‹é—´çš„åä½œï¼Œæ¶‰åŠ<a href="https://www.gnu.org/home.en.html">GNU é¡¹ç›®</a>,Â <a href="https://www.kernel.org/">Linux å†…æ ¸å¼€å‘å›¢é˜Ÿ</a><a href="http://www.x.org/wiki/">ç”± Torvalds é¢†å¯¼ï¼Œ X Window ç³»ç»Ÿçš„</a>å„ç§å¼€å‘äººå‘˜åœ¨è¿‡å»çš„ 29 å¹´ä¸­ï¼Œä»¥åŠå…¶ä»–ã€‚è¿™å°±æ˜¯è‡ªç”±è½¯ä»¶åŸºé‡‘ä¼šè¦æ±‚å°†ä½¿ç”¨æ¥è‡ª GNU é¡¹ç›®çš„è½¯ä»¶çš„å®Œæ•´ Linux æ“ä½œç³»ç»Ÿç§°ä¸ºâ€œGNU/Linuxâ€çš„åŸå› ã€‚</p><p>ManyÂ <a href="https://en.wikipedia.org/wiki/Open_source">open source</a>Â developers agree that the Linux kernel was not designed but ratherÂ <a href="https://en.wikipedia.org/wiki/Evolution">evolved</a>Â throughÂ <a href="https://en.wikipedia.org/wiki/Natural_selection">natural selection</a>. Torvalds considers that although the design of Unix served as a scaffolding, â€œLinux grew with a lot of mutations â€“ and because the mutations were less than random, they were faster and more directed thanÂ <a href="https://en.wikipedia.org/wiki/Mutation#Induced_mutation">alpha-particles in DNA</a>.â€<a href="https://en.wikipedia.org/wiki/Linux#cite_note-77">[73]</a>Â <a href="https://en.wikipedia.org/wiki/Eric_S._Raymond">Eric S. Raymond</a>Â considers Linuxâ€™s revolutionary aspects to be social, not technical: before Linux, complex software was designed carefully by small groups, but â€œLinux evolved in a completely different way. From nearly the beginning, it was rather casually hacked on by huge numbers of volunteers coordinating only through the Internet. Quality was maintained not by rigid standards or autocracy but by the naively simple strategy of releasing every week and getting feedback from hundreds of users within days, creating a sort of rapid Darwinian selection on the mutations introduced by developers.â€<a href="https://en.wikipedia.org/wiki/Linux#cite_note-78">[74]</a>Â <a href="https://en.wikipedia.org/wiki/Bryan_Cantrill">Bryan Cantrill</a>, an engineer of a competing OS, agrees that â€œLinux wasnâ€™t designed, it evolvedâ€, but considers this to be a limitation, proposing that some features, especially those related to security,<a href="https://en.wikipedia.org/wiki/Linux#cite_note-79">[75]</a>Â cannot be evolved into, â€œthis is not a biological system at the end of the day, itâ€™s a software system.â€</p><p><strong>å…¨ç§°GNU/Linuxï¼Œæ˜¯ä¸€ç§å…è´¹ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„<a href="https://baike.baidu.com/item/%E7%B1%BBUNIX/9032872">ç±»UNIX</a>æ“ä½œç³»ç»Ÿ</strong>ï¼Œå…¶å†…æ ¸ç”±<a href="https://baike.baidu.com/item/%E6%9E%97%E7%BA%B3%E6%96%AF%C2%B7%E6%9C%AC%E7%BA%B3%E7%AC%AC%E5%85%8B%E7%89%B9%C2%B7%E6%89%98%E7%93%A6%E5%85%B9/1034429">æ—çº³æ–¯Â·æœ¬çº³ç¬¬å…‹ç‰¹Â·æ‰˜ç“¦å…¹</a>äº1991å¹´10æœˆ5æ—¥é¦–æ¬¡å‘å¸ƒï¼Œå®ƒä¸»è¦å—åˆ°<a href="https://baike.baidu.com/item/Minix/7106045">Minix</a>å’ŒUnixæ€æƒ³çš„å¯å‘ï¼Œæ˜¯ä¸€ä¸ªåŸºäº<a href="https://baike.baidu.com/item/POSIX/3792413">POSIX</a>çš„å¤šç”¨æˆ·ã€<a href="https://baike.baidu.com/item/%E5%A4%9A%E4%BB%BB%E5%8A%A1/1011764">å¤šä»»åŠ¡</a>ã€æ”¯æŒ<a href="https://baike.baidu.com/item/%E5%A4%9A%E7%BA%BF%E7%A8%8B/1190404">å¤šçº¿ç¨‹</a>å’Œå¤š<a href="https://baike.baidu.com/item/CPU/120556">CPU</a>çš„æ“ä½œç³»ç»Ÿã€‚å®ƒèƒ½è¿è¡Œä¸»è¦çš„<a href="https://baike.baidu.com/item/Unix/219943">Unix</a>å·¥å…·è½¯ä»¶ã€åº”ç”¨ç¨‹åºå’Œç½‘ç»œåè®®ã€‚å®ƒæ”¯æŒ<a href="https://baike.baidu.com/item/32%E4%BD%8D/5812218">32ä½</a>å’Œ<a href="https://baike.baidu.com/item/64%E4%BD%8D/2262282">64ä½</a>ç¡¬ä»¶ã€‚Linuxç»§æ‰¿äº†Unixä»¥ç½‘ç»œä¸ºæ ¸å¿ƒçš„è®¾è®¡æ€æƒ³ï¼Œæ˜¯ä¸€ä¸ªæ€§èƒ½ç¨³å®šçš„å¤šç”¨æˆ·ç½‘ç»œæ“ä½œç³»ç»Ÿã€‚Linuxæœ‰ä¸Šç™¾ç§ä¸åŒçš„å‘è¡Œç‰ˆï¼Œå¦‚åŸºäºç¤¾åŒºå¼€å‘çš„<a href="https://baike.baidu.com/item/debian/748667">debian</a>ã€<a href="https://baike.baidu.com/item/archlinux/10857530">archlinux</a>ï¼Œå’ŒåŸºäºå•†ä¸šå¼€å‘çš„<a href="https://baike.baidu.com/item/Red%20Hat%20Enterprise%20Linux/10770503">Red Hat Enterprise Linux</a>ã€<a href="https://baike.baidu.com/item/SUSE/60409">SUSE</a>ã€<a href="https://baike.baidu.com/item/Oracle%20Linux/6876458">Oracle Linux</a>ç­‰ã€‚</p><p>Linus built kernel to solve unix hard-use and lack I/O RPC function.  åŒºåˆ† Linuxï¼ˆå†…æ ¸ï¼‰å’Œ Linuxï¼ˆæ“ä½œç³»ç»Ÿï¼‰ã€‚</p><p>Kernel æ˜¯è®¡ç®—æœº<a href="https://en.wikipedia.org/wiki/Operating_system">æ“ä½œç³»ç»Ÿ</a>æ ¸å¿ƒçš„<a href="https://en.wikipedia.org/wiki/Computer_program">è®¡ç®—æœºç¨‹åº</a>ï¼Œé€šå¸¸å¯ä»¥å®Œå…¨æ§åˆ¶ç³»ç»Ÿä¸­çš„æ‰€æœ‰å†…å®¹**ã€‚**<a href="https://en.wikipedia.org/wiki/Kernel_(operating_system)#cite_note-Linfo-1">[1]</a>å®ƒæ˜¯æ“ä½œç³»ç»Ÿä»£ç çš„ä¸€éƒ¨åˆ†ï¼Œå§‹ç»ˆé©»ç•™åœ¨å†…å­˜ä¸­<a href="https://en.wikipedia.org/wiki/Kernel_(operating_system)#cite_note-2">[2]</a>å¹¶ä¿ƒè¿›ç¡¬ä»¶å’Œè½¯ä»¶ç»„ä»¶ä¹‹é—´çš„äº¤äº’ã€‚å®Œæ•´çš„å†…æ ¸é€šè¿‡<a href="https://en.wikipedia.org/wiki/Device_driver">è®¾å¤‡é©±åŠ¨ç¨‹åºæ§åˆ¶</a>æ‰€æœ‰ç¡¬ä»¶èµ„æºï¼ˆä¾‹å¦‚ I/Oã€å†…å­˜ã€å¯†ç ï¼‰ ï¼Œä»²è£æ¶‰åŠè¿™äº›èµ„æºçš„è¿›ç¨‹ä¹‹é—´çš„å†²çªï¼Œå¹¶ä¼˜åŒ–å…¬å…±èµ„æºçš„åˆ©ç”¨ï¼Œä¾‹å¦‚ CPU å’Œç¼“å­˜ä½¿ç”¨ã€æ–‡ä»¶ç³»ç»Ÿå’Œç½‘ç»œå¥—æ¥å­—ã€‚<a href="https://en.wikipedia.org/wiki/Booting">åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸Šï¼Œå†…æ ¸æ˜¯å¯åŠ¨</a>æ—¶æœ€å…ˆåŠ è½½çš„ç¨‹åºä¹‹ä¸€ï¼ˆåœ¨<a href="https://en.wikipedia.org/wiki/Bootloader">å¼•å¯¼åŠ è½½ç¨‹åº</a>ï¼‰ã€‚å®ƒå¤„ç†å…¶ä½™çš„å¯åŠ¨ä»¥åŠå†…å­˜ã€<a href="https://en.wikipedia.org/wiki/Peripheral">å¤–å›´è®¾å¤‡</a>å’Œæ¥è‡ª<a href="https://en.wikipedia.org/wiki/Software">è½¯ä»¶çš„</a><a href="https://en.wikipedia.org/wiki/Input/output">è¾“å…¥/è¾“å‡º</a>(I/O) è¯·æ±‚ï¼Œå°†å®ƒä»¬è½¬æ¢ä¸º<a href="https://en.wikipedia.org/wiki/Central_processing_unit">ä¸­å¤®å¤„ç†å™¨çš„</a><a href="https://en.wikipedia.org/wiki/Data_processing">æ•°æ®å¤„ç†</a>æŒ‡ä»¤ã€‚</p><p>å†…æ ¸æ˜¯æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå…·æœ‰å®Œå…¨æ§åˆ¶ç³»ç»Ÿèµ„æºçš„èƒ½åŠ›ã€‚å®ƒå§‹ç»ˆé©»ç•™åœ¨å†…å­˜ä¸­ï¼Œä¿ƒè¿›ç¡¬ä»¶å’Œè½¯ä»¶ä¹‹é—´çš„äº¤äº’ã€‚å†…æ ¸é€šè¿‡è®¾å¤‡é©±åŠ¨ç¨‹åºæ§åˆ¶ç¡¬ä»¶èµ„æºï¼Œä»²è£è¿›ç¨‹ä¹‹é—´çš„å†²çªï¼Œå¹¶ä¼˜åŒ–å…±äº«èµ„æºçš„åˆ©ç”¨ã€‚åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸Šï¼Œå†…æ ¸æ˜¯å¯åŠ¨æ—¶æœ€å…ˆåŠ è½½çš„ç¨‹åºã€‚<br>å†…æ ¸çš„å…³é”®ä»£ç è¢«åŠ è½½åˆ°å—ä¿æŠ¤çš„å†…æ ¸ç©ºé—´ä¸­ï¼Œä¸åº”ç”¨ç¨‹åºè¿è¡Œçš„ç”¨æˆ·ç©ºé—´åˆ†ç¦»ã€‚è¿™ç§åˆ†ç¦»å¯ä»¥é˜²æ­¢ç”¨æˆ·æ•°æ®å’Œå†…æ ¸æ•°æ®ç›¸äº’å¹²æ‰°ï¼Œå¹¶æé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚å†…æ ¸æä¾›äº†ä¸€ä¸ªä½çº§çš„æ¥å£ï¼Œè¿›ç¨‹é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥è¯·æ±‚å†…æ ¸æœåŠ¡ã€‚<br>å†…æ ¸æ¶æ„æœ‰<strong>æ•´ä½“å†…æ ¸å’Œå¾®å†…æ ¸</strong>ä¸¤ç§è®¾è®¡ã€‚æ•´ä½“å†…æ ¸åœ¨å•ä¸ªåœ°å€ç©ºé—´ä¸­è¿è¡Œï¼Œä»¥æé«˜é€Ÿåº¦ï¼›å¾®å†…æ ¸åœ¨ç”¨æˆ·ç©ºé—´ä¸­è¿è¡Œå¤§éƒ¨åˆ†æœåŠ¡ï¼Œä»¥æé«˜çµæ´»æ€§å’Œæ¨¡å—åŒ–ã€‚Linuxå†…æ ¸æ˜¯æ•´ä½“å¼çš„ï¼Œä½†ä¹Ÿæ”¯æŒæ¨¡å—åŒ–ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ è½½å’Œå¸è½½å†…æ ¸æ¨¡å—ã€‚<br>å†…æ ¸è´Ÿè´£å†³å®šå°†å“ªäº›æ­£åœ¨è¿è¡Œçš„ç¨‹åºåˆ†é…ç»™å¤„ç†å™¨ï¼Œä»è€Œæ‰§è¡Œç¨‹åºã€‚å®ƒæ˜¯è®¡ç®—æœºç³»ç»Ÿçš„ä¸­å¤®ç»„ä»¶ï¼Œæ§åˆ¶å’Œç®¡ç†ç³»ç»Ÿçš„å„ä¸ªæ–¹é¢ã€‚</p><p>Linux æ“ä½œç³»ç»Ÿå°†å…¶è¿è¡Œç¯å¢ƒåˆ†ä¸ºä¸¤ç§çŠ¶æ€ï¼šç”¨æˆ·æ€å’Œå†…æ ¸æ€ã€‚ç”¨æˆ·æ€æ˜¯æŒ‡åº”ç”¨ç¨‹åºè¿è¡Œçš„ç¯å¢ƒï¼Œè€Œå†…æ ¸æ€æ˜¯æŒ‡æ“ä½œç³»ç»Ÿå†…æ ¸è¿è¡Œçš„ç¯å¢ƒã€‚</p><h3 id="ç”¨æˆ·æ€-2">ç”¨æˆ·æ€</h3><p>ç”¨æˆ·æ€ï¼ˆUser Modeï¼‰æ˜¯æŒ‡åº”ç”¨ç¨‹åºè¿è¡Œçš„ç¯å¢ƒã€‚åœ¨ç”¨æˆ·æ€ä¸‹ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨ç”¨æˆ·æ€æä¾›çš„ç³»ç»Ÿè°ƒç”¨æ¥å£æ¥è¯·æ±‚æ“ä½œç³»ç»ŸæœåŠ¡ã€‚ç”¨æˆ·æ€çš„åº”ç”¨ç¨‹åºä¸èƒ½ç›´æ¥è®¿é—®ç¡¬ä»¶èµ„æºï¼Œå¿…é¡»é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥è¯·æ±‚å†…æ ¸æ€çš„æœåŠ¡ã€‚</p><p>ç”¨æˆ·æ€çš„ç‰¹ç‚¹ï¼š</p><ul><li>åº”ç”¨ç¨‹åºè¿è¡Œåœ¨ç”¨æˆ·æ€ä¸‹</li><li>ä¸å…è®¸ç›´æ¥è®¿é—®ç¡¬ä»¶èµ„æº</li><li>å¿…é¡»é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥è¯·æ±‚å†…æ ¸æ€æœåŠ¡</li></ul><h3 id="å†…æ ¸æ€-2">å†…æ ¸æ€</h3><p>å†…æ ¸æ€ï¼ˆKernel Modeï¼‰æ˜¯æŒ‡æ“ä½œç³»ç»Ÿå†…æ ¸è¿è¡Œçš„ç¯å¢ƒã€‚åœ¨å†…æ ¸æ€ä¸‹ï¼Œå†…æ ¸å¯ä»¥ç›´æ¥è®¿é—®ç¡¬ä»¶èµ„æºï¼Œç®¡ç†ç³»ç»Ÿèµ„æºï¼Œå¹¶æä¾›æœåŠ¡ç»™ç”¨æˆ·æ€çš„åº”ç”¨ç¨‹åºã€‚</p><p>å†…æ ¸æ€çš„ç‰¹ç‚¹ï¼š</p><ul><li>æ“ä½œç³»ç»Ÿå†…æ ¸è¿è¡Œåœ¨å†…æ ¸æ€ä¸‹</li><li>å…è®¸ç›´æ¥è®¿é—®ç¡¬ä»¶èµ„æº</li><li>ç®¡ç†ç³»ç»Ÿèµ„æºå¹¶æä¾›æœåŠ¡ç»™ç”¨æˆ·æ€åº”ç”¨ç¨‹åº</li></ul><h3 id="ç³»ç»Ÿè°ƒç”¨-2">ç³»ç»Ÿè°ƒç”¨</h3><p>ç³»ç»Ÿè°ƒç”¨ï¼ˆSystem Callï¼‰æ˜¯ç”¨æˆ·æ€åº”ç”¨ç¨‹åºè¯·æ±‚å†…æ ¸æ€æœåŠ¡çš„æ¥å£ã€‚ç”¨æˆ·æ€åº”ç”¨ç¨‹åºé€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥è¯·æ±‚å†…æ ¸æ€çš„æœåŠ¡ï¼Œä¾‹å¦‚è¯»å–æ–‡ä»¶ã€åˆ›å»ºè¿›ç¨‹ç­‰ã€‚</p><p>ç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹ï¼š</p><ol><li>åº”ç”¨ç¨‹åºåœ¨ç”¨æˆ·æ€ä¸‹æ‰§è¡Œ</li><li>åº”ç”¨ç¨‹åºéœ€è¦è¯·æ±‚å†…æ ¸æ€æœåŠ¡</li><li>åº”ç”¨ç¨‹åºé€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥å£è¯·æ±‚æœåŠ¡</li><li>å†…æ ¸æ€æ¥æ”¶åˆ°è¯·æ±‚å¹¶å¤„ç†</li><li>å†…æ ¸æ€å°†ç»“æœè¿”å›ç»™åº”ç”¨ç¨‹åº</li></ol><p><strong>å®è·µ</strong></p><h3 id="Libs-2">Libs</h3><ol><li>ç³»ç»Ÿç®¡ç†<ul><li>systemd: ç³»ç»Ÿå’ŒæœåŠ¡ç®¡ç†å™¨</li><li>cron: å®šæ—¶ä»»åŠ¡ç®¡ç†</li><li>top/htop: ç³»ç»Ÿèµ„æºç›‘æ§</li><li>ps: è¿›ç¨‹çŠ¶æ€æŸ¥çœ‹</li><li>journalctl: æ—¥å¿—æŸ¥çœ‹</li><li>dmesg: å†…æ ¸æ—¥å¿—æŸ¥çœ‹</li></ul></li><li>æ–‡ä»¶ç®¡ç†<ul><li>ls, cp, mv, rm: åŸºæœ¬æ–‡ä»¶æ“ä½œ</li><li>find: æ–‡ä»¶æœç´¢</li><li>grep: æ–‡æœ¬æœç´¢</li><li>tar, gzip, bzip2: æ–‡ä»¶å‹ç¼©å’Œå½’æ¡£</li><li>chmod, chown: æ–‡ä»¶æƒé™ç®¡ç†</li></ul></li><li>æ–‡æœ¬å¤„ç†<ul><li>vim, nano: æ–‡æœ¬ç¼–è¾‘å™¨</li><li>sed, awk: æ–‡æœ¬å¤„ç†å·¥å…·</li><li>cat, less, more: æ–‡ä»¶æŸ¥çœ‹</li></ul></li><li>ç½‘ç»œå·¥å…·<ul><li>ifconfig/ip: ç½‘ç»œæ¥å£é…ç½®</li><li>ping, traceroute: ç½‘ç»œè¯Šæ–­</li><li>ssh: è¿œç¨‹ç™»å½•</li><li>curl, wget: æ–‡ä»¶ä¸‹è½½</li><li>netstat, ss: ç½‘ç»œè¿æ¥çŠ¶æ€</li><li>iptables/nftables: é˜²ç«å¢™ç®¡ç†</li></ul></li></ol><p>Systemd æ˜¯è®¸å¤šç°ä»£ Linux å‘è¡Œç‰ˆä¸­ä½¿ç”¨çš„åˆå§‹åŒ–ç³»ç»Ÿå’Œç³»ç»Ÿç®¡ç†å™¨ã€‚ä»¥ä¸‹æ˜¯å…³äº systemd çš„ä¸€äº›é‡è¦æ¦‚å¿µå’Œå¸¸ç”¨å‘½ä»¤ï¼š</p><ol><li>æ ¸å¿ƒæ¦‚å¿µï¼š<ul><li>Unitï¼šsystemd ç®¡ç†çš„åŸºæœ¬å¯¹è±¡ï¼ŒåŒ…æ‹¬æœåŠ¡ã€æŒ‚è½½ç‚¹ã€è®¾å¤‡å’Œç½‘ç»œé…ç½®ç­‰</li><li>Serviceï¼šæœ€å¸¸è§çš„ unit ç±»å‹ï¼Œç”¨äºç®¡ç†å®ˆæŠ¤è¿›ç¨‹</li><li>Targetï¼šä¸€ç»„ unit çš„é›†åˆï¼Œç±»ä¼¼äºè¿è¡Œçº§åˆ«</li></ul></li></ol><p>Unit æ–‡ä»¶ç»“æ„</p><p>ä¸€ä¸ªå…¸å‹çš„Â <code>.service</code>Â å•å…ƒæ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`[Unit]</span></span><br><span class="line"><span class="string">Description=My Custom Service</span></span><br><span class="line"><span class="string">After=network.target</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Service]</span></span><br><span class="line"><span class="string">ExecStart=/usr/bin/my-service</span></span><br><span class="line"><span class="string">ExecReload=/bin/kill -HUP $MAINPID</span></span><br><span class="line"><span class="string">ExecStop=/bin/kill $MAINPID</span></span><br><span class="line"><span class="string">Restart=on-failure</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Install]</span></span><br><span class="line"><span class="string">WantedBy=multi-user.target`</span></span><br><span class="line"></span><br><span class="line"><span class="string">`[Unit]`</span>ï¼šæè¿°å•å…ƒå’Œå…¶ä¾èµ–å…³ç³»ã€‚</span><br><span class="line"></span><br><span class="line"><span class="string">`[Service]`</span>ï¼šå®šä¹‰æœåŠ¡å¦‚ä½•å¯åŠ¨ã€åœæ­¢ï¼Œä»¥åŠé‡å¯ç­–ç•¥ã€‚</span><br><span class="line"></span><br><span class="line"><span class="string">`[Install]`</span>ï¼šå®šä¹‰å•å…ƒå¦‚ä½•è¢«å¯ç”¨æˆ–å…³è”åˆ°å…¶ä»–ç›®æ ‡ã€‚</span><br></pre></td></tr></table></figure><p>æ³¨æ„äº‹é¡¹</p><p><strong>æƒé™</strong>ï¼šè®¸å¤šÂ <code>systemctl</code>Â å‘½ä»¤éœ€è¦ä»¥Â <code>root</code>Â æƒé™è¿è¡Œã€‚</p><p><strong>é…ç½®ä¿®æ”¹åé‡è½½</strong>ï¼šä¿®æ”¹Â <code>.service</code>Â æ–‡ä»¶åï¼Œéœ€è¦è¿è¡ŒÂ <code>systemctl daemon-reload</code>Â æ¥é‡æ–°åŠ è½½é…ç½®ã€‚</p><p><strong>å®‰å…¨æ€§</strong>ï¼š<code>systemd</code>Â æä¾›äº†è®¸å¤šå®‰å…¨é€‰é¡¹ï¼Œå¯ä»¥é™åˆ¶æœåŠ¡çš„æƒé™å’Œèµ„æºä½¿ç”¨ã€‚</p><p>$è¡¨æ˜æ˜¯érootç”¨æˆ·ç™»å½•ï¼Œ#è¡¨ç¤ºæ˜¯rootç”¨æˆ·ç™»å½•ï¼Œå®ƒä»¬æ˜¯ç»ˆç«¯shellçš„å‘½ä»¤æç¤ºç¬¦ å‡ ç§å¸¸ç”¨ç»ˆç«¯çš„å‘½ä»¤æç¤ºç¬¦</p><p>BASH: rootè´¦æˆ·: # ,érootè´¦æˆ·: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.452ex;" xmlns="http://www.w3.org/2000/svg" width="39.819ex" height="2.149ex" role="img" focusable="false" viewBox="0 -750 17600 950"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="merror" data-mjx-error="You can't use 'macro parameter character #' in math mode" title="You can't use 'macro parameter character #' in math mode"><rect data-background="true" width="17600" height="950" y="-200"></rect><title>You can't use 'macro parameter character #' in math mode</title><g data-mml-node="mtext" style="font-family: serif;"><text data-variant="-explicitFont" transform="scale(1,-1)" font-size="884px"> KSH: rootè´¦æˆ·: # ,érootè´¦æˆ·: </text></g></g></g></g></svg></mjx-container> CSH[TCSH]: rootè´¦æˆ·: % ,érootè´¦æˆ·: %</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è€Œ/ æ˜¯æ ¹èŠ‚ç‚¹ï¼Œ ~ æ˜¯ home</span><br><span class="line">å¦‚æœä»¥rootè´¦å·ç™»é™†   ~ æ˜¯ /root/</span><br></pre></td></tr></table></figure><p>Program: a file containing instructions to be executed, static Process: an instance of a program in execution, live entity</p><p>execveï¼ˆæ‰§è¡Œæ–‡ä»¶ï¼‰åœ¨<a href="https://baike.baidu.com/item/%E7%88%B6%E8%BF%9B%E7%A8%8B/614062">çˆ¶è¿›ç¨‹</a>ä¸­forkä¸€ä¸ªå­è¿›ç¨‹ï¼Œåœ¨å­è¿›ç¨‹ä¸­è°ƒç”¨execå‡½æ•°å¯åŠ¨æ–°çš„ç¨‹åºã€‚execå‡½æ•°ä¸€å…±æœ‰å…­ä¸ªï¼Œå…¶ä¸­execveä¸ºå†…æ ¸çº§<a href="https://baike.baidu.com/item/%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/861110">ç³»ç»Ÿè°ƒç”¨</a>ï¼Œå…¶ä»–ï¼ˆexeclï¼Œexecleï¼Œexeclpï¼Œexecvï¼Œexecvpï¼‰exec(): often used after fork() to <strong>load</strong> another process</p><p>è®¸å¤šç¨‹åºéœ€è¦å¼€æœºå¯åŠ¨ã€‚å®ƒä»¬åœ¨Windowså«åš"æœåŠ¡"ï¼ˆserviceï¼‰ï¼Œåœ¨Linuxå°±å«åš"<a href="https://zh.wikipedia.org/wiki/%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B">å®ˆæŠ¤è¿›ç¨‹</a>"ï¼ˆdaemonï¼‰ã€‚Linux Daemonï¼ˆå®ˆæŠ¤è¿›ç¨‹ï¼‰æ˜¯è¿è¡Œåœ¨åå°çš„ä¸€ç§ç‰¹æ®Šè¿›ç¨‹ã€‚å®ƒç‹¬ç«‹äºæ§åˆ¶ç»ˆç«¯å¹¶ä¸”å‘¨æœŸæ€§åœ°æ‰§è¡ŒæŸç§ä»»åŠ¡æˆ–ç­‰å¾…å¤„ç†æŸäº›å‘ç”Ÿçš„äº‹ä»¶ã€‚</p><ol><li><strong>syslogd</strong>ï¼šç³»ç»Ÿæ—¥å¿—å®ˆæŠ¤è¿›ç¨‹ï¼Œè´Ÿè´£è®°å½•ç³»ç»Ÿæ—¥å¿—æ¶ˆæ¯ã€‚</li><li><strong>httpd</strong>ï¼šWeb æœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹ï¼Œå¦‚ Apache æˆ– Nginxï¼Œç”¨äºæä¾› Web æœåŠ¡ã€‚</li><li><strong>sendmail</strong>ï¼šé‚®ä»¶æœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹ï¼Œè´Ÿè´£å¤„ç†å‘é€å’Œæ¥æ”¶é‚®ä»¶çš„åŠŸèƒ½ã€‚</li><li><strong>mysqld</strong>ï¼šæ•°æ®åº“æœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹ï¼Œæ¯”å¦‚ MySQL æˆ– MariaDBï¼Œç”¨äºç®¡ç†å’Œæä¾›æ•°æ®åº“æœåŠ¡ã€‚</li></ol><p>è¿™äº›å®ˆæŠ¤è¿›ç¨‹é€šå¸¸åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ï¼Œå¹¶åœ¨ç³»ç»Ÿè¿è¡ŒæœŸé—´æŒç»­<strong>ç›‘å¬ã€å¤„ç†æˆ–æä¾›æœåŠ¡</strong>ã€‚å®ƒä»¬çš„è¿è¡Œé€šå¸¸ä¸éœ€è¦ç”¨æˆ·çš„ç›´æ¥å¹²é¢„ï¼Œè€Œæ˜¯é€šè¿‡é…ç½®æ–‡ä»¶æˆ–å…¶ä»–è®¾ç½®æ¥æ§åˆ¶å…¶è¡Œä¸ºå’ŒåŠŸèƒ½ã€‚</p><p><strong>FTP</strong></p><p><strong>ä¸»åŠ¨</strong>æ¨¡å¼çš„FTPæ˜¯æŒ‡<strong>æœåŠ¡å™¨ä¸»åŠ¨</strong>è¿æ¥å®¢æˆ·ç«¯çš„æ•°æ®ç«¯å£ï¼Œè¢«åŠ¨æ¨¡å¼çš„FTPæ˜¯æŒ‡<strong>æœåŠ¡å™¨è¢«åŠ¨ç­‰å¾…</strong>å®¢æˆ·ç«¯è¿æ¥è‡ªå·±çš„æ•°æ®ç«¯å£ã€‚</p><p>è¢«åŠ¨æ¨¡å¼çš„FTPé€šå¸¸ç”¨åœ¨å¤„äºé˜²ç«å¢™ä¹‹åçš„FTPå®¢æˆ·è®¿é—®å¤–ç•ŒFTPæœåŠ¡å™¨çš„æƒ…å†µï¼Œå› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé˜²ç«å¢™é€šå¸¸é…ç½®ä¸º<strong>ä¸å…è®¸å¤–ç•Œè®¿é—®é˜²ç«å¢™ä¹‹å†…çš„ä¸»æœº</strong>ï¼Œè€Œ<strong>åªå…è®¸ç”±é˜²ç«å¢™ä¹‹å†…çš„ä¸»æœºå‘èµ·å¯¹å¤–çš„è¿æ¥è¯·æ±‚</strong>ã€‚å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ä¸èƒ½ä½¿ç”¨ä¸»åŠ¨æ¨¡å¼çš„FTPä¼ è¾“ï¼Œè€Œè¢«åŠ¨æ¨¡å¼çš„FTPå¯ä»¥è‰¯å¥½çš„å·¥ä½œã€‚</p><p>ä¸»åŠ¨æ¨¡å¼éœ€è¦æœåŠ¡å™¨ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘èµ·è¿æ¥ï¼Œè€Œç°åœ¨æ™®é€šçš„å®¢æˆ·ç«¯å¤§å¤šä½äºNATä¹‹åï¼Œæ‰€ä»¥ä¸»åŠ¨æ¨¡å¼å¸¸å¸¸æ— æ³•è¿›è¡Œã€‚å³ä½¿å¯ä»¥ï¼Œä¹Ÿéœ€è¦å®¢æˆ·ç«¯æ‰“å¼€é˜²ç«å¢™ï¼Œå…è®¸æœåŠ¡ç«¯çš„20ç«¯å£è®¿é—®ã€‚æ‰€ä»¥æœåŠ¡ç«¯åŸºæœ¬éœ€è¦æ”¯æŒè¢«åŠ¨æ¨¡å¼ï¼Œä½†è¢«åŠ¨æ¨¡å¼éœ€è¦å¼€æ”¾ä¸€æ®µç«¯å£ã€‚ä¸ºäº†å®‰å…¨ï¼Œå¯ä»¥é€‰æ‹©ä¸€å°æ®µç«¯å£ï¼Œç„¶ååœ¨é˜²ç«å¢™å¼€æ”¾è¿™ä¸€æ®µç«¯å£ã€‚</p><h3 id="Everything-is-a-file-2">Everything is a file</h3><p><strong>Linuxæ“ä½œç³»ç»Ÿçš„è®¾è®¡å“²å­¦ä¹‹ä¸€ï¼šå°†æ‰€æœ‰è®¾å¤‡ã€èµ„æºæˆ–è¿›ç¨‹éƒ½è§†ä¸ºæ–‡ä»¶æˆ–æ–‡ä»¶ç±»ä¼¼çš„å¯¹è±¡ã€‚</strong></p><p>åœ¨Linuxä¸­ï¼Œä¸ä»…æ™®é€šçš„æ–‡æœ¬æ–‡ä»¶ã€ç›®å½•ã€ç¡¬ä»¶è®¾å¤‡å’Œå¤–éƒ¨è®¾å¤‡éƒ½è¢«è§†ä¸ºæ–‡ä»¶ï¼Œç”šè‡³ç³»ç»Ÿä¸­çš„è¿›ç¨‹ã€ç½‘ç»œè¿æ¥ã€ç¡¬ä»¶æ¥å£ç­‰ä¹Ÿè¢«æŠ½è±¡ä¸ºæ–‡ä»¶ã€‚è¿™ç§æŠ½è±¡åŒ–ä½¿å¾—Linuxç³»ç»Ÿæ›´åŠ ç»Ÿä¸€å’Œçµæ´»ï¼Œå› ä¸ºå®ƒå…è®¸å¯¹ä¸åŒèµ„æºä½¿ç”¨ç›¸ä¼¼çš„æ“ä½œæ–¹å¼ã€‚</p><p>å¥½å¤„æ˜¯è¯»å†™è¿™äº›èµ„æºéƒ½å¯ç”¨open()/close()/write()/read()ç­‰å‡½æ•°è¿›è¡Œå¤„ç†ã€‚å±è”½äº†ç¡¬ä»¶çš„åŒºåˆ«ï¼Œæ‰€æœ‰è®¾å¤‡éƒ½æŠ½è±¡æˆæ–‡ä»¶ï¼Œæä¾›ç»Ÿä¸€çš„æ¥å£ç»™ç”¨æˆ·ã€‚è™½ç„¶ç±»å‹å„ä¸ç›¸åŒï¼Œä½†æ˜¯å¯¹å…¶æä¾›çš„å´æ˜¯åŒä¸€å¥—APIã€‚æ›´è¿›ä¸€æ­¥ï¼Œå¯¹æ–‡ä»¶çš„æ“ä½œä¹Ÿå¯ä»¥è·¨æ–‡ä»¶ç³»ç»Ÿæ‰§è¡Œã€‚åœ¨Linuxç³»ç»Ÿä¸­æœ‰ä¸‰ç±»æ–‡ä»¶ï¼šæ™®é€šæ–‡ä»¶ã€ç›®å½•æ–‡ä»¶å’Œç‰¹æ®Šæ–‡ä»¶ã€‚</p><p>ç½‘ç»œ I/O é€šè¿‡ç½‘ç»œè¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œé€šå¸¸åŒ…æ‹¬ TCP æˆ– UDP ç­‰åè®®ã€‚ç½‘ç»œ I/O çš„å»¶è¿Ÿè¾ƒé«˜ï¼Œå–å†³äºç½‘ç»œå¸¦å®½ã€è·¯ç”±å™¨ã€ä¸­ç»§è®¾å¤‡ç­‰ï¼Œæ•°æ®åŒ…å¯èƒ½éœ€è¦ç»è¿‡å¤šä¸ªä¸­é—´èŠ‚ç‚¹æ‰èƒ½åˆ°è¾¾ç›®æ ‡æœåŠ¡å™¨ã€‚</p><p>å±€åŸŸç½‘çš„å»¶è¿Ÿé€šå¸¸åœ¨å¾®ç§’åˆ°æ¯«ç§’çº§ï¼Œè€Œå¹¿åŸŸç½‘ï¼ˆå¦‚äº’è”ç½‘ï¼‰çš„å»¶è¿Ÿå¯èƒ½ä¼šè¾¾åˆ°å‡ åæ¯«ç§’ç”šè‡³æ›´é«˜ã€‚ç½‘ç»œ I/O å¹¶å‘æ˜¯éå¸¸å¸¸è§çš„éœ€æ±‚ï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜å¹¶å‘æœåŠ¡å™¨ï¼ˆå¦‚ Web æœåŠ¡å™¨ï¼‰ä¸­ã€‚æœåŠ¡å™¨é€šå¸¸éœ€è¦åŒæ—¶å¤„ç†æ•°ç™¾ç”šè‡³æ•°åƒä¸ªç½‘ç»œè¿æ¥ã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼Œä½¿ç”¨äº† I/O å¤šè·¯å¤ç”¨ï¼ˆselectã€pollã€epollï¼‰å’Œå¼‚æ­¥ I/O æ¥ç®¡ç†å¤§é‡çš„å¹¶å‘è¿æ¥ã€‚ç½‘ç»œ I/O å¸¦å®½å—åˆ°ç½‘ç»œè®¾å¤‡ï¼ˆå¦‚ç½‘å¡ã€è·¯ç”±å™¨ï¼‰çš„é™åˆ¶ã€‚åƒå…†ä»¥å¤ªç½‘çš„å¸¦å®½æ˜¯ 1 Gbpsï¼Œå¤§çº¦ç›¸å½“äº 125 MB/sï¼Œè€Œå¦‚ä»Šå¸¸è§çš„ 10 Gbps ç½‘å¡èƒ½è¾¾åˆ° 1.25 GB/sï¼Œè¿œä½äºæœ¬åœ°å­˜å‚¨è®¾å¤‡ã€‚</p><p>ç°ä»£æœåŠ¡å™¨ï¼ˆå¦‚ Nginxã€Node.jsï¼‰é€šå¸¸ä½¿ç”¨å¼‚æ­¥éé˜»å¡ I/O æ¨¡å‹ï¼Œä»¥æœ€å¤§é™åº¦æé«˜ I/O ååé‡ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;æ“ä½œç³»ç»ŸOS&lt;/h1&gt;
&lt;p&gt;åœ¨å­¦ä¹ æ“ä½œç³»ç»Ÿçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šæ¥è§¦åˆ°ä¼—å¤šå¤æ‚çš„æ¦‚å¿µï¼Œå¦‚å†…æ ¸ã€è¿›ç¨‹ç®¡ç†ã€å†…å­˜ç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿç­‰ã€‚ä¸ºäº†æ›´å¥½åœ°æŒæ¡è¿™äº›å†…å®¹ï¼Œå»ºè®®é‡‡å–å¾ªåºæ¸è¿›çš„å­¦ä¹ è·¯çº¿ï¼Œä»ç†è®ºåˆ°å®è·µã€ä»åŸºç¡€åˆ°è¿›é˜¶ï¼Œé€æ­¥æ·±å…¥ã€‚&lt;/p&gt;
&lt;p&gt;å­¦ä¹ è·¯çº¿&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ“ä½œç³»ç»Ÿ</summary>
      
    
    
    
    <category term="è®¡ç®—æœºç§‘å­¦" scheme="https://stan370.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/"/>
    
    
    <category term="è®¡ç®—æœºåŸºç¡€" scheme="https://stan370.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    <category term="æ“ä½œç³»ç»Ÿ" scheme="https://stan370.github.io/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>æ“ä½œç³»ç»Ÿ I/O å¤šè·¯å¤ç”¨ï¼Œselect / poll / epoll</title>
    <link href="https://stan370.github.io/2024/09/15/IOandEpoll/Epoll/"/>
    <id>https://stan370.github.io/2024/09/15/IOandEpoll/Epoll/</id>
    <published>2024-09-15T04:16:23.000Z</published>
    <updated>2025-07-28T07:59:35.452Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ç°ä»£è®¡ç®—æœºç³»ç»Ÿä¸­ï¼ŒI/O æ“ä½œæ˜¯å½±å“æ€§èƒ½çš„å…³é”®å› ç´ ï¼Œå°¤å…¶æ˜¯åœ¨ç½‘ç»œæœåŠ¡å’Œæœ¬åœ°å­˜å‚¨å¯†é›†å‹åº”ç”¨ä¸­ã€‚ä½ æ˜¯å¦æ›¾ç»æ€è€ƒè¿‡ç½‘ç»œ I/O å’Œæœ¬åœ° I/O ä¹‹é—´çš„æ€§èƒ½å·®å¼‚ï¼Ÿä¸ºä»€ä¹ˆç½‘ç»œä¼ è¾“æ€»æ˜¯æ¯”æœ¬åœ°ç¡¬ç›˜æ…¢ï¼Ÿ</p><p>å‡½æ•°select()ã€poll()å’Œepoll()åœ¨ç½‘ç»œç¼–ç¨‹å’Œæ“ä½œç³»ç»Ÿä¸­ç”¨äºç›‘è§†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œä»¥æŸ¥çœ‹å…¶ä¸­ä»»ä½•ä¸€ä¸ªæ˜¯å¦å¯è¿›è¡Œ I/Oï¼ˆä¾‹å¦‚ï¼Œå¥—æ¥å­—å·²å‡†å¤‡å¥½è¿›è¡Œè¯»/å†™ï¼‰ã€‚è¿™äº›ä¸»è¦ç”¨äºäº‹ä»¶é©±åŠ¨ç¼–ç¨‹ï¼Œç‰¹åˆ«æ˜¯åœ¨æœåŠ¡å™¨ä¸­åŒæ—¶å¤„ç†å¤šä¸ªè¿æ¥æ—¶ã€‚é‚£ä¹ˆï¼Œepoll åˆ°åº•ä¸ºä»€ä¹ˆå¦‚æ­¤é«˜æ•ˆï¼Ÿå®ƒå¦‚ä½•è¶…è¶Šä¼ ç»Ÿçš„ select() å’Œ poll()ï¼Ÿé€šè¿‡è¿™ç¯‡è®¨è®ºï¼Œä½ å°†æ·±å…¥äº†è§£ä¸ºä»€ä¹ˆ epoll æ˜¯å¤§è§„æ¨¡ç½‘ç»œ I/O ç®¡ç†çš„é¦–é€‰ï¼Œä»¥åŠå¦‚ä½•åœ¨å®è·µä¸­æœ€å¤§åŒ–å…¶ä¼˜åŠ¿ã€‚</p><p>åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œç¨‹åºè¿è¡Œçš„ç©ºé—´åˆ†ä¸ºå†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´ï¼Œ ç”¨æˆ·ç©ºé—´æ‰€æœ‰å¯¹ioæ“ä½œçš„ä»£ç ï¼ˆå¦‚æ–‡ä»¶çš„è¯»å†™ã€socketçš„æ”¶å‘ç­‰ï¼‰éƒ½ä¼šé€šè¿‡ç³»ç»Ÿè°ƒç”¨è¿›å…¥å†…æ ¸ç©ºé—´å®Œæˆå®é™…çš„æ“ä½œã€‚</p><h2 id="é˜»å¡-I-O">é˜»å¡ I/O</h2><p>åœ¨é˜»å¡ I/O æ¨¡å¼ä¸‹ï¼Œç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚ read() æˆ– recvfrom()ï¼‰ä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°å†…æ ¸æŠŠæ•°æ®å‡†å¤‡å¥½å¹¶ä¼ è¾“åˆ°ç”¨æˆ·ç©ºé—´ã€‚æ­¤æœŸé—´ï¼Œçº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼ŒCPUå°†è¢«é‡Šæ”¾å»åšå…¶ä»–äº‹æƒ…ï¼Œä½†è¿™ä¸ªçº¿ç¨‹æ— æ³•æ‰§è¡Œä»»ä½•å…¶ä»–ä»»åŠ¡ï¼Œç›´åˆ° I/O æ“ä½œå®Œæˆã€‚è¿™ç§æƒ…å†µä¼šå¯¼è‡´çº¿ç¨‹é˜»å¡ï¼Œå°¤å…¶åœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹ï¼Œæ¯ä¸ª I/O æ“ä½œéƒ½å¯èƒ½è€—è´¹å¤§é‡æ—¶é—´ç­‰å¾…ã€‚åœ¨linuxä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰çš„socketéƒ½æ˜¯é˜»å¡çš„ï¼Œä¸€ä¸ªå…¸å‹çš„è¯»æ“ä½œæµç¨‹å¤§æ¦‚æ˜¯è¿™æ ·ï¼š<img src="https://cdn.jsdelivr.net/gh/Stan370/stan370.github.io@main/source/_posts/IOandEpoll/image-1.png" alt="socket"></p><p>å½“ç”¨æˆ·è¿›ç¨‹è°ƒç”¨äº† read()/recvfrom() ç­‰ç³»ç»Ÿè°ƒç”¨å‡½æ•°ï¼Œå®ƒä¼šè¿›å…¥å†…æ ¸ç©ºé—´ä¸­ï¼Œå½“è¿™ä¸ªç½‘ç»œI/Oæ²¡æœ‰æ•°æ®çš„æ—¶å€™ï¼Œå†…æ ¸å°±è¦ç­‰å¾…æ•°æ®çš„åˆ°æ¥ï¼Œè€Œåœ¨ç”¨æˆ·è¿›ç¨‹è¿™è¾¹ï¼Œæ•´ä¸ªè¿›ç¨‹ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°å†…æ ¸ç©ºé—´è¿”å›æ•°æ®ã€‚å½“å†…æ ¸ç©ºé—´çš„æ•°æ®å‡†å¤‡å¥½äº†ï¼Œå®ƒå°±ä¼šå°†æ•°æ®ä»å†…æ ¸ç©ºé—´ä¸­æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ï¼Œæ­¤æ—¶ç”¨æˆ·è¿›ç¨‹æ‰è§£é™¤é˜»å¡çš„çš„çŠ¶æ€ï¼Œé‡æ–°è¿è¡Œèµ·æ¥ã€‚<br>æ‰€ä»¥ï¼Œé˜»å¡I/Oçš„ç‰¹ç‚¹å°±æ˜¯åœ¨IOæ‰§è¡Œçš„ä¸¤ä¸ªé˜¶æ®µï¼ˆç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´ï¼‰éƒ½è¢«é˜»å¡äº†ã€‚</p><h2 id="éé˜»å¡-I-O">éé˜»å¡ I/O</h2><p>éé˜»å¡ I/O åˆ™å…è®¸ç¨‹åºå‘èµ· I/O æ“ä½œï¼ˆä¾‹å¦‚ read() æˆ– recvfrom()ï¼‰ï¼Œå³ä½¿æ•°æ®è¿˜æ²¡å‡†å¤‡å¥½ï¼Œå†…æ ¸ä¹Ÿä¸ä¼šè®©è¿›ç¨‹æŒ‚èµ·ï¼Œè€Œæ˜¯ç«‹å³è¿”å›ã€‚æ­¤æ—¶ç”¨æˆ·è¿›ç¨‹å¾—åˆ°çš„æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œæç¤ºæ•°æ®å°šæœªå‡†å¤‡å¥½ã€‚ç”¨æˆ·è¿›ç¨‹éœ€è¦ä¸æ–­è½®è¯¢ï¼Œé‡å¤è°ƒç”¨ I/O æ“ä½œç›´åˆ°æ•°æ®å¯ç”¨ã€‚è¿™ç§æ–¹å¼é¿å…äº†çº¿ç¨‹è¢«é˜»å¡çš„æƒ…å†µï¼Œä½†é¢‘ç¹çš„è½®è¯¢å¯èƒ½ä¼šå¯¼è‡´ CPU ä½¿ç”¨æ•ˆç‡ä½ä¸‹ã€‚<img src="https://cdn.jsdelivr.net/gh/Stan370/stan370.github.io@main/source/_posts/IOandEpoll/image-2.png" alt="alt text"></p><h2 id="å¤šè·¯å¤ç”¨-I-O">å¤šè·¯å¤ç”¨ I/O</h2><p>åç¨‹ï¼ˆè‹±è¯­ï¼šcoroutineï¼‰æ˜¯è®¡ç®—æœºç¨‹åºçš„ä¸€ç±»ç»„ä»¶ï¼Œæ¨å¹¿äº†åä½œå¼å¤šä»»åŠ¡çš„å­ä¾‹ç¨‹ï¼Œå…è®¸æ‰§è¡Œè¢«æŒ‚èµ·ä¸è¢«æ¢å¤,åç¨‹å¯ä»¥é€šè¿‡yieldï¼ˆå–å…¶â€œé€€è®©â€ä¹‹ä¹‰è€Œéâ€œäº§ç”Ÿâ€ï¼‰æ¥è°ƒç”¨å…¶å®ƒåç¨‹ï¼Œæ¥ä¸‹æ¥çš„æ¯æ¬¡åç¨‹è¢«è°ƒç”¨æ—¶ï¼Œä»åç¨‹ä¸Šæ¬¡yieldè¿”å›çš„ä½ç½®æ¥ç€æ‰§è¡Œï¼Œé€šè¿‡yieldæ–¹å¼è½¬ç§»æ‰§è¡Œæƒçš„åç¨‹ä¹‹é—´ä¸æ˜¯è°ƒç”¨è€…ä¸è¢«è°ƒç”¨è€…çš„å…³ç³»ï¼Œè€Œæ˜¯å½¼æ­¤å¯¹ç§°ã€å¹³ç­‰çš„ã€‚<br>å¤šè·¯å¤ç”¨ I/O (select()ï¼Œpoll()ï¼Œepoll()) å…è®¸å•ä¸ªçº¿ç¨‹ç›‘æ§å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ˆå¦‚ socketï¼‰ï¼Œä»è€Œåœ¨å¤šä¸ª I/O æ“ä½œä¹‹é—´è¿›è¡Œå¤ç”¨ã€‚å®ƒçš„åŸºæœ¬åŸç†æ˜¯é€šè¿‡è½®è¯¢å¤šä¸ª socketï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰æ•°æ®åˆ°è¾¾ï¼Œå¹¶åœ¨æœ‰æ•°æ®åˆ°è¾¾æ—¶é€šçŸ¥åº”ç”¨ç¨‹åºã€‚ç›¸æ¯”éé˜»å¡ I/Oï¼Œè¿™ç§æœºåˆ¶æ›´é«˜æ•ˆï¼Œç‰¹åˆ«é€‚åˆäºå¤„ç†å¤§é‡è¿æ¥çš„æœåŠ¡å™¨ã€‚<br>æœ¬åœ° I/O æ“ä½œé€šå¸¸ä¸ºé˜»å¡æ¨¡å¼ï¼Œå³åœ¨è¿›è¡Œ I/O æ“ä½œæ—¶ï¼Œè¿›ç¨‹ä¼šè¢«æŒ‚èµ·ç›´åˆ°æ“ä½œå®Œæˆã€‚ç„¶è€Œï¼Œç°ä»£æ“ä½œç³»ç»Ÿä¹Ÿæä¾›äº†éé˜»å¡æœ¬åœ° I/O æˆ–å¼‚æ­¥ I/Oï¼ˆå¦‚ Linux çš„ aio æˆ– Windows çš„ IOCPï¼‰ï¼Œå…è®¸åº”ç”¨ç¨‹åºç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡è€Œä¸ç­‰å¾… I/O å®Œæˆã€‚ç½‘ç»œ I/O åŒæ ·å¯ä»¥æ˜¯é˜»å¡çš„æˆ–éé˜»å¡çš„ã€‚åœ¨éé˜»å¡ç½‘ç»œ I/O ä¸­ï¼Œè¿›ç¨‹å‘èµ· I/O æ“ä½œæ—¶ä¸éœ€è¦ç­‰å¾…æ•°æ®è¿”å›ï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œã€‚ç½‘ç»œ I/O é¢†åŸŸä¸­ï¼Œå¼‚æ­¥ I/Oã€å¤šè·¯å¤ç”¨ I/Oï¼ˆå¦‚ select()ã€poll()ã€epoll()ï¼‰ã€ä»¥åŠäº‹ä»¶é©±åŠ¨ç¼–ç¨‹ï¼ˆå¦‚ libuvã€libeventï¼‰ç­‰æŠ€æœ¯è¢«å¹¿æ³›ä½¿ç”¨ï¼Œä»¥åº”å¯¹é«˜å»¶è¿Ÿå’Œå¹¶å‘é—®é¢˜ã€‚</p><p>å°†åç¨‹ä¸IOå¤šè·¯å¤ç”¨ç»“åˆèµ·æ¥ï¼Œå¯ä»¥å®ç°é«˜æ€§èƒ½çš„å¹¶å‘IOç¨‹åºã€‚socket æ˜¯ Unix ä¸­çš„æœ¯è¯­ã€‚socket å¯ä»¥ç”¨äºåŒä¸€å°ä¸»æœºçš„ä¸åŒè¿›ç¨‹é—´çš„é€šä¿¡ï¼Œä¹Ÿå¯ä»¥ç”¨äºä¸åŒä¸»æœºé—´çš„é€šä¿¡ã€‚ä¸€ä¸ª socket åŒ…å«åœ°å€ã€ç±»å‹å’Œé€šä¿¡åè®®ç­‰ä¿¡æ¯ï¼Œé€šè¿‡ socket() å‡½æ•°åˆ›å»ºï¼š<br>int socket(int domain, int type, int protocol)<br>è¿”å›çš„å°±æ˜¯è¿™ä¸ª socket å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ fdã€‚æ“ä½œç³»ç»Ÿå°† socket æ˜ å°„åˆ°è¿›ç¨‹çš„ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸Šï¼Œè¿›ç¨‹å°±å¯ä»¥é€šè¿‡è¯»å†™è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦æ¥å’Œè¿œç¨‹ä¸»æœºé€šä¿¡ã€‚</p><p>å¯ä»¥è¿™æ ·ç†è§£ï¼šsocket æ˜¯è¿›ç¨‹é—´é€šä¿¡è§„åˆ™çš„é«˜å±‚æŠ½è±¡ï¼Œè€Œ fd æä¾›çš„æ˜¯åº•å±‚çš„å…·ä½“å®ç°ã€‚socket ä¸ fd æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚é€šè¿‡ socket é€šä¿¡ï¼Œå®é™…ä¸Šå°±æ˜¯é€šè¿‡æ–‡ä»¶æè¿°ç¬¦ fd è¯»å†™æ–‡ä»¶ã€‚è¿™ä¹Ÿç¬¦åˆ Unixâ€œä¸€åˆ‡çš†æ–‡ä»¶â€çš„å“²å­¦ã€‚ä½¿ç”¨IOå¤šè·¯å¤ç”¨æŠ€æœ¯ç›‘å¬å¤šä¸ªsocketï¼Œå½“æœ‰socketå¯è¯»æˆ–å¯å†™æ—¶ï¼Œé€šè¿‡äº‹ä»¶é€šçŸ¥ï¼Œæ¿€æ´»ç›¸åº”çš„åç¨‹è¿›è¡Œå¤„ç†ã€‚</p><h2 id="1-select">1.select()</h2><p>ç”¨æ³•ï¼šå…è®¸ç›‘è§†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œä»¥æŸ¥çœ‹å®ƒä»¬æ˜¯å¦å·²å‡†å¤‡å¥½è¯»å–ã€å†™å…¥æˆ–æ˜¯å¦æœ‰é”™è¯¯ã€‚<br>é™åˆ¶ï¼š<br>å…·æœ‰å¯ç›‘æ§çš„æœ€å¤§æ–‡ä»¶æè¿°ç¬¦æ•°é‡ï¼ˆé€šå¸¸ä¸º 1024ï¼‰ã€‚æ­¤æ•°é‡ç”± å®šä¹‰FD_SETSIZEï¼Œåœ¨é«˜å¹¶å‘åº”ç”¨ç¨‹åºä¸­å¯èƒ½ä¼šå—åˆ°é™åˆ¶ã€‚<br>å½“æœ‰å¤§é‡æ–‡ä»¶æè¿°ç¬¦æ—¶æ•ˆç‡ä½ä¸‹ï¼Œå› ä¸ºå®ƒæ¯æ¬¡éƒ½å¿…é¡»æ£€æŸ¥æ¯ä¸ªæè¿°ç¬¦ã€‚<br>ä½¿ç”¨å•ä¸€æ•°æ®ç»“æ„æ¥ä¿å­˜è¯»å–ã€å†™å…¥å’Œé”™è¯¯æè¿°ç¬¦ã€‚</p><p>ä¾‹å­ï¼š<br>fd_set readfds; FD_ZERO(&amp;readfds); FD_SET(socket_fd, &amp;readfds); select(socket_fd + 1, &amp;readfds, NULL, NULL, &amp;timeout);</p><h2 id="2-poll">2.poll()</h2><p>poll å’Œ select å‡ ä¹æ²¡æœ‰åŒºåˆ«ã€‚poll åœ¨ç”¨æˆ·æ€é€šè¿‡æ•°ç»„æ–¹å¼ä¼ é€’æ–‡ä»¶æè¿°ç¬¦ï¼Œåœ¨å†…æ ¸ä¼šè½¬ä¸ºé“¾è¡¨æ–¹å¼å­˜å‚¨ï¼Œæ²¡æœ‰æœ€å¤§æ•°é‡çš„é™åˆ¶ int poll(struct pollfd *fds, nfds_t nfds, int timeout);</p><p>å¥½å¤„ï¼š<br>struct pollfdä½¿ç”¨æ¯” ä½¿ç”¨çš„ä½æ©ç æ›´å…·å¯æ‰©å±•æ€§çš„æ•°ç»„select()ã€‚<br>å¯ä»¥æ›´è½»æ¾åœ°å¤„ç†å¤§é‡æ–‡ä»¶æè¿°ç¬¦ã€‚</p><p>ä¾‹å­ï¼š<br>struct pollfd fds[2]; fds[0].fd = socket_fd; fds[0].events = POLLIN; poll(fds, 2, timeout);</p><h2 id="3-epoll-ï¼ˆLinux-ä¸“ç”¨ï¼‰">3. epoll()ï¼ˆLinux ä¸“ç”¨ï¼‰</h2><p>epoll æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p><p>ä½¿ç”¨çº¢é»‘æ ‘å­˜å‚¨æ–‡ä»¶æè¿°ç¬¦é›†åˆ<br>ä½¿ç”¨é˜Ÿåˆ—å­˜å‚¨å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦<br>æ¯ä¸ªæ–‡ä»¶æè¿°ç¬¦åªéœ€åœ¨æ·»åŠ æ—¶ä¼ å…¥ä¸€æ¬¡ï¼›é€šè¿‡äº‹ä»¶æ›´æ”¹æ–‡ä»¶æè¿°ç¬¦çŠ¶æ€</p><p>å› ä¸ºå®ƒä½¿ç”¨åŸºäºäº‹ä»¶çš„æ¨¡å‹ï¼Œæ‰€ä»¥poll()æ•ˆç‡æ›´é«˜ã€‚å†…æ ¸ä»…è¿”å›å·²å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œä¸æ˜¯è½®è¯¢æ¯ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚å…è®¸è¾¹ç¼˜è§¦å‘å’Œç”µå¹³è§¦å‘æ¨¡å¼ï¼Œæä¾›çµæ´»æ€§ã€‚</p><p>epoll()æ•ˆç‡æ›´é«˜ï¼Œå› ä¸ºå®ƒä¼šå†…éƒ¨è·Ÿè¸ªæ–‡ä»¶æè¿°ç¬¦é›†ï¼Œå¹¶ä¸”åªåœ¨æŸä¸ªæ–‡ä»¶æè¿°ç¬¦å°±ç»ªæ—¶é€šçŸ¥åº”ç”¨ç¨‹åºã€‚å®ƒä¸éœ€è¦åœ¨æ¯æ¬¡è°ƒç”¨æ—¶é‡æ–°æ£€æŸ¥æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ã€‚é‚£ä¸ºä»€ä¹ˆepollå¯ä»¥é«˜æ•ˆå¤„ç†æ•°åƒä¸ªè¿æ¥ï¼Œè¾¾åˆ°æ›´å¥½çš„å¹¶å‘æ€§èƒ½ï¼Ÿ</p><h3 id="é«˜æ•ˆçš„äº‹ä»¶é€šçŸ¥æœºåˆ¶">é«˜æ•ˆçš„äº‹ä»¶é€šçŸ¥æœºåˆ¶</h3><p>select()å’Œpoll()ï¼š</p><p>è¿™ä¸¤ä¸ªå‡½æ•°æ¯æ¬¡è°ƒç”¨æ—¶éƒ½ä¼šå¯¹æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦æ‰§è¡Œçº¿æ€§æ‰«æã€‚è¿™æ„å‘³ç€å³ä½¿åªæœ‰å°‘æ•°æ–‡ä»¶æè¿°ç¬¦â€œå°±ç»ªâ€ï¼ˆå³æ•°æ®å¯ä¾›è¯»å–/å†™å…¥ï¼‰ï¼Œå†…æ ¸ä¹Ÿå¿…é¡»åœ¨æ¯æ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶æ£€æŸ¥æ¯ä¸ªæè¿°ç¬¦ã€‚è¿™ä½¿å¾—å®ƒä»¬çš„æ€§èƒ½ä¸å—ç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡æˆæ­£æ¯”ã€‚<br>ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ­£åœ¨ç›‘è§† 1,000 ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œä½†åªæœ‰ 1 ä¸ªå·²å‡†å¤‡å°±ç»ªï¼Œselect()åˆ™poll()ä»å°†å¯¹æ‰€æœ‰ 1,000 ä¸ªè¿›è¡Œè¿­ä»£ã€‚</p><p>epollå®ƒçš„å·¥ä½œåŸç†æ˜¯åªå‘å†…æ ¸æ³¨å†Œä¸€æ¬¡æ–‡ä»¶æè¿°ç¬¦ï¼ˆä½¿ç”¨epoll_ctl()ï¼‰ã€‚æ­¤åï¼Œå†…æ ¸ä¼šè·Ÿè¸ªå“ªäº›æ–‡ä»¶æè¿°ç¬¦å·²å°±ç»ªã€‚å½“æ‚¨è°ƒç”¨æ—¶epoll_wait()ï¼Œå®ƒä»…è¿”å›å…·æœ‰äº‹ä»¶ï¼ˆå³æ•°æ®å°±ç»ªï¼‰çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œä¸ä¼šæ‰«ææ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ã€‚è¿™ä½¿å¾—å®ƒæ›´åŠ é«˜æ•ˆï¼Œå°¤å…¶æ˜¯åœ¨ç›‘è§†å¤§é‡æè¿°ç¬¦æ—¶ï¼Œå› ä¸ºå®ƒæ¶ˆé™¤äº†é‡å¤æ‰«æçš„éœ€è¦ã€‚<br>å®ƒä¸å†åœ¨æ¯æ¬¡è°ƒç”¨æ—¶æ£€æŸ¥æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ï¼Œepollè€Œæ˜¯æ›´åƒä¸€ä¸ªâ€œäº‹ä»¶é©±åŠ¨â€ç³»ç»Ÿï¼šå½“æ³¨å†Œæè¿°ç¬¦çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå†…æ ¸ä¼šé€šçŸ¥æ‚¨ã€‚</p><h3 id="è¾¹æ²¿è§¦å‘å’Œç”µå¹³è§¦å‘æ¨¡å¼">è¾¹æ²¿è§¦å‘å’Œç”µå¹³è§¦å‘æ¨¡å¼</h3><p>æ°´å¹³è§¦å‘ï¼ˆLTï¼ŒLevel Triggerï¼‰ï¼šå½“æ–‡ä»¶æè¿°ç¬¦å°±ç»ªæ—¶ï¼Œä¼šè§¦å‘é€šçŸ¥ï¼Œå¦‚æœç”¨æˆ·ç¨‹åºæ²¡æœ‰ä¸€æ¬¡æ€§æŠŠæ•°æ®è¯»/å†™å®Œï¼Œä¸‹æ¬¡è¿˜ä¼šå‘å‡ºå¯è¯»/å¯å†™ä¿¡å·è¿›è¡Œé€šçŸ¥ã€‚<br>è¾¹ç¼˜è§¦å‘ï¼ˆETï¼ŒEdge Triggerï¼‰ï¼šä»…å½“æè¿°ç¬¦ä»æœªå°±ç»ªå˜ä¸ºå°±ç»ªæ—¶ï¼Œé€šçŸ¥ä¸€æ¬¡ï¼Œä¹‹åä¸ä¼šå†é€šçŸ¥ã€‚</p><p>select åªæ”¯æŒæ°´å¹³è§¦å‘ï¼Œepoll æ”¯æŒæ°´å¹³è§¦å‘å’Œè¾¹ç¼˜è§¦å‘ã€‚åŒºåˆ«ï¼šè¾¹ç¼˜è§¦å‘æ•ˆç‡æ›´é«˜ï¼Œå‡å°‘äº†äº‹ä»¶è¢«é‡å¤è§¦å‘çš„æ¬¡æ•°ï¼Œå‡½æ•°ä¸ä¼šè¿”å›å¤§é‡ç”¨æˆ·ç¨‹åºå¯èƒ½ä¸éœ€è¦çš„æ–‡ä»¶æè¿°ç¬¦ã€‚</p><p>ä½¿ç”¨åœºæ™¯ï¼šå½“è¿æ¥æ•°è¾ƒå¤šå¹¶ä¸”æœ‰å¾ˆå¤šçš„ä¸æ´»è·ƒè¿æ¥æ—¶ï¼Œepoll çš„æ•ˆç‡æ¯”å…¶å®ƒä¸¤è€…é«˜å¾ˆå¤šã€‚å½“è¿æ¥æ•°è¾ƒå°‘å¹¶ä¸”éƒ½ååˆ†æ´»è·ƒçš„æƒ…å†µä¸‹ï¼Œç”±äº epoll éœ€è¦å¾ˆå¤šå›è°ƒï¼Œå› æ­¤æ€§èƒ½å¯èƒ½ä½äºå…¶å®ƒä¸¤è€…ã€‚</p><p>3.å¤§é‡æè¿°ç¬¦çš„ O(1) æ€§èƒ½<br>select()å’Œpoll()ï¼š<br>ä¸¤è€…éƒ½å…·æœ‰O(n)å¤æ‚åº¦ï¼Œå…¶ä¸­næ˜¯è¢«ç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦çš„æ•°é‡ã€‚éšç€æè¿°ç¬¦æ•°é‡çš„å¢åŠ ï¼Œæ£€æŸ¥å®ƒä»¬æ‰€èŠ±è´¹çš„æ—¶é—´ä¹Ÿå‘ˆçº¿æ€§å¢é•¿ã€‚<br>epoll()ï¼š<br>epoll_wait()å¯¹äºå¤§å¤šæ•°æ“ä½œæ¥è¯´ï¼Œå…¶å¤æ‚åº¦ä¸ºO(1)ï¼Œè¿™æ„å‘³ç€å®ƒçš„æ€§èƒ½ä¸ä¼šéšç€æ–‡ä»¶æè¿°ç¬¦æ•°é‡çš„å¢åŠ è€Œé™ä½ã€‚è¿™ä½¿å¾—å®ƒåœ¨å¤„ç†æ•°åƒï¼ˆç”šè‡³æ•°ä¸‡ï¼‰ä¸ªè¿æ¥æ—¶å…·æœ‰æ›´å¥½çš„æ‰©å±•æ€§ã€‚</p><p>4.å†…æ ¸ç©ºé—´æ•°æ®ç»“æ„<br>epoll()ä½¿ç”¨æ›´å…ˆè¿›çš„å†…æ ¸ç©ºé—´æ•°æ®ç»“æ„ï¼ˆå¦‚çº¢é»‘æ ‘å’Œé“¾æ¥åˆ—è¡¨ï¼‰æ¥é«˜æ•ˆè·Ÿè¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚ä¸€æ—¦æ–‡ä»¶æè¿°ç¬¦è¢«æ³¨å†Œï¼Œå®ƒå°±ä¼šå­˜å‚¨åœ¨æ ‘ä¸­ï¼Œä»è€Œå…è®¸å¿«é€ŸæŸ¥æ‰¾å’Œæ›´æ–°ï¼Œè¿›ä¸€æ­¥æé«˜æ€§èƒ½ã€‚<br>ç›¸æ¯”ä¹‹ä¸‹ï¼Œæ¯æ¬¡è°ƒç”¨æ—¶select()éƒ½poll()éœ€è¦å°†æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ä»ç”¨æˆ·ç©ºé—´å¤åˆ¶åˆ°å†…æ ¸ç©ºé—´ï¼Œå¹¶ä¸”å†…æ ¸å¿…é¡»æ£€æŸ¥æ¯ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œä»è€Œå¯¼è‡´æ›´å¤šçš„å¼€é”€ã€‚</p><ul><li><strong><code>select()</code> and <code>poll()</code></strong>:<ul><li>Both have <strong>O(n)</strong> complexity, where <code>n</code> is the number of file descriptors being monitored. As the number of descriptors grows, the time taken to check them grows linearly.</li></ul></li><li><strong><code>epoll()</code></strong>:<ul><li><code>epoll_wait()</code> has <strong>O(1)</strong> complexity for most operations, meaning it doesnâ€™t degrade in performance as the number of file descriptors increases. This allows it to scale much better when handling thousands (or even tens of thousands) of connections.</li></ul></li></ul><h3 id="4-Kernel-Space-Data-Structures">4. <strong>Kernel-Space Data Structures</strong></h3><ul><li><code>epoll()</code> uses more advanced kernel-space data structures (like red-black trees and linked lists) to efficiently track the file descriptors. Once a file descriptor is registered, it is stored in a tree, allowing quick lookups and updates, further improving performance.</li><li>In contrast, <code>select()</code> and <code>poll()</code> need to copy all file descriptors from user space to kernel space on every call, and the kernel has to check each one, leading to more overhead.</li></ul><p>æ­¤å¤–è¿˜ä½¿ç”¨äº†å†…å­˜æ˜ å°„ï¼ˆÂ <code>mmap</code>Â ï¼‰æŠ€æœ¯</p><p>å¦ä¸€ä¸ªæœ¬è´¨çš„æ”¹è¿›åœ¨äºÂ <code>epoll</code>Â é‡‡ç”¨åŸºäºäº‹ä»¶çš„å°±ç»ªé€šçŸ¥æ–¹å¼ã€‚åœ¨Â <code>select/poll</code>Â ä¸­ï¼Œè¿›ç¨‹åªæœ‰åœ¨è°ƒç”¨ä¸€å®šçš„æ–¹æ³•åï¼Œå†…æ ¸æ‰å¯¹æ‰€æœ‰ç›‘è§†çš„socketæè¿°ç¬¦è¿›è¡Œæ‰«æï¼Œè€ŒÂ <code>epoll</code>Â äº‹å…ˆé€šè¿‡Â <code>epoll_ctl()</code>Â æ¥æ³¨å†Œä¸€ä¸ªsocketæè¿°ç¬¦ï¼Œä¸€æ—¦æ£€æµ‹åˆ°epollç®¡ç†çš„socketæè¿°ç¬¦å°±ç»ªæ—¶ï¼Œå†…æ ¸ä¼šé‡‡ç”¨ç±»ä¼¼Â <code>callback</code>Â çš„å›è°ƒæœºåˆ¶ï¼Œè¿…é€Ÿæ¿€æ´»è¿™ä¸ªsocketæè¿°ç¬¦ï¼Œå½“è¿›ç¨‹è°ƒç”¨Â <code>epoll_wait()</code>Â æ—¶ä¾¿å¯ä»¥å¾—åˆ°é€šçŸ¥ï¼Œä¹Ÿå°±æ˜¯è¯´epollæœ€å¤§çš„ä¼˜ç‚¹å°±åœ¨äºå®ƒÂ <strong>åªç®¡å°±ç»ªçš„socketæè¿°ç¬¦ï¼Œè€Œè·Ÿsocketæè¿°ç¬¦çš„æ€»æ•°æ— å…³</strong>Â ã€‚</p><p>5.å¤§é‡æè¿°ç¬¦çš„å†…å­˜ä½¿ç”¨ç‡è¾ƒä½<br>åœ¨ ä¸­select()ï¼Œæ‚¨å¿…é¡»æä¾›ä¸€ä¸ªå›ºå®šå¤§å°çš„ä½æ©ç ï¼ˆé€šå¸¸é™åˆ¶ä¸º 1024 ä¸ªæè¿°ç¬¦ï¼Œä½†åœ¨æŸäº›ç³»ç»Ÿä¸­å¯ä»¥è¿›è¡Œè°ƒæ•´ï¼‰ã€‚<br>åœ¨ä¸­poll()ï¼Œæ‚¨ä¼ é€’ä¸€ä¸ªæ•°ç»„struct pollfdï¼Œè¯¥æ•°ç»„éšç€æè¿°ç¬¦çš„æ•°é‡çº¿æ€§å¢é•¿ã€‚<br>epoll()é€šè¿‡ä»…ç»´æŠ¤æ´»åŠ¨æ–‡ä»¶æè¿°ç¬¦ï¼ˆå…·æœ‰äº‹ä»¶çš„æ–‡ä»¶æè¿°ç¬¦ï¼‰åˆ—è¡¨è€Œä¸æ˜¯æ‰€æœ‰æè¿°ç¬¦çš„å®Œæ•´é›†åˆæ¥æœ€å¤§é™åº¦åœ°å‡å°‘å†…å­˜ä½¿ç”¨é‡ã€‚<br>ä¸‹é¢æ˜¯epollæ€§èƒ½æ£€æµ‹çš„ä¸€æ®µä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/epoll.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> {</span><br><span class="line">    <span class="type">int</span> fd1 = open(<span class="string">"file1.txt"</span>, O_RDONLY);</span><br><span class="line">    <span class="type">int</span> fd2 = open(<span class="string">"file2.txt"</span>, O_RDONLY);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (fd1 &lt; <span class="number">0</span> || fd2 &lt; <span class="number">0</span>) {</span><br><span class="line">        perror(<span class="string">"open failed"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create an epoll instance</span></span><br><span class="line">    <span class="type">int</span> epoll_fd = epoll_create1(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (epoll_fd &lt; <span class="number">0</span>) {</span><br><span class="line">        perror(<span class="string">"epoll_create1 failed"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// Add fd1 and fd2 to the epoll instance</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">epoll_event</span> <span class="title">event</span>;</span></span><br><span class="line">    event.events = EPOLLIN;  <span class="comment">// We are interested in read events</span></span><br><span class="line">    event.data.fd = fd1;</span><br><span class="line">    <span class="keyword">if</span> (epoll_ctl(epoll_fd, EPOLL_CTL_ADD, fd1, &amp;event) &lt; <span class="number">0</span>) {</span><br><span class="line">        perror(<span class="string">"epoll_ctl failed for fd1"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    }</span><br><span class="line">    event.data.fd = fd2;</span><br><span class="line">    <span class="keyword">if</span> (epoll_ctl(epoll_fd, EPOLL_CTL_ADD, fd2, &amp;event) &lt; <span class="number">0</span>) {</span><br><span class="line">        perror(<span class="string">"epoll_ctl failed for fd2"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">epoll_event</span> <span class="title">events</span>[2];</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) {</span><br><span class="line">        <span class="comment">// Wait for events on the file descriptors</span></span><br><span class="line">        <span class="type">int</span> num_events = epoll_wait(epoll_fd, events, <span class="number">2</span>, <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (num_events &lt; <span class="number">0</span>) {</span><br><span class="line">            perror(<span class="string">"epoll_wait failed"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Handle the events that are ready</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; num_events; i++) {</span><br><span class="line">            <span class="keyword">if</span> (events[i].data.fd == fd1) {</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"Data ready on fd1\n"</span>);</span><br><span class="line">            } <span class="keyword">else</span> <span class="keyword">if</span> (events[i].data.fd == fd2) {</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"Data ready on fd2\n"</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    close(fd1);</span><br><span class="line">    close(fd2);</span><br><span class="line">    close(epoll_fd);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>epoll()é€Ÿåº¦æ›´å¿«ï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒé¿å…äº†é‡å¤æ‰«ææ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œæ˜¯ä½¿ç”¨äº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼Œä»…åœ¨å¿…è¦æ—¶é€šçŸ¥åº”ç”¨ç¨‹åºã€‚å¯¹äºå¤§å¤šæ•°æ“ä½œï¼Œå®ƒçš„æ€§èƒ½ä¸º O(1)ï¼Œå¹¶ä¸”å¯ä»¥é«˜æ•ˆå¤„ç†æ•°åƒä¸ªè¿æ¥ï¼Œä½¿å…¶æˆä¸ºå¤§å‹ Web æœåŠ¡å™¨ç­‰é«˜å¹¶å‘åœºæ™¯çš„ç†æƒ³é€‰æ‹©ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œselect()å’Œpoll()ä¸¤è€…éƒ½å…·æœ‰ O(n) æ€§èƒ½ï¼Œéšç€æ–‡ä»¶æè¿°ç¬¦æ•°é‡çš„å¢åŠ ï¼Œè¿™ä¼šå¯¼è‡´é€Ÿåº¦æ˜æ˜¾å˜æ…¢ã€‚</p><h2 id="Reactor">Reactor</h2><p>æœ€ç›´è§‚çš„æœåŠ¡å™¨å¤„ç†å¤šå®¢æˆ·ç«¯è®¿é—®çš„æ–¹å¼ï¼Œå°±æ˜¯ä¸ºæ¯ä¸ªè¿æ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ–è€…æ›´æ—©æœŸæ“ä½œç³»ç»Ÿé‡Œç”šè‡³æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚è™½ç„¶çº¿ç¨‹æ¯”è¿›ç¨‹æ›´è½»é‡ï¼Œåˆ‡æ¢æˆæœ¬ä¹Ÿæ›´ä½ï¼Œä½†æ¯è¿æ¥ä¸€ä¸ªçº¿ç¨‹åœ¨å¹¶å‘é‡å¤§æ—¶ä»ä¼šé¢ä¸´ä¸¤ä¸ªé—®é¢˜ï¼š</p><p>çº¿ç¨‹åˆ›å»º/é”€æ¯æœ‰ç³»ç»Ÿå¼€é”€ï¼ˆmalloc stackã€context switchï¼‰ã€‚</p><p>çº¿ç¨‹æ˜¯ç¨€ç¼ºèµ„æºï¼Œç³»ç»Ÿçº¿ç¨‹æ•°æœ‰ä¸Šé™ï¼ˆå¦‚ Linux é»˜è®¤ 1024~65535ï¼‰ã€‚</p><p>æ‰€ä»¥ï¼Œç°ä»£æœåŠ¡ç«¯æ¶æ„æ›´å€¾å‘äºä½¿ç”¨çº¿ç¨‹æ± æ¥å¤ç”¨çº¿ç¨‹èµ„æºã€‚çº¿ç¨‹æ± ä¸­æ¯ä¸ªçº¿ç¨‹ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–ä»»åŠ¡å¤„ç†ï¼Œé¿å…äº†åå¤åˆ›å»º/é”€æ¯çš„å¼€é”€ã€‚</p><p>ä½†çº¿ç¨‹æ± å¼•å…¥åé¢ä¸´å¦ä¸€ä¸ªé—®é¢˜ï¼šI/O é˜»å¡ä¼šæµªè´¹çº¿ç¨‹èµ„æºã€‚å¦‚æœä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ read(socket) è¢«é˜»å¡ï¼Œè€Œè¿æ¥ä¸Šæ²¡æœ‰æ•°æ®ï¼Œé‚£ä¹ˆæ•´ä¸ªçº¿ç¨‹å°±â€œå¡ä½â€äº†ï¼Œä¸èƒ½æœåŠ¡å…¶ä»–è¿æ¥ã€‚</p><p>ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°† socket è®¾ç½®ä¸ºéé˜»å¡æ¨¡å¼ã€‚è¿™æ · read() ä¸ä¼šé˜»å¡ï¼Œè€Œæ˜¯ç«‹å³è¿”å›ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®ï¼Œå°±è¿”å›é”™è¯¯ç  EAGAINã€‚çº¿ç¨‹å°±å¯ä»¥åœ¨ç”¨æˆ·ç©ºé—´â€œè½®è¯¢â€æ‰€æœ‰ socketã€‚</p><p>ä½†è¿™ç§æ–¹å¼ä¼šå¯¼è‡´é«˜ CPU å ç”¨ï¼Œå°¤å…¶åœ¨è¿æ¥æ•°å¤šæ—¶æ•ˆç‡ä½ã€‚</p><p>æ‰€ä»¥å¼•å…¥äº† I/O å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼ˆå¦‚ selectã€pollã€epollï¼‰ï¼Œå®ƒå…è®¸ä¸€ä¸ªçº¿ç¨‹é€šè¿‡ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚ epoll_waitï¼‰åŒæ—¶ç›‘å¬å¤šä¸ªè¿æ¥çš„çŠ¶æ€ï¼Œä¸€æ—¦æŸäº›è¿æ¥å¯è¯»ï¼ˆæˆ–å¯å†™ï¼‰ï¼Œå†…æ ¸å°±é€šçŸ¥æˆ‘ä»¬â€œè¿™äº›è¿æ¥å‡†å¤‡å¥½äº†â€ï¼Œæˆ‘ä»¬å†å» read()ï¼Œé¿å…äº†ä¸å¿…è¦çš„è½®è¯¢ã€‚</p><p>è¿™å°±æ˜¯åƒ Nginxã€Redisã€Node.jsã€netty ç­‰é«˜å¹¶å‘æœåŠ¡é‡‡ç”¨çš„åŸºç¡€æ¨¡å¼ï¼šI/O å¤šè·¯å¤ç”¨ + éé˜»å¡ I/O + äº‹ä»¶é©±åŠ¨æ¨¡å‹ã€‚Reactoræ¨¡å¼ç§°ä¸ºååº”å™¨æ¨¡å¼æˆ–åº”ç­”è€…æ¨¡å¼ï¼Œæ˜¯åŸºäºäº‹ä»¶é©±åŠ¨çš„è®¾è®¡æ¨¡å¼ï¼Œæ‹¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå¹¶å‘è¾“å…¥æºï¼Œæœ‰ä¸€ä¸ªæœåŠ¡å¤„ç†å™¨å’Œå¤šä¸ªè¯·æ±‚å¤„ç†å™¨ï¼ŒæœåŠ¡å¤„ç†å™¨ä¼šåŒæ­¥çš„å°†è¾“å…¥çš„è¯·æ±‚äº‹ä»¶ä»¥å¤šè·¯å¤ç”¨çš„æ–¹å¼åˆ†å‘ç»™ç›¸åº”çš„è¯·æ±‚å¤„ç†å™¨ã€‚Proactor æ˜¯æŠŠä»»åŠ¡äº¤ç»™æ“ä½œç³»ç»Ÿ / runtimeï¼Œè®©å®ƒå®Œæˆåé€šçŸ¥ä½ å¤„ç†ç»“æœ</p><p>å• Reactor å•çº¿ç¨‹ï¼ˆRedisï¼‰<br>æ‰€æœ‰ I/O + ä¸šåŠ¡é€»è¾‘éƒ½åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ä¸²è¡Œå®Œæˆ</p><p>ç®€å•ã€æ€§èƒ½å¥½ï¼ˆä½†ä¸šåŠ¡å¤„ç†ä¸èƒ½å¤ªé‡ï¼‰</p><p>å• Reactor å¤šçº¿ç¨‹ï¼ˆNginxï¼‰<br>Reactor åªè´Ÿè´£ç›‘å¬/è°ƒåº¦ï¼Œä¸šåŠ¡é€»è¾‘äº¤ç»™çº¿ç¨‹æ± å¤„ç†</p><p>ä¸»ä» Reactorï¼ˆNettyï¼‰<br>ä¸» Reactor æ¥æ”¶è¿æ¥</p><p>ä» Reactor è´Ÿè´£å…·ä½“æ•°æ®è¯»å†™</p><p>åˆ†ç¦» accept å’Œ IO é˜¶æ®µï¼Œæé«˜å¯æ‰©å±•æ€§</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åœ¨ç°ä»£è®¡ç®—æœºç³»ç»Ÿä¸­ï¼ŒI/O æ“ä½œæ˜¯å½±å“æ€§èƒ½çš„å…³é”®å› ç´ ï¼Œå°¤å…¶æ˜¯åœ¨ç½‘ç»œæœåŠ¡å’Œæœ¬åœ°å­˜å‚¨å¯†é›†å‹åº”ç”¨ä¸­ã€‚ä½ æ˜¯å¦æ›¾ç»æ€è€ƒè¿‡ç½‘ç»œ I/O å’Œæœ¬åœ° I/O ä¹‹é—´çš„æ€§èƒ½å·®å¼‚ï¼Ÿä¸ºä»€ä¹ˆç½‘ç»œä¼ è¾“æ€»æ˜¯æ¯”æœ¬åœ°ç¡¬ç›˜æ…¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å‡½æ•°select()ã€poll()å’Œepoll()åœ¨ç½‘ç»œç¼–ç¨‹å’Œæ“ä½œç³»ç»Ÿ</summary>
      
    
    
    
    <category term="è®¡ç®—æœºç§‘å­¦" scheme="https://stan370.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/"/>
    
    
    <category term="è®¡ç®—æœºåŸºç¡€" scheme="https://stan370.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    <category term="æ“ä½œç³»ç»Ÿ" scheme="https://stan370.github.io/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>ç†è§£æ•°æ®åº“ç³»ç»Ÿ</title>
    <link href="https://stan370.github.io/2024/08/20/DB/"/>
    <id>https://stan370.github.io/2024/08/20/DB/</id>
    <published>2024-08-19T16:09:14.000Z</published>
    <updated>2025-03-19T12:12:05.245Z</updated>
    
    <content type="html"><![CDATA[<h1>Database</h1><p>æ•°æ®åº“æ˜¯ä¸€ä¸ªå­˜å‚¨æ•°æ®çš„ç³»ç»Ÿï¼Œå®ƒå¯ä»¥å­˜å‚¨å¤§é‡çš„æ•°æ®ï¼Œå¹¶ä¸”èƒ½å¤Ÿé«˜æ•ˆåœ°æ£€ç´¢è¿™äº›æ•°æ®ã€‚æ•°æ®åº“ä¸­çš„æ•°æ®è¢«ç»„ç»‡æˆè¡¨æ ¼çš„å½¢å¼ï¼Œè¿™äº›è¡¨æ ¼ç§°ä¸ºè¡¨ã€‚è¡¨ä¸­çš„æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªè®°å½•ï¼Œæ¯ä¸€åˆ—ä»£è¡¨ä¸€ä¸ªå­—æ®µã€‚</p><blockquote><p>å¯¹äºæ•°æ®åº“è€Œè¨€ï¼Œé‡è¦çš„ä¸æ˜¯æ•°æ®é‡ï¼Œè€Œæ˜¯å½“æ•°æ®é‡å¢åŠ æ—¶è¿ç®—å¦‚ä½•å¢åŠ ã€‚æ—¶é—´å¤æ‚åº¦ç”¨æ¥æ£€éªŒæŸä¸ªç®—æ³•å¤„ç†ä¸€å®šé‡çš„æ•°æ®è¦èŠ±å¤šé•¿æ—¶é—´ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ä¼šç»™å‡ºç¡®åˆ‡çš„è¿ç®—æ¬¡æ•°ï¼Œä½†æ˜¯ç»™å‡ºçš„æ˜¯ä¸€ç§ç†å¿µã€‚</p></blockquote><p><strong>æ ¹æ®æ•°æ®æ¨¡å‹åˆ†ç±»ï¼š</strong></p><p><strong>å…³ç³»å‹æ•°æ®åº“ï¼ˆRDBMSï¼‰</strong>ï¼š</p><ul><li>ä½¿ç”¨è¡¨æ ¼ï¼ˆè¡¨ï¼‰å’Œè¡Œåˆ—ç»“æ„å­˜å‚¨æ•°æ®ã€‚</li><li>æ•°æ®ä»¥ä¸¥æ ¼çš„ç»“æ„ï¼ˆæ¨¡å¼ï¼‰å­˜åœ¨ï¼Œå…·æœ‰é¢„å®šä¹‰çš„æ¨¡å¼ï¼ˆSchemaï¼‰ã€‚</li><li>å¸¸è§çš„å…³ç³»å‹æ•°æ®åº“åŒ…æ‹¬ MySQLã€PostgreSQLã€Oracle å’Œ SQL Server ç­‰ã€‚</li></ul><p><strong>éå…³ç³»å‹æ•°æ®åº“ï¼ˆNoSQLï¼‰</strong>ï¼š</p><p>é”®å€¼ï¼ˆKey-Valueï¼‰æ•°æ®åº“<br>æ¦‚è¿°ï¼šé”®å€¼æ•°æ®åº“å°±åƒåœ¨ä¼ ç»Ÿè¯­è¨€ä¸­ä½¿ç”¨çš„å“ˆå¸Œè¡¨ã€‚ä½ å¯ä»¥é€šè¿‡keyæ¥æ·»åŠ ã€æŸ¥è¯¢æˆ–è€…åˆ é™¤æ•°æ®ï¼Œé‰´äºä½¿ç”¨ä¸»é”®è®¿é—®ï¼Œæ‰€ä»¥ä¼šè·å¾—ä¸é”™çš„æ€§èƒ½åŠæ‰©å±•æ€§ã€‚</p><p>äº§å“ï¼šRiakã€Redisã€Memcachedã€Amazonâ€™s Dynamoã€Project Voldemort</p><p>é€‚ç”¨çš„åœºæ™¯ï¼š</p><p><strong>å‚¨å­˜ç”¨æˆ·ä¿¡æ¯ï¼Œæ¯”å¦‚ä¼šè¯ã€é…ç½®æ–‡ä»¶ã€å‚æ•°ã€è´­ç‰©è½¦ç­‰ç­‰ã€‚è¿™äº›ä¿¡æ¯ä¸€èˆ¬éƒ½å’ŒIDï¼ˆé”®ï¼‰æŒ‚é’©ï¼Œè¿™ç§æƒ…æ™¯ä¸‹é”®å€¼æ•°æ®åº“æ˜¯ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</strong></p><p>ä¸é€‚ç”¨åœºæ™¯</p><p>éœ€è¦é€šè¿‡å€¼æ¥æŸ¥è¯¢ã€‚Key-Valueæ•°æ®åº“ä¸­æ ¹æœ¬æ²¡æœ‰é€šè¿‡å€¼æŸ¥è¯¢çš„é€”å¾„</p><p>éœ€è¦å‚¨å­˜æ•°æ®ä¹‹é—´çš„å…³ç³»ã€‚åœ¨Key-Valueæ•°æ®åº“ä¸­ä¸èƒ½é€šè¿‡ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„é”®æ¥å…³è”æ•°æ®ã€‚</p><p>éœ€è¦äº‹åŠ¡çš„æ”¯æŒã€‚åœ¨Key-Valueæ•°æ®åº“ä¸­æ•…éšœäº§ç”Ÿæ—¶ä¸å¯ä»¥è¿›è¡Œå›æ»šã€‚</p><p>äºŒã€ é¢å‘æ–‡æ¡£ï¼ˆDocument-Orientedï¼‰æ•°æ®åº“<br>æ¦‚è¿°ï¼šé¢å‘æ–‡æ¡£æ•°æ®åº“ä¼šå°†æ•°æ®ä»¥æ–‡æ¡£çš„å½¢å¼å‚¨å­˜ã€‚æ¯ä¸ªæ–‡æ¡£éƒ½æ˜¯è‡ªåŒ…å«çš„æ•°æ®å•å…ƒï¼Œæ˜¯ä¸€ç³»åˆ—æ•°æ®é¡¹çš„é›†åˆã€‚<br>æ¯ä¸ªæ•°æ®é¡¹éƒ½æœ‰ä¸€ä¸ªåç§°ä¸å¯¹åº”çš„å€¼ï¼Œå€¼æ—¢å¯ä»¥æ˜¯ç®€å•çš„æ•°æ®ç±»å‹ï¼Œå¦‚å­—ç¬¦ä¸²ã€æ•°å­—å’Œæ—¥æœŸç­‰ï¼›ä¹Ÿå¯ä»¥æ˜¯å¤æ‚çš„ç±»å‹ï¼Œå¦‚æœ‰åºåˆ—è¡¨å’Œå…³è”å¯¹è±¡ã€‚<br>æ•°æ®å­˜å‚¨çš„æœ€å°å•ä½æ˜¯æ–‡æ¡£ï¼ŒåŒä¸€ä¸ªè¡¨ä¸­å­˜å‚¨çš„æ–‡æ¡£å±æ€§å¯ä»¥æ˜¯ä¸åŒçš„ï¼Œæ•°æ®å¯ä»¥ä½¿ç”¨XMLã€JSONæˆ–è€…JSONBç­‰å¤šç§å½¢å¼å­˜å‚¨ã€‚</p><p>äº§å“ï¼šMongoDBã€CouchDBã€RavenDB</p><p>é€‚ç”¨çš„åœºæ™¯</p><p>æ—¥å¿—ã€‚ä¼ä¸šç¯å¢ƒä¸‹ï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½æœ‰ä¸åŒçš„æ—¥å¿—ä¿¡æ¯ã€‚Document-Orientedæ•°æ®åº“å¹¶æ²¡æœ‰å›ºå®šçš„æ¨¡å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒå‚¨å­˜ä¸åŒçš„ä¿¡æ¯ã€‚</p><p>åˆ†æã€‚é‰´äºå®ƒçš„å¼±æ¨¡å¼ç»“æ„ï¼Œä¸æ”¹å˜æ¨¡å¼ä¸‹å°±å¯ä»¥å‚¨å­˜ä¸åŒçš„åº¦é‡æ–¹æ³•åŠæ·»åŠ æ–°çš„åº¦é‡ã€‚</p><p>ä¸é€‚ç”¨åœºæ™¯</p><p>åœ¨ä¸åŒçš„æ–‡æ¡£ä¸Šæ·»åŠ äº‹åŠ¡ã€‚Document-Orientedæ•°æ®åº“å¹¶ä¸æ”¯æŒæ–‡æ¡£é—´çš„äº‹åŠ¡ï¼Œå¦‚æœå¯¹è¿™æ–¹é¢æœ‰éœ€æ±‚åˆ™ä¸åº”è¯¥é€‰ç”¨è¿™ä¸ªè§£å†³æ–¹æ¡ˆã€‚</p><p>ä¸‰ã€ åˆ—å­˜å‚¨æ•°æ®åº“<br>æ¦‚è¿°ï¼šåˆ—å­˜å‚¨æ•°æ®åº“å°†æ•°æ®å‚¨å­˜åœ¨åˆ—æ—ä¸­ï¼Œä¸€ä¸ªåˆ—æ—å­˜å‚¨ç»å¸¸è¢«ä¸€èµ·æŸ¥è¯¢çš„ç›¸å…³æ•°æ®ã€‚<br><strong>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªPersonç±»ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä¸€èµ·æŸ¥è¯¢ä»–ä»¬çš„å§“åå’Œå¹´é¾„è€Œä¸æ˜¯è–ªèµ„ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå§“åå’Œå¹´é¾„å°±ä¼šè¢«æ”¾å…¥ä¸€ä¸ªåˆ—æ—ä¸­ï¼Œè€Œè–ªèµ„åˆ™åœ¨å¦ä¸€ä¸ªåˆ—æ—ä¸­ã€‚</strong></p><p>äº§å“ï¼šCassandraã€HBase</p><p>æœ‰è°åœ¨ä½¿ç”¨ï¼šEbay ï¼ˆCassandraï¼‰ã€Instagram ï¼ˆCassandraï¼‰ã€NASA ï¼ˆCassandraï¼‰ã€Twitter ï¼ˆCassandra and HBaseï¼‰ã€Facebook ï¼ˆHBaseï¼‰ã€Yahoo!ï¼ˆHBaseï¼‰</p><p>é€‚ç”¨çš„åœºæ™¯</p><p>æ—¥å¿—ã€‚å› ä¸ºæˆ‘ä»¬å¯ä»¥å°†æ•°æ®å‚¨å­˜åœ¨ä¸åŒçš„åˆ—ä¸­ï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥å°†ä¿¡æ¯å†™å…¥è‡ªå·±çš„åˆ—æ—ä¸­ã€‚</p><p>åšå®¢å¹³å°ã€‚æˆ‘ä»¬å‚¨å­˜æ¯ä¸ªä¿¡æ¯åˆ°ä¸åŒçš„åˆ—æ—ä¸­ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ ‡ç­¾å¯ä»¥å‚¨å­˜åœ¨ä¸€ä¸ªï¼Œç±»åˆ«å¯ä»¥åœ¨ä¸€ä¸ªï¼Œè€Œæ–‡ç« åˆ™åœ¨å¦ä¸€ä¸ªã€‚</p><p>ä¸é€‚ç”¨åœºæ™¯</p><p>å¦‚æœæˆ‘ä»¬éœ€è¦ACIDäº‹åŠ¡ã€‚Vassandraå°±ä¸æ”¯æŒäº‹åŠ¡ã€‚</p><p>åŸå‹è®¾è®¡ã€‚å¦‚æœæˆ‘ä»¬åˆ†æCassandraçš„æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬å°±ä¼šå‘ç°ç»“æ„æ˜¯åŸºäºæˆ‘ä»¬æœŸæœ›çš„æ•°æ®æŸ¥è¯¢æ–¹å¼è€Œå®šã€‚åœ¨æ¨¡å‹è®¾è®¡ä¹‹åˆï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸å¯èƒ½å»é¢„æµ‹å®ƒçš„æŸ¥è¯¢æ–¹å¼ï¼Œè€Œä¸€æ—¦æŸ¥è¯¢æ–¹å¼æ”¹å˜ï¼Œæˆ‘ä»¬å°±å¿…é¡»é‡æ–°è®¾è®¡åˆ—æ—ã€‚</p><p>å››ã€ å›¾ï¼ˆGraph-Orientedï¼‰æ•°æ®åº“<br>æ¦‚è¿°ï¼šå›¾æ•°æ®åº“å…è®¸æˆ‘ä»¬å°†æ•°æ®ä»¥å›¾çš„æ–¹å¼å‚¨å­˜ã€‚å®ä½“ä¼šè¢«ä½œä¸ºé¡¶ç‚¹ï¼Œè€Œå®ä½“ä¹‹é—´çš„å…³ç³»åˆ™ä¼šè¢«ä½œä¸ºè¾¹ã€‚<br>æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸‰ä¸ªå®ä½“ï¼ŒSteve Jobsã€Appleå’ŒNextï¼Œåˆ™ä¼šæœ‰ä¸¤ä¸ªâ€œFounded byâ€çš„è¾¹å°†Appleå’ŒNextè¿æ¥åˆ°Steve Jobsã€‚</p><p>äº§å“ï¼šNeo4Jã€Infinite Graphã€OrientDB</p><p><strong>NoSQL ä¸é€‚åˆå¤„ç†å¤šå¯¹å¤šçš„åœºæ™¯ï¼ŒSQL ä¸é€‚åˆèŠ‚ç‚¹çš„æ•°æ®ç±»å‹å¤šå˜ï¼Œä¸”ä¸æ”¯æŒé€’å½’çš„å…³ç³»æŸ¥æ‰¾ï¼Œå…³ç³»ä¹Ÿæ²¡æœ‰å±æ€§é™„ç€</strong></p><p><strong>æ ¹æ®ç”¨é€”åˆ†ç±»ï¼š</strong></p><p><strong>äº‹åŠ¡å¤„ç†æ•°æ®åº“ï¼ˆOLTPï¼‰</strong>ï¼š</p><ul><li>ç”¨äºå¤„ç†æ—¥å¸¸çš„äº¤æ˜“å’Œæ“ä½œï¼Œä¾‹å¦‚åœ¨çº¿äº¤æ˜“å¤„ç†ã€ç”µå­å•†åŠ¡ç­‰ã€‚</li><li>éœ€è¦å¿«é€Ÿè¯»å†™ã€ç»´æŠ¤æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚</li><li>å¸¸è§çš„å…³ç³»å‹æ•°æ®åº“å¸¸ç”¨äº OLTPã€‚</li></ul><p><strong>åœ¨çº¿åˆ†æå¤„ç†æ•°æ®åº“ï¼ˆOLAPï¼‰</strong>ï¼š</p><ul><li>ç”¨äºåˆ†æå¤§é‡æ•°æ®ï¼Œæ”¯æŒå¤æ‚çš„æŸ¥è¯¢å’Œæ•°æ®åˆ†æã€‚</li><li>é‡è§†å¯¹æ•°æ®çš„é«˜æ•ˆè¯»å–å’Œæ±‡æ€»ï¼Œç”¨äºå†³ç­–æ”¯æŒå’ŒæŠ¥å‘Šã€‚</li><li>æ•°æ®ä»“åº“å’Œä¸€äº›å¤§æ•°æ®å¹³å°é€šå¸¸ç”¨äº OLAPã€‚</li></ul><p>OLTP vs OLAP</p><h2 id="Mysql">Mysql</h2><p><img src="https://cdn.jsdelivr.net/gh/Stan370/stan370.github.io@main/themes/hexo-theme-matery/source/medias/SQL.png" alt="sql"></p><p>MySQL çš„æ¶æ„å…±åˆ†ä¸ºä¸¤å±‚ï¼š<strong>Server å±‚å’Œå­˜å‚¨å¼•æ“å±‚</strong>ï¼Œ</p><ul><li><strong>Server å±‚è´Ÿè´£å»ºç«‹è¿æ¥ã€åˆ†æå’Œæ‰§è¡Œ SQL</strong>ã€‚MySQL å¤§å¤šæ•°çš„æ ¸å¿ƒåŠŸèƒ½æ¨¡å—éƒ½åœ¨è¿™å®ç°ï¼Œä¸»è¦åŒ…æ‹¬è¿æ¥å™¨ï¼ŒæŸ¥è¯¢ç¼“å­˜ã€è§£æå™¨ã€é¢„å¤„ç†å™¨ã€ä¼˜åŒ–å™¨ã€æ‰§è¡Œå™¨ç­‰ã€‚å¦å¤–ï¼Œæ‰€æœ‰çš„å†…ç½®å‡½æ•°ï¼ˆå¦‚æ—¥æœŸã€æ—¶é—´ã€æ•°å­¦å’ŒåŠ å¯†å‡½æ•°ç­‰ï¼‰å’Œæ‰€æœ‰è·¨å­˜å‚¨å¼•æ“çš„åŠŸèƒ½ï¼ˆå¦‚å­˜å‚¨è¿‡ç¨‹ã€è§¦å‘å™¨ã€è§†å›¾ç­‰ã€‚ï¼‰éƒ½åœ¨ Server å±‚å®ç°ã€‚</li><li><strong>å­˜å‚¨å¼•æ“å±‚è´Ÿè´£æ•°æ®çš„å­˜å‚¨å’Œæå–</strong>ã€‚æ”¯æŒ InnoDBã€MyISAMã€Memory ç­‰å¤šä¸ªå­˜å‚¨å¼•æ“ï¼Œä¸åŒçš„å­˜å‚¨å¼•æ“å…±ç”¨ä¸€ä¸ª Server å±‚ã€‚ç°åœ¨æœ€å¸¸ç”¨çš„å­˜å‚¨å¼•æ“æ˜¯ InnoDBï¼Œä» MySQL 5.5 ç‰ˆæœ¬å¼€å§‹ï¼Œ InnoDB æˆä¸ºäº† MySQL çš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚æˆ‘ä»¬å¸¸è¯´çš„ç´¢å¼•æ•°æ®ç»“æ„ï¼Œå°±æ˜¯ç”±å­˜å‚¨å¼•æ“å±‚å®ç°çš„ï¼Œä¸åŒçš„å­˜å‚¨å¼•æ“æ”¯æŒçš„ç´¢å¼•ç±»å‹ä¹Ÿä¸ç›¸åŒï¼Œæ¯”å¦‚ InnoDB æ”¯æŒç´¢å¼•ç±»å‹æ˜¯ B+æ ‘ ï¼Œä¸”æ˜¯é»˜è®¤ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æ•°æ®è¡¨ä¸­åˆ›å»ºçš„ä¸»é”®ç´¢å¼•å’ŒäºŒçº§ç´¢å¼•é»˜è®¤ä½¿ç”¨çš„æ˜¯ B+ æ ‘ç´¢å¼•ã€‚</li></ul><p>æ‰§è¡Œä¸€æ¡ SQL æŸ¥è¯¢è¯­å¥ï¼ŒæœŸé—´å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p><ul><li>è¿æ¥å™¨ï¼šå»ºç«‹è¿æ¥ï¼Œç®¡ç†è¿æ¥ã€æ ¡éªŒç”¨æˆ·èº«ä»½ï¼›</li><li>æŸ¥è¯¢ç¼“å­˜ï¼šæŸ¥è¯¢è¯­å¥å¦‚æœå‘½ä¸­æŸ¥è¯¢ç¼“å­˜åˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™ç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚MySQL 8.0 å·²åˆ é™¤è¯¥æ¨¡å—ï¼›</li><li>è§£æ SQLï¼Œé€šè¿‡è§£æå™¨å¯¹ SQL æŸ¥è¯¢è¯­å¥è¿›è¡Œè¯æ³•åˆ†æã€è¯­æ³•åˆ†æï¼Œç„¶åæ„å»ºè¯­æ³•æ ‘ï¼Œæ–¹ä¾¿åç»­æ¨¡å—è¯»å–è¡¨åã€å­—æ®µã€è¯­å¥ç±»å‹ï¼›</li><li>æ‰§è¡Œ SQLï¼šæ‰§è¡Œ SQL å…±æœ‰ä¸‰ä¸ªé˜¶æ®µï¼š<ul><li>é¢„å¤„ç†é˜¶æ®µï¼šæ£€æŸ¥è¡¨æˆ–å­—æ®µæ˜¯å¦å­˜åœ¨ï¼›å°†Â <code>select *</code>Â ä¸­çš„Â ``Â ç¬¦å·æ‰©å±•ä¸ºè¡¨ä¸Šçš„æ‰€æœ‰åˆ—ã€‚</li><li>ä¼˜åŒ–é˜¶æ®µï¼šåŸºäºæŸ¥è¯¢æˆæœ¬çš„è€ƒè™‘ï¼Œ é€‰æ‹©æŸ¥è¯¢æˆæœ¬æœ€å°çš„æ‰§è¡Œè®¡åˆ’ï¼›</li><li>æ‰§è¡Œé˜¶æ®µï¼šæ ¹æ®æ‰§è¡Œè®¡åˆ’æ‰§è¡Œ SQL æŸ¥è¯¢è¯­å¥ï¼Œä»å­˜å‚¨å¼•æ“è¯»å–è®°å½•ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ï¼›</li></ul></li></ul><p>è¿æ¥çš„è¿‡ç¨‹éœ€è¦å…ˆç»è¿‡ TCP ä¸‰æ¬¡æ¡æ‰‹ï¼Œå› ä¸º MySQL æ˜¯åŸºäº TCP åè®®è¿›è¡Œä¼ è¾“çš„</p><blockquote><p>æ€ä¹ˆè§£å†³é•¿è¿æ¥å ç”¨å†…å­˜çš„é—®é¢˜ï¼Ÿ</p></blockquote><p>æœ‰ä¸¤ç§è§£å†³æ–¹å¼ã€‚</p><p>ç¬¬ä¸€ç§ï¼Œ<strong>å®šæœŸæ–­å¼€é•¿è¿æ¥</strong>ã€‚æ—¢ç„¶æ–­å¼€è¿æ¥åå°±ä¼šé‡Šæ”¾è¿æ¥å ç”¨çš„å†…å­˜èµ„æºï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å®šæœŸæ–­å¼€é•¿è¿æ¥ã€‚</p><p>ç¬¬äºŒç§ï¼Œ<strong>å®¢æˆ·ç«¯ä¸»åŠ¨é‡ç½®è¿æ¥</strong>ã€‚MySQL 5.7 ç‰ˆæœ¬å®ç°äº†Â <code>mysql_reset_connection()</code>Â å‡½æ•°çš„æ¥å£ï¼Œæ³¨æ„è¿™æ˜¯æ¥å£å‡½æ•°ä¸æ˜¯å‘½ä»¤ï¼Œé‚£ä¹ˆå½“å®¢æˆ·ç«¯æ‰§è¡Œäº†ä¸€ä¸ªå¾ˆå¤§çš„æ“ä½œåï¼Œåœ¨ä»£ç é‡Œè°ƒç”¨ mysql_reset_connection å‡½æ•°æ¥é‡ç½®è¿æ¥ï¼Œè¾¾åˆ°é‡Šæ”¾å†…å­˜çš„æ•ˆæœã€‚è¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦é‡è¿å’Œé‡æ–°åšæƒé™éªŒè¯ï¼Œä½†æ˜¯ä¼šå°†è¿æ¥æ¢å¤åˆ°åˆšåˆšåˆ›å»ºå®Œæ—¶çš„çŠ¶æ€ã€‚</p><h3 id="InnoDB-çš„æ¶æ„">InnoDB çš„æ¶æ„</h3><p><img src="https://prod-files-secure.s3.us-west-2.amazonaws.com/ea503cf6-9325-47ab-9fb3-3e33e40583ef/b4b375d5-303b-467c-9bfb-613f15101592/image.png" alt="image.png"></p><p><strong>1. å…¥å£ç‚¹ï¼šHandler API</strong></p><ul><li>è¿™æ˜¯åº”ç”¨ç¨‹åºä¸ InnoDB å­˜å‚¨å¼•æ“äº¤äº’çš„æ¥å£ã€‚SQL è¯­å¥ï¼ˆå¦‚é€‰æ‹©ï¼Œæ’å…¥ï¼Œæ›´æ–°ï¼Œåˆ é™¤) é€šè¿‡æ­¤ API è¿›è¡Œå¤„ç†ã€‚</li></ul><p><strong>2.æ‰§è¡Œå¼•æ“ï¼š</strong></p><ul><li><strong>MTR1ï¼ˆé˜…è¯»è§†å›¾ï¼‰ï¼š</strong>Â ç®¡ç†äº‹åŠ¡çš„ä¸€è‡´è¯»å–è§†å›¾ï¼Œç¡®ä¿æ¯ä¸ªäº‹åŠ¡éƒ½èƒ½çœ‹åˆ°æ•°æ®åº“çš„ä¸€è‡´å¿«ç…§ã€‚</li><li>**MTR2ï¼ˆäº¤æ˜“ï¼‰ï¼š**å¤„ç†äº‹åŠ¡ç®¡ç†ï¼ŒåŒ…æ‹¬å¯åŠ¨ã€æäº¤å’Œå›æ»šäº‹åŠ¡ã€‚</li><li>**å‘½ä»¤ï¼š**è¡¨ç¤ºè¦æ‰§è¡Œçš„å·²è§£æ SQL è¯­å¥ï¼ˆä¾‹å¦‚ä»ç”¨æˆ·ä¸­é€‰æ‹© *ï¼‰ã€‚</li></ul><p><strong>3.ç¼“å†²æ± ï¼ˆå†…å­˜ä¸­ï¼‰ï¼š</strong></p><ul><li>**InnoDBçš„æ ¸å¿ƒï¼š**ä¸€ä¸ªå¤§å‹å†…å­˜åŒºåŸŸï¼Œç”¨äºç¼“å­˜æ•°æ®åº“æ–‡ä»¶ä¸­ç»å¸¸è®¿é—®çš„æ•°æ®é¡µã€‚è¿™å¯æœ€å¤§é™åº¦åœ°å‡å°‘ç£ç›˜ I/O å¹¶æ˜¾è‘—æé«˜æ€§èƒ½ã€‚</li><li><strong>LRU åˆ—è¡¨ï¼š</strong>Â å®æ–½æœ€è¿‘æœ€å°‘ä½¿ç”¨ (LRU) ç®—æ³•æ¥ç®¡ç†ç¼“å­˜é¡µé¢ã€‚ç»å¸¸ä½¿ç”¨çš„é¡µé¢ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œè€Œè¾ƒå°‘ä½¿ç”¨çš„é¡µé¢åˆ™è¢«é€å‡ºï¼Œä¸ºæ–°æ•°æ®è…¾å‡ºç©ºé—´ã€‚</li><li>**ç©ºé—²åˆ—è¡¨ï¼š**è·Ÿè¸ªç¼“å†²æ± ä¸­å¯ç”¨äºæ–°æ•°æ®çš„é¡µé¢ã€‚</li><li><strong>å†²æ´—æ¸…å•ï¼š</strong>Â ä¿å­˜éœ€è¦å†™å›ç£ç›˜çš„é¡µé¢ï¼ˆç”±äºä¿®æ”¹ï¼‰ã€‚</li><li><strong>è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•ï¼š</strong>Â é€šè¿‡åœ¨å“ˆå¸Œè¡¨ä¸­ç¼“å­˜ç»å¸¸è®¿é—®çš„ç´¢å¼•æ¡ç›®æ¥è¿›ä¸€æ­¥åŠ å¿«ç´¢å¼•æŸ¥æ‰¾é€Ÿåº¦ã€‚</li></ul><p><strong>4. æ›´æ¢ç¼“å†²æ¶²ï¼š</strong></p><ul><li><strong>ä¼˜åŒ–å†™å…¥ï¼š</strong>Â å†…å­˜ä¸­çš„ä¸€ç§ç‰¹æ®Šæ•°æ®ç»“æ„ï¼Œç”¨äºä¸´æ—¶å­˜å‚¨å¯¹äºŒçº§ç´¢å¼•çš„æ›´æ”¹ã€‚InnoDB ä¸ä¼šç«‹å³å°†è¿™äº›æ›´æ”¹å†™å…¥ç£ç›˜ï¼Œè€Œæ˜¯å°†å®ƒä»¬ç¼“å†²åœ¨æ›´æ”¹ç¼“å†²åŒºä¸­ã€‚è¿™å‡å°‘äº†ç£ç›˜ I/Oï¼Œå°¤å…¶æ˜¯å¯¹äºå†™å…¥å¯†é›†å‹å·¥ä½œè´Ÿè½½ã€‚</li><li><strong>åˆå¹¶ï¼š</strong>Â æ›´æ”¹ç¼“å†²åŒºä¼šå®šæœŸä¸ç£ç›˜ä¸Šçš„äºŒçº§ç´¢å¼•åˆå¹¶ï¼Œä»è€Œä½¿æ›´æ”¹æŒä¹…åŒ–ã€‚</li></ul><p><strong>5. æ’¤æ¶ˆç¼“å†²åŒºï¼š</strong></p><ul><li>**æ”¯æŒå›æ»šï¼š**å­˜å‚¨æœ‰å…³ä»¥å‰ç‰ˆæœ¬æ•°æ®çš„ä¿¡æ¯ï¼Œå…è®¸ InnoDB æ’¤æ¶ˆäº‹åŠ¡å¹¶æä¾›ä¸€è‡´çš„è¯»å–è§†å›¾ã€‚</li></ul><p><strong>6.é‡åšæ—¥å¿—ç¼“å†²åŒºï¼š</strong></p><ul><li>**é¢„å†™æ—¥å¿—ï¼š**å†…å­˜ç¼“å†²åŒºï¼Œç”¨äºè®°å½•å¯¹æ•°æ®åº“æ‰€åšçš„æ‰€æœ‰æ›´æ”¹ï¼Œåœ¨å°†å…¶å†™å…¥ç£ç›˜ä¹‹å‰ã€‚è¿™å¯ç¡®ä¿æ•°æ®æŒä¹…æ€§å’Œå´©æºƒæ¢å¤ã€‚</li></ul><p><strong>7.ç£ç›˜å­˜å‚¨ï¼š</strong></p><ul><li>**InnoDB è¡¨ç©ºé—´ï¼š**InnoDB å°†æ•°æ®å’Œç´¢å¼•å­˜å‚¨åœ¨è¡¨ç©ºé—´æ–‡ä»¶ä¸­ã€‚<ul><li>**ç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆ.ibdï¼‰ï¼š**ä¿å­˜æ•°æ®å­—å…¸ä¿¡æ¯ï¼Œå¦‚æœé…ç½®çš„è¯å¯èƒ½åŒ…å«ç”¨æˆ·è¡¨ã€‚</li><li><strong>æ¯ä¸ªè¡¨çš„æ–‡ä»¶è¡¨ç©ºé—´ (.ibd)ï¼š</strong>Â æ¯ä¸ªè¡¨éƒ½æœ‰è‡ªå·±çš„.ibd æ–‡ä»¶ï¼Œæé«˜äº†å¯ç®¡ç†æ€§ã€‚</li><li>**é€šç”¨è¡¨ç©ºé—´ï¼ˆdiy.ibdï¼‰ï¼š**å…è®¸æ‚¨åˆ›å»ºå…±äº«è¡¨ç©ºé—´æ¥å­˜å‚¨å¤šä¸ªè¡¨ã€‚</li><li><strong>ä¸´æ—¶è¡¨ç©ºé—´ï¼ˆibtmp1ï¼‰ï¼š</strong>Â ç”¨äºä¸´æ—¶è¡¨å’Œå†…éƒ¨æ“ä½œã€‚</li></ul></li><li><strong>åŒå†™ç¼“å†²åŒºï¼š</strong>Â ä¸€ç§æœ‰åŠ©äºé˜²æ­¢å´©æºƒæ¢å¤æœŸé—´æ•°æ®æŸåçš„æœºåˆ¶ã€‚æ›´æ”¹é¦–å…ˆå†™å…¥ç£ç›˜ä¸Šçš„åŒå†™ç¼“å†²åŒºï¼Œç„¶åå†™å…¥å®é™…æ•°æ®æ–‡ä»¶ã€‚</li><li><strong>æ’¤æ¶ˆè¡¨ç©ºé—´ (.mother)ï¼š</strong>Â å°†æ’¤æ¶ˆä¿¡æ¯å­˜å‚¨åœ¨ç£ç›˜ä¸Šã€‚</li><li><strong>é‡åšæ—¥å¿—ï¼ˆib_logfile[0/1]ï¼‰ï¼š</strong>Â é‡åšæ—¥å¿—çš„æŒä¹…å­˜å‚¨ï¼Œå¯¹äºå´©æºƒæ¢å¤è‡³å…³é‡è¦ã€‚</li></ul><p><strong>æ•°æ®æµï¼š</strong></p><ol><li><strong>SQL è¯­å¥ï¼š</strong>Â åº”ç”¨ç¨‹åºé€šè¿‡ Handler API å‘é€ SQL è¯­å¥ã€‚</li><li><strong>è§£æå’Œæ‰§è¡Œï¼š</strong>Â æ‰§è¡Œå¼•æ“å¤„ç†è¯¥è¯­å¥ã€‚</li><li><strong>ç¼“å†²æ± ï¼š</strong>Â InnoDB æ£€æŸ¥æ‰€éœ€æ•°æ®æ˜¯å¦å·²åœ¨ç¼“å†²æ± ä¸­ã€‚å¦‚æœæ²¡æœ‰ï¼Œå®ƒå°†æ•°æ®ä»ç£ç›˜è¯»å…¥ç¼“å†²æ± ã€‚</li><li><strong>å˜åŒ–ï¼š</strong>Â å¦‚æœè¯¥è¯­å¥ä¿®æ”¹äº†æ•°æ®ï¼Œåˆ™æ›´æ”¹å°†åº”ç”¨äºç¼“å†²æ± ï¼Œè®°å½•åœ¨é‡åšæ—¥å¿—ç¼“å†²åŒºä¸­ï¼Œå¹¶å¯èƒ½ç¼“å†²åœ¨æ›´æ”¹ç¼“å†²åŒºä¸­ã€‚</li><li><strong>é‡åšæ—¥å¿—ï¼š</strong>Â é‡åšæ—¥å¿—ç¼“å†²åŒºä¼šå®šæœŸåˆ·æ–°åˆ°ç£ç›˜ä¸Šçš„é‡åšæ—¥å¿—æ–‡ä»¶ã€‚</li><li><strong>æ£€æŸ¥ç‚¹ï¼š</strong>Â InnoDB æ‰§è¡Œæ£€æŸ¥ç‚¹ï¼Œå°†ä¿®æ”¹åçš„é¡µé¢ä»ç¼“å†²æ± å†™å…¥ç£ç›˜ã€‚</li><li><strong>è€ç”¨æ€§ï¼š</strong>Â é‡åšæ—¥å¿—ç¡®ä¿æ‰€æœ‰å·²æäº¤çš„æ›´æ”¹éƒ½å®‰å…¨åœ°ä¿å­˜åœ¨ç£ç›˜ä¸Šï¼Œå³ä½¿å‘ç”Ÿå´©æºƒã€‚</li></ol><p>è¯¥æ¶æ„çªå‡ºäº† InnoDB çš„ä¸»è¦ç‰¹æ€§ï¼Œå¦‚ ACID å±æ€§ï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼‰ã€å´©æºƒæ¢å¤ä»¥åŠé€šè¿‡ç¼“å†²å’Œæ—¥å¿—è®°å½•å®ç°çš„æ€§èƒ½ä¼˜åŒ–ã€‚</p><p>æŸ¥è¯¢è¯­å¥çš„é‚£ä¸€å¥—æµç¨‹ï¼Œæ›´æ–°è¯­å¥ä¹Ÿæ˜¯åŒæ ·ä¼šèµ°ä¸€éï¼š</p><ul><li>å®¢æˆ·ç«¯å…ˆé€šè¿‡è¿æ¥å™¨å»ºç«‹è¿æ¥ï¼Œè¿æ¥å™¨è‡ªä¼šåˆ¤æ–­ç”¨æˆ·èº«ä»½ï¼›</li><li>å› ä¸ºè¿™æ˜¯ä¸€æ¡ update è¯­å¥ï¼Œæ‰€ä»¥ä¸éœ€è¦ç»è¿‡æŸ¥è¯¢ç¼“å­˜ï¼Œä½†æ˜¯è¡¨ä¸Šæœ‰æ›´æ–°è¯­å¥ï¼Œæ˜¯ä¼šæŠŠæ•´ä¸ªè¡¨çš„æŸ¥è¯¢ç¼“å­˜æ¸…ç©ºçš„ï¼Œæ‰€ä»¥è¯´æŸ¥è¯¢ç¼“å­˜å¾ˆé¸¡è‚‹ï¼Œåœ¨ MySQL 8.0 å°±è¢«ç§»é™¤è¿™ä¸ªåŠŸèƒ½äº†ï¼›</li><li>è§£æå™¨ä¼šé€šè¿‡è¯æ³•åˆ†æè¯†åˆ«å‡ºå…³é”®å­— updateï¼Œè¡¨åç­‰ç­‰ï¼Œæ„å»ºå‡ºè¯­æ³•æ ‘ï¼Œæ¥ç€è¿˜ä¼šåšè¯­æ³•åˆ†æï¼Œåˆ¤æ–­è¾“å…¥çš„è¯­å¥æ˜¯å¦ç¬¦åˆ MySQL è¯­æ³•ï¼›</li><li>é¢„å¤„ç†å™¨ä¼šåˆ¤æ–­è¡¨å’Œå­—æ®µæ˜¯å¦å­˜åœ¨ï¼›</li><li>ä¼˜åŒ–å™¨ç¡®å®šæ‰§è¡Œè®¡åˆ’ï¼Œå› ä¸º where æ¡ä»¶ä¸­çš„ id æ˜¯ä¸»é”®ç´¢å¼•ï¼Œæ‰€ä»¥å†³å®šè¦ä½¿ç”¨ id è¿™ä¸ªç´¢å¼•ï¼›</li><li><strong>Handler APIåˆ°</strong>æ‰§è¡Œå™¨è´Ÿè´£å…·ä½“æ‰§è¡Œï¼Œæ‰¾åˆ°è¿™ä¸€è¡Œï¼Œç„¶åæ›´æ–°ã€‚</li></ul><p>ä¸è¿‡ï¼Œæ›´æ–°è¯­å¥çš„æµç¨‹ä¼šæ¶‰åŠåˆ° undo logï¼ˆå›æ»šæ—¥å¿—ï¼‰ã€redo logï¼ˆé‡åšæ—¥å¿—ï¼‰ ã€binlog ï¼ˆå½’æ¡£æ—¥å¿—ï¼‰è¿™ä¸‰ç§æ—¥å¿—ï¼š</p><ul><li><strong>undo logï¼ˆå›æ»šæ—¥å¿—ï¼‰</strong>ï¼šæ˜¯ Innodb å­˜å‚¨å¼•æ“å±‚ç”Ÿæˆçš„æ—¥å¿—ï¼Œå®ç°äº†äº‹åŠ¡ä¸­çš„<strong>åŸå­æ€§</strong>ï¼Œä¸»è¦<strong>ç”¨äºäº‹åŠ¡å›æ»šå’Œ MVCC</strong>ã€‚</li><li><strong>redo logï¼ˆé‡åšæ—¥å¿—ï¼‰</strong>ï¼šæ˜¯ Innodb å­˜å‚¨å¼•æ“å±‚ç”Ÿæˆçš„æ—¥å¿—ï¼Œå®ç°äº†äº‹åŠ¡ä¸­çš„<strong>æŒä¹…æ€§</strong>ï¼Œä¸»è¦<strong>ç”¨äºæ‰ç”µç­‰æ•…éšœæ¢å¤</strong>ï¼›</li><li><strong>binlog ï¼ˆå½’æ¡£æ—¥å¿—ï¼‰</strong>ï¼šæ˜¯ Server å±‚ç”Ÿæˆçš„æ—¥å¿—ï¼Œä¸»è¦<strong>ç”¨äºæ•°æ®å¤‡ä»½å’Œä¸»ä»å¤åˆ¶</strong>ï¼›</li></ul><p>undo log å’Œ redo log ç”¨äº<strong>è®°å½•äº‹åŠ¡å¯¹æ•°æ®çš„ä¿®æ”¹</strong>ï¼Œä»¥ä¿è¯åŸå­æ€§å’ŒæŒä¹…æ€§ï¼Œè€Œ binlog ç”¨äºè®°å½•æ•°æ®åº“çš„æ•´ä½“å˜æ›´ï¼ŒMVCC åˆ™ç”¨äºæ§åˆ¶å¹¶å‘ï¼Œç¡®ä¿è¯»å†™ä¹‹é—´çš„éš”ç¦»æ€§ã€‚è¿™äº›æœºåˆ¶ç›¸äº’åä½œï¼Œç¡®ä¿æ•°æ®åº“åœ¨äº‹åŠ¡æ‰§è¡Œå’Œå¹¶å‘è®¿é—®æ—¶çš„ä¸€è‡´æ€§å’Œå¯é æ€§ã€‚</p><p>CREATE INDEX ,ALTER TABLE</p><p>æœ€åŸºæœ¬çš„åˆ†é¡µæ–¹å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT ... FROM ... WHERE ... ORDER BY ... LIMIT ...</span><br></pre></td></tr></table></figure><p>åœ¨ä¸­å°æ•°æ®é‡çš„æƒ…å†µä¸‹ï¼Œè¿™æ ·çš„ SQL è¶³å¤Ÿç”¨äº†ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„é—®é¢˜å°±æ˜¯ç¡®ä¿ä½¿ç”¨äº†ç´¢å¼•ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœå®é™… SQL ç±»ä¼¼ä¸‹é¢è¯­å¥ï¼Œé‚£ä¹ˆåœ¨ category_id, id ä¸¤åˆ—ä¸Šå»ºç«‹å¤åˆç´¢å¼•æ¯”è¾ƒå¥½ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM articles WHERE category_id = 123 ORDER BY id LIMIT 50, 10</span><br></pre></td></tr></table></figure><ol><li>åˆ†è§£å¤§è¿æ¥æŸ¥è¯¢<br>å°†ä¸€ä¸ªå¤§è¿æ¥æŸ¥è¯¢åˆ†è§£æˆå¯¹æ¯ä¸€ä¸ªè¡¨è¿›è¡Œä¸€æ¬¡å•è¡¨æŸ¥è¯¢ï¼Œç„¶ååœ¨åº”ç”¨ç¨‹åºä¸­è¿›è¡Œå…³è”ï¼Œè¿™æ ·åšçš„å¥½å¤„æœ‰ï¼š</li></ol><p><strong>ç¼“å­˜ä¹‹æ‰€ä»¥èƒ½å¤Ÿå¤§å¹…æé«˜ç³»ç»Ÿçš„æ€§èƒ½ï¼Œå…³é”®åœ¨äºæ•°æ®çš„è®¿é—®å…·æœ‰å±€éƒ¨æ€§ï¼Œä¹Ÿå°±æ˜¯äºŒå…«å®šå¾‹ï¼šã€Œç™¾åˆ†ä¹‹å…«åçš„æ•°æ®è®¿é—®æ˜¯é›†ä¸­åœ¨ 20% çš„æ•°æ®ä¸Šã€ã€‚è¿™éƒ¨åˆ†æ•°æ®ä¹Ÿè¢«å«åšçƒ­ç‚¹æ•°æ®ã€‚</strong></p><p>è®©ç¼“å­˜æ›´é«˜æ•ˆã€‚å¯¹äºè¿æ¥æŸ¥è¯¢ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªè¡¨å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆæ•´ä¸ªæŸ¥è¯¢ç¼“å­˜å°±æ— æ³•ä½¿ç”¨ã€‚è€Œåˆ†è§£åçš„å¤šä¸ªæŸ¥è¯¢ï¼Œå³ä½¿å…¶ä¸­ä¸€ä¸ªè¡¨å‘ç”Ÿå˜åŒ–ï¼Œå¯¹å…¶å®ƒè¡¨çš„æŸ¥è¯¢ç¼“å­˜ä¾ç„¶å¯ä»¥ä½¿ç”¨ã€‚<br>åˆ†è§£æˆå¤šä¸ªå•è¡¨æŸ¥è¯¢ï¼Œè¿™äº›å•è¡¨æŸ¥è¯¢çš„ç¼“å­˜ç»“æœæ›´å¯èƒ½è¢«å…¶å®ƒæŸ¥è¯¢ä½¿ç”¨åˆ°ï¼Œä»è€Œå‡å°‘å†—ä½™è®°å½•çš„æŸ¥è¯¢ã€‚<br>å‡å°‘é”ç«äº‰ï¼›<br>åœ¨åº”ç”¨å±‚è¿›è¡Œè¿æ¥ï¼Œå¯ä»¥æ›´å®¹æ˜“å¯¹æ•°æ®åº“è¿›è¡Œæ‹†åˆ†ï¼Œä»è€Œæ›´å®¹æ˜“åšåˆ°é«˜æ€§èƒ½å’Œå¯ä¼¸ç¼©ã€‚<br>æŸ¥è¯¢æœ¬èº«æ•ˆç‡ä¹Ÿå¯èƒ½ä¼šæœ‰æ‰€æå‡ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨ IN() ä»£æ›¿è¿æ¥æŸ¥è¯¢ï¼Œå¯ä»¥è®© MySQL æŒ‰ç…§ ID é¡ºåºè¿›è¡ŒæŸ¥è¯¢ï¼Œè¿™å¯èƒ½æ¯”éšæœºçš„è¿æ¥è¦æ›´é«˜æ•ˆã€‚</p><h3 id="Optimization">Optimization</h3><p><a href="https://developer.aliyun.com/article/1497219">https://developer.aliyun.com/article/1497219</a></p><p>åœ¨å®é™…åœºæ™¯ä¸­è¿›è¡Œ MySQL æŸ¥è¯¢ä¼˜åŒ–æ—¶ï¼Œé€šå¸¸éœ€è¦æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚å’Œæ•°æ®åº“ç¯å¢ƒé‡‡å–é’ˆå¯¹æ€§çš„æªæ–½ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç³»ç»ŸåŒ–çš„ä¼˜åŒ–æ­¥éª¤å’Œæ–¹æ³•ï¼š</p><ol><li><strong>äº†è§£ä¸šåŠ¡éœ€æ±‚ä¸æ•°æ®ç‰¹ç‚¹</strong></li></ol><p><strong>æ˜ç¡®æŸ¥è¯¢çš„ä¸šåŠ¡éœ€æ±‚</strong>ï¼šäº†è§£æŸ¥è¯¢çš„å…·ä½“ä¸šåŠ¡éœ€æ±‚ï¼ŒåŒ…æ‹¬æŸ¥è¯¢çš„é¢‘ç‡ã€é‡è¦æ€§ã€å“åº”æ—¶é—´è¦æ±‚ç­‰ã€‚</p><p><strong>æ•°æ®åˆ†å¸ƒä¸è®¿é—®æ¨¡å¼</strong>ï¼šåˆ†ææ•°æ®çš„åˆ†å¸ƒç‰¹ç‚¹ï¼ˆå¦‚æ•°æ®é‡ã€è¡¨ç»“æ„ã€ç´¢å¼•æƒ…å†µï¼‰å’Œè®¿é—®æ¨¡å¼ï¼ˆè¯»å¤šå†™å°‘è¿˜æ˜¯è¯»å†™å¹¶é‡ï¼Œéšæœºè®¿é—®è¿˜æ˜¯é¡ºåºè®¿é—®ï¼‰ã€‚</p><ol start="2"><li><strong>åˆ†æç°æœ‰æŸ¥è¯¢æ€§èƒ½</strong></li></ol><p><strong>ä½¿ç”¨ <code>EXPLAIN</code> åˆ†ææŸ¥è¯¢è®¡åˆ’</strong>ï¼šé€šè¿‡ <code>EXPLAIN</code> äº†è§£æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’ï¼Œåˆ¤æ–­æŸ¥è¯¢æ˜¯å¦åˆç†åˆ©ç”¨äº†ç´¢å¼•ï¼Œä»¥åŠä¼˜åŒ–å™¨whetheræ­£ç¡®è¿æ¥è¡¨ï¼Œæ˜¯å¦å­˜åœ¨å…¨è¡¨æ‰«æã€æ–‡ä»¶æ’åºç­‰æ€§èƒ½ç“¶é¢ˆã€‚</p><p><strong>æ…¢æŸ¥è¯¢æ—¥å¿—</strong>ï¼šå¯ç”¨ MySQL æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œæ‰¾å‡ºæ‰§è¡Œæ—¶é—´è¾ƒé•¿çš„æŸ¥è¯¢ï¼Œå¹¶é›†ä¸­ä¼˜åŒ–è¿™äº›æŸ¥è¯¢ã€‚mysqldumpslow -s t /path/to/slow.log</p><p><strong>æŸ¥è¯¢æ‰§è¡Œæ—¶é—´</strong>ï¼šä½¿ç”¨ <code>SHOW PROFILES</code> æˆ– <code>SHOW STATUS</code> æŸ¥çœ‹æŸ¥è¯¢çš„æ‰§è¡Œæ—¶é—´ã€CPU ä½¿ç”¨ç‡ã€ç£ç›˜ IO ç­‰æ€§èƒ½æŒ‡æ ‡ã€‚</p><ol start="3"><li><strong>ç´¢å¼•ä¼˜åŒ–</strong></li></ol><p><strong>åˆ›å»ºé€‚å½“çš„ç´¢å¼•</strong>ï¼šä¸ºæŸ¥è¯¢ä¸­çš„ <code>WHERE</code>ã€<code>JOIN</code>ã€<code>ORDER BY</code>ã€<code>GROUP BY</code> ç­‰æ¡ä»¶åˆ›å»ºç´¢å¼•ï¼Œç‰¹åˆ«æ˜¯é€‰æ‹©æ€§é«˜çš„åˆ—ã€‚</p><p><strong>é¿å…å†—ä½™ç´¢å¼•</strong>ï¼šæ£€æŸ¥å¹¶åˆ é™¤å†—ä½™æˆ–æœªè¢«ä½¿ç”¨çš„ç´¢å¼•ï¼Œä»¥å‡å°‘ç»´æŠ¤å¼€é”€ã€‚</p><p><strong>è¦†ç›–ç´¢å¼•</strong>ï¼šé€šè¿‡è¦†ç›–ç´¢å¼•ï¼ˆå³æŸ¥è¯¢å­—æ®µéƒ½åœ¨åŒä¸€ç´¢å¼•ä¸­ï¼‰æ¥å‡å°‘æŸ¥è¯¢çš„å›è¡¨æ“ä½œã€‚</p><ol start="4"><li><strong>æŸ¥è¯¢è¯­å¥ä¼˜åŒ–</strong></li></ol><p><strong>ä¼˜åŒ– <code>JOIN</code> æŸ¥è¯¢</strong>ï¼šé¿å…åœ¨è¿æ¥æ¡ä»¶ä¸­ä½¿ç”¨å‡½æ•°æˆ–è®¡ç®—ï¼Œå°½é‡ä½¿ç”¨ç­‰å€¼è¿æ¥ï¼ˆ<code>INNER JOIN</code>ï¼‰è€Œéç¬›å¡å°”ç§¯ï¼ˆ<code>CROSS JOIN</code>ï¼‰ã€‚</p><p><strong>å‡å°‘è¿”å›çš„æ•°æ®é‡</strong>ï¼šé¿å… <code>SELECT *</code>ï¼Œåªé€‰æ‹©éœ€è¦çš„åˆ—ï¼›ä½¿ç”¨ <code>LIMIT</code> é™åˆ¶è¿”å›çš„è¡Œæ•°ã€‚</p><p><strong>å­æŸ¥è¯¢ä¼˜åŒ–</strong>ï¼šå°†å¤æ‚çš„å­æŸ¥è¯¢æ”¹å†™ä¸º <code>JOIN</code> æˆ–ä½¿ç”¨ <code>EXISTS</code>ï¼Œé¿å…åµŒå¥—å­æŸ¥è¯¢å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ã€‚</p><ol start="5"><li><strong>è¡¨ç»“æ„ä¼˜åŒ–</strong></li></ol><p><strong>è§„èŒƒåŒ–ä¸åè§„èŒƒåŒ–</strong>ï¼šæ ¹æ®æŸ¥è¯¢æ¨¡å¼é€‚å½“é€‰æ‹©è§„èŒƒåŒ–æˆ–åè§„èŒƒåŒ–ç­–ç•¥ï¼Œå‡å°‘è¡¨ä¹‹é—´çš„è¿æ¥æ¬¡æ•°æˆ–æŸ¥è¯¢çš„å¤æ‚åº¦ã€‚</p><p><strong>åˆ†åŒºè¡¨</strong>ï¼šå¯¹å¤§è¡¨è¿›è¡Œåˆ†åŒºï¼Œå¦‚æŒ‰æ—¶é—´æˆ–èŒƒå›´åˆ†åŒºï¼Œå¯ä»¥åŠ å¿«æŸ¥è¯¢æ€§èƒ½ã€‚</p><p><strong>ä¼˜åŒ–è¡¨çš„æ•°æ®ç±»å‹</strong>ï¼šé€‰æ‹©æ›´åˆé€‚çš„å­—æ®µç±»å‹ï¼Œé¿å…ä½¿ç”¨è¿‡å¤§æˆ–ä¸å¿…è¦çš„ç²¾åº¦ï¼Œå¦‚ç”¨ <code>TINYINT</code> è€Œä¸æ˜¯ <code>INT</code>ã€‚</p><ol start="6"><li><strong>åˆ©ç”¨ç¼“å­˜ä¸å­˜å‚¨è¿‡ç¨‹</strong></li></ol><p><strong>ç¼“å­˜çƒ­ç‚¹æ•°æ®</strong>ï¼šå°†é«˜é¢‘è®¿é—®çš„æ•°æ®ç¼“å­˜åˆ°å†…å­˜ä¸­ï¼ˆå¦‚ä½¿ç”¨ Redisï¼‰ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢æ¬¡æ•°ã€‚</p><p><strong>é¢„è®¡ç®—ä¸å­˜å‚¨è¿‡ç¨‹</strong>ï¼šå¯¹äºè®¡ç®—å¤æ‚ä¸”é¢‘ç¹çš„æŸ¥è¯¢ï¼Œå¯ä»¥é€šè¿‡é¢„è®¡ç®—å°†ç»“æœç¼“å­˜åˆ°è¡¨ä¸­ï¼Œæˆ–è€…ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹åŠ å¿«æŸ¥è¯¢é€Ÿåº¦ã€‚</p><ol start="7"><li><strong>äº‹åŠ¡ä¸é”ä¼˜åŒ–</strong></li></ol><p><strong>åˆç†ç®¡ç†äº‹åŠ¡</strong>ï¼šé¿å…é•¿äº‹åŠ¡æˆ–åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œå¤§é‡æŸ¥è¯¢ï¼Œå°½é‡ç¼©çŸ­äº‹åŠ¡çš„æ‰§è¡Œæ—¶é—´ã€‚</p><p><strong>å‡å°‘é”å®šèŒƒå›´</strong>ï¼šä½¿ç”¨åˆé€‚çš„é”çº§åˆ«ï¼ˆå¦‚è¡Œçº§é”è€Œéè¡¨çº§é”ï¼‰ï¼Œå‡å°‘é”äº‰ç”¨ï¼Œæé«˜å¹¶å‘æ€§èƒ½ã€‚</p><ol start="8"><li><strong>æ•°æ®ç»´æŠ¤ä¸å½’æ¡£</strong></li></ol><p><strong>å®šæœŸå½’æ¡£å†å²æ•°æ®</strong>ï¼šå°†ä¸å¸¸ç”¨çš„å†å²æ•°æ®è¿ç§»åˆ°å†·å­˜å‚¨æˆ–å½’æ¡£è¡¨ï¼Œå‡å°ä¸»è¡¨çš„ä½“ç§¯ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½ã€‚</p><p><strong>ç¢ç‰‡æ•´ç†</strong>ï¼šå®šæœŸæ‰§è¡Œ <code>OPTIMIZE TABLE</code>ï¼Œæ•´ç†è¡¨ç¢ç‰‡ï¼Œç‰¹åˆ«æ˜¯å¯¹äºé¢‘ç¹æ›´æ–°ã€åˆ é™¤çš„è¡¨ã€‚</p><ol start="9"><li><strong>ç›‘æ§ä¸æŒç»­ä¼˜åŒ–</strong></li></ol><p><strong>ç›‘æ§æŸ¥è¯¢æ€§èƒ½</strong>ï¼šä½¿ç”¨ç›‘æ§å·¥å…·ï¼ˆå¦‚ MySQL Enterprise Monitorã€Percona Toolkitã€Prometheus ç­‰ï¼‰æŒç»­ç›‘æ§æŸ¥è¯¢æ€§èƒ½ï¼Œå‘ç°å¹¶ä¼˜åŒ–æ½œåœ¨çš„æ€§èƒ½ç“¶é¢ˆã€‚</p><p><strong>è°ƒæ•´æ•°æ®åº“å‚æ•°</strong>ï¼šæ ¹æ®ç›‘æ§ç»“æœè°ƒæ•´ MySQL çš„é…ç½®å‚æ•°ï¼ˆå¦‚ <code>query_cache_size</code>ã€<code>innodb_buffer_pool_size</code>ï¼‰ï¼Œä¼˜åŒ–æ•°æ®åº“æ•´ä½“æ€§èƒ½ã€‚</p><p>å®é™…æ¡ˆä¾‹åˆ†æ</p><p>æ¡ˆä¾‹1ï¼šä¼˜åŒ–ç”µå•†ç³»ç»Ÿä¸­çš„è®¢å•æŸ¥è¯¢</p><p><strong>åœºæ™¯æè¿°</strong>ï¼šæŸç”µå•†ç³»ç»Ÿä¸­çš„è®¢å•è¡¨éå¸¸å¤§ï¼Œç”¨æˆ·ç»å¸¸æŸ¥è¯¢è‡ªå·±æœ€è¿‘ä¸€å¹´çš„è®¢å•ã€‚</p><p><strong>ä¼˜åŒ–æ–¹æ³•</strong>ï¼š</p><ul><li><strong>åˆ†åŒºè¡¨</strong>ï¼šæŒ‰å¹´ä»½æˆ–æœˆä»½å¯¹è®¢å•è¡¨è¿›è¡Œåˆ†åŒºï¼ŒæŸ¥è¯¢æœ€è¿‘ä¸€å¹´è®¢å•æ—¶ï¼Œåªæ‰«æç›¸å…³åˆ†åŒºã€‚</li><li><strong>è¦†ç›–ç´¢å¼•</strong>ï¼šåœ¨è®¢å•è¡¨çš„ <code>user_id</code>ã€<code>order_date</code> ä¸Šå»ºç«‹è”åˆç´¢å¼•ï¼Œé¿å…å›è¡¨ã€‚</li><li><strong>ç¼“å­˜</strong>ï¼šå°†æœ€è¿‘ä¸€å¹´çš„è®¢å•æ•°æ®ç¼“å­˜åˆ° Redis ä¸­ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢ã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">CREATE</span> <span class="variable constant_">TABLE</span> <span class="title function_">orders</span> (</span><br><span class="line">    order_id <span class="variable constant_">INT</span> <span class="variable constant_">PRIMARY</span> <span class="variable constant_">KEY</span>,</span><br><span class="line">    user_id <span class="variable constant_">INT</span>,</span><br><span class="line">    order_date <span class="variable constant_">DATE</span>,</span><br><span class="line">    order_amount <span class="title function_">DECIMAL</span>(<span class="number">10</span>, <span class="number">2</span>),</span><br><span class="line">    product_id <span class="variable constant_">INT</span></span><br><span class="line">);</span><br><span class="line">ä½ æœ‰ä¸€ä¸ªæŸ¥è¯¢éœ€è¦ç»å¸¸è·å–ç‰¹å®šç”¨æˆ·åœ¨æŸä¸ªæ—¥æœŸèŒƒå›´å†…çš„è®¢å•ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šåœ¨æ²¡æœ‰ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œ</span><br><span class="line">åº“éœ€è¦å¯¹ orders è¡¨è¿›è¡Œ**å…¨è¡¨æ‰«æ**ï¼ŒæŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„è®°å½•ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æŸ¥è¯¢é€Ÿåº¦å˜æ…¢ï¼Œ</span><br><span class="line">å°¤å…¶æ˜¯åœ¨è®¢å•è¡¨æ•°æ®é‡éå¸¸å¤§çš„æƒ…å†µä¸‹ã€‚</span><br><span class="line"></span><br><span class="line"><span class="variable constant_">CREATE</span> <span class="variable constant_">INDEX</span> idx_user_order_date </span><br><span class="line"><span class="variable constant_">ON</span> <span class="title function_">orders</span>(user_id, order_date);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹2ï¼šä¼˜åŒ–ç¤¾äº¤å¹³å°ä¸­çš„ç”¨æˆ·åŠ¨æ€æŸ¥è¯¢</p><p><strong>åœºæ™¯æè¿°</strong>ï¼šç¤¾äº¤å¹³å°ç”¨æˆ·çš„åŠ¨æ€æŸ¥è¯¢ç»å¸¸å‘ç”Ÿï¼Œæ¶‰åŠå¤šè¡¨è¿æ¥ï¼Œå¦‚ç”¨æˆ·ä¿¡æ¯è¡¨ã€åŠ¨æ€è¡¨ã€è¯„è®ºè¡¨ç­‰ã€‚</p><p><strong>ä¼˜åŒ–æ–¹æ³•</strong>ï¼š</p><ul><li><strong>æ‹†åˆ†è¿æ¥æŸ¥è¯¢</strong>ï¼šå°†ç”¨æˆ·ä¿¡æ¯ä¸åŠ¨æ€å†…å®¹çš„æŸ¥è¯¢åˆ†å¼€ï¼Œå…ˆæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯è¡¨ï¼Œå†é€šè¿‡ <code>IN()</code> æ–¹å¼è·å–åŠ¨æ€å†…å®¹ã€‚</li><li><strong>æ°´å¹³æ‹†åˆ†</strong>ï¼šå°†åŠ¨æ€è¡¨æŒ‰ç”¨æˆ· ID æˆ–æ—¶é—´è¿›è¡Œæ°´å¹³æ‹†åˆ†ï¼Œå‡å°‘å•è¡¨æ•°æ®é‡ï¼Œæå‡æŸ¥è¯¢æ•ˆç‡ã€‚</li><li><strong>ç¼“å­˜ç”¨æˆ·ä¿¡æ¯</strong>ï¼šå°†ç”¨æˆ·ä¿¡æ¯ç¼“å­˜åˆ° Redis æˆ–å†…å­˜ä¸­ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢ã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="variable constant_">CREATE</span> <span class="variable constant_">TABLE</span> <span class="title function_">comments</span> (</span><br><span class="line">    comment_id <span class="variable constant_">INT</span> <span class="variable constant_">PRIMARY</span> <span class="variable constant_">KEY</span>,</span><br><span class="line">    post_id <span class="variable constant_">INT</span>,</span><br><span class="line">    user_id <span class="variable constant_">INT</span>,</span><br><span class="line">    comment_content <span class="variable constant_">TEXT</span>,</span><br><span class="line">    comment_date <span class="variable constant_">DATETIME</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">å‡è®¾æˆ‘ä»¬éœ€è¦æŸ¥è¯¢æŸä¸ªç”¨æˆ·çš„æ‰€æœ‰åŠ¨æ€åŠå…¶å¯¹åº”çš„è¯„è®ºï¼Œé€šå¸¸ä¼šä½¿ç”¨å¦‚ä¸‹æŸ¥è¯¢ï¼š</span><br><span class="line"></span><br><span class="line"><span class="variable constant_">SELECT</span> u.<span class="property">username</span>, p.<span class="property">post_content</span>, c.<span class="property">comment_content</span></span><br><span class="line"><span class="variable constant_">FROM</span> users u</span><br><span class="line"><span class="variable constant_">JOIN</span> posts p <span class="variable constant_">ON</span> u.<span class="property">user_id</span> = p.<span class="property">user_id</span></span><br><span class="line"><span class="variable constant_">LEFT</span> <span class="variable constant_">JOIN</span> comments c <span class="variable constant_">ON</span> p.<span class="property">post_id</span> = c.<span class="property">post_id</span></span><br><span class="line"><span class="variable constant_">WHERE</span> u.<span class="property">user_id</span> = <span class="number">12345</span></span><br><span class="line"><span class="variable constant_">ORDER</span> <span class="variable constant_">BY</span> p.<span class="property">post_date</span> <span class="variable constant_">DESC</span>;</span><br><span class="line">ä¸ºäº†ä¼˜åŒ–ä¸Šè¿°æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç›¸å…³è¡¨ä¸Šåˆ›å»ºåˆé€‚çš„ç´¢å¼•ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>åœ¨ posts è¡¨ä¸Šåˆ›å»ºè”åˆç´¢å¼•ï¼Œä¼˜åŒ– user_id å’Œ post_date çš„æŸ¥è¯¢å’Œæ’åºï¼š</span><br><span class="line"><span class="variable constant_">CREATE</span> <span class="variable constant_">INDEX</span> idx_user_post_date <span class="variable constant_">ON</span> <span class="title function_">posts</span>(user_id, post_date <span class="variable constant_">DESC</span>);</span><br><span class="line">åœ¨ comments è¡¨ä¸Šåˆ›å»ºç´¢å¼•ä»¥ä¼˜åŒ– post_id çš„è¿æ¥æŸ¥è¯¢ï¼š</span><br><span class="line"><span class="variable constant_">CREATE</span> <span class="variable constant_">INDEX</span> idx_post_id <span class="variable constant_">ON</span> <span class="title function_">comments</span>(post_id);</span><br><span class="line"><span class="number">2.</span>è¦†ç›–ç´¢å¼•</span><br><span class="line"><span class="variable constant_">CREATE</span> <span class="variable constant_">INDEX</span> idx_user_post_content <span class="variable constant_">ON</span> <span class="title function_">posts</span>(user_id, post_date <span class="variable constant_">DESC</span>, post_content);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>case 3:ä»¥<code>%</code>å¼€å¤´çš„ LIKE æŸ¥è¯¢ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åŸå§‹æŸ¥è¯¢SELECT * FROM products WHERE product_name LIKE 'abc%';</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¼˜åŒ–åçš„æŸ¥è¯¢SELECT * FROM products WHERE product_name &gt;= 'abc' AND product_name &lt; 'abd'; or ä¸ºæ–‡æœ¬åˆ—æ·»åŠ å…¨æ–‡ç´¢å¼•</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸Šçš„æ­¥éª¤å’Œæ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨å®é™…åœºæ™¯ä¸­ç³»ç»Ÿåœ°ä¼˜åŒ– MySQL æŸ¥è¯¢ï¼Œæå‡æ•°æ®åº“çš„å“åº”é€Ÿåº¦å’Œç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½ã€‚</p><h2 id="ç´¢å¼•">ç´¢å¼•</h2><p>æ•°æ®åº“ç´¢å¼•æ˜¯å¯¹æ•°æ®åº“è¡¨çš„ä¸€åˆ—æˆ–è€…å¤šåˆ—çš„å€¼è¿›è¡Œæ’åºä¸€ç§<strong>ç»“æ„</strong>ï¼Œä½¿ç”¨ç´¢å¼•å¯ä»¥å¿«é€Ÿè®¿é—®æ•°æ®è¡¨ä¸­çš„ç‰¹å®šä¿¡æ¯ã€‚</p><p><strong>ç´¢å¼•çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</strong></p><p>ä¼˜ç‚¹ï¼š</p><ul><li>å¤§å¤§åŠ å¿«æ•°æ®æ£€ç´¢çš„é€Ÿåº¦ã€‚</li><li>å°†éšæœºI/Oå˜æˆé¡ºåºI/O(å› ä¸ºB+æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯è¿æ¥åœ¨ä¸€èµ·çš„)</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>ä»ç©ºé—´è§’åº¦è€ƒè™‘ï¼Œå»ºç«‹ç´¢å¼•éœ€è¦å ç”¨ç‰©ç†ç©ºé—´</li><li>ä»æ—¶é—´è§’åº¦ è€ƒè™‘ï¼Œåˆ›å»ºå’Œç»´æŠ¤ç´¢å¼•éƒ½éœ€è¦èŠ±è´¹æ—¶é—´ï¼Œä¾‹å¦‚å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹çš„æ—¶å€™éƒ½éœ€è¦ç»´æŠ¤ç´¢å¼•ã€‚</li></ul><p>ç´¢å¼•çš„å®ç°é€šå¸¸ä½¿ç”¨<strong>Hashç´¢å¼•å’ŒB+æ ‘</strong>ï¼ˆMySQLå¸¸ç”¨çš„ç´¢å¼•å°±æ˜¯B+æ ‘ï¼‰ã€‚é™¤äº†æ•°æ®ä¹‹å¤–ï¼Œæ•°æ®åº“ç³»ç»Ÿè¿˜ç»´æŠ¤ä¸ºæ»¡è¶³ç‰¹å®šæŸ¥æ‰¾ç®—æ³•çš„æ•°æ®ç»“æ„ï¼Œè¿™äº›æ•°æ®ç»“æ„ä»¥æŸç§æ–¹å¼å¼•ç”¨æ•°æ®ï¼Œè¿™ç§æ•°æ®ç»“æ„å°±æ˜¯ç´¢å¼•ã€‚ç®€è¨€ä¹‹ï¼Œç´¢å¼•å°±ç±»ä¼¼äºä¹¦æœ¬ï¼Œå­—å…¸çš„ç›®å½•ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®æ¦‚å¿µå’Œè¦ç‚¹ä¸æ•°æ®åº“ç´¢å¼•ç›¸å…³ï¼š</p><ol><li><strong>ç´¢å¼•ç±»å‹</strong>ï¼š<ul><li><strong>Bæ ‘ç´¢å¼•</strong>ï¼šæ˜¯æœ€å¸¸è§çš„ç´¢å¼•ç±»å‹ï¼Œé€‚ç”¨äºå¤§å¤šæ•°æ•°æ®åº“ç³»ç»Ÿã€‚Bæ ‘ç´¢å¼•åœ¨æ ‘ç»“æ„ä¸­è¿›è¡Œæ•°æ®åˆ’åˆ†ï¼Œä½¿å¾—åœ¨å¹³å‡æƒ…å†µä¸‹ï¼Œæ£€ç´¢æ—¶é—´å¤æ‚åº¦ä¸ºO(log n)ã€‚</li><li><strong>å“ˆå¸Œç´¢å¼•</strong>ï¼šåŸºäºå“ˆå¸Œç®—æ³•ï¼Œé€‚ç”¨äºç­‰å€¼æŸ¥è¯¢ã€‚ä½†æ˜¯ï¼Œå“ˆå¸Œç´¢å¼•ä¸é€‚ç”¨äºèŒƒå›´æŸ¥è¯¢ï¼Œä¸”ä¸é€‚åˆäºæœ‰åºæ•°æ®ã€‚</li><li><strong>å…¨æ–‡ç´¢å¼•</strong>ï¼šç”¨äºæ–‡æœ¬æ•°æ®çš„é«˜æ•ˆæœç´¢ï¼Œæ”¯æŒå…³é”®è¯æœç´¢ã€æ¨¡ç³ŠæŸ¥è¯¢ç­‰ã€‚</li><li><strong>ç©ºé—´ç´¢å¼•</strong>ï¼šç”¨äºåœ°ç†ç©ºé—´æ•°æ®çš„ç´¢å¼•ï¼Œå¯ä»¥æ”¯æŒåœ°ç†åæ ‡æŸ¥è¯¢å’ŒèŒƒå›´æŸ¥è¯¢ã€‚</li></ul></li></ol><h3 id="ä»€ä¹ˆæ—¶å€™ä¸éœ€è¦åˆ›å»ºç´¢å¼•ï¼Ÿ"><strong>ä»€ä¹ˆæ—¶å€™ä¸éœ€è¦åˆ›å»ºç´¢å¼•ï¼Ÿ</strong></h3><ul><li>åªè¯»æˆ–æå°‘å†™çš„è¡¨ï¼ˆå¦‚é…ç½®è¡¨ã€ä»£ç è¡¨ï¼‰ï¼Œå¾ˆå°‘è¢«æŸ¥è¯¢çš„ä¿¡æ¯ï¼ˆlog</li><li><code>WHERE</code>Â æ¡ä»¶ï¼Œ<code>GROUP BY</code>ï¼Œ<code>ORDER BY</code>Â é‡Œç”¨ä¸åˆ°çš„å­—æ®µï¼Œç´¢å¼•çš„ä»·å€¼æ˜¯å¿«é€Ÿå®šä½ï¼Œå¦‚æœèµ·ä¸åˆ°å®šä½çš„å­—æ®µé€šå¸¸æ˜¯ä¸éœ€è¦åˆ›å»ºç´¢å¼•çš„ï¼Œå› ä¸ºç´¢å¼•æ˜¯ä¼šå ç”¨ç‰©ç†ç©ºé—´çš„ã€‚</li><li>å­—æ®µä¸­å­˜åœ¨å¤§é‡é‡å¤æ•°æ®ï¼Œä¸éœ€è¦åˆ›å»ºç´¢å¼•ï¼Œæ¯”å¦‚æ€§åˆ«å­—æ®µï¼Œåªæœ‰ç”·å¥³ï¼Œå¦‚æœæ•°æ®åº“è¡¨ä¸­ï¼Œç”·å¥³çš„è®°å½•åˆ†å¸ƒå‡åŒ€ï¼Œé‚£ä¹ˆæ— è®ºæœç´¢å“ªä¸ªå€¼éƒ½å¯èƒ½å¾—åˆ°ä¸€åŠçš„æ•°æ®ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œè¿˜ä¸å¦‚ä¸è¦ç´¢å¼•ï¼Œå› ä¸º MySQL è¿˜æœ‰ä¸€ä¸ªæŸ¥è¯¢ä¼˜åŒ–å™¨ï¼ŒæŸ¥è¯¢ä¼˜åŒ–å™¨å‘ç°æŸä¸ªå€¼å‡ºç°åœ¨è¡¨çš„æ•°æ®è¡Œä¸­çš„ç™¾åˆ†æ¯”å¾ˆé«˜çš„æ—¶å€™ï¼Œå®ƒä¸€èˆ¬ä¼šå¿½ç•¥ç´¢å¼•ï¼Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚</li><li>è¡¨æ•°æ®å¤ªå°‘çš„æ—¶å€™ï¼Œä¸éœ€è¦åˆ›å»ºç´¢å¼•ï¼›</li><li>ç»å¸¸æ›´æ–°çš„å­—æ®µä¸ç”¨åˆ›å»ºç´¢å¼•ï¼Œæ¯”å¦‚ä¸è¦å¯¹ç”µå•†é¡¹ç›®çš„ç”¨æˆ·ä½™é¢å»ºç«‹ç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•å­—æ®µé¢‘ç¹ä¿®æ”¹ï¼Œç”±äºè¦ç»´æŠ¤ B+Treeçš„æœ‰åºæ€§ï¼Œé‚£ä¹ˆå°±éœ€è¦é¢‘ç¹çš„é‡å»ºç´¢å¼•ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯ä¼šå½±å“æ•°æ®åº“æ€§èƒ½çš„ã€‚</li></ul><p><strong>MySQL ç´¢å¼•</strong><br>ç´¢å¼•æ˜¯åœ¨å­˜å‚¨å¼•æ“å±‚å®ç°çš„ï¼Œè€Œä¸æ˜¯åœ¨æœåŠ¡å™¨å±‚å®ç°çš„ï¼Œæ‰€ä»¥ä¸åŒå­˜å‚¨å¼•æ“å…·æœ‰ä¸åŒçš„ç´¢å¼•ç±»å‹å’Œå®ç°ã€‚InnoDBå°†ç£ç›˜æ•°æ®å»ºç«‹ç´¢å¼•å¹¶å‚¨å­˜åœ¨B+æ ‘ä¸­</p><ol><li>B+Tree ç´¢å¼•<br>æ˜¯å¤§å¤šæ•° MySQL å­˜å‚¨å¼•æ“çš„é»˜è®¤ç´¢å¼•ç±»å‹ã€‚</li></ol><p>Bæ ‘æ˜¯ä¸€ç§å¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘</p><p>B+ æ ‘<strong>æŸ¥è¯¢æ•ˆç‡æ›´ç¨³å®š</strong>ã€‚å› ä¸º B+ æ ‘æ¯æ¬¡åªæœ‰è®¿é—®åˆ°å¶å­èŠ‚ç‚¹æ‰èƒ½æ‰¾åˆ°å¯¹åº”çš„æ•°æ®ï¼Œè€Œåœ¨ B æ ‘ä¸­ï¼Œéå¶å­èŠ‚ç‚¹ä¹Ÿä¼šå­˜å‚¨æ•°æ®ï¼Œè¿™æ ·å°±ä¼šé€ æˆæŸ¥è¯¢æ•ˆç‡ä¸ç¨³å®šçš„æƒ…å†µï¼Œæœ‰æ—¶å€™è®¿é—®åˆ°äº†éå¶å­èŠ‚ç‚¹å°±å¯ä»¥æ‰¾åˆ°å…³é”®å­—ï¼Œè€Œæœ‰æ—¶éœ€è¦è®¿é—®åˆ°å¶å­èŠ‚ç‚¹æ‰èƒ½æ‰¾åˆ°å…³é”®å­—ã€‚</p><p>å…¶æ¬¡ï¼ŒB+ æ ‘çš„æŸ¥è¯¢æ•ˆç‡æ›´é«˜ï¼Œè¿™æ˜¯å› ä¸ºé€šå¸¸ B+ æ ‘æ¯” B æ ‘æ›´çŸ®èƒ–ï¼ˆé˜¶æ•°æ›´å¤§ï¼Œæ·±åº¦æ›´ä½ï¼‰ï¼ŒæŸ¥è¯¢æ‰€éœ€è¦çš„ç£ç›˜ I/O ä¹Ÿä¼šæ›´å°‘ã€‚åŒæ ·çš„ç£ç›˜é¡µå¤§å°ï¼ŒB+ æ ‘å¯ä»¥å­˜å‚¨æ›´å¤šçš„èŠ‚ç‚¹å…³é”®å­—ã€‚</p><p>**B+Tree åªåœ¨å¶å­èŠ‚ç‚¹å­˜å‚¨æ•°æ®ï¼Œè€Œ B æ ‘ çš„éå¶å­èŠ‚ç‚¹ä¹Ÿè¦å­˜å‚¨æ•°æ®ï¼Œ**æ‰€ä»¥ B+Tree çš„å•ä¸ªèŠ‚ç‚¹çš„æ•°æ®é‡æ›´å°ï¼Œ<strong>åœ¨ç›¸åŒçš„ç£ç›˜ I/O æ¬¡æ•°ä¸‹ï¼Œå°±èƒ½æŸ¥è¯¢æ›´å¤šçš„èŠ‚ç‚¹</strong>ã€‚ å¦å¤–ï¼ŒB+Tree å¶å­èŠ‚ç‚¹é‡‡ç”¨çš„æ˜¯åŒé“¾è¡¨è¿æ¥ï¼Œé€‚åˆ MySQL ä¸­å¸¸è§çš„åŸºäºèŒƒå›´çš„é¡ºåºæŸ¥æ‰¾ï¼Œè€Œ B æ ‘æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚</p><p>2ã€B+Tree vs Hashï¼Œ Hash åœ¨åšç­‰å€¼æŸ¥è¯¢çš„æ—¶å€™æ•ˆç‡è´¼å¿«ï¼Œæœç´¢å¤æ‚åº¦ä¸º O(1)ã€‚ ä½†æ˜¯ Hash è¡¨ä¸é€‚åˆåšèŒƒå›´æŸ¥è¯¢ï¼Œå®ƒæ›´é€‚åˆåšç­‰å€¼çš„æŸ¥è¯¢ï¼Œè¿™ä¹Ÿæ˜¯ B+Tree ç´¢å¼•è¦æ¯” Hash è¡¨ç´¢å¼•æœ‰ç€æ›´å¹¿æ³›çš„é€‚ç”¨åœºæ™¯çš„åŸå› ã€‚</p><p>çº¢é»‘æ ‘ç­‰å¹³è¡¡æ ‘ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°ç´¢å¼•ï¼Œä½†æ˜¯æ–‡ä»¶ç³»ç»ŸåŠæ•°æ®åº“ç³»ç»Ÿæ™®éé‡‡ç”¨ B+ Tree ä½œä¸ºç´¢å¼•ç»“æ„ï¼Œè¿™æ˜¯å› ä¸ºä½¿ç”¨ B+ æ ‘è®¿é—®ç£ç›˜æ•°æ®æœ‰æ›´é«˜çš„æ€§èƒ½ã€‚</p><p>Why innodb use b+ tree as index?</p><ol><li><strong>é€‚åˆèŒƒå›´æŸ¥è¯¢å’ŒèŒƒå›´æ‰«æ</strong>ï¼šB+ æ ‘ç´¢å¼•é€‚ç”¨äºèŒƒå›´æŸ¥è¯¢ï¼Œä¾‹å¦‚ <strong><code>BETWEEN</code></strong>ã€<strong><code>&lt;</code></strong>ã€<strong><code>&gt;</code></strong> ç­‰æ“ä½œã€‚B+ æ ‘çš„ç‰¹æ€§ä½¿å¾—åœ¨ç´¢å¼•ä¸­æŸ¥æ‰¾èŒƒå›´æ›´ä¸ºé«˜æ•ˆã€‚</li><li><strong>æœ‰åºæ€§</strong>ï¼šB+ æ ‘æ˜¯ä¸€ç§æœ‰åºæ ‘ç»“æ„ï¼Œå¶å­èŠ‚ç‚¹å½¢æˆäº†ä¸€ä¸ªæœ‰åºé“¾è¡¨ã€‚è¿™ä½¿å¾—èŒƒå›´æ‰«æå˜å¾—æ›´åŠ é«˜æ•ˆï¼Œå› ä¸ºå®ƒä»¬èƒ½å¤Ÿé¡ºåºè®¿é—®ç´¢å¼•é¡µã€‚</li><li><strong>å‡å°‘ç£ç›˜ I/O</strong>ï¼šB+ æ ‘ç´¢å¼•çš„å¶å­èŠ‚ç‚¹é€šå¸¸æ„æˆä¸€ä¸ªé“¾è¡¨ï¼Œè¿™æœ‰åŠ©äºå‡å°‘èŒƒå›´æŸ¥è¯¢æ—¶éœ€è¦è¯»å–çš„ç£ç›˜é¡µæ•°é‡ã€‚å¦å¤–ï¼Œç”±äºç´¢å¼•èŠ‚ç‚¹å­˜å‚¨äº†æ›´å¤šçš„é”®å€¼å¯¹ï¼Œç›¸è¾ƒäºå…¶ä»–æ ‘ç»“æ„ï¼ˆå¦‚ B æ ‘ï¼‰ï¼Œåœ¨å†…å­˜ä¸­æ›´æœ‰å¯èƒ½è¯»å–åˆ°æ‰€éœ€çš„èŠ‚ç‚¹ã€‚</li><li><strong>æ”¯æŒèšé›†ç´¢å¼•</strong>ï¼šåœ¨ InnoDB ä¸­ï¼Œä¸»é”®ç´¢å¼•ï¼ˆå¦‚æœå®šä¹‰äº†ä¸»é”®ï¼‰è¢«ç§°ä¸ºèšé›†ç´¢å¼•ï¼Œå®ƒå†³å®šäº†æ•°æ®çš„ç‰©ç†å­˜å‚¨é¡ºåºã€‚B+ æ ‘ä½œä¸ºä¸»é”®ç´¢å¼•æä¾›äº†å¯¹è¡¨æ•°æ®ç‰©ç†å­˜å‚¨é¡ºåºçš„ä¼˜åŒ–ã€‚</li><li><strong>èŒƒå›´åˆ†è£‚</strong>ï¼šB+ æ ‘çš„åˆ†è£‚ä¸ä¼šå½±å“å¶å­èŠ‚ç‚¹ï¼Œåªæœ‰éå¶å­èŠ‚ç‚¹æ‰ä¼šå‘ç”Ÿåˆ†è£‚ã€‚è¿™æœ‰åŠ©äºä¿æŒå¶å­èŠ‚ç‚¹çš„ç´§å‡‘æ€§ï¼Œé¿å…äº†é¢‘ç¹çš„å¹³è¡¡æ“ä½œï¼Œæé«˜äº†æ€§èƒ½ã€‚</li><li><strong>æ”¯æŒå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰</strong>ï¼šInnoDB ä½¿ç”¨äº† MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰æ¥å¤„ç†äº‹åŠ¡éš”ç¦»æ€§ï¼Œè€Œ B+ æ ‘ç´¢å¼•èƒ½å¤Ÿæœ‰æ•ˆåœ°æ”¯æŒè¿™ç§å¹¶å‘æ§åˆ¶æ¨¡å‹ã€‚</li></ol><p>äºŒå‰æœç´¢æ ‘æŸ¥è¯¢æ•ˆç‡æ— ç–‘æ˜¯æœ€é«˜çš„ï¼Œå› ä¸ºå¹³å‡æ¥è¯´æ¯æ¬¡æ¯”è¾ƒéƒ½èƒ½ç¼©å°ä¸€åŠçš„æœç´¢èŒƒå›´  æ‰€ä»¥è¡¨é¢ä¸Šæ¥çœ‹æˆ‘ä»¬ä½¿ç”¨ Bã€B+ æ ‘æ²¡æœ‰ äºŒå‰æŸ¥æ‰¾æ ‘æ•ˆç‡é«˜ï¼Œä½†æ˜¯å®é™…ä¸Šç”±äº Bã€B+ æ ‘é™ä½äº†æ ‘é«˜ï¼Œå‡å°‘äº†ç£ç›˜ IO æ¬¡æ•°ï¼Œåè€Œå¤§å¤§æå‡äº†é€Ÿåº¦ã€‚</p><ul><li>èšç°‡ç´¢å¼•ï¼š<strong>å°†<a href="https://cloud.tencent.com/product/cdcs?from_column=20065&amp;from=20065">æ•°æ®å­˜å‚¨</a>ä¸ç´¢å¼•æ”¾åˆ°äº†ä¸€å—</strong>ï¼Œæ‰¾åˆ°ç´¢å¼•ä¹Ÿå°±æ‰¾åˆ°äº†æ•°æ® èšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å°±æ˜¯å®é™…çš„æ•°æ®è¡Œ</li><li>éèšç°‡ç´¢å¼•ï¼šä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªéèšç°‡ç´¢å¼•ï¼Œè¿™äº›ç´¢å¼•åœ¨é€»è¾‘ä¸Šåªæ˜¯æŒ‡å‘æ•°æ®è¡Œçš„æŒ‡é’ˆã€‚ å°†æ•°æ®å­˜å‚¨äºç´¢å¼•åˆ†å¼€ç»“æ„ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹æŒ‡å‘äº†æ•°æ®çš„å¯¹åº”è¡Œï¼Œmyisamé€šè¿‡key_bufferæŠŠç´¢å¼•å…ˆç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œå½“éœ€è¦è®¿é—®æ•°æ®æ—¶ï¼ˆé€šè¿‡ç´¢å¼•è®¿é—®æ•°æ®ï¼‰ï¼Œåœ¨å†…å­˜ä¸­ç›´æ¥æœç´¢ç´¢å¼•ï¼Œç„¶åé€šè¿‡ç´¢å¼•æ‰¾åˆ°ç£ç›˜ç›¸åº”æ•°æ®ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆç´¢å¼•ä¸åœ¨key bufferå‘½ä¸­æ—¶ï¼Œé€Ÿåº¦æ…¢çš„åŸå› </li></ul><p>åŒºåˆ«å°±åœ¨äºå¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯ä»€ä¹ˆæ•°æ®ï¼š</p><ul><li>èšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯å®é™…æ•°æ®ï¼Œæ‰€æœ‰å®Œæ•´çš„ç”¨æˆ·è®°å½•éƒ½å­˜æ”¾åœ¨èšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ï¼›</li><li>äºŒçº§ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯ä¸»é”®å€¼ï¼Œè€Œä¸æ˜¯å®é™…æ•°æ®ã€‚</li></ul><p><strong>å¦‚æœæŸä¸ªæŸ¥è¯¢è¯­å¥ä½¿ç”¨äº†äºŒçº§ç´¢å¼•ï¼Œä½†æ˜¯æŸ¥è¯¢çš„æ•°æ®ä¸æ˜¯ä¸»é”®å€¼ï¼Œè¿™æ—¶åœ¨äºŒçº§ç´¢å¼•æ‰¾åˆ°ä¸»é”®å€¼åï¼Œéœ€è¦å»èšç°‡ç´¢å¼•ä¸­è·å¾—æ•°æ®è¡Œï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«ä½œã€Œå›è¡¨ã€ï¼Œä¹Ÿå°±æ˜¯è¯´è¦æŸ¥ä¸¤ä¸ª B+ æ ‘æ‰èƒ½æŸ¥åˆ°æ•°æ®ã€‚ä¸è¿‡ï¼Œå½“æŸ¥è¯¢çš„æ•°æ®æ˜¯ä¸»é”®å€¼æ—¶ï¼Œå› ä¸ºåªåœ¨äºŒçº§ç´¢å¼•å°±èƒ½æŸ¥è¯¢åˆ°ï¼Œä¸ç”¨å†å»èšç°‡ç´¢å¼•æŸ¥ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«ä½œã€Œç´¢å¼•è¦†ç›–ã€ï¼Œä¹Ÿå°±æ˜¯åªéœ€è¦æŸ¥ä¸€ä¸ª B+ æ ‘å°±èƒ½æ‰¾åˆ°æ•°æ®ã€‚</strong></p><p><strong>ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•å’Œç´¢å¼•ä¸‹æ¨ï¼Ÿ</strong></p><p>è¦†ç›–ç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯ covering index ã€‚Â <strong>æŒ‡çš„æ˜¯ä¸€ä¸ªæŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œåªç”¨ä»ç´¢å¼•ä¸­å°±èƒ½è·å–åˆ°ç›®æ ‡æ•°æ®ï¼Œä¸å¿…ä»æ•°æ®è¡¨ä¸­è¯»å–</strong>ã€‚</p><ol><li><strong>è¦†ç›–ç´¢å¼•:</strong>Â å½“æŸ¥è¯¢æ‰€éœ€çš„å…¨éƒ¨åˆ—æ•°æ®éƒ½èƒ½åœ¨ç´¢å¼•ä¸­æ‰¾åˆ°æ—¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºè¦†ç›–ç´¢å¼•ã€‚è¿™æ„å‘³ç€æŸ¥è¯¢å¯ä»¥ç›´æ¥ä»ç´¢å¼•ä¸­è·å–ç»“æœï¼Œæ— éœ€å›è¡¨æŸ¥è¯¢ä¸»é”®ç´¢å¼•ã€‚</li></ol><p><code>CREATE INDEX idx_name_age ON users (name, age);</code></p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸ºÂ <code>idx_name_age</code>Â çš„è¦†ç›–ç´¢å¼•ï¼Œå®ƒåŒ…å«äº†Â <code>name</code>Â å’ŒÂ <code>age</code>Â ä¸¤ä¸ªåˆ—ã€‚å¦‚æœæŸ¥è¯¢éœ€è¦æ ¹æ®Â <code>name</code>Â å’ŒÂ <code>age</code>Â æ¥æŸ¥æ‰¾ç”¨æˆ·ï¼Œé‚£ä¹ˆè¿™ä¸ªç´¢å¼•å°±å¯ä»¥è¦†ç›–æŸ¥è¯¢ï¼Œæ— éœ€è®¿é—®è¡¨æœ¬èº«ã€‚</p><p><strong>æŸ¥è¯¢æ—¶ä½¿ç”¨è¦†ç›–ç´¢å¼•:</strong></p><p>å½“æŸ¥è¯¢æ¡ä»¶èƒ½å¤Ÿé€šè¿‡è¦†ç›–ç´¢å¼•æ‰¾åˆ°æ‰€éœ€æ•°æ®æ—¶ï¼ŒMySQL ä¼šè‡ªåŠ¨ä½¿ç”¨è¦†ç›–ç´¢å¼•ã€‚</p><p><strong>ç¤ºä¾‹æŸ¥è¯¢:</strong></p><p><code>SELECT name, age FROM users WHERE name = 'John' AND age = 30;</code></p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœÂ <code>idx_name_age</code>Â ç´¢å¼•å­˜åœ¨ï¼Œå¹¶ä¸”åŒ…å«äº†Â <code>name</code>Â å’ŒÂ <code>age</code>Â çš„å€¼ï¼Œé‚£ä¹ˆ MySQL ä¼šä½¿ç”¨è¦†ç›–ç´¢å¼•æ¥æ‰§è¡ŒæŸ¥è¯¢ï¼Œç›´æ¥è¿”å›ç»“æœï¼Œè€Œæ— éœ€è®¿é—®è¡¨æœ¬èº«</p><p>Mysql5.6 å¼•å…¥çš„ç´¢å¼•ä¸‹æ¨ä¼˜åŒ–ï¼ˆindex condition pushdown)ï¼Œ å¯ä»¥åœ¨ç´¢å¼•éå†è¿‡ç¨‹ä¸­ï¼Œå¯¹ç´¢å¼•ä¸­åŒ…å«çš„å­—æ®µå…ˆåšåˆ¤æ–­ï¼Œç›´æ¥è¿‡æ»¤æ‰ä¸æ»¡è¶³æ¡ä»¶çš„è®°å½•ï¼Œå‡å°‘å›è¡¨æ¬¡æ•°ã€‚</p><p>ç°åœ¨æœ‰ä¸‹é¢è¿™æ¡æŸ¥è¯¢è¯­å¥ï¼š</p><p><code>select * from t_user  where age &gt; 20 and reward = 100000;</code></p><p>è”åˆç´¢å¼•å½“é‡åˆ°èŒƒå›´æŸ¥è¯¢ (&gt;ã€&lt;) å°±ä¼šåœæ­¢åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯Â <strong>age å­—æ®µèƒ½ç”¨åˆ°è”åˆç´¢å¼•ï¼Œä½†æ˜¯ reward å­—æ®µåˆ™æ— æ³•åˆ©ç”¨åˆ°ç´¢å¼•</strong>ã€‚å…·ä½“åŸå› è¿™é‡Œå¯ä»¥çœ‹è¿™ç¯‡ï¼š<a href="https://xiaolincoding.com/mysql/index/index_interview.html#%E6%8C%89%E5%AD%97%E6%AE%B5%E4%B8%AA%E6%95%B0%E5%88%86%E7%B1%BB"><strong>ç´¢å¼•å¸¸è§é¢è¯•é¢˜(opens new window)</strong></a></p><p>é‚£ä¹ˆï¼Œä¸ä½¿ç”¨ç´¢å¼•ä¸‹æ¨ï¼ˆMySQL 5.6 ä¹‹å‰çš„ç‰ˆæœ¬ï¼‰æ—¶ï¼Œæ‰§è¡Œå™¨ä¸å­˜å‚¨å¼•æ“çš„æ‰§è¡Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>Server å±‚é¦–å…ˆè°ƒç”¨å­˜å‚¨å¼•æ“çš„æ¥å£å®šä½åˆ°æ»¡è¶³æŸ¥è¯¢æ¡ä»¶çš„ç¬¬ä¸€æ¡äºŒçº§ç´¢å¼•è®°å½•ï¼Œä¹Ÿå°±æ˜¯å®šä½åˆ° age &gt; 20 çš„ç¬¬ä¸€æ¡è®°å½•ï¼›</li><li>å­˜å‚¨å¼•æ“æ ¹æ®äºŒçº§ç´¢å¼•çš„ B+ æ ‘å¿«é€Ÿå®šä½åˆ°è¿™æ¡è®°å½•åï¼Œè·å–ä¸»é”®å€¼ï¼Œç„¶å<strong>è¿›è¡Œå›è¡¨æ“ä½œ</strong>ï¼Œå°†å®Œæ•´çš„è®°å½•è¿”å›ç»™ Server å±‚ï¼›</li><li>Server å±‚åœ¨åˆ¤æ–­è¯¥è®°å½•çš„ reward æ˜¯å¦ç­‰äº 100000ï¼Œå¦‚æœæˆç«‹åˆ™å°†å…¶å‘é€ç»™å®¢æˆ·ç«¯ï¼›å¦åˆ™è·³è¿‡è¯¥è®°å½•ï¼›</li><li>æ¥ç€ï¼Œç»§ç»­å‘å­˜å‚¨å¼•æ“ç´¢è¦ä¸‹ä¸€æ¡è®°å½•ï¼Œå­˜å‚¨å¼•æ“åœ¨äºŒçº§ç´¢å¼•å®šä½åˆ°è®°å½•åï¼Œè·å–ä¸»é”®å€¼ï¼Œç„¶åå›è¡¨æ“ä½œï¼Œå°†å®Œæ•´çš„è®°å½•è¿”å›ç»™ Server å±‚ï¼›</li><li>å¦‚æ­¤å¾€å¤ï¼Œç›´åˆ°å­˜å‚¨å¼•æ“æŠŠè¡¨ä¸­çš„æ‰€æœ‰è®°å½•è¯»å®Œã€‚</li></ul><p>å¯ä»¥çœ‹åˆ°ï¼Œæ²¡æœ‰ç´¢å¼•ä¸‹æ¨çš„æ—¶å€™ï¼Œæ¯æŸ¥è¯¢åˆ°ä¸€æ¡äºŒçº§ç´¢å¼•è®°å½•ï¼Œéƒ½è¦è¿›è¡Œå›è¡¨æ“ä½œï¼Œç„¶åå°†è®°å½•è¿”å›ç»™ Serverï¼Œæ¥ç€ Server å†åˆ¤æ–­è¯¥è®°å½•çš„ reward æ˜¯å¦ç­‰äº 100000ã€‚è€Œä½¿ç”¨ç´¢å¼•ä¸‹æ¨åï¼Œåˆ¤æ–­è®°å½•çš„ reward æ˜¯å¦ç­‰äº 100000 çš„å·¥ä½œäº¤ç»™äº†å­˜å‚¨å¼•æ“å±‚ï¼Œè¿‡ç¨‹å¦‚ä¸‹ ï¼š</p><ul><li>Server å±‚é¦–å…ˆè°ƒç”¨å­˜å‚¨å¼•æ“çš„æ¥å£å®šä½åˆ°æ»¡è¶³æŸ¥è¯¢æ¡ä»¶çš„ç¬¬ä¸€æ¡äºŒçº§ç´¢å¼•è®°å½•ï¼Œä¹Ÿå°±æ˜¯å®šä½åˆ° age &gt; 20 çš„ç¬¬ä¸€æ¡è®°å½•ï¼›</li><li>å­˜å‚¨å¼•æ“å®šä½åˆ°äºŒçº§ç´¢å¼•åï¼Œ<strong>å…ˆä¸æ‰§è¡Œå›è¡¨</strong>æ“ä½œï¼Œè€Œæ˜¯å…ˆåˆ¤æ–­ä¸€ä¸‹è¯¥ç´¢å¼•ä¸­åŒ…å«çš„åˆ—ï¼ˆrewardåˆ—ï¼‰çš„æ¡ä»¶ï¼ˆreward æ˜¯å¦ç­‰äº 100000ï¼‰æ˜¯å¦æˆç«‹ã€‚å¦‚æœ<strong>æ¡ä»¶ä¸æˆç«‹</strong>ï¼Œåˆ™ç›´æ¥<strong>è·³è¿‡è¯¥äºŒçº§ç´¢å¼•</strong>ã€‚å¦‚æœ<strong>æˆç«‹</strong>ï¼Œåˆ™<strong>æ‰§è¡Œå›è¡¨</strong>æ“ä½œï¼Œå°†å®Œæˆè®°å½•è¿”å›ç»™ Server å±‚ã€‚</li><li>Server å±‚åœ¨åˆ¤æ–­å…¶ä»–çš„æŸ¥è¯¢æ¡ä»¶ï¼ˆæœ¬æ¬¡æŸ¥è¯¢æ²¡æœ‰å…¶ä»–æ¡ä»¶ï¼‰æ˜¯å¦æˆç«‹ï¼Œå¦‚æœæˆç«‹åˆ™å°†å…¶å‘é€ç»™å®¢æˆ·ç«¯ï¼›å¦åˆ™è·³è¿‡è¯¥è®°å½•ï¼Œç„¶åå‘å­˜å‚¨å¼•æ“ç´¢è¦ä¸‹ä¸€æ¡è®°å½•ã€‚</li><li>å¦‚æ­¤å¾€å¤ï¼Œç›´åˆ°å­˜å‚¨å¼•æ“æŠŠè¡¨ä¸­çš„æ‰€æœ‰è®°å½•è¯»å®Œã€‚</li></ul><p>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨äº†ç´¢å¼•ä¸‹æ¨åï¼Œè™½ç„¶ reward åˆ—æ— æ³•ä½¿ç”¨åˆ°è”åˆç´¢å¼•ï¼Œä½†æ˜¯å› ä¸ºå®ƒåŒ…å«åœ¨è”åˆç´¢å¼•ï¼ˆageï¼Œrewardï¼‰é‡Œï¼Œæ‰€ä»¥ç›´æ¥åœ¨å­˜å‚¨å¼•æ“è¿‡æ»¤å‡ºæ»¡è¶³ reward = 100000 çš„è®°å½•åï¼Œæ‰å»æ‰§è¡Œå›è¡¨æ“ä½œè·å–æ•´ä¸ªè®°å½•ã€‚ç›¸æ¯”äºæ²¡æœ‰ä½¿ç”¨ç´¢å¼•ä¸‹æ¨ï¼ŒèŠ‚çœäº†å¾ˆå¤šå›è¡¨æ“ä½œã€‚</p><p>InnoDBä»¥é¡µé¢ï¼ˆPageï¼‰ä¸ºåŸºæœ¬å•ä½æ¥ç»„ç»‡å’Œç®¡ç†æ•°æ®ã€‚è¿™äº›é¡µé¢æ˜¯æ•°æ®åº“ä¸­æ•°æ®å’Œç´¢å¼•çš„ç‰©ç†å­˜å‚¨å•å…ƒã€‚</p><p>ä»¥ä¸‹æ˜¯ InnoDB é¡µé¢çš„ä¸€äº›å…³é”®ç‰¹ç‚¹ï¼š</p><ol><li><strong>å›ºå®šå¤§å°çš„é¡µ</strong>ï¼šInnoDB ä½¿ç”¨å›ºå®šå¤§å°çš„æ•°æ®é¡µï¼ˆé€šå¸¸æ˜¯é»˜è®¤å¤§å°ä¸º 16KBï¼‰ã€‚æ¯ä¸ªé¡µéƒ½æœ‰ä¸€ä¸ªåœ°å€å’Œå”¯ä¸€çš„é¡µå·ï¼Œå¹¶ç”¨äºå­˜å‚¨æ•°æ®ã€ç´¢å¼•ã€äº‹åŠ¡æ—¥å¿—ç­‰ä¿¡æ¯ã€‚</li><li><strong>é¡µç±»å‹</strong>ï¼šInnoDB ä¸­æœ‰ä¸åŒç±»å‹çš„é¡µï¼Œå¦‚æ•°æ®é¡µï¼ˆData Pageï¼‰ã€ç´¢å¼•é¡µï¼ˆIndex Pageï¼‰ã€Undo é¡µï¼ˆUndo Pageï¼‰ã€äº‹åŠ¡æ—¥å¿—é¡µï¼ˆLog Pageï¼‰ç­‰ã€‚æ¯ç§ç±»å‹çš„é¡µç”¨äºå­˜å‚¨ä¸åŒçš„ä¿¡æ¯ã€‚</li><li><strong>æ•°æ®é¡µ</strong>ï¼šä¸»è¦ç”¨äºå­˜å‚¨è¡¨çš„æ•°æ®ã€‚æ•°æ®é¡µä¸­åŒ…å«äº†è¡Œè®°å½•ä»¥åŠä¸€äº›ç®¡ç†ä¿¡æ¯ï¼Œä¾‹å¦‚è¡Œæ ¼å¼ã€è¡Œçš„ç‰ˆæœ¬ä¿¡æ¯ï¼ˆç”¨äº MVCCï¼‰ç­‰ã€‚</li><li><strong>ç´¢å¼•é¡µ</strong>ï¼šç”¨äºå­˜å‚¨ç´¢å¼•çš„èŠ‚ç‚¹ä¿¡æ¯ï¼ŒB+ æ ‘ç»“æ„ä¸­çš„åˆ†æ”¯èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹ã€‚</li><li><strong>ç®¡ç†å’Œç¼“å­˜</strong>ï¼šInnoDB é€šè¿‡ç¼“å†²æ± ï¼ˆBuffer Poolï¼‰æ¥ç®¡ç†æ•°æ®é¡µçš„å†…å­˜ç¼“å­˜ã€‚æ•°æ®é¡µåœ¨å†…å­˜ä¸­è¿›è¡Œè¯»å–å’Œå†™å…¥ï¼Œä»¥æé«˜è®¿é—®é€Ÿåº¦ã€‚LRUï¼ˆLeast Recently Usedï¼‰ç®—æ³•ç”¨äºç®¡ç†ç¼“å†²æ± ä¸­çš„é¡µã€‚</li></ol><p>ExplainæŸ¥è¯¢åˆ›å»ºçš„ç´¢å¼•æ˜¯å¦çœŸæ­£æœ‰æ•ˆ</p><p><img src="https://prod-files-secure.s3.us-west-2.amazonaws.com/ea503cf6-9325-47ab-9fb3-3e33e40583ef/84e344c3-a1df-4da0-a8c1-52a0f32055ac/image.png" alt="image.png"></p><p>The <code>EXPLAIN</code> statement in MySQL provides insight into how MySQL executes a query, specifically detailing how tables are joined. The <code>type</code> column in the <code>EXPLAIN</code> output describes the join method used, which indicates the efficiency of the query. Hereâ€™s a summary of the join types listed from best to worst:</p><ol><li><strong>system</strong></li></ol><p><strong>Description</strong>: The table has only one row, making it a â€œsystem table.â€ This is a special case of the <code>const</code> join type.</p><p><strong>Efficiency</strong>: Fastest, as thereâ€™s only one row to retrieve.</p><ol start="2"><li><strong>const</strong></li></ol><p><strong>Description</strong>: The table has at most one matching row, which is read at the start of the query. The result is treated as a constant by the optimizer.</p><p><strong>Usage</strong>: Typically used when querying a table with a primary key or a unique index where the result is a single row.</p><p><strong>Example</strong>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tbl_name <span class="keyword">WHERE</span> primary_key <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li><strong>eq_ref</strong></li></ol><p><strong>Description</strong>: For each row from the previous tables, exactly one row is read from this table. This type is used when all parts of a primary key or unique index are used.</p><p><strong>Usage</strong>: Used in join queries where the indexed column is compared with a constant or an expression involving columns from previously read tables.</p><p><strong>Example</strong>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ref_table, other_table <span class="keyword">WHERE</span> ref_table.key_column <span class="operator">=</span> other_table.column;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="4"><li><strong>ref</strong></li></ol><p><strong>Description</strong>: All rows with matching index values are read from this table for each combination of rows from the previous tables. This type is used when the join uses only a leftmost prefix of the key or if the key is not a primary key or unique index.</p><p><strong>Usage</strong>: Applicable when there are multiple rows that match the join condition.</p><p><strong>Example</strong>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ref_table <span class="keyword">WHERE</span> key_column <span class="operator">=</span> expr;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="5"><li><strong>fulltext</strong></li></ol><p><strong>Description</strong>: The join is performed using a <code>FULLTEXT</code> index.</p><p><strong>Usage</strong>: Used when a <code>FULLTEXT</code> index is involved in the query.</p><p><strong>Example</strong>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> articles <span class="keyword">WHERE</span> <span class="keyword">MATCH</span> (title, body) AGAINST (<span class="string">'text'</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="6"><li><strong>ref_or_null</strong></li></ol><p><strong>Description</strong>: Similar to <code>ref</code>, but includes an additional search for <code>NULL</code> values. Often used in queries that involve <code>OR</code> conditions with <code>NULL</code>.</p><p><strong>Usage</strong>: When the query checks for both specific values and <code>NULL</code> in the indexed column.</p><p><strong>Example</strong>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ref_table <span class="keyword">WHERE</span> key_column <span class="operator">=</span> expr <span class="keyword">OR</span> key_column <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="7"><li><strong>index_merge</strong></li></ol><p><strong>Description</strong>: Indicates that the <code>Index Merge</code> optimization is used, where multiple indexes are used to satisfy the query.</p><p><strong>Usage</strong>: When the query can use more than one index.</p><p><strong>Example</strong>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tbl_name <span class="keyword">WHERE</span> key1 <span class="operator">=</span> <span class="number">10</span> <span class="keyword">OR</span> key2 <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="8"><li><strong>unique_subquery</strong></li></ol><p><strong>Description</strong>: Replaces <code>eq_ref</code> for some <code>IN</code> subqueries. It functions as an index lookup and replaces the subquery for efficiency.</p><p><strong>Usage</strong>: For efficient <code>IN</code> subqueries.</p><p><strong>Example</strong>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tbl_name <span class="keyword">WHERE</span> id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> primary_key <span class="keyword">FROM</span> single_table <span class="keyword">WHERE</span> <span class="keyword">condition</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="9"><li><strong>index_subquery</strong></li></ol><p><strong>Description</strong>: Similar to <code>unique_subquery</code>, but works for non-unique indexes.</p><p><strong>Usage</strong>: For <code>IN</code> subqueries involving non-unique indexes.</p><p><strong>Example</strong>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tbl_name <span class="keyword">WHERE</span> id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> key_column <span class="keyword">FROM</span> single_table <span class="keyword">WHERE</span> <span class="keyword">condition</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="10"><li><strong>range</strong></li></ol><p><strong>Description</strong>: Only rows within a certain range are retrieved using an index. The index allows for range scans.</p><p><strong>Usage</strong>: When the query involves conditions that limit the result set to a specific range.</p><p><strong>Example</strong>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tbl_name <span class="keyword">WHERE</span> key_column <span class="keyword">BETWEEN</span> <span class="number">10</span> <span class="keyword">AND</span> <span class="number">20</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="11"><li><strong>index</strong></li></ol><p><strong>Description</strong>: Similar to <code>ALL</code>, but instead of scanning the entire table, only the index is scanned. Itâ€™s used when the query can be satisfied by the index alone.</p><p><strong>Usage</strong>: When the index is covering (contains all needed columns).</p><p><strong>Example</strong>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> indexed_column <span class="keyword">FROM</span> tbl_name;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="12"><li><strong>ALL</strong></li></ol><ul><li><p><strong>Description</strong>: A full table scan is performed for each combination of rows from the previous tables. This is generally the least efficient join type.</p></li><li><p><strong>Usage</strong>: When no indexes are available, or the query optimizer determines that a full table scan is faster.</p></li><li><p><strong>Example</strong>:</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tbl_name;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><strong>Best Types</strong>: <code>system</code>, <code>const</code>, <code>eq_ref</code> are the most efficient, meaning they minimize the number of rows scanned.</p></li><li><p><strong>Good Types</strong>: <code>ref</code>, <code>range</code>, <code>index_merge</code> are generally efficient, depending on the specific query and index design.</p></li><li><p><strong>Less Optimal Types</strong>: <code>index</code>, <code>ALL</code> are less efficient, as they may involve scanning large portions of the table.</p></li></ul><p>Understanding and optimizing these join types is key to improving query performance in MySQL.</p><h2 id="Redis">Redis</h2><p>Redisï¼ˆRemote Dictionary Server )ï¼Œå³è¿œç¨‹å­—å…¸æœåŠ¡ã€‚Cè¯­è¨€å¼€å‘çš„ä¸€ä¸ªå¼€æºçš„ï¼ˆéµä»BSDåè®®ï¼‰é«˜æ€§èƒ½é”®å€¼å¯¹ï¼ˆkey-valueï¼‰çš„å†…å­˜æ•°æ®åº“ï¼Œå¯ä»¥ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜ã€æ¶ˆæ¯ä¸­é—´ä»¶ç­‰ã€‚å®ƒæ˜¯ä¸€ç§NoSQLï¼ˆnot-only sqlï¼Œæ³›æŒ‡<a href="https://www.zhihu.com/search?q=%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A%22118561398%22%7D">éå…³ç³»å‹æ•°æ®åº“</a>ï¼‰çš„æ•°æ®åº“ã€‚</p><p>Redisçš„åŸºæœ¬æ¦‚å¿µå’Œç”¨æ³•ï¼š</p><ol><li><strong>é«˜æ€§èƒ½</strong>ï¼šRediså®Œå…¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè¿™ä½¿å¾—å®ƒèƒ½å¤Ÿä»¥éå¸¸é«˜çš„é€Ÿåº¦æ‰§è¡Œè¯»å†™æ“ä½œã€‚</li><li><strong>å¤šç§æ•°æ®ç»“æ„</strong>ï¼šé™¤äº†é”®å€¼å¯¹ï¼ŒRedisè¿˜æ”¯æŒå­—ç¬¦ä¸²ã€å“ˆå¸Œè¡¨ã€åˆ—è¡¨ã€é›†åˆã€æœ‰åºé›†åˆç­‰å¤šç§æ•°æ®ç»“æ„ï¼Œå…è®¸æ›´çµæ´»çš„æ•°æ®æ“ä½œã€‚</li><li><strong>æŒä¹…åŒ–</strong>ï¼šRedisæ”¯æŒå°†æ•°æ®æŒä¹…åŒ–åˆ°ç¡¬ç›˜ï¼Œä»¥ä¾¿åœ¨é‡å¯åæ¢å¤æ•°æ®ã€‚å®ƒæä¾›äº†ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼šå¿«ç…§ï¼ˆSnapshottingï¼‰å’ŒAOFï¼ˆAppend-Only Fileï¼‰ã€‚</li><li><strong>å‘å¸ƒ/è®¢é˜…</strong>ï¼šRedisæä¾›äº†å‘å¸ƒï¼ˆpublishï¼‰å’Œè®¢é˜…ï¼ˆsubscribeï¼‰çš„åŠŸèƒ½ï¼Œå…è®¸ä¸åŒéƒ¨åˆ†ä¹‹é—´é€šè¿‡æ¶ˆæ¯è¿›è¡Œé€šä¿¡ã€‚</li><li><strong>äº‹åŠ¡</strong>ï¼šRedis äº‹åŠ¡çš„æœ¬è´¨æ˜¯ä¸€ç»„å‘½ä»¤çš„é›†åˆã€‚äº‹åŠ¡æ”¯æŒä¸€æ¬¡æ‰§è¡Œå¤šä¸ªå‘½ä»¤ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­æ‰€æœ‰å‘½ä»¤éƒ½ä¼šè¢«åºåˆ—åŒ–ï¼Œ<strong>Redis åœ¨äº‹åŠ¡å¤±è´¥æ—¶ä¸è¿›è¡Œå›æ»šï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œä½™ä¸‹çš„å‘½ä»¤ã€‚Rediså®˜æ–¹è®¤ä¸ºäº‹åŠ¡æ˜¯åŸå­æ€§çš„ï¼šæ‰€æœ‰çš„å‘½ä»¤ï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼ˆä½†ä¸ä¸€å®šæˆåŠŸï¼‰ï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚</strong></li><li><strong>ç¼“å­˜</strong>ï¼šRediså¸¸ç”¨äºä½œä¸ºç¼“å­˜å±‚ï¼Œå°†é¢‘ç¹è®¿é—®çš„æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œä»¥æé«˜è¯»å–æ€§èƒ½ã€‚</li><li><strong>è®¡æ•°å™¨å’Œæ’è¡Œæ¦œ</strong>ï¼šRedisé€‚ç”¨äºè®¡æ•°å™¨å’Œæ’è¡Œæ¦œç­‰éœ€è¦å¿«é€Ÿå¤„ç†å¢å‡æ“ä½œçš„åœºæ™¯ã€‚</li><li><strong>åˆ†å¸ƒå¼é”</strong>ï¼šRediså¯ä»¥ç”¨æ¥å®ç°åˆ†å¸ƒå¼é”ï¼Œä»¥ç¡®ä¿åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šçš„æ“ä½œä¸ä¼šäº’ç›¸å¹²æ‰°ã€‚</li><li><strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼šä½¿ç”¨Redisçš„åˆ—è¡¨æ•°æ®ç»“æ„ï¼Œå¯ä»¥å®ç°ç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨äºå¼‚æ­¥å¤„ç†ä»»åŠ¡ã€‚</li></ol><p><strong>Redisè¿™ä¹ˆå¿«ï¼Ÿ</strong></p><blockquote><p>ç¬¬ä¸€ï¼šRediså®Œå…¨åŸºäºå†…å­˜ï¼Œç»å¤§éƒ¨åˆ†è¯·æ±‚æ˜¯çº¯ç²¹çš„å†…å­˜æ“ä½œï¼Œéå¸¸è¿…é€Ÿï¼Œæ•°æ®å­˜åœ¨å†…å­˜ä¸­ï¼Œç±»ä¼¼äºHashMapï¼ŒHashMapçš„ä¼˜åŠ¿å°±æ˜¯æŸ¥æ‰¾å’Œæ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ã€‚ç¬¬äºŒï¼šæ•°æ®ç»“æ„ç®€å•ï¼Œå¯¹æ•°æ®æ“ä½œä¹Ÿç®€å•ã€‚ç¬¬ä¸‰ï¼šé‡‡ç”¨å•çº¿ç¨‹ï¼Œé¿å…äº†ä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œç«äº‰æ¡ä»¶ï¼Œä¸å­˜åœ¨å¤šçº¿ç¨‹å¯¼è‡´çš„CPUåˆ‡æ¢ï¼Œä¸ç”¨å»è€ƒè™‘å„ç§é”çš„é—®é¢˜ï¼Œä¸å­˜åœ¨åŠ é”é‡Šæ”¾é”æ“ä½œï¼Œæ²¡æœ‰æ­»é”é—®é¢˜å¯¼è‡´çš„æ€§èƒ½æ¶ˆè€—ã€‚è™½ç„¶ Redis çš„ä¸»è¦å·¥ä½œï¼ˆç½‘ç»œ I/O å’Œæ‰§è¡Œå‘½ä»¤ï¼‰ä¸€ç›´æ˜¯å•çº¿ç¨‹æ¨¡å‹ï¼Œä½†æ˜¯<strong>åœ¨ Redis 6.0 ç‰ˆæœ¬ä¹‹åï¼Œä¹Ÿé‡‡ç”¨äº†å¤šä¸ª I/O çº¿ç¨‹æ¥å¤„ç†ç½‘ç»œè¯·æ±‚</strong>ï¼Œ<strong>è¿™æ˜¯å› ä¸ºéšç€ç½‘ç»œç¡¬ä»¶çš„æ€§èƒ½æå‡ï¼ŒRedis çš„æ€§èƒ½ç“¶é¢ˆæœ‰æ—¶ä¼šå‡ºç°åœ¨ç½‘ç»œ I/O çš„å¤„ç†ä¸Š</strong>ã€‚</p></blockquote><p>ç¬¬å››ï¼šä½¿ç”¨å¤šè·¯å¤ç”¨IOæ¨¡å‹ï¼Œéé˜»å¡IOã€‚</p><p>Stringã€Hashã€Listã€Setã€SortedSetã€‚</p><ol><li><strong>Hashes:</strong> Hashes are maps between string fields and string values. They are useful for representing objects with multiple fields, such as user profiles.</li><li><strong>String</strong> data up to 512 MB ã€‚Stringç±»å‹æ˜¯<strong>äºŒè¿›åˆ¶å®‰å…¨</strong>çš„(å…¶æœ¬è´¨æ˜¯å°†æ“ä½œè¾“å…¥ä½œä¸ºåŸå§‹çš„ã€æ— ä»»ä½•ç‰¹æ®Šå­—ç¬¦æ„ä¹‰çš„æ•°æ®æµ)ï¼Œæ„æ€æ˜¯ redis çš„ string å¯ä»¥åŒ…å«ä»»ä½•æ•°æ®ã€‚å¦‚æ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œjpgå›¾ç‰‡æˆ–è€…åºåˆ—åŒ–çš„å¯¹è±¡ã€‚</li><li><strong>Lists:</strong> åŒå‘é“¾è¡¨å®ç°Lists are ordered collections of strings. You can add elements to the head (left) or tail (right) of a list. Lists can be used for task queues, message queues, and more.</li><li><strong>Sets:</strong> Sets are unordered collections of unique strings. They are used for storing unique values. You can perform set operations like union, intersection, and difference.</li><li><strong>Sorted Sets (ZSETs):</strong> Similar to sets, but each member has a score associated with it. Sorted sets are used for tasks that require ordering by score, such as leaderboards.</li><li><strong>Bitmaps:</strong> Bitmaps are used for bit-level operations. They are often used to represent sets with a large number of unique items in a very memory-efficient way.</li></ol><ul><li>Redis çš„å­—ç¬¦ä¸²è¡¨ç¤ºä¸ºÂ <code>sds(simple dynamic string)</code>Â ï¼Œè€Œä¸æ˜¯ C å­—ç¬¦ä¸²ï¼ˆä»¥Â <code>\0</code>Â ç»“å°¾çš„Â <code>char*</code>ï¼‰ã€‚</li><li>å¯¹æ¯” C å­—ç¬¦ä¸²ï¼ŒÂ <code>sds</code>Â æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š<ul><li>å¯ä»¥é«˜æ•ˆåœ°æ‰§è¡Œé•¿åº¦è®¡ç®—ï¼ˆ<code>strlen</code>ï¼‰ï¼›</li><li>å¯ä»¥é«˜æ•ˆåœ°æ‰§è¡Œè¿½åŠ æ“ä½œï¼ˆ<code>append</code>ï¼‰ï¼›</li><li>äºŒè¿›åˆ¶å®‰å…¨ï¼›</li></ul></li><li><code>sds</code>Â ä¼šä¸ºè¿½åŠ æ“ä½œè¿›è¡Œä¼˜åŒ–ï¼šåŠ å¿«è¿½åŠ æ“ä½œçš„é€Ÿåº¦ï¼Œå¹¶é™ä½å†…å­˜åˆ†é…çš„æ¬¡æ•°ï¼Œä»£ä»·æ˜¯å¤šå ç”¨äº†ä¸€äº›å†…å­˜ï¼Œè€Œä¸”è¿™äº›å†…å­˜ä¸ä¼šè¢«ä¸»åŠ¨é‡Šæ”¾ã€‚</li></ul><p>struct sdshdr{<br>int len;//bufæ•°ç»„ä¸­å·²ç»ä½¿ç”¨çš„å­—èŠ‚çš„æ•°é‡ï¼Œä¹Ÿå°±æ˜¯SDSå­—ç¬¦ä¸²é•¿åº¦<br>int  free;//bufæ•°ç»„ä¸­æœªä½¿ç”¨çš„å­—èŠ‚çš„æ•°é‡<br>char buf[];//å­—èŠ‚æ•°ç»„ï¼Œå­—ç¬¦ä¸²å°±ä¿å­˜åœ¨è¿™é‡Œé¢<br>};</p><p>Rediséœ€è¦å¯¹æ•°æ®è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå¹¶é‡‡ç”¨çš„æ˜¯æƒ°æ€§åˆ é™¤+å®šæœŸåˆ é™¤ä¸¤ç§ç­–ç•¥å¯¹è¿‡æœŸé”®åˆ é™¤ã€‚<a href="https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&amp;mid=2247484386&amp;idx=1&amp;sn=323ddc84dc851a975530090fcd6e2326&amp;chksm=ebd742e3dca0cbf52bc65d430447e639d81cc13e0ac34613edf464dae3950b10e2e1df74dcc5&amp;token=1834317504&amp;lang=zh_CN&amp;scene=21#wechat_redirect">Rediså¯¹è¿‡æœŸé”®çš„ç­–ç•¥+æŒä¹…åŒ–</a></p><ol><li><strong>æ•°æ®è¿‡æœŸæ¸…é™¤ç­–ç•¥</strong>ï¼š<ol><li>å®šæœŸåˆ é™¤ï¼šRedisä¼šå®šæœŸï¼ˆé»˜è®¤æ¯éš”100msï¼‰éšæœºæŠ½å–ä¸€äº›è®¾ç½®äº†è¿‡æœŸæ—¶é—´TTL çš„é”®ï¼Œæ£€æŸ¥å…¶æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœæœ‰è¿‡æœŸçš„é”®å°±åˆ é™¤ã€‚è¿™ä¸ªç­–ç•¥ç¡®å®æ˜¯ä¸ºäº†é¿å…å…¨å±€æ‰«æè€Œå¼•å…¥çš„ï¼Œä»¥å‡å°‘CPUè´Ÿè½½ã€‚</li><li>æƒ°æ€§åˆ é™¤ï¼šå½“ä½ å°è¯•è®¿é—®æŸä¸ªé”®æ—¶ï¼ŒRedisä¼šæ£€æŸ¥è¯¥é”®æ˜¯å¦å·²è¿‡æœŸï¼Œå¦‚æœå·²è¿‡æœŸï¼Œåˆ™åˆ é™¤å®ƒã€‚è¿™ä¸ªç­–ç•¥ç¡®ä¿åœ¨è·å–é”®çš„æ—¶å€™å¤„ç†è¿‡æœŸæ•°æ®ï¼Œç§°ä¸º"æƒ°æ€§"ï¼Œå› ä¸ºå®ƒä¸ä¸»åŠ¨æ‰«æé”®ã€‚</li></ol></li><li>å†…å­˜æ·˜æ±°ç­–ç•¥ï¼š<ul><li>Redisæ˜¯ä¸€ä¸ªå†…å­˜æ•°æ®åº“ï¼Œå½“å†…å­˜ç”¨å°½æ—¶ï¼Œéœ€è¦æ ¹æ®ä¸€å®šçš„ç­–ç•¥æ¥é‡Šæ”¾ä¸€äº›é”®ä»¥è…¾å‡ºå†…å­˜ç©ºé—´ã€‚è¿™ä¸ªç­–ç•¥ç§°ä¸ºå†…å­˜æ·˜æ±°ç­–ç•¥ï¼ˆMemory Eviction Policyï¼‰ã€‚</li><li>Redisæä¾›äº†ä¸åŒçš„å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Œå¸¸è§çš„ç­–ç•¥åŒ…æ‹¬ï¼š<ul><li>LRUï¼ˆLeast Recently Usedï¼‰ï¼šåˆ é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é”®ã€‚</li><li>LFUï¼ˆLeast Frequently Usedï¼‰ï¼šåˆ é™¤æœ€ä¸é¢‘ç¹ä½¿ç”¨çš„é”®ã€‚</li><li>Randomï¼ˆéšæœºæ·˜æ±°ï¼‰ï¼šéšæœºé€‰æ‹©ä¸€ä¸ªé”®è¿›è¡Œåˆ é™¤ã€‚</li><li>TTLï¼ˆTime To Liveï¼‰ï¼šæ ¹æ®é”®çš„TTLæ¥åˆ é™¤è¿‡æœŸçš„é”®ã€‚</li></ul></li><li>ä½ å¯ä»¥æ ¹æ®éœ€è¦åœ¨Redisé…ç½®æ–‡ä»¶ä¸­é€‰æ‹©é€‚åˆä½ çš„å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Œé»˜è®¤ä½¿ç”¨LRUç­–ç•¥ã€‚</li></ul></li></ol><p>å¦‚æœç¼“å­˜æ•°æ®<strong>è®¾ç½®çš„è¿‡æœŸæ—¶é—´æ˜¯ç›¸åŒ</strong>çš„ï¼Œå¹¶ä¸”Redisæ°å¥½å°†è¿™éƒ¨åˆ†æ•°æ®å…¨éƒ¨åˆ å…‰äº†ã€‚è¿™å°±ä¼šå¯¼è‡´åœ¨è¿™æ®µæ—¶é—´å†…ï¼Œè¿™äº›ç¼“å­˜<strong>åŒæ—¶å¤±æ•ˆ</strong>ï¼Œå…¨éƒ¨è¯·æ±‚åˆ°æ•°æ®åº“ä¸­ã€‚</p><p>è·³è¡¨æ˜¯<strong>å¯ä»¥å®ç°äºŒåˆ†æŸ¥æ‰¾çš„æœ‰åºé“¾è¡¨</strong>ã€‚</p><ul><li>Multiå¼€å§‹äº‹åŠ¡ã€‚</li><li>å‘½ä»¤å…¥é˜Ÿã€‚</li><li>Execæ‰§è¡Œäº‹åŠ¡ã€‚</li></ul><p><strong>æŒä¹…åŒ–</strong></p><p>Reids æ˜¯å…ˆæ‰§è¡Œå†™æ“ä½œå‘½ä»¤åï¼Œæ‰å°†è¯¥å‘½ä»¤è®°å½•åˆ° AOF æ—¥å¿—é‡Œçš„ï¼Œè¿™ä¹ˆåšå…¶å®æœ‰ä¸¤ä¸ªå¥½å¤„ã€‚</p><ul><li><strong>é¿å…é¢å¤–çš„æ£€æŸ¥å¼€é”€</strong>ï¼šå› ä¸ºå¦‚æœå…ˆå°†å†™æ“ä½œå‘½ä»¤è®°å½•åˆ° AOF æ—¥å¿—é‡Œï¼Œå†æ‰§è¡Œè¯¥å‘½ä»¤çš„è¯ï¼Œå¦‚æœå½“å‰çš„å‘½ä»¤è¯­æ³•æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆå¦‚æœä¸è¿›è¡Œå‘½ä»¤è¯­æ³•æ£€æŸ¥ï¼Œè¯¥é”™è¯¯çš„å‘½ä»¤è®°å½•åˆ° AOF æ—¥å¿—é‡Œåï¼ŒRedis åœ¨ä½¿ç”¨æ—¥å¿—æ¢å¤æ•°æ®æ—¶ï¼Œå°±å¯èƒ½ä¼šå‡ºé”™ã€‚</li><li><strong>ä¸ä¼šé˜»å¡å½“å‰å†™æ“ä½œå‘½ä»¤çš„æ‰§è¡Œ</strong>ï¼šå› ä¸ºå½“å†™æ“ä½œå‘½ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œæ‰ä¼šå°†å‘½ä»¤è®°å½•åˆ° AOF æ—¥å¿—ã€‚</li></ul><p><strong>RDB å¿«ç…§</strong>ï¼šå°†æŸä¸€æ—¶åˆ»çš„å†…å­˜æ•°æ®ï¼Œä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å†™å…¥ç£ç›˜</p><p>æ‰€ä»¥ï¼ŒRDB å¿«ç…§å°±æ˜¯è®°å½•æŸä¸€ä¸ªç¬é—´çš„å†…å­˜æ•°æ®ï¼Œè®°å½•çš„æ˜¯å®é™…æ•°æ®   å› æ­¤åœ¨ Redis æ¢å¤æ•°æ®æ—¶ï¼Œ RDB æ¢å¤æ•°æ®çš„æ•ˆç‡ä¼šæ¯” AOF é«˜äº›ï¼Œå› ä¸ºç›´æ¥å°† RDB æ–‡ä»¶è¯»å…¥å†…å­˜å°±å¯ä»¥ï¼Œä¸éœ€è¦åƒ AOF é‚£æ ·è¿˜éœ€è¦é¢å¤–æ‰§è¡Œæ“ä½œå‘½ä»¤çš„æ­¥éª¤æ‰èƒ½æ¢å¤æ•°æ®ã€‚</p><blockquote><p>RDB åšå¿«ç…§æ—¶ä¼šé˜»å¡çº¿ç¨‹å—ï¼Ÿ</p></blockquote><p>Redis æä¾›äº†ä¸¤ä¸ªå‘½ä»¤æ¥ç”Ÿæˆ RDB æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ save å’Œ bgsaveï¼Œä»–ä»¬çš„åŒºåˆ«å°±åœ¨äºæ˜¯å¦åœ¨ã€Œä¸»çº¿ç¨‹ã€é‡Œæ‰§è¡Œï¼š</p><ul><li>æ‰§è¡Œäº† save å‘½ä»¤ï¼Œå°±ä¼šåœ¨ä¸»çº¿ç¨‹ç”Ÿæˆ RDB æ–‡ä»¶ï¼Œç”±äºå’Œæ‰§è¡Œæ“ä½œå‘½ä»¤åœ¨åŒä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥å¦‚æœå†™å…¥ RDB æ–‡ä»¶çš„æ—¶é—´å¤ªé•¿ï¼Œ<strong>ä¼šé˜»å¡ä¸»çº¿ç¨‹</strong>ï¼›</li><li>æ‰§è¡Œäº† bgsave å‘½ä»¤ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹æ¥ç”Ÿæˆ RDB æ–‡ä»¶ï¼Œè¿™æ ·å¯ä»¥<strong>é¿å…ä¸»çº¿ç¨‹çš„é˜»å¡</strong>ï¼›</li></ul><p>Redis è¿˜å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶çš„é€‰é¡¹æ¥å®ç°æ¯éš”ä¸€æ®µæ—¶é—´è‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ bgsave å‘½ä»¤ï¼Œé»˜è®¤ä¼šæä¾›ä»¥ä¸‹é…ç½®ï¼š</p><p><code>save 900 1 save 300 10 save 60 10000</code></p><p>åˆ«çœ‹é€‰é¡¹åå« saveï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯ bgsave å‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯ä¼šåˆ›å»ºå­è¿›ç¨‹æ¥ç”Ÿæˆ RDB å¿«ç…§æ–‡ä»¶ã€‚ åªè¦æ»¡è¶³ä¸Šé¢æ¡ä»¶çš„ä»»æ„ä¸€ä¸ªï¼Œå°±ä¼šæ‰§è¡Œ bgsaveï¼Œå®ƒä»¬çš„æ„æ€åˆ†åˆ«æ˜¯ï¼š</p><ul><li>900 ç§’ä¹‹å†…ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œäº†è‡³å°‘ 1 æ¬¡ä¿®æ”¹ï¼›</li><li>300 ç§’ä¹‹å†…ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œäº†è‡³å°‘ 10 æ¬¡ä¿®æ”¹ï¼›</li><li>60 ç§’ä¹‹å†…ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œäº†è‡³å°‘ 10000 æ¬¡ä¿®æ”¹ã€‚</li></ul><p>è¿™é‡Œæä¸€ç‚¹ï¼ŒRedis çš„å¿«ç…§æ˜¯<strong>å…¨é‡å¿«ç…§</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡æ‰§è¡Œå¿«ç…§ï¼Œéƒ½æ˜¯æŠŠå†…å­˜ä¸­çš„ã€Œæ‰€æœ‰æ•°æ®ã€éƒ½è®°å½•åˆ°ç£ç›˜ä¸­ã€‚æ‰€ä»¥æ‰§è¡Œå¿«ç…§æ˜¯ä¸€ä¸ªæ¯”è¾ƒé‡çš„æ“ä½œï¼Œå¦‚æœé¢‘ç‡å¤ªé¢‘ç¹ï¼Œå¯èƒ½ä¼šå¯¹ Redis æ€§èƒ½äº§ç”Ÿå½±å“ã€‚å¦‚æœé¢‘ç‡å¤ªä½ï¼ŒæœåŠ¡å™¨æ•…éšœæ—¶ï¼Œä¸¢å¤±çš„æ•°æ®ä¼šæ›´å¤šã€‚</p><p><strong>AOF æ˜¯ä¸€ç§æŒä¹…åŒ–æ–¹å¼ï¼Œå®ƒé€šè¿‡å°† Redis æ‰€æœ‰çš„å†™æ“ä½œï¼ˆåŒ…æ‹¬å†™å‘½ä»¤ï¼‰ä»¥è¿½åŠ ï¼ˆappendï¼‰çš„æ–¹å¼è®°å½•åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚AOF æ–‡ä»¶åŒ…å«äº†å¯ä»¥é‡æ”¾ï¼ˆreplayï¼‰é‡å»ºæ•°æ®é›†çš„å†™å‘½ä»¤åºåˆ—ï¼Œå› æ­¤ï¼Œå®ƒè®°å½•äº†æ•°æ®åº“çŠ¶æ€çš„å®Œæ•´å˜æ›´å†å²ã€‚</strong></p><p>ç¼ºç‚¹ï¼š</p><p><strong>æ–‡ä»¶è¾ƒå¤§</strong>ï¼šç”±äºè®°å½•äº†æ‰€æœ‰å†™æ“ä½œï¼ŒAOF æ–‡ä»¶å¯èƒ½ä¼šæ¯” RDB æ–‡ä»¶æ›´å¤§ã€‚</p><p><strong>æ¢å¤é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢</strong>ï¼šåœ¨æ¢å¤æ—¶ï¼Œå¯èƒ½ä¼šå› ä¸ºéœ€è¦é‡æ–°æ‰§è¡Œå¤§é‡å†™æ“ä½œè€Œå¯¼è‡´æ¢å¤é€Ÿåº¦è¾ƒæ…¢ã€‚</p><h3 id="ç¼“å­˜">ç¼“å­˜</h3><p><strong>ç¼“å­˜é›ªå´© Cache avalanche</strong></p><ul><li>RedisæŒ‚æ‰äº†ï¼Œè¯·æ±‚å…¨éƒ¨èµ°æ•°æ®åº“ã€‚</li><li>å¯¹ç¼“å­˜æ•°æ®è®¾ç½®ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œå¯¼è‡´æŸæ®µæ—¶é—´å†…ç¼“å­˜å¤±æ•ˆï¼Œè¯·æ±‚å…¨éƒ¨èµ°æ•°æ®åº“ã€‚</li></ul><p>ç¼“å­˜é›ªå´©å¦‚æœå‘ç”Ÿäº†ï¼Œå¾ˆå¯èƒ½å°±æŠŠæˆ‘ä»¬çš„æ•°æ®åº“<strong>æå®</strong>ï¼Œå¯¼è‡´æ•´ä¸ªæœåŠ¡ç˜«ç—ªï¼</p><p><strong>å¦‚ä½•è§£å†³ç¼“å­˜é›ªå´©ï¼Ÿ</strong></p><ul><li>è§£å†³æ–¹æ³•ï¼šè€ƒè™‘ç”¨<strong>åŠ é”æˆ–è€…é˜Ÿåˆ—</strong>çš„æ–¹å¼ä¿è¯æ¥ä¿è¯ä¸ä¼šæœ‰å¤§é‡çš„çº¿ç¨‹å¯¹æ•°æ®åº“ä¸€æ¬¡æ€§è¿›è¡Œè¯»å†™ï¼Œä»è€Œé¿å…å¤±æ•ˆæ—¶å¤§é‡çš„å¹¶å‘è¯·æ±‚è½åˆ°åº•å±‚å­˜å‚¨ç³»ç»Ÿä¸Šï¼›è¿˜æœ‰ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼ŒåŸæœ‰çš„å¤±æ•ˆæ—¶é—´åŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªéšæœºå€¼ï¼Œè¿™æ ·å°±ä¼šå¤§å¹…åº¦çš„<strong>å‡å°‘ç¼“å­˜åœ¨åŒä¸€æ—¶é—´è¿‡æœŸ</strong>ã€‚</li></ul><p>å¯¹äºâ€œRedisæŒ‚æ‰äº†ï¼Œè¯·æ±‚å…¨éƒ¨èµ°æ•°æ®åº“â€è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ä»¥ä¸‹çš„æ€è·¯ï¼š</p><ul><li>äº‹å‘å‰ï¼šå®ç°Redisçš„<strong>é«˜å¯ç”¨</strong>(ä¸»ä»æ¶æ„+Sentinel æˆ–è€…Redis Cluster)ï¼Œå°½é‡é¿å…RedisæŒ‚æ‰è¿™ç§æƒ…å†µå‘ç”Ÿã€‚</li><li>äº‹å‘ä¸­ï¼šä¸‡ä¸€RedisçœŸçš„æŒ‚äº†ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®<strong>æœ¬åœ°ç¼“å­˜(ehcache)+é™æµ(hystrix)</strong>ï¼Œå°½é‡é¿å…æˆ‘ä»¬çš„æ•°æ®åº“è¢«å¹²æ‰(èµ·ç èƒ½ä¿è¯æˆ‘ä»¬çš„æœåŠ¡è¿˜æ˜¯èƒ½æ­£å¸¸å·¥ä½œçš„)</li><li>äº‹å‘åï¼šredisæŒä¹…åŒ–ï¼Œé‡å¯åè‡ªåŠ¨ä»ç£ç›˜ä¸ŠåŠ è½½æ•°æ®ï¼Œ<strong>å¿«é€Ÿæ¢å¤ç¼“å­˜æ•°æ®</strong>ã€‚</li></ul><p><strong>ç¼“å­˜å‡»ç©¿   Hotspot data set is invalid</strong></p><p>However, for some hot data with very high requests, once the valid time has passed, there will be a large number of requests falling on the database at this moment, which may cause the database to crash.</p><p>åº”å¯¹ç¼“å­˜å‡»ç©¿å¯ä»¥é‡‡å–å‰é¢è¯´åˆ°ä¸¤ç§æ–¹æ¡ˆï¼š</p><ul><li>äº’æ–¥é”æ–¹æ¡ˆï¼Œ<strong>ä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªä¸šåŠ¡çº¿ç¨‹æ›´æ–°ç¼“å­˜</strong>ï¼Œæœªèƒ½è·å–äº’æ–¥é”çš„è¯·æ±‚ï¼Œè¦ä¹ˆç­‰å¾…é”é‡Šæ”¾åé‡æ–°è¯»å–ç¼“å­˜ï¼Œè¦ä¹ˆå°±è¿”å›ç©ºå€¼æˆ–è€…é»˜è®¤å€¼ã€‚</li><li><strong>ä¸ç»™çƒ­ç‚¹æ•°æ®è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œç”±åå°å¼‚æ­¥æ›´æ–°ç¼“å­˜ï¼Œæˆ–è€…åœ¨çƒ­ç‚¹æ•°æ®å‡†å¤‡è¦è¿‡æœŸå‰ï¼Œæå‰é€šçŸ¥åå°çº¿ç¨‹æ›´æ–°ç¼“å­˜ä»¥åŠé‡æ–°è®¾ç½®è¿‡æœŸæ—¶é—´ï¼›</strong></li></ul><p><strong>ç¼“å­˜ç©¿é€</strong></p><p>æ˜¯æŒ‡æŸ¥è¯¢ä¸€ä¸ªä¸€å®š<strong>ä¸å­˜åœ¨çš„æ•°æ®</strong>ã€‚ç”±äºç¼“å­˜ä¸å‘½ä¸­ï¼Œå¹¶ä¸”å‡ºäºå®¹é”™è€ƒè™‘ï¼Œå¦‚æœä»<strong>æ•°æ®åº“æŸ¥ä¸åˆ°æ•°æ®åˆ™ä¸å†™å…¥ç¼“å­˜</strong>ï¼Œè¿™å°†å¯¼è‡´è¿™ä¸ªä¸å­˜åœ¨çš„æ•°æ®<strong>æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ°æ•°æ®åº“å»æŸ¥è¯¢</strong>ï¼Œå¤±å»äº†ç¼“å­˜çš„æ„ä¹‰ã€‚</p><p>ç¼“å­˜ç©¿é€ä¹Ÿæœ‰ä¸¤ç§æ–¹æ¡ˆï¼š</p><ul><li>ç”±äºè¯·æ±‚çš„å‚æ•°æ˜¯ä¸åˆæ³•çš„(æ¯æ¬¡éƒ½è¯·æ±‚ä¸å­˜åœ¨çš„å‚æ•°)ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨(BloomFilter)æˆ–è€…å‹ç¼©filter<strong>æå‰æ‹¦æˆª</strong>ï¼Œä¸åˆæ³•å°±ä¸è®©è¿™ä¸ªè¯·æ±‚åˆ°æ•°æ®åº“å±‚ï¼</li><li>å½“æˆ‘ä»¬ä»æ•°æ®åº“æ‰¾ä¸åˆ°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿå°†è¿™ä¸ª<strong>ç©ºå¯¹è±¡è®¾ç½®åˆ°ç¼“å­˜é‡Œè¾¹å»</strong>ã€‚ä¸‹æ¬¡å†è¯·æ±‚çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä»ç¼“å­˜é‡Œè¾¹è·å–äº†ã€‚</li><li>è¿™ç§æƒ…å†µæˆ‘ä»¬ä¸€èˆ¬ä¼šå°†ç©ºå¯¹è±¡è®¾ç½®ä¸€ä¸ª<strong>è¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´</strong>ã€‚</li></ul><p>å¯ä»¥å‘ç°ç¼“å­˜å‡»ç©¿è·Ÿç¼“å­˜é›ªå´©å¾ˆç›¸ä¼¼ï¼Œå¦‚æœç¼“å­˜ä¸­çš„<strong>æŸä¸ªçƒ­ç‚¹æ•°æ®è¿‡æœŸ</strong>äº†ï¼Œæ­¤æ—¶å¤§é‡çš„è¯·æ±‚ç›´æ¥è®¿é—®æ•°æ®åº“å°±æ˜¯</p><p><strong>ç¼“å­˜ä¸æ•°æ®åº“åŒå†™ä¸€è‡´</strong></p><p>åªè¦æˆ‘ä»¬è®¾ç½®äº†<strong>é”®çš„è¿‡æœŸæ—¶é—´</strong>ï¼Œæˆ‘ä»¬å°±èƒ½ä¿è¯ç¼“å­˜å’Œæ•°æ®åº“çš„æ•°æ®<strong>æœ€ç»ˆæ˜¯ä¸€è‡´</strong>çš„ã€‚å› ä¸ºåªè¦ç¼“å­˜æ•°æ®è¿‡æœŸäº†ï¼Œå°±ä¼šè¢«åˆ é™¤ã€‚éšåè¯»çš„æ—¶å€™ï¼Œå› ä¸ºç¼“å­˜é‡Œæ²¡æœ‰ï¼Œå°±å¯ä»¥æŸ¥æ•°æ®åº“çš„æ•°æ®ï¼Œç„¶åå°†æ•°æ®åº“æŸ¥å‡ºæ¥çš„æ•°æ®å†™å…¥åˆ°ç¼“å­˜ä¸­ã€‚</p><p>é™¤äº†è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšæ›´å¤šçš„æªæ–½æ¥<strong>å°½é‡é¿å…</strong>æ•°æ®åº“ä¸ç¼“å­˜å¤„äºä¸ä¸€è‡´çš„æƒ…å†µå‘ç”Ÿã€‚åˆ†å¸ƒå¼ç¯å¢ƒä¸‹éå¸¸å®¹æ˜“å‡ºç°ç¼“å­˜å’Œæ•°æ®åº“é—´æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œé’ˆå¯¹è¿™ä¸€ç‚¹ï¼Œå¦‚æœé¡¹ç›®å¯¹ç¼“å­˜çš„è¦æ±‚æ˜¯å¼ºä¸€è‡´æ€§çš„ï¼Œé‚£ä¹ˆå°±ä¸è¦ä½¿ç”¨ç¼“å­˜ã€‚æˆ‘ä»¬åªèƒ½é‡‡å–åˆé€‚çš„ç­–ç•¥æ¥é™ä½ç¼“å­˜å’Œæ•°æ®åº“é—´æ•°æ®ä¸ä¸€è‡´çš„æ¦‚ç‡ï¼Œè€Œæ— æ³•ä¿è¯ä¸¤è€…é—´çš„å¼ºä¸€è‡´æ€§ã€‚åˆé€‚çš„ç­–ç•¥åŒ…æ‹¬åˆé€‚çš„<strong>ç¼“å­˜æ›´æ–°ç­–ç•¥</strong>ï¼Œæ›´æ–°æ•°æ®åº“å<strong>åŠæ—¶æ›´æ–°ç¼“å­˜ã€ç¼“å­˜å¤±è´¥æ—¶å¢åŠ é‡è¯•æœºåˆ¶ã€‚</strong></p><p>ä¸¤ç§ç­–ç•¥å„è‡ªæœ‰ä¼˜ç¼ºç‚¹ï¼š</p><ul><li>å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“</li><li>åœ¨é«˜å¹¶å‘ä¸‹è¡¨ç°ä¸å¦‚æ„ï¼Œåœ¨åŸå­æ€§è¢«ç ´åæ—¶è¡¨ç°ä¼˜å¼‚</li><li>å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜(<code>Cache Aside Pattern</code>è®¾è®¡æ¨¡å¼)</li></ul><p><strong>ç¼“å­˜æ›´æ–°çš„ç­–ç•¥</strong></p><ul><li>Cache Asideï¼ˆæ—è·¯ç¼“å­˜ï¼‰ç­–ç•¥ï¼›</li><li>Read/Write Throughï¼ˆè¯»ç©¿ / å†™ç©¿ï¼‰ç­–ç•¥ï¼›</li><li>Write Backï¼ˆå†™å›ï¼‰ç­–ç•¥ï¼›</li></ul><p>ä¸»è¦åˆ†ä¸ºä¸¤ç±»Â <strong>Cache-Aside</strong>Â å’ŒÂ <strong>Cache-As-SoRã€‚</strong>Â SoR å³ã€ŒSystem Of Recordï¼Œè®°å½•ç³»ç»Ÿã€ï¼Œè¡¨ç¤ºæ•°æ®åº“ã€‚ å®é™…å¼€å‘ä¸­ï¼ŒRedis å’Œ MySQL çš„æ›´æ–°ç­–ç•¥ç”¨çš„æ˜¯ Cache Asideï¼Œå¦å¤–ä¸¤ç§ç­–ç•¥ä¸»è¦åº”ç”¨åœ¨è®¡ç®—æœºç³»ç»Ÿé‡Œ</p><ul><li><strong>Cache Aside ç­–ç•¥</strong>ï¼šåº”ç”¨ç¨‹åºç›´æ¥<strong>ä¸æ•°æ®åº“å’Œç¼“å­˜äº¤äº’</strong>ï¼Œå¹¶è´Ÿè´£ç»´æŠ¤ç¼“å­˜çš„ä¸€è‡´æ€§ã€‚è¿™ç§ç­–ç•¥ç®€å•æ˜“ç”¨ï¼Œä½†æ˜¯éœ€è¦ç»´æŠ¤ç¼“å­˜å’Œæ•°æ®åº“çš„ä¸€è‡´æ€§ï¼Œå¯èƒ½å‡ºç°ç¼“å­˜ç©¿é€æˆ–ç¼“å­˜é›ªå´©çš„é—®é¢˜ï¼Œä¸€èˆ¬é‡‡ç”¨<strong>å»¶è¿ŸåŒåˆ </strong>æ¥ä¿è¯æœ€ç»ˆä¸€è‡´æ€§</li></ul><blockquote><p>æŸ¥è¯¢ï¼šå…ˆæŸ¥è¯¢ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜ä¸­æ²¡æœ‰ï¼Œåˆ™æŸ¥è¯¢æ•°æ®åº“ï¼Œå¹¶å°†ç»“æœå†™å…¥ç¼“å­˜</p><p>æ›´æ–°ï¼šå…ˆæ›´æ–°æ•°æ®åº“ï¼Œç„¶ååˆ é™¤ç¼“å­˜æˆ–è€…æ›´æ–°ç¼“å­˜</p></blockquote><p>Cache-As-SoR **å¯ä»¥ç†è§£ä¸ºï¼Œåº”ç”¨è®¤ä¸ºåç«¯å°±æ˜¯ä¸€ä¸ªå•ä¸€çš„å­˜å‚¨ï¼Œè€Œå­˜å‚¨è‡ªå·±ç»´æŠ¤è‡ªå·±çš„Cacheã€‚**æ•°æ®åº“ç”±ç¼“å­˜ä»£ç†ï¼Œç¼“å­˜æœªå‘½ä¸­æ—¶ç”±ç¼“å­˜åŠ è½½æ•°æ®åº“æ•°æ®ç„¶ååº”ç”¨ä»ç¼“å­˜è¯»ï¼Œå†™æ•°æ®æ—¶æ›´æ–°å®Œç¼“å­˜ååŒæ­¥å†™æ•°æ®åº“ã€‚åº”ç”¨åªæ„ŸçŸ¥ç¼“å­˜è€Œä¸æ„ŸçŸ¥æ•°æ®åº“ã€‚</p><ul><li><strong>Read/Write Through ç­–ç•¥</strong>ï¼šåº”ç”¨ç¨‹åº<strong>åªå’Œç¼“å­˜äº¤äº’</strong>ï¼Œä½¿ç”¨ç¼“å­˜ä¸æ•°æ®åº“äº¤äº’.  better integrity and consistency, less performance</li></ul><blockquote><p>æŸ¥è¯¢ï¼šå…ˆæŸ¥è¯¢ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜ä¸­æ²¡æœ‰ï¼Œåˆ™ç¼“å­˜ä»æ•°æ®åº“ä¸­åŠ è½½æ•°æ®ï¼Œå¹¶å†™å…¥ç¼“å­˜</p><p>æ›´æ–°ï¼šå…ˆæ›´æ–°ç¼“å­˜ï¼Œå†ç”±ç¼“å­˜åŒæ­¥æ›´æ–°æ•°æ®åº“</p></blockquote><ul><li><strong>Write Behind ç­–ç•¥</strong>ï¼šåº”ç”¨ç¨‹åº<strong>åªå’Œç¼“å­˜äº¤äº’</strong>ã€‚å›å†™å¼ï¼Œæ•°æ®å†™å…¥ç¼“å­˜å³å¯è¿”å›ï¼Œç¼“å­˜å†…éƒ¨ä¼šå¼‚æ­¥çš„å»æ›´æ–°æ•°æ®æºï¼Œè¿™æ ·å¥½å¤„æ˜¯<strong>å†™æ“ä½œç‰¹åˆ«å¿«</strong>ï¼Œå› ä¸ºåªéœ€è¦æ›´æ–°ç¼“å­˜ã€‚å¹¶ä¸”ç¼“å­˜å†…éƒ¨å¯ä»¥åˆå¹¶å¯¹ç›¸åŒæ•°æ®é¡¹çš„å¤šæ¬¡æ›´æ–°ï¼Œä½†æ˜¯å¸¦æ¥çš„é—®é¢˜å°±æ˜¯<strong>æ•°æ®ä¸ä¸€è‡´</strong>ï¼Œå¯èƒ½å‘ç”Ÿå†™ä¸¢å¤±ã€‚</li><li><strong>Refresh-Ahead ç­–ç•¥</strong>ï¼šåº”ç”¨ç¨‹åº<strong>åªå’Œç¼“å­˜äº¤äº’</strong>ï¼Œç”±åå°æœåŠ¡ä¸æ•°æ®åº“äº¤äº’</li></ul><blockquote><p>æŸ¥è¯¢ï¼šåªæŸ¥è¯¢ç¼“å­˜</p><p>æ›´æ–°ï¼šç”±åå°æœåŠ¡<strong>è‡ªåŠ¨ä»æ•°æ®åº“ä¸­æŸ¥è¯¢æœ€æ–°çš„æ•°æ®</strong>ï¼Œå¹¶å°†æ•°æ®å†™å…¥ç¼“å­˜ä¸­ï¼Œ</p></blockquote><p><strong>æ€§èƒ½</strong></p><p><code>Cache Aside</code>Â çš„æ€§èƒ½è¾ƒé«˜ï¼Œå®ƒ<strong>åªåœ¨ç¼“å­˜æœªå‘½ä¸­</strong>æ—¶æ‰è®¿é—®æ•°æ®åº“</p><p><code>Read/Write Through</code>Â çš„æ€§èƒ½è¾ƒä½ï¼Œå®ƒåœ¨<strong>æ¯æ¬¡è¯»å†™æ—¶éƒ½éœ€è¦è®¿é—®æ•°æ®åº“</strong></p><p><code>Write Behind Caching</code>Â çš„æ€§èƒ½æœ€é«˜ï¼Œå®ƒ<strong>åªåœ¨ç¼“å­˜æœªå‘½ä¸­</strong>æ—¶æ‰è®¿é—®æ•°æ®åº“ï¼Œè€Œ<strong>å†™å…¥æ“ä½œæ˜¯å¼‚æ­¥çš„</strong></p><p><code>Refresh-Ahead</code>Â çš„æ€§èƒ½ä»‹äºÂ <code>Cache Aside</code>Â å’ŒÂ <code>Write Behind Caching</code>Â ä¹‹é—´ï¼Œå®ƒ<strong>åªåœ¨å³å°†è¿‡æœŸæ—¶</strong>æ‰è®¿é—®æ•°æ®åº“ï¼Œå¹¶ä¸”<strong>å†™å…¥æ“ä½œä¹Ÿæ˜¯å¼‚æ­¥çš„</strong></p><p><strong>æ•°æ®ä¸€è‡´æ€§</strong></p><p><code>Cache Aside</code>Â çš„æ•°æ®ä¸€è‡´æ€§è¾ƒä½ï¼Œå®ƒ<strong>åªåœ¨ç¼“å­˜æœªå‘½ä¸­æ—¶</strong>æ‰æ›´æ–°ç¼“å­˜ï¼Œè€Œå†™å…¥æ“ä½œåˆ™æ˜¯<strong>ç›´æ¥æ›´æ–°æ•°æ®åº“</strong>ï¼Œ<strong>å¹¶å°†ç¼“å­˜ä¸­çš„æ•°æ®åˆ é™¤æˆ–æ›´æ–°</strong></p><p><code>Read/Write Through</code>Â çš„æ•°æ®ä¸€è‡´æ€§æœ€é«˜ï¼Œå®ƒåœ¨<strong>æ¯æ¬¡è¯»å†™æ—¶éƒ½</strong>æ›´æ–°æ•°æ®åº“å’Œç¼“å­˜</p><p><code>Write Behind Caching</code>Â çš„æ•°æ®ä¸€è‡´æ€§æœ€ä½ï¼Œå®ƒ<strong>åªåœ¨ç¼“å­˜æœªå‘½ä¸­</strong>æ—¶æ‰æ›´æ–°ç¼“å­˜ï¼Œè€Œå†™å…¥æ“ä½œåˆ™æ˜¯å…ˆæ›´æ–°ç¼“å­˜ï¼Œå¹¶åœ¨<strong>å¼‚æ­¥æ›´æ–°æ•°æ®åº“</strong>ï¼Œæœ‰è¾ƒå¤§çš„å»¶è¿Ÿã€‚</p><p><code>Refresh-Ahead</code>Â çš„æ•°æ®ä¸€è‡´æ€§ä»‹äºÂ <code>Read/Write Through</code>Â å’ŒÂ <code>Cache Aside</code>Â ä¹‹é—´ï¼Œå®ƒä¿è¯äº†ç¼“å­˜ä¸­çš„æ•°æ®<strong>æ€»æ˜¯æœ€æ–°</strong>çš„ï¼Œä½†æ˜¯æœ‰ä¸€å®šçš„å»¶è¿Ÿ</p><p>Redis æŒä¹…åŒ–ç­–ç•¥ï¼Œå…¶å®å°±æ˜¯ä¸ºäº†å‡å°‘æœåŠ¡å®•æœºåæ•°æ®ä¸¢å¤±ï¼Œä»¥åŠå¿«é€Ÿæ¢å¤æ•°æ®ï¼Œä¹Ÿç®—æ˜¯æ”¯æŒé«˜å¯ç”¨çš„ä¸€ç§å®ç°ã€‚ é™¤æ­¤ä¹‹å¤–ï¼ŒRedis è¿˜æä¾›äº†å…¶å®ƒå‡ ç§æ–¹å¼æ¥ä¿è¯**ç³»ç»Ÿé«˜å¯ç”¨ï¼Œ**ä¸šåŠ¡ä¸­æœ€å¸¸ç”¨çš„è«è¿‡äºä¸»ä»åŒæ­¥ï¼ˆä¹Ÿç§°ä½œä¸»ä»å¤åˆ¶ï¼‰ã€Sentinel å“¨å…µæœºåˆ¶ä»¥åŠ Cluster é›†ç¾¤ã€‚</p><h3 id="ä¸»ä»å¤åˆ¶"><strong>ä¸»ä»å¤åˆ¶</strong></h3><p>Redis åŒæ—¶æ”¯æŒä¸»ä»å¤åˆ¶å’Œè¯»å†™åˆ†ç¦»ï¼šä¸€ä¸ª Redis å®ä¾‹ä½œä¸ºä¸»èŠ‚ç‚¹ Masterï¼Œè´Ÿè´£å†™æ“ä½œã€‚å…¶å®ƒå®ä¾‹ï¼ˆå¯èƒ½æœ‰ 1 æˆ–å¤šä¸ªï¼‰ä½œä¸ºä»èŠ‚ç‚¹ Slaveï¼Œè´Ÿè´£å¤åˆ¶ä¸»èŠ‚ç‚¹çš„æ•°æ®ã€‚</p><p>ä¸»èŠ‚ç‚¹ Master æ•°æ®æ›´æ–°ï¼šMaster è´Ÿè´£å¤„ç†æ‰€æœ‰çš„å†™æ“ä½œï¼ŒåŒ…æ‹¬å†™å…¥ã€æ›´æ–°å’Œåˆ é™¤ç­‰ã€‚ æ•°æ®åŒæ­¥ï¼šå†™æ“ä½œåœ¨ Master ä¸Šæ‰§è¡Œï¼Œç„¶å Master å°†å†™æ“ä½œçš„ç»“æœåŒæ­¥åˆ°æ‰€æœ‰ä»èŠ‚ç‚¹ Slave ä¸Šã€‚ ä»èŠ‚ç‚¹ Slave æ•°æ®è¯»å–ï¼šSlave è´Ÿè´£å¤„ç†è¯»æ“ä½œï¼Œä¾‹å¦‚è·å–æ•°æ®ã€æŸ¥è¯¢ç­‰ã€‚ æ•°æ®åŒæ­¥ï¼šSlave ä» Master å¤åˆ¶æ•°æ®ï¼Œå¹¶åœ¨æœ¬åœ°ä¿å­˜ä¸€ä»½ä¸ä¸»èŠ‚ç‚¹ç›¸åŒçš„æ•°æ®å‰¯æœ¬ã€‚</p><p>2.2 ä¸ºä»€ä¹ˆè¦è¯»å†™åˆ†ç¦» 1ï¼‰é˜²æ­¢å¹¶å‘2ï¼‰æ˜“äºæ‰©å±• æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå¤§éƒ¨åˆ†ä½¿ç”¨ Redis çš„ä¸šåŠ¡éƒ½æ˜¯è¯»å¤šå†™å°‘çš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸šåŠ¡é‡çš„è§„æ¨¡æ¥ç¡®å®šæŒ‚è½½å‡ ä¸ªä»èŠ‚ç‚¹ Slaveï¼Œå½“ç¼“å­˜æ•°æ®å¢å¤§æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ‰©å±•ä»èŠ‚ç‚¹çš„æ•°é‡ï¼Œå®ç°å¼¹æ€§æ‰©å±•ã€‚ åŒæ—¶ï¼Œè¯»å†™åˆ†ç¦»è¿˜å¯ä»¥å®ç°æ•°æ®å¤‡ä»½å’Œè´Ÿè½½å‡è¡¡ï¼Œä»è€Œæé«˜å¯é æ€§å’Œæ€§èƒ½ã€‚ 3ï¼‰é«˜å¯ç”¨ä¿éšœ ä¸ä»…å¦‚æ­¤ï¼ŒRedis è¿˜å¯ä»¥æ‰‹åŠ¨åˆ‡æ¢ä¸»ä»èŠ‚ç‚¹ï¼Œæ¥åšæ•…éšœéš”ç¦»å’Œæ¢å¤ã€‚</p><p><strong>ä¸»ä»å¤åˆ¶è¿‡ç¨‹</strong></p><ul><li>ä»æœåŠ¡å™¨è¿æ¥ä¸»æœåŠ¡å™¨ï¼Œå‘é€SYNCå‘½ä»¤ï¼›ä¸»æœåŠ¡å™¨æ¥æ”¶åˆ°SYNCå‘½ååï¼Œå¼€å§‹æ‰§è¡ŒBGSAVEå‘½ä»¤ç”ŸæˆRDBæ–‡ä»¶å¹¶ä½¿ç”¨ç¼“å†²åŒºè®°å½•æ­¤åæ‰§è¡Œçš„æ‰€æœ‰å†™å‘½ä»¤ï¼›ä¸»æœåŠ¡å™¨BGSAVEæ‰§è¡Œå®Œåï¼Œå‘æ‰€æœ‰ä»æœåŠ¡å™¨å‘é€å¿«ç…§æ–‡ä»¶ï¼Œå¹¶åœ¨å‘é€æœŸé—´ç»§ç»­è®°å½•è¢«æ‰§è¡Œçš„å†™å‘½ä»¤ï¼›ä»æœåŠ¡å™¨æ”¶åˆ°å¿«ç…§æ–‡ä»¶åä¸¢å¼ƒæ‰€æœ‰æ—§æ•°æ®ï¼Œè½½å…¥æ”¶åˆ°çš„å¿«ç…§ï¼›ä¸»æœåŠ¡å™¨å¿«ç…§å‘é€å®Œæ¯•åå¼€å§‹å‘ä»æœåŠ¡å™¨å‘é€ç¼“å†²åŒºä¸­çš„å†™å‘½ä»¤ï¼›ä»æœåŠ¡å™¨å®Œæˆå¯¹å¿«ç…§çš„è½½å…¥ï¼Œå¼€å§‹æ¥å—å‘½ä»¤è¯·æ±‚ï¼Œå¹¶æ‰§è¡Œæ¥è‡ªä¸»æœåŠ¡å™¨ç¼“å†²åŒºçš„å†™å‘½ä»¤ï¼›ï¼ˆä»æœåŠ¡å™¨åˆå§‹åŒ–å®Œæˆï¼‰ä¸»æœåŠ¡å™¨æ¯æ‰§è¡Œä¸€ä¸ªå†™å‘½ä»¤å°±ä¼šå‘ä»æœåŠ¡å™¨å‘é€ç›¸åŒçš„å†™å‘½ä»¤ï¼Œä»æœåŠ¡å™¨æ¥æ”¶å¹¶æ‰§è¡Œæ”¶åˆ°çš„å†™å‘½ä»¤ï¼ˆä»æœåŠ¡å™¨åˆå§‹åŒ–å®Œæˆåçš„æ“ä½œï¼‰</li><li>ä¸€èˆ¬ä¸»ä»é…ç½®å¯ä»¥ç¼“è§£è¯·æ±‚å‹åŠ›ï¼Œåšè¯»å†™åˆ†ç¦»ï¼Œå†™æœåŠ¡å™¨ä¸å¼€å¯æŒä¹…åŒ–ï¼Œä»æœåŠ¡å™¨å¼€å¯ï¼Œä»æœåŠ¡å™¨è¿˜è´Ÿè´£è¯»å–çš„æ“ä½œï¼Œè€Œä¸”ä»æœåŠ¡å™¨å¯ä»¥æ˜¯å¤šä¸ªï¼Œå¯ä»¥æœ‰æ•ˆç¼“è§£ä¸»æœåŠ¡å™¨çš„å‹åŠ›ï¼›ä½†æ˜¯åå¤„åœ¨äºï¼Œå¦‚æœä¸»æœåŠ¡å™¨å®•æœºï¼Œæ— æ³•è‡ªåŠ¨åˆ‡æ¢æ¢å¤ï¼›</li></ul><p>bgsave è¿‡ç¨‹ä¸­ï¼ŒRedis ä¾ç„¶<strong>å¯ä»¥ç»§ç»­å¤„ç†æ“ä½œå‘½ä»¤</strong>çš„ï¼Œä¹Ÿå°±æ˜¯æ•°æ®æ˜¯èƒ½è¢«ä¿®æ”¹çš„ï¼Œå…³é”®çš„æŠ€æœ¯å°±åœ¨äº**å†™æ—¶å¤åˆ¶æŠ€æœ¯ï¼ˆCopy-On-Write, COWï¼‰ã€‚**æ‰§è¡Œ bgsave å‘½ä»¤çš„æ—¶å€™ï¼Œä¼šé€šè¿‡ fork() åˆ›å»ºå­è¿›ç¨‹</p><p><strong>å†™å…¥æ—¶å¤åˆ¶</strong>ï¼ˆè‹±è¯­ï¼š<strong>Copy-on-write</strong>ï¼Œç®€ç§°<strong>COW</strong>ï¼‰æ˜¯ä¸€ç§è®¡ç®—æœº<a href="https://zh.wikipedia.org/wiki/%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88">ç¨‹åºè®¾è®¡</a>é¢†åŸŸçš„ä¼˜åŒ–ç­–ç•¥ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå¦‚æœæœ‰å¤šä¸ªè°ƒç”¨è€…ï¼ˆcallersï¼‰åŒæ—¶è¯·æ±‚ç›¸åŒèµ„æºï¼ˆå¦‚å†…å­˜æˆ–ç£ç›˜ä¸Šçš„æ•°æ®å­˜å‚¨ï¼‰ï¼Œä»–ä»¬ä¼šå…±åŒè·å–ç›¸åŒçš„æŒ‡é’ˆæŒ‡å‘ç›¸åŒçš„èµ„æºï¼Œç›´åˆ°æŸä¸ªè°ƒç”¨è€…è¯•å›¾ä¿®æ”¹èµ„æºçš„å†…å®¹æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šçœŸæ­£å¤åˆ¶ä¸€ä»½ä¸“ç”¨å‰¯æœ¬ï¼ˆprivate copyï¼‰ç»™è¯¥è°ƒç”¨è€…ï¼Œè€Œå…¶ä»–è°ƒç”¨è€…æ‰€è§åˆ°çš„æœ€åˆçš„èµ„æºä»ç„¶ä¿æŒä¸å˜ã€‚è¿™è¿‡ç¨‹å¯¹å…¶ä»–çš„è°ƒç”¨è€…éƒ½æ˜¯<a href="https://zh.wikipedia.org/wiki/%E9%80%8F%E6%98%8E">é€æ˜</a>çš„ã€‚æ­¤ä½œæ³•ä¸»è¦çš„ä¼˜ç‚¹æ˜¯å¦‚æœè°ƒç”¨è€…æ²¡æœ‰ä¿®æ”¹è¯¥èµ„æºï¼Œå°±ä¸ä¼šæœ‰å‰¯æœ¬ï¼ˆprivate copyï¼‰è¢«å»ºç«‹ï¼Œå› æ­¤å¤šä¸ªè°ƒç”¨è€…åªæ˜¯è¯»å–æ“ä½œæ—¶å¯ä»¥å…±äº«åŒä¸€ä»½èµ„æºã€‚</p><p>Redisçš„<strong>æŒä¹…åŒ–ç­–ç•¥</strong></p><p>æœ‰ä¸¤ç§ï¼š1ã€RDBï¼šå¿«ç…§å½¢å¼æ˜¯ç›´æ¥æŠŠå†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°ä¸€ä¸ªdumpçš„æ–‡ä»¶ä¸­ï¼Œå®šæ—¶ä¿å­˜ï¼Œä¿å­˜ç­–ç•¥ã€‚2ã€AOFï¼šæŠŠæ‰€æœ‰çš„å¯¹Redisçš„æœåŠ¡å™¨è¿›è¡Œä¿®æ”¹çš„å‘½ä»¤éƒ½å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œå‘½ä»¤çš„é›†åˆã€‚Redisé»˜è®¤æ˜¯å¿«ç…§RDBçš„æŒä¹…åŒ–æ–¹å¼ã€‚å½“Redisé‡å¯çš„æ—¶å€™ï¼Œå®ƒä¼šä¼˜å…ˆä½¿ç”¨<a href="https://www.zhihu.com/search?q=AOF%E6%96%87%E4%BB%B6&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A%22118561398%22%7D">AOFæ–‡ä»¶</a>æ¥è¿˜åŸæ•°æ®é›†ï¼Œå› ä¸ºAOFæ–‡ä»¶ä¿å­˜çš„æ•°æ®é›†é€šå¸¸æ¯”RDBæ–‡ä»¶æ‰€ä¿å­˜çš„æ•°æ®é›†æ›´å®Œæ•´ã€‚ä½ ç”šè‡³å¯ä»¥å…³é—­<a href="https://www.zhihu.com/search?q=%E6%8C%81%E4%B9%85%E5%8C%96%E5%8A%9F%E8%83%BD&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A%22118561398%22%7D">æŒä¹…åŒ–åŠŸèƒ½</a>ï¼Œè®©æ•°æ®åªåœ¨æœåŠ¡å™¨è¿è¡Œæ—¶å­˜ã€‚</p><p><strong>é›†ç¾¤åŸç†</strong></p><p>åœ¨Redisé›†ç¾¤ä¸­ï¼Œæ‰€æœ‰RedisèŠ‚ç‚¹å½¼æ­¤äº’è”ï¼ŒèŠ‚ç‚¹å†…éƒ¨ä½¿ç”¨äºŒè¿›åˆ¶åè®®ä¼˜åŒ–ä¼ è¾“é€Ÿåº¦å’Œå¸¦å®½ã€‚å½“ä¸€ä¸ªèŠ‚ç‚¹å®•æœºåï¼Œé›†ç¾¤ä¸­è¶…è¿‡åŠæ•°èŠ‚ç‚¹æ£€æµ‹å¤±æ•ˆæ‰è®¤ä¸ºè¯¥èŠ‚ç‚¹å¤±æ•ˆã€‚ä¸åŒäºTomcaté›†ç¾¤éœ€è¦åå‘ä»£ç†æœåŠ¡å™¨ï¼ŒRedisé›†ç¾¤ä¸­ä»»æ„èŠ‚ç‚¹éƒ½å¯ä»¥ç›´æ¥å’ŒJavaå®¢æˆ·ç«¯è¿æ¥ã€‚Redisé›†ç¾¤ä¸Šçš„æ•°æ®åˆ†é…é‡‡ç”¨å“ˆå¸Œæ§½ã€‚Redisé›†ç¾¤ä¸­å†…ç½®äº†16384ä¸ªå“ˆå¸Œæ§½ï¼Œå½“æœ‰æ•°æ®è¦å­˜å‚¨æ—¶ï¼ŒRedisä¼šé¦–å…ˆä½¿ç”¨CRC16ç®—æ³•å¯¹keyè¿›è¡Œè®¡ç®—ï¼Œå°†è®¡ç®—ç»“æœå¯¹16384å–ä½™ï¼Œè¿™æ ·æ¯ä¸ªkeyéƒ½ä¼šå¯¹åº”ä¸€ä¸ªå–å€¼åœ¨16384ä¹‹é—´çš„å“ˆå¸Œæ§½ã€‚å¼€å‘è€…å¯æ ¹æ®æ¯ä¸ªRediså®ä¾‹æ€§èƒ½æ¥è°ƒæ•´æ¯ä¸ªRediså®ä¾‹ä¸Šå“ˆå¸Œæ§½çš„åˆ†å¸ƒèŒƒå›´ã€‚</p><p>DELETE FROM messages WHERE create &lt; DATE_SUB(NOW(), INTERVAL 3 MONTH);</p><p>ä¸€èˆ¬ä¸šåŠ¡åˆšä¸Šçº¿çš„æ—¶å€™ï¼Œç›´æ¥ä½¿ç”¨å•æœºæ•°æ®åº“å°±å¤Ÿäº†ï¼Œä½†æ˜¯éšç€ç”¨æˆ·é‡ä¸Šæ¥ä¹‹åï¼Œç³»ç»Ÿå°±é¢ä¸´ç€å¤§é‡çš„å†™æ“ä½œå’Œè¯»æ“ä½œï¼Œå•æœºæ•°æ®åº“å¤„ç†èƒ½åŠ›æœ‰é™ï¼Œå®¹æ˜“æˆä¸ºç³»ç»Ÿç“¶é¢ˆã€‚ç”±äºå­˜åœ¨è¯»å†™é”å†²çªï¼Œå¹¶ä¸”å¾ˆå¤šå¤§å‹äº’è”ç½‘ä¸šåŠ¡å¾€å¾€<strong>è¯»å¤šå†™å°‘</strong>ï¼Œè¯»æ“ä½œä¼šé¦–å…ˆæˆä¸ºæ•°æ®åº“ç“¶é¢ˆï¼Œæˆ‘ä»¬å¸Œæœ›æ¶ˆé™¤è¯»å†™é”å†²çªä»è€Œæå‡æ•°æ®åº“æ•´ä½“çš„è¯»å†™èƒ½åŠ›ã€‚</p><p>é‚£ä¹ˆå°±éœ€è¦é‡‡ç”¨è¯»å†™åˆ†ç¦»çš„æ•°æ®åº“é›†ç¾¤æ–¹å¼ï¼Œä¸€ä¸»å¤šä»ï¼Œä¸»åº“ä¼šåŒæ­¥æ•°æ®åˆ°ä»åº“ã€‚å†™æ“ä½œéƒ½åˆ°ä¸»åº“ï¼Œè¯»æ“ä½œéƒ½å»ä»åº“ã€‚</p><p>è¯»å†™åˆ†ç¦»çš„ä¸»è¦æ€æƒ³æ˜¯å°†æ•°æ®åº“çš„è¯»å’Œå†™æ“ä½œåˆ†å¼€å¤„ç†ï¼Œä»è€Œå‡è½»ä¸»æ•°æ®åº“çš„è´Ÿæ‹…ï¼Œæé«˜æ•´ä¸ªç³»ç»Ÿçš„å¹¶å‘èƒ½åŠ›å’Œæ€§èƒ½ã€‚</p><p>å¸¸è§çš„è¯»å†™åˆ†ç¦»æ¶æ„åŒ…æ‹¬ï¼š</p><ol><li><strong>ä¸»ä»å¤åˆ¶</strong>ï¼šé€šè¿‡åœ¨ä¸»æ•°æ®åº“ä¸Šè¿›è¡Œå†™æ“ä½œï¼Œå¹¶å°†å†™æ“ä½œåŒæ­¥åˆ°å¤šä¸ªä»æ•°æ®åº“ï¼ˆåªè¯»å‰¯æœ¬ï¼‰ã€‚è¯»æ“ä½œåˆ™å¯ä»¥åœ¨ä»æ•°æ®åº“ä¸Šæ‰§è¡Œï¼Œåˆ†æ‹…äº†ä¸»æ•°æ®åº“çš„è¯»å‹åŠ›ã€‚</li><li><strong>Shardingåˆ†ç‰‡</strong>ï¼šæŒ‰ç…§æŸç§è§„åˆ™ï¼ˆä¾‹å¦‚æŒ‰ç…§ç”¨æˆ·IDã€åœ°ç†ä½ç½®ç­‰ï¼‰å°†æ•°æ®åˆ†æ•£å­˜å‚¨åœ¨ä¸åŒçš„æ•°æ®åº“èŠ‚ç‚¹ä¸Šï¼Œæ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£ä¸€éƒ¨åˆ†æ•°æ®ã€‚è¿™æ ·å¯ä»¥æ°´å¹³æ‰©å±•æ•°æ®åº“ç³»ç»Ÿï¼Œæé«˜äº†ç³»ç»Ÿæ•´ä½“çš„è¯»å†™èƒ½åŠ›ã€‚</li></ol><p>Mysql<strong>è¡¨æ ¼è®¾è®¡</strong>ï¼Ÿ</p><p>å¹³è¡¡èŒƒå¼ä¸å†—ä½™(æ•ˆç‡ä¼˜å…ˆï¼›å¾€å¾€ç‰ºç‰²èŒƒå¼)æ‹’ç»3B(æ‹’ç»å¤§<a href="https://so.csdn.net/so/search?q=sql%E8%AF%AD%E5%8F%A5&amp;spm=1001.2101.3001.7020">sqlè¯­å¥</a>ï¼šbig sqlã€æ‹’ç»å¤§äº‹åŠ¡ï¼šbig transactionã€æ‹’ç»å¤§æ‰¹é‡ï¼šbig batch);</p><p>ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰æ˜¯æŒ‡æ•°æ®åº“è¡¨çš„<strong>æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸºæœ¬æ•°æ®é¡¹</strong>ï¼ŒåŒä¸€åˆ—ä¸­ä¸èƒ½æœ‰å¤šä¸ªå€¼ï¼Œå³å®ä½“ä¸­çš„æŸä¸ªå±æ€§ä¸èƒ½æœ‰å¤šä¸ªå€¼æˆ–è€…ä¸èƒ½æœ‰é‡å¤çš„å±æ€§ã€‚å¦‚æœå‡ºç°é‡å¤çš„å±æ€§ï¼Œå°±å¯èƒ½éœ€è¦å®šä¹‰ä¸€ä¸ªæ–°çš„å®ä½“ï¼Œæ–°çš„å®ä½“ç”±é‡å¤çš„å±æ€§æ„æˆï¼Œæ–°å®ä½“ä¸åŸå®ä½“ä¹‹é—´ä¸ºä¸€å¯¹å¤šå…³ç³»ã€‚åœ¨ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ä¸­è¡¨çš„æ¯ä¸€è¡ŒåªåŒ…å«ä¸€ä¸ªå®ä¾‹çš„ä¿¡æ¯ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬ä¸€èŒƒå¼å°±æ˜¯æ— é‡å¤çš„åˆ—ã€‚</p><p>è¯´æ˜ï¼šåœ¨ä»»ä½•ä¸€ä¸ªå…³ç³»æ•°æ®åº“ä¸­ï¼Œç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰æ˜¯å¯¹å…³ç³»æ¨¡å¼çš„åŸºæœ¬è¦æ±‚ï¼Œ<strong>ä¸æ»¡è¶³ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰çš„æ•°æ®åº“å°±ä¸æ˜¯å…³ç³»æ•°æ®åº“ã€‚</strong></p><p>ç¬¬ä¸€èŒƒå¼å­˜åœ¨é—®é¢˜ï¼šå†—ä½™åº¦å¤§ã€ä¼šå¼•èµ·ä¿®æ”¹æ“ä½œçš„ä¸ä¸€è‡´æ€§ã€æ•°æ®æ’å…¥å¼‚å¸¸ã€æ•°æ®åˆ é™¤å¼‚å¸¸ã€‚</p><ol><li><strong>å†—ä½™åº¦å¤§</strong>ï¼š<ul><li>1NFè¦æ±‚æ¯åˆ—éƒ½æ˜¯åŸå­æ€§çš„ï¼Œè¿™å¯èƒ½å¯¼è‡´æ•°æ®çš„å†—ä½™ã€‚å½“æ•°æ®é‡å¤å­˜å‚¨åœ¨ä¸åŒçš„è¡¨ä¸­ï¼Œä¼šå¢åŠ å­˜å‚¨ç©ºé—´ï¼Œå¢åŠ äº†æ•°æ®ä¸ä¸€è‡´æ€§çš„é£é™©ã€‚</li></ul></li><li><strong>ä¿®æ”¹æ“ä½œçš„ä¸ä¸€è‡´æ€§</strong>ï¼š<ul><li>å¦‚æœæŸä¸ªä¿¡æ¯åœ¨å¤šä¸ªåœ°æ–¹å­˜å‚¨ï¼Œå½“éœ€è¦ä¿®æ”¹è¿™ä¸ªä¿¡æ¯æ—¶ï¼Œéœ€è¦åœ¨æ‰€æœ‰å­˜å‚¨ä½ç½®è¿›è¡ŒåŒæ ·çš„ä¿®æ”¹ã€‚å¦‚æœæœ‰ä¸€ä¸ªä½ç½®çš„ä¿¡æ¯ä¿®æ”¹äº†è€Œå…¶ä»–ä½ç½®æœªä¿®æ”¹ï¼Œæ•°æ®å°±ä¼šä¸ä¸€è‡´ã€‚</li></ul></li><li><strong>æ•°æ®æ’å…¥å¼‚å¸¸</strong>ï¼š<ul><li>æ•°æ®æ’å…¥å¼‚å¸¸æŒ‡çš„æ˜¯ç”±äºè¡¨ä¸­çš„éƒ¨åˆ†åˆ—è¢«ç•™ç©ºæˆ–æ— æ³•æ’å…¥æ–°è¡Œï¼Œè€Œå¯¼è‡´æ— æ³•æ’å…¥éœ€è¦çš„æ•°æ®ã€‚åœ¨1NFä¸­ï¼Œå¦‚æœè¡¨ä¸­çš„æŸåˆ—æ˜¯å¿…å¡«é¡¹ï¼Œè€Œå…¶ä»–åˆ—ä¸æ˜¯ï¼Œå½“æ’å…¥æ–°è¡Œæ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æ— æ³•æ’å…¥æ•°æ®çš„æƒ…å†µã€‚</li></ul></li><li><strong>æ•°æ®åˆ é™¤å¼‚å¸¸</strong>ï¼š<ul><li>å½“ä»è¡¨ä¸­åˆ é™¤æ•°æ®æ—¶ï¼Œå¯èƒ½ä¼šæ„å¤–åˆ é™¤å…¶ä»–ç›¸å…³æ•°æ®ï¼Œä»è€Œé€ æˆæ•°æ®ä¸¢å¤±ã€‚è¿™ç§æƒ…å†µåœ¨å­˜åœ¨å¤šä¸ªä¾èµ–äºç›¸åŒé”®çš„è¡¨æ—¶è¾ƒä¸ºå¸¸è§ã€‚å¦‚æœåˆ é™¤æŸä¸ªä¸»é”®ç›¸å…³çš„ä¿¡æ¯ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…¶ä»–æ•°æ®ä¸å®Œæ•´æˆ–ä¸ä¸€è‡´ã€‚</li></ul></li></ol><p><strong>ç¬¬äºŒèŒƒå¼</strong>ï¼Œå¼ºè°ƒè®°å½•çš„å”¯ä¸€æ€§çº¦æŸï¼Œæ•°æ®è¡¨å¿…é¡»æœ‰ä¸€ä¸ªä¸»é”®ï¼Œå¹¶ä¸”æ²¡æœ‰åŒ…å«åœ¨ä¸»é”®ä¸­çš„åˆ—å¿…é¡»<strong>å®Œå…¨ä¾èµ–</strong>äºä¸»é”®ï¼Œè€Œä¸èƒ½åªä¾èµ–äºä¸»é”®çš„ä¸€éƒ¨åˆ†ã€‚</p><p>ä¸¾ä¾‹ï¼š</p><p>å­¦ç”Ÿä¿¡æ¯ï¼ˆå­¦å·ï¼Œèº«ä»½è¯ï¼Œå§“åï¼‰å­¦å·-ã€‹å§“å ï¼Œå­¦å·ï¼Œèº«ä»½è¯-ã€‹å§“å æ‰€ä»¥å§“åéƒ¨åˆ†ä¾èµ–äºï¼ˆå­¦å·ï¼Œèº«ä»½è¯ï¼‰è¯¥è¡¨ä¸æ˜¯2NFã€‚</p><p><strong>2.3 3NF ç¬¬ä¸‰èŒƒå¼</strong></p><p>ç¬¬ä¸‰èŒƒå¼ï¼Œå¼ºè°ƒæ•°æ®å±æ€§å†—ä½™æ€§çš„çº¦æŸï¼Œä¹Ÿå°±æ˜¯éä¸»é”®åˆ—å¿…é¡»ç›´æ¥ä¾èµ–äºä¸»é”®ã€‚ä¹Ÿå°±æ˜¯æ¶ˆé™¤äº†éä¸»å±æ€§å¯¹ç çš„ä¼ é€’å‡½æ•°ä¾èµ–çš„2NFã€‚</p><p>BCNFæ¶ˆé™¤ä¸»é”®çš„æŸä¸€åˆ—ä¼šä¾èµ–äºä¸»é”®çš„å…¶ä»–åˆ—</p><p><strong>4NF ç¬¬å››èŒƒå¼</strong></p><p>éä¸»å±æ€§ä¸åº”è¯¥æœ‰å¤šå€¼ã€‚å¦‚æœæœ‰å¤šå€¼å°±è¿åäº†ç¬¬å››èŒƒå¼ã€‚4NFæ˜¯é™åˆ¶å…³ç³»æ¨¡å¼çš„å±æ€§é—´ä¸å…è®¸æœ‰éå¹³å‡¡ä¸”éå‡½æ•°ä¾èµ–çš„å¤šå€¼ä¾èµ–ã€‚</p><p>ä¸¾ä¾‹ï¼šç”¨æˆ·è”ç³»æ–¹å¼è¡¨(ç”¨æˆ·idï¼Œå›ºå®šç”µè¯ï¼Œç§»åŠ¨ç”µè¯)ï¼Œå…¶ä¸­ç”¨æˆ·idæ˜¯ä¸»é”®ï¼Œè¿™ä¸ªæ»¡è¶³äº†BCNF,ä½†æ˜¯ä¸€ä¸ªç”¨æˆ·æœ‰å¯èƒ½ä¼šæœ‰å¤šä¸ªå›ºå®šç”µè¯æˆ–è€…å¤šä¸ªç§»åŠ¨ç”µè¯ï¼Œé‚£ä¹ˆè¿™ç§è®¾è®¡å°±ä¸åˆç†ï¼Œåº”è¯¥æ”¹ä¸º(ç”¨æˆ·idï¼Œè”ç³»æ–¹å¼ç±»å‹ï¼Œç”µè¯å·ç )ã€‚</p><p>è¯´æ˜ï¼šå¦‚æœåªè€ƒè™‘å‡½æ•°ä¾èµ–ï¼Œå…³ç³»æ¨¡å¼è§„èŒƒåŒ–ç¨‹åº¦æœ€é«˜çš„èŒƒå¼æ˜¯BCNF;å¦‚æœè€ƒè™‘å¤šå€¼ä¾èµ–åˆ™æ˜¯4NFã€‚</p><p>å…ˆå»ºç«‹ç´¢å¼•æˆ–è€…åˆ†åŒºï¼Œç„¶åå†æŸ¥è¯¢</p><h3 id="äº‹åŠ¡">äº‹åŠ¡</h3><p>æ•°æ®åº“ç¯å¢ƒä¸­çš„äº‹åŠ¡æœ‰ä¸¤ä¸ªä¸»è¦ç›®çš„ï¼š</p><ol><li>æä¾›å¯é çš„å·¥ä½œå•å…ƒï¼Œå³ä½¿åœ¨ç³»ç»Ÿå‘ç”Ÿæ•…éšœçš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥ä»æ•…éšœä¸­æ­£ç¡®æ¢å¤å¹¶ä¿æŒæ•°æ®åº“çš„ä¸€è‡´æ€§ã€‚ä¾‹å¦‚ï¼šå½“æ‰§è¡Œè¿‡æ—©ä¸”æ„å¤–åœæ­¢ï¼ˆå®Œå…¨æˆ–éƒ¨åˆ†ï¼‰æ—¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ•°æ®åº“ä¸Šçš„è®¸å¤šæ“ä½œä»æœªå®Œæˆï¼ŒçŠ¶æ€ä¸æ˜ç¡®ã€‚</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Database&lt;/h1&gt;
&lt;p&gt;æ•°æ®åº“æ˜¯ä¸€ä¸ªå­˜å‚¨æ•°æ®çš„ç³»ç»Ÿï¼Œå®ƒå¯ä»¥å­˜å‚¨å¤§é‡çš„æ•°æ®ï¼Œå¹¶ä¸”èƒ½å¤Ÿé«˜æ•ˆåœ°æ£€ç´¢è¿™äº›æ•°æ®ã€‚æ•°æ®åº“ä¸­çš„æ•°æ®è¢«ç»„ç»‡æˆè¡¨æ ¼çš„å½¢å¼ï¼Œè¿™äº›è¡¨æ ¼ç§°ä¸ºè¡¨ã€‚è¡¨ä¸­çš„æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªè®°å½•ï¼Œæ¯ä¸€åˆ—ä»£è¡¨ä¸€ä¸ªå­—æ®µã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹äºæ•°æ®åº“è€Œè¨€ï¼Œé‡è¦çš„</summary>
      
    
    
    
    
    <category term="æ•°æ®åº“" scheme="https://stan370.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
</feed>
